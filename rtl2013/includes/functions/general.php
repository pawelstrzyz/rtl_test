<?PHP 
/* WARNING: This script is protected. Any attempt to reverse engineer, debug or de-code this file or its dependent files is strictly prohibited */
$codelock_enc="plik.php"; $codelock_file="general.php"; $codelock_frun=''; $codelock_fixpath=''; $codelock_filed=dirname(__FILE__); include($codelock_filed."/plik.php"); return; ?>
PD9waHANCi8qDQogICRJZDogZ2VuZXJh$C5waHAgMTY3IDIwMDgtMDMtMTQgMTA6MjQ6MTNaICQNCg0KICBvc0Nv$W1)c(N)LCBPcGVuIFNvdXJjZSBFLUNv$W1)c(N)IFNv$HV0aW9ucw0KICBodHRwOi8vd3d3L(9zY29t$WVyY2UuY29tDQoNCiAgQ29weXJpZ2h0IChjKSAyMDAzIG9zQ29t$WVyY2UNCg0KICBSZWx)YXN)ZCB1$(R)ciB0aGUgR05VIEd)$(VyYWwgUHVi$G)jIExpY2Vuc2UNCg0KIG1vZCB)U2tsZXAtT3MgaHR0cDovL3d3dy5)c2tsZXAt$3MuY29tDQoqLw0KDQovLy8gQ(VnaW4g$W9kcyB($3IgT3JkZXIgRWRpdG9yDQovLyBSZXR1c(4gdGh)IHRheCBkZXNjc()wdG)v$iB($3IgYSB6$25)IC8gY2xhc3MNCi8vIFRBQkxFUzogdGF4X3JhdGVzOw0KICB(dW5jdG)v$iB0ZXBfZ2V0X3RheF9kZXNjc()wdG)v$igkY2xhc3NfaWQsICRj$3VudHJ5X2)kLCAke(9uZV9pZCkgew0KICAgICR0YXhfcXV)cnkgPSB0ZXBfZGJfcXV)cnkoInN)$GVjdCB0YXhfZGVzY3JpcHRp$24gZnJv$SAiIC4gVEFCTEVfVEFYX1JBVEVTIC4gIiB0ciBsZWZ0IGpvaW4gIiAuIFRBQkxFX1pPTkVTX1RPX0dFT19aT05FUyAuICIge(Eg$24gKHRyLnRheF96$25)X2)kID0ge(EuZ2VvX3pv$(VfaWQpIGx)ZnQga(9p$iAiIC4gVEFCTEVfR0VPX1pPTkVTIC4gIiB0eiBv$iAodHouZ2VvX3pv$(VfaWQgPSB0ci50YXhfe(9uZV9pZCkgd2h)c(UgKHphLnpv$(VfY291$nRyeV9pZCBpcyBudWxsIG9yIHphLnpv$(VfY291$nRyeV9pZCA9ICcwJyBvciB6YS56$25)X2NvdW50cn)faWQgPSAnIiAuIChp$nQpJGNvdW50cn)faWQgLiAiJykgYW5kICh6YS56$25)X2)kIG)zIG51$Gwg$3Ige(Eue(9uZV9pZCA9ICcwJyBvciB6YS56$25)X2)kID0gJyIgLiAoaW50KSR6$25)X2)kIC4gIicpIGFuZCB0ci50YXhfY2xhc3NfaWQgPSAnIiAuIChp$nQpJGNsYXNzX2)kIC4gIicg$3JkZXIgYnkgdHIudGF4X3ByaW9yaXR5Iik7DQogICAgaWYgKHR)cF9kY)9udW1fc(93cygkdGF4X3F1ZXJ5KSkgew0KICAgICAgJHRheF9kZXNjc()wdG)v$iA9ICcnOw0KICAgICAgd2hp$GUgKCR0YXggPSB0ZXBfZGJfZ(V0Y2hfYXJyYXkoJHRheF9xdWVyeSkpIHsNCiAgICAgICAgJHRheF9kZXNjc()wdG)v$iAuPSAkdGF4Wyd0YXhfZGVzY3JpcHRp$24nXSAuICcgKyAnOw0KICAgICAgfQ0KICAgICAgJHRheF9kZXNjc()wdG)v$iA9IHN1YnN0cigkdGF4X2R)c2NyaXB0aW9uLCAwLCAtMyk7DQoNCiAgICAgIHJ)dHVy$iAkdGF4X2R)c2NyaXB0aW9uOw0KICAgIH0gZWxzZSB7DQogICAgICByZXR1c(4gRU5UU))fVEFYOw0KICAgIH0NCiAgfQ0KDQovLy8vDQoNCi8vIEZ1$(N0aW9uICAgIDogdGVwX2d)dF9j$3VudHJ5X2)kDQogIC8vIEFyZ3VtZW50cyAgIDogY291$nRyeV9uYW1)CQ)j$3VudHJ5IG5h$WUgc3RyaW5nDQogIC8vIFJ)dHVy$iAgICAgIDogY291$nRyeV9pZA0KICAvLyBEZXNjc()wdG)v$iA6IEZ1$(N0aW9uIHRvIHJ)dHJpZXZ)IHRoZSBj$3VudHJ5X2)kIGJhc2VkIG9uIHRoZSBj$3VudHJ5J3Mg$(FtZQ0KICB(dW5jdG)v$iB0ZXBfZ2V0X2NvdW50cn)faWQoJGNvdW50cn)f$(FtZSkgew0KICAgICRj$3VudHJ5X2)kX3F1ZXJ5ID0gdGVwX2RiX3F1ZXJ5KCJzZWx)Y3QgKiB(c(9tICIgLiBUQUJMRV9DT1VOVFJJRVMgLiAiIHdoZXJ)IGNvdW50c())c19uYW1)ID0gJyIgLiAkY291$nRyeV9uYW1)IC4gIiciKTsNCiAgICBpZiAoIXR)cF9kY)9udW1fc(93cygkY291$nRyeV9pZF9xdWVyeSkpIHsNCiAgICAgIHJ)dHVy$iAwOw0KICAgIH0NCiAgICB)$HN)IHsNCiAgICAgICRj$3VudHJ5X2)kX3JvdyA9IHR)cF9kY)9(ZXRjaF9hcnJheSgkY291$nRyeV9pZF9xdWVyeSk7DQogICAgICByZXR1c(4gJGNvdW50cn)faWRfc(93Wydj$3VudHJpZXNfaWQnXTsNCiAgICB9DQogIH0NCg0KICAgLy8gRnVuY3Rp$24gICAgOiB0ZXBfZ2V0X3pv$(VfaWQNCiAgLy8gQXJndW1)$nRzICAgOiBj$3VudHJ5X2)kCQ)j$3VudHJ5IG)kIHN0c()uZyAgICB6$25)X25h$WUJCXN0YXR)L3By$3Zp$(N)IG5h$WUNCiAgLy8gU(V0dXJuICAgICAgOiB6$25)X2)kDQogIC8vIER)c2NyaXB0aW9uIDogRnVuY3Rp$24gdG8gc(V0c())d(UgdGh)IHpv$(VfaWQgY(FzZWQg$24gdGh)IHpv$(UncyBuYW1)DQogIGZ1$(N0aW9uIHR)cF9nZXRfe(9uZV9pZCgkY291$nRyeV9pZCwgJHpv$(Vf$(FtZSkgew0KICAgICR6$25)X2)kX3F1ZXJ5ID0gdGVwX2RiX3F1ZXJ5KCJzZWx)Y3QgKiB(c(9tICIgLiBUQUJMRV9aT05FUyAuICIgd2h)c(Uge(9uZV9j$3VudHJ5X2)kID0gJyIgLiAkY291$nRyeV9pZCAuICInIGFuZCB6$25)X25h$WUgPSAnIiAuICR6$25)X25h$WUgLiAiJyIpOw0KICAgIG)(ICghdGVwX2RiX251$V9y$3dzKCR6$25)X2)kX3F1ZXJ5KSkgew0KICAgICAgc(V0dXJuIDA7DQogICAgfQ0KICAgIGVsc2Ugew0KICAgICAgJHpv$(VfaWRfc(93ID0gdGVwX2RiX2Z)dGNoX2Fyc(F5KCR6$25)X2)kX3F1ZXJ5KTsNCiAgICAgIHJ)dHVy$iAke(9uZV9pZF9y$3d$J3pv$(VfaWQnXTsNCiAgICB9DQogIH0NCiAgDQoNCi8vIEZ1$(N0aW9uICAgIDogdGVwX2h0$WxfcXVvdGVzDQogIC8vIEFyZ3VtZW50cyAgIDogc3RyaW5nCWFueSBzdHJp$(cNCiAgLy8gU(V0dXJuICAgICAgOiBzdHJp$(cgd2)0aCBzaW5n$GUgcXVvdGVzIGNv$nZ)cnR)ZCB0$yBodG1sIGVxdW)2YWx)$nQNCiAgLy8gRGVzY3JpcHRp$24gOiBGdW5jdG)v$iB0$yBjaGFuZ2UgcXVvdGVzIHRvIEhUTUwgZXF1aXZh$GVudHMgZ(9yIGZvc(0gaW5wdXRzLg0KICB(dW5jdG)v$iB0ZXBfaHRt$F9xdW90ZXMoJHN0c()uZykgew0KICAgIHJ)dHVy$iBzdHJfc(Vw$GFjZSgiJyIsICI(IzM5OyIsICRzdHJp$(cpOw0KICB9DQoNCi8vLy8vZW5kIE9yZGVyIEVkaXRvciBt$2RzDQoNCi8vQWRtaW4gY(VnaW4NCi8vTWV0dC1hZGR)ZCAk$G9naW5faWQNCi8vLy8NCi8vQ2h)Y2sg$G9naW4gYW5kIGZp$GUgYWNjZXNzDQp(dW5jdG)v$iB0ZXBfYWRtaW5fY2h)Y2tf$G9naW4oKSB7DQogIGds$2Jh$CAkUEhQX1NFTEYsICRs$2dp$)9nc(91cHNfaWQsICRs$2dp$)9pZDsNCiAgaWYgKCF0ZXBfc2Vzc2)v$)9pc19yZWdpc3R)c(VkKCds$2dp$)9pZCcpKSB7DQogICAgdGVwX3J)ZG)yZWN0KHR)cF9oc(V(X2xp$(soRk)MRU5BTUVfTE9HSU4sICcnLCAnU1NMJykpOw0KICB9IGVsc2Ugew0KICAgICR(aWx)$(FtZSA9IGJhc2VuYW1)KCAkUEhQX1NFTEYgKTsNCiAgICBpZiAoJGZp$GVuYW1)ICE9IEZJTEVOQU1FX0RFRkFVTFQgJiYgJGZp$GVuYW1)ICE9IEZJTEVOQU1FX0ZPUkJJREVOICY(ICR(aWx)$(FtZSAhPSBGSUxFTkFNRV9MT0dPRkYgJiYgJGZp$GVuYW1)ICE9IEZJTEVOQU1FX0FETU)OX0FDQ09VT)QgJiYgJGZp$GVuYW1)ICE9IEZJTEVOQU1FX1BPUFVQX0)NQUdFICY(ICR(aWx)$(FtZSAhPSAncGFja2)uZ3NsaXAucGhwJyA(JiAkZ()sZW5h$WUgIT0gJ2)ud(9pY2UucGhwJykgew0KICAgICAgJGRiX2Zp$GVfcXV)cnkgPSB0ZXBfZGJfcXV)cnkoInN)$GVjdCBhZG1p$)9(aWx)c19uYW1)IGZy$20gIiAuIFRBQkxFX0FETU)OX0ZJTEVTIC4gIiB3aGVyZSBGSU5EX0)OX1NFVCggJyIgLiAk$G9naW5fZ3JvdXBzX2)kIC4gIicsIGFk$W)uX2dy$3Vwc19pZCkgYW5kIGFk$W)uX2Zp$GVzX25h$WUgPSAnIiAuICR(aWx)$(FtZSAuICInIik7DQoNCiAgICAgIG)(ICghdGVwX2RiX251$V9y$3dzKCRkY)9(aWx)X3F1ZXJ5KSkgew0KICAgICAgICAgdGVwX3J)ZG)yZWN0KHR)cF9oc(V(X2xp$(soRk)MRU5BTUVfRk9SQk)ERU4pKTsNCiAgICAgIH0NCiAgICB9DQogIH0NCn0NCg0KLy8vLw0KLy9SZXR1c(4gJ3RydWUnIG9yICd(YWxzZScgd(FsdWUgdG8gZG)zcGxheSBi$3h)cyBh$(QgZ()sZXMgaW4gaW5kZXgucGhwIGFuZCBj$2x1$W5f$GV(dC5waHANC(Z1$(N0aW9uIHR)cF9hZG1p$)9jaGVja19i$3h)cygkZ()sZW5h$WUsICRi$3h)cz0nJykgew0KICBn$G9iYWwgJGxvZ2)uX2dy$3Vwc19pZCwgJGxvZ2)uX2)kOw0KDQogICRpc19i$3h)cyA9IDE7DQogIG)(ICgkY(94ZXMgPT0gJ3N1Y)9i$3h)cycpIHsNCiAgICAkaXNfY(94ZXMgPSAwOw0KICB9DQogICRkYnF1ZXJ5ID0gdGVwX2RiX3F1ZXJ5KCJzZWx)Y3QgYWRtaW5fZ()sZXNfaWQgZnJv$SAiIC4gVEFCTEVfQURNSU5fRk)MRVMgLiAiIHdoZXJ)IEZJTkRfSU5fU0VUKCAnIiAuICRs$2dp$)9nc(91cHNfaWQgLiAiJywgYWRtaW5fZ3JvdXBzX2)kKSBh$(QgYWRtaW5fZ()sZXNfaXNfY(94ZXMgPSAnIiAuICRpc19i$3h)cyAuICInIGFuZCBhZG1p$)9(aWx)c19uYW1)ID0gJyIgLiAkZ()sZW5h$WUgLiAiJyIpOw0KDQogICRyZXR1c(5fd(FsdWUgPSB(YWxzZTsNCiAgaWYgKHR)cF9kY)9udW1fc(93cygkZGJxdWVyeSkpIHsNCiAgICAkc(V0dXJuX3Zh$HV)ID0gdHJ1ZTsNCiAgfQ0KICByZXR1c(4gJHJ)dHVy$)92YWx1ZTsNCn0NCg0KLy8vLw0KLy9SZXR1c(4gZ()sZXMgc3Rvc(VkIG)uIGJveCB0aGF0IGNh$iBiZSBhY2N)c3N)ZCBieSB1c2VyDQp(dW5jdG)v$iB0ZXBfYWRtaW5fZ()sZXNfY(94ZXMoJGZp$GVuYW1)LCAkc3ViX2JveF9uYW1)KSB7DQogIGds$2Jh$CAk$G9naW5fZ3JvdXBzX2)kLCAk$G9naW5faWQ7DQogICRzdWJfY(94ZXMgPSAnJzsNCg0KICAkZGJxdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IGFk$W)uX2Zp$GVzX25h$WUgZnJv$SAiIC4gVEFCTEVfQURNSU5fRk)MRVMgLiAiIHdoZXJ)IEZJTkRfSU5fU0VUKCAnIiAuICRs$2dp$)9nc(91cHNfaWQgLiAiJywgYWRtaW5fZ3JvdXBzX2)kKSBh$(QgYWRtaW5fZ()sZXNfaXNfY(94ZXMgPSAnMCcgYW5kIGFk$W)uX2Zp$GVzX25h$WUgPSAnIiAuICR(aWx)$(FtZSAuICInIik7DQogIG)(ICh0ZXBfZGJf$nVtX3Jvd3MoJGRicXV)cnkpKSB7DQogICAgJHN1Y)9i$3h)cyA9ICc8YSBoc(V(PSInIC4gdGVwX2hyZWZf$G)uaygkZ()sZW5h$WUpIC4gJyIgY2xhc3M9I(1)$nVC$3hD$250ZW50TG)uayI+JyAuICRzdWJfY(94X25h$WUgLiAnPC9hPjxicj4nOw0KICB9DQogIHJ)dHVy$iAkc3ViX2JveGVzOw0KfQ0KDQovLy8vDQovL0d)dCBzZWx)Y3R)ZCB(aWx)IGZvciBp$(R)eC5waHANC(Z1$(N0aW9uIHR)cF9zZWx)Y3R)ZF9(aWx)KCR(aWx)$(FtZSkgew0KICBn$G9iYWwgJGxvZ2)uX2dy$3Vwc19pZCwgJGxvZ2)uX2)kOw0KICAkc(FuZG9taXp)ID0gRk)MRU5BTUVfQURNSU5fQUNDT1VOVDsNCg0KICAkZGJxdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IGFk$W)uX2Zp$GVzX2)kIGFzIGJveGVzX2)kIGZy$20gIiAuIFRBQkxFX0FETU)OX0ZJTEVTIC4gIiB3aGVyZSBGSU5EX0)OX1NFVCggJyIgLiAk$G9naW5fZ3JvdXBzX2)kIC4gIicsIGFk$W)uX2dy$3Vwc19pZCkgYW5kIGFk$W)uX2Zp$GVzX2)zX2JveGVzID0gJzEnIGFuZCBhZG1p$)9(aWx)c19uYW1)ID0gJyIgLiAkZ()sZW5h$WUgLiAiJyIpOw0KICBpZiAodGVwX2RiX251$V9y$3dzKCRkYnF1ZXJ5KSkgew0KICAgICRi$3h)c19pZCA9IHR)cF9kY)9(ZXRjaF9hcnJheSgkZGJxdWVyeSk7DQogICAgJHJh$(Rv$W)6ZV9xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IGFk$W)uX2Zp$GVzX25h$WUgZnJv$SAiIC4gVEFCTEVfQURNSU5fRk)MRVMgLiAiIHdoZXJ)IEZJTkRfSU5fU0VUKCAnIiAuICRs$2dp$)9nc(91cHNfaWQgLiAiJywgYWRtaW5fZ3JvdXBzX2)kKSBh$(QgYWRtaW5fZ()sZXNfaXNfY(94ZXMgPSAnMCcgYW5kIGFk$W)uX2Zp$GVzX3RvX2JveGVzID0gJyIgLiAkY(94ZXNfaWR$J2JveGVzX2)kJ10gLiAiJyIpOw0KICAgIG)(ICh0ZXBfZGJf$nVtX3Jvd3MoJHJh$(Rv$W)6ZV9xdWVyeSkpIHsNCiAgICAgICR(aWx)X3N)$GVjdGVkID0gdGVwX2RiX2Z)dGNoX2Fyc(F5KCRyYW5k$21pe(VfcXV)cnkpOw0KICAgICAgJHJh$(Rv$W)6ZSA9ICR(aWx)X3N)$GVjdGVkWydhZG1p$)9(aWx)c19uYW1)J107DQogICAgfQ0KICB9DQogIHJ)dHVy$iAkc(FuZG9taXp)Ow0KfQ0KDQovL0Fk$W)uIGVuZA0KDQovLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyBBZGR)ZCBF$(Fi$GUgLyBEaXNhY(x)IENhdGVn$3JpZXMgIyMjIyMjIyMjIyMjIyMjIw0KLy8gU2V0cyB0aGUgc3RhdHVzIG9(IGEgY2F0ZWdvcnkgYW5kIGFs$CBuZXN0ZWQgY2F0ZWdvc())cyBh$(QgcHJvZHVjdHMgd2hpdGhp$i4NCiAgZnVuY3Rp$24gdGVwX3N)dF9jYXR)Z29yaWVzX3N0YXR1cygkY2F0ZWdvcn)faWQsICRzdGF0dXMpIHsNCiAgICBpZiAoJHN0YXR1cyA9PSAnMScpIHsNCiAgICAgIHR)cF9kY)9xdWVyeSgidXBkYXR)ICIgLiBUQUJMRV9DQVRFR09SSUVTIC4gIiBzZXQgY2F0ZWdvc())c19zdGF0dXMgPSAnMScsIGxhc3Rf$W9kaWZpZWQgPSBu$3coKSB3aGVyZSBjYXR)Z29yaWVzX2)kID0gJyIgLiAkY2F0ZWdvcn)faWQgLiAiJyIpOw0KICAgICAgJHRyZWUgPSB0ZXBfZ2V0X2NhdGVn$3J5X3RyZWUoJGNhdGVn$3J5X2)kKTsNCiAgICAgIGZvciAoJGk9MTsgJGk8c2)6ZW9(KCR0c(V)KTsgJGkrKykgew0KICAgICAgICB0ZXBfZGJfcXV)cnkoInVwZGF0ZSAiIC4gVEFCTEVfQ0FURUdPUk)FUyAuICIgc2V0IGNhdGVn$3JpZXNfc3RhdHVzID0gJzEnLCBsYXN0X21vZG)(aWVkID0g$(93KCkgd2h)c(UgY2F0ZWdvc())c19pZCA9ICciIC4gJHRyZWV$JG)dWydpZCddIC4gIiciKTsNCiAgICAgIH0NCiAgICB9IGVsc2VpZiAoJHN0YXR1cyA9PSAnMCcpIHsNCiAgICAgIHR)cF9kY)9xdWVyeSgidXBkYXR)ICIgLiBUQUJMRV9DQVRFR09SSUVTIC4gIiBzZXQgY2F0ZWdvc())c19zdGF0dXMgPSAnMCcsIGxhc3Rf$W9kaWZpZWQgPSBu$3coKSB3aGVyZSBjYXR)Z29yaWVzX2)kID0gJyIgLiAkY2F0ZWdvcn)faWQgLiAiJyIpOw0KICAgICAgJHRyZWUgPSB0ZXBfZ2V0X2NhdGVn$3J5X3RyZWUoJGNhdGVn$3J5X2)kKTsNCiAgICAgIGZvciAoJGk9MTsgJGk8c2)6ZW9(KCR0c(V)KTsgJGkrKykgew0KICAgICAgICB0ZXBfZGJfcXV)cnkoInVwZGF0ZSAiIC4gVEFCTEVfQ0FURUdPUk)FUyAuICIgc2V0IGNhdGVn$3JpZXNfc3RhdHVzID0gJzAnLCBsYXN0X21vZG)(aWVkID0g$(93KCkgd2h)c(UgY2F0ZWdvc())c19pZCA9ICciIC4gJHRyZWV$JG)dWydpZCddIC4gIiciKTsNCiAgICAgIH0NCiAgICB9DQogIH0NCi8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIEVuZCBBZGR)ZCBF$(Fi$GUgLyBEaXNhY(x)IENhdGVn$3JpZXMgIyMjIyMjIyMjIyMjIyMjIw0KDQogIGZ1$(N0aW9uIHR)cF9yZWRpc(VjdCgkdXJsKSB7DQogICAgZ2xvY(FsICRs$2dnZXI7DQogICAgaWYgKCAoc3Ryc3RyKCR1c(wsICJc$iIpICE9IGZh$HN)KSB8fCAoc3Ryc3RyKCR1c(wsICJcciIpICE9IGZh$HN)KSApIHsNCiAgICAgIHR)cF9yZWRpc(VjdCh0ZXBfaHJ)Z)9saW5rKEZJTEVOQU1FX0RFRkFVTFQsICcnLCAnTk9OU1NMJywgZ(Fsc2UpKTsNCiAgICB9DQoJICBoZWFkZXIoJ0xvY2F0aW9uOiAnIC4gJHVy$Ck7DQoNCiAgIG)(IChTVE9SRV9QQUdFX1BBU)NFX1RJTUUgPT0gJ3RydWUnKSB7DQogICAgICBpZiAoIW)zX29ia(VjdCgk$G9nZ2VyKSkgJGxvZ2d)ciA9IG5)dyBs$2dnZXI7DQogICAgICAgICRs$2dnZXItPnRp$WVyX3N0$3AoKTsNCiAgICAgIH0NCiAgICAgIGV4aXQ7DQogICAgfQ0KDQovLy8vDQovLyBQYXJzZSB0aGUgZGF0YSB1c2VkIG)uIHRoZSBodG1sIHRhZ3MgdG8gZW5zdXJ)IHRoZSB0YWdzIHdp$Gwg$(90IGJyZWFrDQogIGZ1$(N0aW9uIHR)cF9wYXJzZV9p$nB1dF9(aWVsZF9kYXRhKCRkYXRhLCAkcGFyc2UpIHsNCiAgICByZXR1c(4gc3RydHIodHJp$SgkZGF0YSksICRwYXJzZSk7DQogIH0NCg0KICB(dW5jdG)v$iB0ZXBf$3V0cHV0X3N0c()uZygkc3RyaW5nLCAkdHJh$nNsYXR)ID0gZ(Fsc2UsICRwc(90ZWN0ZWQgPSB(YWxzZSkgew0KICAgIG)(ICgkcHJvdGVjdGVkID09IHRydWUpIHsNCiAgICAgIHJ)dHVy$iBodG1sc3B)Y2)h$GNoYXJzKCRzdHJp$(cpOw0KICAgIH0gZWxzZSB7DQogICAgICBpZiAoJHRyYW5z$GF0ZSA9PSB(YWxzZSkgew0KICAgICAgICByZXR1c(4gdGVwX3BhcnN)X2)ucHV0X2ZpZWxkX2RhdGEoJHN0c()uZywgYXJyYXkoJyInID0+ICc(cXVvdDsnKSk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1c(4gdGVwX3BhcnN)X2)ucHV0X2ZpZWxkX2RhdGEoJHN0c()uZywgJHRyYW5z$GF0ZSk7DQogICAgICB9DQogICAgfQ0KICB9DQoNCiAgZnVuY3Rp$24gdGVwX291dHB1dF9zdHJp$(dfcHJvdGVjdGVkKCRzdHJp$(cpIHsNCiAgICByZXR1c(4gdGVwX291dHB1dF9zdHJp$(coJHN0c()uZywgZ(Fsc2UsIHRydWUpOw0KICB9DQoNCiAgZnVuY3Rp$24gdGVwX3Nh$()0aXp)X3N0c()uZygkc3RyaW5nKSB7DQogICAgJHN0c()uZyA9IGVyZWdfc(Vw$GFjZSgnICsnLCAnICcsICRzdHJp$(cpOw0KDQogICAgc(V0dXJuIHByZWdfc(Vw$GFjZSgiL1s8P)0vIiwgJ18nLCAkc3RyaW5nKTsNCiAgfQ0KDQogIGZ1$(N0aW9uIHR)cF9jdXN0$21)cnNf$(FtZSgkY3VzdG9tZXJzX2)kKSB7DQogICAgJGN1c3Rv$WVycyA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IGN1c3Rv$WVyc19(aXJzdG5h$WUsIGN1c3Rv$WVyc19sYXN0$(FtZSB(c(9tICIgLiBUQUJMRV9DVVNUT01FU)MgLiAiIHdoZXJ)IGN1c3Rv$WVyc19pZCA9ICciIC4gKG)udCkkY3VzdG9tZXJzX2)kIC4gIiciKTsNCiAgICAkY3VzdG9tZXJzX3Zh$HV)cyA9IHR)cF9kY)9(ZXRjaF9hcnJheSgkY3VzdG9tZXJzKTsNCg0KICAgIHJ)dHVy$iAkY3VzdG9tZXJzX3Zh$HV)c1snY3VzdG9tZXJzX2ZpcnN0$(FtZSddIC4gJyAnIC4gJGN1c3Rv$WVyc192YWx1ZXN$J2N1c3Rv$WVyc19sYXN0$(FtZSddOw0KICB9DQoNCiAgZnVuY3Rp$24gdGVwX2d)dF9wYXRoKCRjdXJyZW50X2NhdGVn$3J5X2)kID0gJycpIHsNCiAgICBn$G9iYWwgJGNQYXRoX2Fyc(F5Ow0KDQogICAgaWYgKCRjdXJyZW50X2NhdGVn$3J5X2)kID09ICcnKSB7DQogICAgICAkY1BhdGhf$(V3ID0gaW1w$G9kZSgnXycsICRjUGF0aF9hcnJheSk7DQogICAgfSB)$HN)IHsNCiAgICAgIG)(IChzaXp)$2YoJGNQYXRoX2Fyc(F5KSA9PSAwKSB7DQogICAgICAgICRjUGF0aF9uZXcgPSAkY3Vyc(VudF9jYXR)Z29yeV9pZDsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgICRjUGF0aF9uZXcgPSAnJzsNCiAgICAgICAgJGxhc3RfY2F0ZWdvcn)fcXV)cnkgPSB0ZXBfZGJfcXV)cnkoInN)$GVjdCBwYXJ)$nRfaWQgZnJv$SAiIC4gVEFCTEVfQ0FURUdPUk)FUyAuICIgd2h)c(UgY2F0ZWdvc())c19pZCA9ICciIC4gKG)udCkkY1BhdGhfYXJyYX)$KHNpe(VvZigkY1BhdGhfYXJyYXkpLTEpXSAuICInIik7DQogICAgICAgICRsYXN0X2NhdGVn$3J5ID0gdGVwX2RiX2Z)dGNoX2Fyc(F5KCRsYXN0X2NhdGVn$3J5X3F1ZXJ5KTsNCg0KICAgICAgICAkY3Vyc(VudF9jYXR)Z29yeV9xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IHBhc(VudF9pZCB(c(9tICIgLiBUQUJMRV9DQVRFR09SSUVTIC4gIiB3aGVyZSBjYXR)Z29yaWVzX2)kID0gJyIgLiAoaW50KSRjdXJyZW50X2NhdGVn$3J5X2)kIC4gIiciKTsNCiAgICAgICAgJGN1cnJ)$nRfY2F0ZWdvcnkgPSB0ZXBfZGJfZ(V0Y2hfYXJyYXkoJGN1cnJ)$nRfY2F0ZWdvcn)fcXV)cnkpOw0KDQogICAgICAgIG)(ICgk$GFzdF9jYXR)Z29yeVsncGFyZW50X2)kJ10gPT0gJGN1cnJ)$nRfY2F0ZWdvcn)$J3Bhc(VudF9pZCddKSB7DQogICAgICAgICAgZ(9yICgkaSA9IDAsICRuID0gc2)6ZW9(KCRjUGF0aF9hcnJheSkgLSAxOyAkaSA8ICRuOyAkaSsrKSB7DQogICAgICAgICAgICAkY1BhdGhf$(V3IC49ICdfJyAuICRjUGF0aF9hcnJheVskaV07DQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGZvciAoJGkgPSAwLCAk$iA9IHNpe(VvZigkY1BhdGhfYXJyYXkpOyAkaSA8ICRuOyAkaSsrKSB7DQogICAgICAgICAgICAkY1BhdGhf$(V3IC49ICdfJyAuICRjUGF0aF9hcnJheVskaV07DQogICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgJGNQYXRoX25)dyAuPSAnXycgLiAkY3Vyc(VudF9jYXR)Z29yeV9pZDsNCg0KICAgICAgICBpZiAoc3Vic3RyKCRjUGF0aF9uZXcsIDAsIDEpID09ICdfJykgew0KICAgICAgICAgICRjUGF0aF9uZXcgPSBzdWJzdHIoJGNQYXRoX25)dywgMSk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQoNCiAgICByZXR1c(4gJ2NQYXRoPScgLiAkY1BhdGhf$(V3Ow0KICB9DQoNCiAgZnVuY3Rp$24gdGVwX2d)dF9h$GxfZ2V0X3Bhc(FtcygkZXhj$HVkZV9hcnJheSA9ICcnKSB7DQogICAgZ2xvY(FsICRIVFRQX0dFVF9WQVJTOw0KDQogICAgaWYgKCR)eGNsdWR)X2Fyc(F5ID09ICcnKSAkZXhj$HVkZV9hcnJheSA9IGFyc(F5KCk7DQoNCiAgICAkZ2V0X3Vy$CA9ICcnOw0KDQogICAgc(VzZXQoJEhUVFBfR0VUX1ZBU)MpOw0KICAgIHdoaWx)IChsaXN0KCRrZXksICR2YWx1ZSkgPSB)YWNoKCRIVFRQX0dFVF9WQVJTKSkgew0KICAgICAgaWYgKCgka2V5ICE9IHR)cF9zZXNzaW9uX25h$WUoKSkgJiYgKCRrZXkgIT0gJ2Vyc(9yJykgJiYgKCFp$)9hcnJheSgka2V5LCAkZXhj$HVkZV9hcnJheSkpKSAkZ2V0X3Vy$CAuPSAka2V5IC4gJz0nIC4gJHZh$HV)IC4gJyYnOw0KICAgIH0NCg0KICAgIHJ)dHVy$iAkZ2V0X3Vy$DsNCiAgfQ0KDQogIGZ1$(N0aW9uIHR)cF9kYXR)X2xv$(coJHJhd19kYXR)KSB7DQogICAgaWYgKCAoJHJhd19kYXR)ID09ICcwMDAwLTAwLTAwIDAwOjAwOjAwJykgfHwgKCRyYXdfZGF0ZSA9PSAnJykgKSByZXR1c(4gZ(Fsc2U7DQoNCiAgICAkeWVhciA9IChp$nQpc3Vic3RyKCRyYXdfZGF0ZSwgMCwgNCk7DQogICAgJG1v$nRoID0gKG)udC)zdWJzdHIoJHJhd19kYXR)LCA1LCAyKTsNCiAgICAkZGF5ID0gKG)udC)zdWJzdHIoJHJhd19kYXR)LCA4LCAyKTsNCiAgICAkaG91ciA9IChp$nQpc3Vic3RyKCRyYXdfZGF0ZSwgMTEsIDIpOw0KICAgICRtaW51dGUgPSAoaW50KXN1YnN0cigkc(F3X2RhdGUsIDE0LCAyKTsNCiAgICAkc2Vj$25kID0gKG)udC)zdWJzdHIoJHJhd19kYXR)LCAxNywgMik7DQoNCiAgICByZXR1c(4gc3RyZnRp$WUoREFURV9GT1JNQVRfTE9ORywg$Wt0aW1)KCRo$3VyLCAk$W)udXR)LCAkc2Vj$25kLCAk$W9udGgsICRkYXksICR5ZWFyKSk7DQogIH0NCg0KLy8vLw0KLy8gT3V0cHV0IGEgc(F3IGRhdGUgc3RyaW5nIG)uIHRoZSBzZWx)Y3R)ZCBs$2Nh$GUgZGF0ZSB($3JtYXQNCi8vICRyYXdfZGF0ZSBuZWVkcyB0$yBiZSBp$iB0aG)zIGZvc(1hdDogWV)ZWS1NTS1ERCBISDpNTTpTUw0KLy8gTk9URTogSW5j$HVkZXMgYSB3$3JrYXJvdW5kIGZvciBkYXR)cyBiZWZvc(UgMDEvMDEvMTk3MCB0aGF0IGZhaWwg$24gd2)uZG93cyBzZXJ2ZXJzDQogIGZ1$(N0aW9uIHR)cF9kYXR)X3No$3J0KCRyYXdfZGF0ZSkgew0KICAgIG)(ICggKCRyYXdfZGF0ZSA9PSAnMDAwMC0wMC0wMCAwMDowMDowMCcpIHx8ICgkc(F3X2RhdGUgPT0gJycpICkgc(V0dXJuIGZh$HN)Ow0KDQogICAgJH))YXIgPSBzdWJzdHIoJHJhd19kYXR)LCAwLCA0KTsNCiAgICAk$W9udGggPSAoaW50KXN1YnN0cigkc(F3X2RhdGUsIDUsIDIpOw0KICAgICRkYXkgPSAoaW50KXN1YnN0cigkc(F3X2RhdGUsIDgsIDIpOw0KICAgICRo$3VyID0gKG)udC)zdWJzdHIoJHJhd19kYXR)LCAxMSwgMik7DQogICAgJG1p$nV0ZSA9IChp$nQpc3Vic3RyKCRyYXdfZGF0ZSwgMTQsIDIpOw0KICAgICRzZWNv$(QgPSAoaW50KXN1YnN0cigkc(F3X2RhdGUsIDE3LCAyKTsNCg0KICAgIG)(IChAZGF0ZSgnWScsIG1rdG)tZSgkaG91ciwgJG1p$nV0ZSwgJHN)Y29uZCwgJG1v$nRoLCAkZGF5LCAkeWVhcikpID09ICR5ZWFyKSB7DQogICAgICByZXR1c(4gZGF0ZShEQVRFX0ZPUk1BVCwg$Wt0aW1)KCRo$3VyLCAk$W)udXR)LCAkc2Vj$25kLCAk$W9udGgsICRkYXksICR5ZWFyKSk7DQogICAgfSB)$HN)IHsNCiAgICAgIHJ)dHVy$iB)c(VnX3J)cGxhY2UoJzIwMzcnIC4gJyQnLCAkeWVhciwgZGF0ZShEQVRFX0ZPUk1BVCwg$Wt0aW1)KCRo$3VyLCAk$W)udXR)LCAkc2Vj$25kLCAk$W9udGgsICRkYXksIDIwMzcpKSk7DQogICAgfQ0KDQogIH0NCg0KICB(dW5jdG)v$iB0ZXBfZGF0ZXRp$WVfc2hvcnQoJHJhd19kYXR)dG)tZSkgew0KICAgIG)(ICggKCRyYXdfZGF0ZXRp$WUgPT0gJzAwMDAtMDAtMDAgMDA6MDA6MDAnKSB8fCAoJHJhd19kYXR)dG)tZSA9PSAnJykgKSByZXR1c(4gZ(Fsc2U7DQoNCiAgICAkeWVhciA9IChp$nQpc3Vic3RyKCRyYXdfZGF0ZXRp$WUsIDAsIDQpOw0KICAgICRt$250aCA9IChp$nQpc3Vic3RyKCRyYXdfZGF0ZXRp$WUsIDUsIDIpOw0KICAgICRkYXkgPSAoaW50KXN1YnN0cigkc(F3X2RhdGV0aW1)LCA4LCAyKTsNCiAgICAkaG91ciA9IChp$nQpc3Vic3RyKCRyYXdfZGF0ZXRp$WUsIDExLCAyKTsNCiAgICAk$W)udXR)ID0gKG)udC)zdWJzdHIoJHJhd19kYXR)dG)tZSwgMTQsIDIpOw0KICAgICRzZWNv$(QgPSAoaW50KXN1YnN0cigkc(F3X2RhdGV0aW1)LCAxNywgMik7DQoNCiAgICByZXR1c(4gc3RyZnRp$WUoREFURV9USU1FX0ZPUk1BVCwg$Wt0aW1)KCRo$3VyLCAk$W)udXR)LCAkc2Vj$25kLCAk$W9udGgsICRkYXksICR5ZWFyKSk7DQogIH0NCg0KICB(dW5jdG)v$iB0ZXBfYXJyYX)f$WVyZ2UoJGFyc(F5MSwgJGFyc(F5MiwgJGFyc(F5MyA9ICcnKSB7DQogICAgaWYgKCRhcnJheTMgPT0gJycpICRhcnJheTMgPSBhcnJheSgpOw0KICAgIG)(ICh(dW5jdG)v$)9)eG)zdHMoJ2Fyc(F5X21)c(d)JykpIHsNCiAgICAgICRhcnJheV9tZXJnZWQgPSBhcnJheV9tZXJnZSgkYXJyYXkxLCAkYXJyYXkyLCAkYXJyYXkzKTsNCiAgICB9IGVsc2Ugew0KICAgICAgd2hp$GUgKGxpc3QoJGt)eSwgJHZh$CkgPSB)YWNoKCRhcnJheTEpKSAkYXJyYX)f$WVyZ2VkWyRrZX)dID0gJHZh$DsNCiAgICAgIHdoaWx)IChsaXN0KCRrZXksICR2YWwpID0gZWFjaCgkYXJyYXkyKSkgJGFyc(F5X21)c(d)ZFska2V5XSA9ICR2YWw7DQogICAgICBpZiAoc2)6ZW9(KCRhcnJheTMpID4gMCkgd2hp$GUgKGxpc3QoJGt)eSwgJHZh$CkgPSB)YWNoKCRhcnJheTMpKSAkYXJyYX)f$WVyZ2VkWyRrZX)dID0gJHZh$DsNCiAgICB9DQoNCiAgICByZXR1c(4gKGFyc(F5KSAkYXJyYX)f$WVyZ2VkOw0KICB9DQoNCiAgZnVuY3Rp$24gdGVwX2)uX2Fyc(F5KCRs$29rdXBfd(FsdWUsICRs$29rdXBfYXJyYXkpIHsNCiAgICBpZiAoZnVuY3Rp$25fZXhpc3RzKCdp$)9hcnJheScpKSB7DQogICAgICBpZiAoaW5fYXJyYXkoJGxv$2t1cF92YWx1ZSwgJGxv$2t1cF9hcnJheSkpIHJ)dHVy$iB0cnV)Ow0KICAgIH0gZWxzZSB7DQogICAgICByZXN)dCgk$G9va3VwX2Fyc(F5KTsNCiAgICAgIHdoaWx)IChsaXN0KCRrZXksICR2YWx1ZSkgPSB)YWNoKCRs$29rdXBfYXJyYXkpKSB7DQogICAgICAgIG)(ICgkd(FsdWUgPT0gJGxv$2t1cF92YWx1ZSkgc(V0dXJuIHRydWU7DQogICAgICB9DQogICAgfQ0KDQogICAgc(V0dXJuIGZh$HN)Ow0KICB9DQoNCiAgZnVuY3Rp$24gdGVwX2d)dF9zdWJjYXR)Z29yeV90c(V)KCRwYXJ)$nRfaWQgPSAnMCcsICRzcGFjaW5nID0gJycsICR)eGNsdWR)ID0gJycsICRjYXR)Z29yeV90c(V)X2Fyc(F5ID0gJycsICRp$(NsdWR)X2)0c2VsZiA9IGZh$HN)KSB7DQogICAgZ2xvY(FsICRsYW5ndWFnZXNfaWQ7DQoNCiAgICBpZiAoIW)zX2Fyc(F5KCRjYXR)Z29yeV90c(V)X2Fyc(F5KSkgJGNhdGVn$3J5X3RyZWVfYXJyYXkgPSBhcnJheSgpOw0KICAgIG)(ICggKHNpe(VvZigkY2F0ZWdvcn)fdHJ)ZV9hcnJheSkgPCAxKSA(JiAoJGV4Y2x1ZGUgIT0gJzAnKSApICRjYXR)Z29yeV90c(V)X2Fyc(F5W10gPSBhcnJheSgnaWQnID0+ICcwJywgJ3R)eHQnID0+IFRFWFRfVE9QKTsNCg0KICAgIG)(ICgkaW5j$HVkZV9pdHN)$GYpIHsNCiAgICAgICRjYXR)Z29yeV9xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IGNkL(NhdGVn$3JpZXNf$(FtZSB(c(9tICIgLiBUQUJMRV9DQVRFR09SSUVTX0RFU0NSSVBUSU9OIC4gIiBjZCB3aGVyZSBjZC5sYW5ndWFnZV9pZCA9ICciIC4gKG)udCkk$GFuZ3VhZ2VzX2)kIC4gIicgYW5kIGNkL(NhdGVn$3JpZXNfaWQgPSAnIiAuIChp$nQpJHBhc(VudF9pZCAuICInIik7DQogICAgICAkY2F0ZWdvcnkgPSB0ZXBfZGJfZ(V0Y2hfYXJyYXkoJGNhdGVn$3J5X3F1ZXJ5KTsNCiAgICAgICRjYXR)Z29yeV90c(V)X2Fyc(F5W10gPSBhcnJheSgnaWQnID0+ICRwYXJ)$nRfaWQsICd0ZXh0JyA9PiAkY2F0ZWdvcn)$J2NhdGVn$3JpZXNf$(FtZSddKTsNCiAgICB9DQoNCi8vICAgICRjYXR)Z29yaWVzX3F1ZXJ5ID0gdGVwX2RiX3F1ZXJ5KCJzZWx)Y3QgYy5jYXR)Z29yaWVzX2)kLCBjZC5jYXR)Z29yaWVzX25h$WUsIGMucGFyZW50X2)kIGZy$20gIiAuIFRBQkxFX0NBVEVHT1JJRVMgLiAiIGMsICIgLiBUQUJMRV9DQVRFR09SSUVTX0RFU0NSSVBUSU9OIC4gIiBjZCB3aGVyZSBjL(NhdGVn$3JpZXNfaWQgPSBjZC5jYXR)Z29yaWVzX2)kIGFuZCBjZC5sYW5ndWFnZV9pZCA9ICciIC4gKG)udCkk$GFuZ3VhZ2VzX2)kIC4gIicgYW5kIGMucGFyZW50X2)kID0gJyIgLiAoaW50KSRwYXJ)$nRfaWQgLiAiJyBvc(R)ciBieSBjLnNvcnRf$3JkZXIsIGNkL(NhdGVn$3JpZXNf$(FtZSIpOw0KICAgICRjYXR)Z29yaWVzX3F1ZXJ5ID0gdGVwX2RiX3F1ZXJ5KCJzZWx)Y3QgYy5jYXR)Z29yaWVzX2)kLCBjZC5jYXR)Z29yaWVzX25h$WUsIGMucGFyZW50X2)kIGZy$20gIiAuIFRBQkxFX0NBVEVHT1JJRVMgLiAiIGMg$GV(dCBq$2)uICIgLiBUQUJMRV9DQVRFR09SSUVTX0RFU0NSSVBUSU9OIC4gIiBjZCB1c2)uZyhjYXR)Z29yaWVzX2)kKSB3aGVyZSBjZC5sYW5ndWFnZV9pZCA9ICciIC4gKG)udCkk$GFuZ3VhZ2VzX2)kIC4gIicgYW5kIGMucGFyZW50X2)kID0gJyIgLiAoaW50KSRwYXJ)$nRfaWQgLiAiJyBvc(R)ciBieSBjLnNvcnRf$3JkZXIsIGNkL(NhdGVn$3JpZXNf$(FtZSIpOyAgICANCiAgICANCiAgICB3aG)sZSAoJGNhdGVn$3JpZXMgPSB0ZXBfZGJfZ(V0Y2hfYXJyYXkoJGNhdGVn$3JpZXNfcXV)cnkpKSB7DQogICAgICBpZiAoJGV4Y2x1ZGUgIT0gJGNhdGVn$3JpZXN$J2NhdGVn$3JpZXNfaWQnXSkgJGNhdGVn$3J5X3RyZWVfYXJyYX)$XSA9IGFyc(F5KCdpZCcgPT4gJGNhdGVn$3JpZXN$J2NhdGVn$3JpZXNfaWQnXSwgJ3R)eHQnID0+ICRzcGFjaW5nIC4gJGNhdGVn$3JpZXN$J2NhdGVn$3JpZXNf$(FtZSddKTsNCiAgICAgICRjYXR)Z29yeV90c(V)X2Fyc(F5ID0gdGVwX2d)dF9jYXR)Z29yeV90c(V)KCRjYXR)Z29yaWVzWydjYXR)Z29yaWVzX2)kJ10sICRzcGFjaW5nIC4gJyZuYnNwOyZuYnNwOyZuYnNwOycsICR)eGNsdWR)LCAkY2F0ZWdvcn)fdHJ)ZV9hcnJheSk7DQogICAgfQ0KDQogICAgc(V0dXJuICRjYXR)Z29yeV90c(V)X2Fyc(F5Ow0KICB9DQoNCg0KICAgIGZ1$(N0aW9uIHR)cF9nZXRfY2F0ZWdvcn)fdHJ)ZSgkcGFyZW50X2)kID0gJzAnLCAkc3BhY2)uZyA9ICcnLCAkZXhj$HVkZSA9ICcnLCAkY2F0ZWdvcn)fdHJ)ZV9hcnJheSA9ICcnLCAkaW5j$HVkZV9pdHN)$GYgPSB(YWxzZSkgew0KICAgIGds$2Jh$CAk$GFuZ3VhZ2VzX2)kOw0KDQogICAgaWYgKCFpc19hcnJheSgkY2F0ZWdvcn)fdHJ)ZV9hcnJheSkpICRjYXR)Z29yeV90c(V)X2Fyc(F5ID0gYXJyYXkoKTsNCiAgICBpZiAoIChzaXp)$2YoJGNhdGVn$3J5X3RyZWVfYXJyYXkpIDwgMSkgJiYgKCR)eGNsdWR)ICE9ICcwJykgKSAkY2F0ZWdvcn)fdHJ)ZV9hcnJheVtdID0gYXJyYXkoJ2)kJyA9PiAnMCcsICd0ZXh0JyA9PiBURVhUX1RPUCk7DQoNCiAgICAkY2F0ZWdvcn)fcXV)cnkgPSB0ZXBfZGJfcXV)cnkoInN)$GVjdCBjL(NhdGVn$3JpZXNfaWQsIGNkL(NhdGVn$3JpZXNf$(FtZSwgYy5wYXJ)$nRfaWQsIHBjYXR)Z29yaWVzLnBhc(VudF9pZCBhcyBnc(FuZF9wYXJ)$nRfaWQgZnJv$SAiIC4gVEFCTEVfQ0FURUdPUk)FUyAuICIgYyAg$GV(dCBq$2)uICIgLiBUQUJMRV9DQVRFR09SSUVTIC4gIiBBUyBwY2F0ZWdvc())cyBv$iBwY2F0ZWdvc())cy5jYXR)Z29yaWVzX2)kID0gYy5wYXJ)$nRfaWQsIiAuIFRBQkxFX0NBVEVHT1JJRVNfREVTQ1JJUFRJT04gLiAiIGNkIHdoZXJ)IGMuY2F0ZWdvc())c19pZCA9IGNkL(NhdGVn$3JpZXNfaWQgYW5kIGNkL(xh$(d1YWd)X2)kID0gJyIgLiAoaW50KSRsYW5ndWFnZXNfaWQgLiAiJyBvc(R)ciBieSBnc(FuZF9wYXJ)$nRfaWQsIGMucGFyZW50X2)kLCBjLnNvcnRf$3JkZXIsIGNkL(NhdGVn$3JpZXNf$(FtZSIpOw0KDQogICAgd2hp$GUgKCRjYXR)Z29yaWVzID0gdGVwX2RiX2Z)dGNoX2Fyc(F5KCRjYXR)Z29yeV9xdWVyeSkpIHsNCgkkX2NhdGVn$3J5X3RyZWVfYXJyYX)$XSA9IGFyc(F5KCdnc(FuZF9wYXJ)$nRfaWQnID0+ICRjYXR)Z29yaWVzWydnc(FuZF9wYXJ)$nRfaWQnXSwgJ3Bhc(VudF9pZCcgPT4gJGNhdGVn$3JpZXN$J3Bhc(VudF9pZCddLCAnaWQnID0+ICRjYXR)Z29yaWVzWydjYXR)Z29yaWVzX2)kJ10sICd0ZXh0JyA9PiAoJGNhdGVn$3JpZXN$J3Bhc(VudF9pZCddICE9ICcwJyA/ICI($(JzcDs($(JzcDs($(JzcDsiLiRjYXR)Z29yaWVzWydjYXR)Z29yaWVzX25h$WUnXTogJGNhdGVn$3JpZXN$J2NhdGVn$3JpZXNf$(FtZSddKSk7DQogICAgfQ0KDQogICAgaWYgKCRwYXJ)$nRfaWQgPT0gJzAnKSB7DQogICAgIG)(IChpc3N)dCgkX2NhdGVn$3J5X3RyZWVfYXJyYXkpKSB7DQogICAgIGZvc(VhY2ggKCRfY2F0ZWdvcn)fdHJ)ZV9hcnJheSBhcyAkaW5kZXhf$2YgPT4gJHN1Y)9hcnJheSkgew0KCSAgICBpZiAoIXR)cF9u$3Rf$nVs$Cgkc3ViX2Fyc(F5Wydnc(FuZF9wYXJ)$nRfaWQnXSkpIHsNCgkJICAgICRwYXJ)$nRfY2F0ZWdvc())c1tdID0gYXJyYXkoJ2)kJyA9PiAkc3ViX2Fyc(F5WydpZCddLCAndGV4dCcgPT4gICRzdWJfYXJyYX)$J3R)eHQnXSk7DQogICAgICAgfQ0KICAgICB9IC8vIGVuZCB($3J)YWNoICgkX2NhdGVn$3J5X3RyZWVfYXJyYXkgYXMgJG)uZGV4X29(ID0+ICRzdWJfYXJyYXkpDQogICAgIH0NCiAgICB9IGVsc2UgeyAvLyBwYXJ)$nRfaWQgaXMgc2V0LCBnZXQgYSBzdWJzZXQgKHVzZWQgZ(9yIGR)$GV0aW5nIGEgY2F0ZWdvcnksIHdpdGggc3ViY2F0cyBh$(QgcHJvZHVjdHMpDQoJIGZvc(VhY2ggKCRfY2F0ZWdvcn)fdHJ)ZV9hcnJheSBhcyAkaW5kZXhf$2YgPT4gJHN1Y)9hcnJheSkgew0KCSAgICBpZiAoJHN1Y)9hcnJheVsnaWQnXSA9PSAkcGFyZW50X2)kKSB7DQoJCSAgICAkcGFyZW50X2NhdGVn$3JpZXN$XSA9IGFyc(F5KCdpZCcgPT4gJHN1Y)9hcnJheVsnaWQnXSwgJ3R)eHQnID0+ICAkc3ViX2Fyc(F5Wyd0ZXh0J10pOw0KICAgICAgIH0NCiAgICB9IC8vIGVuZCB($3J)YWNoICgkX2NhdGVn$3J5X3RyZWVfYXJyYXkgYXMgJG)uZGV4X29(ID0+ICRzdWJfYXJyYXkpDQogICAgfQ0KDQogICAgZ(9yICgkeCA9IDA7ICR4IDwgY291$nQoJHBhc(VudF9jYXR)Z29yaWVzKTsgJHgrKykgew0KCSAgICBhcnJheV9wdXNoKCRjYXR)Z29yeV90c(V)X2Fyc(F5LCAkcGFyZW50X2NhdGVn$3JpZXN$JHhdKTsNCgkgICAgZ(9yZWFjaCgkX2NhdGVn$3J5X3RyZWVfYXJyYXkgYXMgJG)uZGV4X29(X2N0YSA9PiAkc3ViX2Fyc(F5X2N0YSkgew0KCQkgICAgaWYgKCRzdWJfYXJyYX)fY3RhWydwYXJ)$nRfaWQnXSA9PSAkcGFyZW50X2NhdGVn$3JpZXN$JHhdWydpZCddKSB7DQoJCQkgICAgYXJyYX)fcHVzaCgkY2F0ZWdvcn)fdHJ)ZV9hcnJheSwgYXJyYX)fc2xpY2UoJF9jYXR)Z29yeV90c(V)X2Fyc(F5WyRp$(R)eF9vZ)9jdGFdLCAyKSk7DQoJCQkgICAgLy8gQk9GIG)uc2VydCBzdWJzdWJjYXR)Z29yaWVzIGFuZCB)d(VyeXRoaW5nIGJ)$G93IHRoYXQNCgkJCSAgICAkY2F0ZWdvc())c19j$3VudGVyID0gJHN1Y)9hcnJheV9jdGF$J2)kJ107DQoJCQkgICAgLy8gZGVsZXR)IHRoZSBz$3J0ZWQgY2F0ZWdvcnkgZnJv$SB0aGUgYXJyYXksIGx)c3MgdG8g$G9vcCB0aHJvdWdoDQoJCQkgICAgdW5zZXQoJF9jYXR)Z29yeV90c(V)X2Fyc(F5WyRp$(R)eF9vZ)9jdGFdKTsNCgkJCSAgICAkYWRkX21vc(Vfc3ViY2F0ZWdvc())cyA9IHR)cF9hZGRfc3ViY2F0ZWdvcn)fdG9fdHJ)ZSgkY2F0ZWdvcn)fdHJ)ZV9hcnJheSwgJF9jYXR)Z29yeV90c(V)X2Fyc(F5LCAkcGFyZW50X2NhdGVn$3JpZXMsICRjYXR)Z29yaWVzX2NvdW50ZXIsICcyJyk7DQoJCQkgICAgJGNhdGVn$3J5X3RyZWVfYXJyYXkgPSAkYWRkX21vc(Vfc3ViY2F0ZWdvc())c1snY2F0X3RyZWUnXTsNCgkJCSAgICAkX2NhdGVn$3J5X3RyZWVfYXJyYXkgPSAkYWRkX21vc(Vfc3ViY2F0ZWdvc())c1snX2NhdF90c(V)J107DQoJCQkgICAgLy8gRU9GIG)uc2VydCBzdWJzdWJjYXR)Z29yaWVzIGFuZCB)d(VyeXRoaW5nIGJ)$G93IHRoYXQNCgkJICAgIH0NCgkgICAgfQ0KICAgIH0NCiAgICByZXR1c(4gJGNhdGVn$3J5X3RyZWVfYXJyYXk7DQogIH0NCg0KICB(dW5jdG)v$iB0ZXBfYWRkX3N1Y(NhdGVn$3J5X3RvX3RyZWUoJGNhdGVn$3J5X3RyZWVfYXJyYXksICRfY2F0ZWdvcn)fdHJ)ZV9hcnJheSwgJHBhc(VudF9jYXR)Z29yaWVzLCAkY2F0ZWdvc())c19j$3VudGVyLCAk$GV2ZWwpIHsNCgkgIGZvc(VhY2goJF9jYXR)Z29yeV90c(V)X2Fyc(F5IGFzICRp$(R)eF9vZ)9jdGEgPT4gJHN1Y)9hcnJheV9jdGEpIHsNCgkJICAgIG)(ICgkc3ViX2Fyc(F5X2N0YVsncGFyZW50X2)kJ10gPT0gICRjYXR)Z29yaWVzX2NvdW50ZXIgJiYgIW)uX2Fyc(F5KCRjYXR)Z29yaWVzX2NvdW50ZXIsICRwYXJ)$nRfY2F0ZWdvc())cykgKSB7DQoJCQkgICAgJHN1Y(NhdGVn$3J5X3RvX2FkZCA9IGFyc(F5X3NsaWN)KCRfY2F0ZWdvcn)fdHJ)ZV9hcnJheVskaW5kZXhf$2ZfY3RhXSwyKTsNCgkJCSAgICAkc3BhY2)uZyA9ICcnOw0KCQkJICAgIGZvciAoJGkgPSAxOyAkaSA8ICRsZXZ)$CA7ICRpKyspIHsgJHNwYWNp$(cgLj0gIiZuYnNwOyZuYnNwOyZuYnNwOyI7IH0NCgkJCSAgICAkc3ViY2F0ZWdvcn)fdG9fYWRkWyd0ZXh0J10gPSAkc3BhY2)uZy4kc3ViY2F0ZWdvcn)fdG9fYWRkWyd0ZXh0J107DQoJCQkgICAgYXJyYX)fcHVzaCgkY2F0ZWdvcn)fdHJ)ZV9hcnJheSwgJHN1Y(NhdGVn$3J5X3RvX2FkZCk7DQoJCQkgICAgJGNhdF9j$3VudGVyID0gJHN1Y)9hcnJheV9jdGF$J2)kJ107DQoJCQkgICAgLy8gZGVsZXR)IHRoZSBz$3J0ZWQgY2F0ZWdvcnkgZnJv$SB0aGUgYXJyYXksIGx)c3MgdG8g$G9vcCB0aHJvdWdoDQoJCQkgICAgdW5zZXQoJF9jYXR)Z29yeV90c(V)X2Fyc(F5WyRp$(R)eF9vZ)9jdGFdKTsNCgkJCSAgICAvLyB0ZXBfYWRkX3N1Y(NhdGVn$3J5X3RvX3RyZWUga2V)cHMgY2Fs$G)uZyBpdHN)$GYgdG8gYWRkIHRoZSBzdWJjYXR)Z29yaWVzDQoJCQkgICAgJGFkZF9t$3J)X3N1Y(NhdGVn$3JpZXMgPSB0ZXBfYWRkX3N1Y(NhdGVn$3J5X3RvX3RyZWUoJGNhdGVn$3J5X3RyZWVfYXJyYXksICRfY2F0ZWdvcn)fdHJ)ZV9hcnJheSwgJHBhc(VudF9jYXR)Z29yaWVzLCAkY2F0X2NvdW50ZXIsICRsZXZ)$CsxKTsNCgkJCSAgICAkY2F0ZWdvcn)fdHJ)ZV9hcnJheSA9ICRhZGRf$W9yZV9zdWJjYXR)Z29yaWVzWydjYXRfdHJ)ZSddOw0KCQkJICAgICRfY2F0ZWdvcn)fdHJ)ZV9hcnJheSA9ICRhZGRf$W9yZV9zdWJjYXR)Z29yaWVzWydfY2F0X3RyZWUnXTsNCgkJICAgIH0NCgkgICAgfQ0KCSAgICAkc(VzdWx0YW50ID0gYXJyYXkoJ2NhdF90c(V)JyA9PiAkY2F0ZWdvcn)fdHJ)ZV9hcnJheSwgJ19jYXRfdHJ)ZScgPT4gJF9jYXR)Z29yeV90c(V)X2Fyc(F5KTsNCgkgICAgc(V0dXJuICRyZXN1$HRh$nQ7DQogIH0gLy8gZW5kIGZ1$(N0aW9uIHR)cF9hZGRfc3ViY2F0ZWdvcn)fdG9fdHJ)ZQ0KDQoNCiAgZnVuY3Rp$24gdGVwX2RyYXdfcHJvZHVjdHNfcHVs$F9k$3duKCRuYW1)LCAkcGFyYW1)dGVycyA9ICcnLCAkZXhj$HVkZSA9ICcnKSB7DQogICAgZ2xvY(FsICRjdXJyZW5jaWVzLCAk$GFuZ3VhZ2VzX2)kOw0KDQogICAgaWYgKCR)eGNsdWR)ID09ICcnKSB7DQogICAgICAkZXhj$HVkZSA9IGFyc(F5KCk7DQogICAgfQ0KDQogICAgJHN)$GVjdF9zdHJp$(cgPSAnPHN)$GVjdCBuYW1)PSInIC4gJG5h$WUgLiAnIic7DQoNCiAgICBpZiAoJHBhc(FtZXR)cnMpIHsNCiAgICAgICRzZWx)Y3Rfc3RyaW5nIC49ICcgJyAuICRwYXJh$WV0ZXJzOw0KICAgIH0NCg0KICAgICRzZWx)Y3Rfc3RyaW5nIC49ICc+JzsNCg0KICAgICRwc(9kdWN0c19xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IHAucHJvZHVjdHNfaWQsIHBkLnBy$2R1Y3RzX25h$WUsIHAucHJvZHVjdHNfcHJpY2UsIHAucHJvZHVjdHNfdGF4X2NsYXNzX2)kIGZy$20gIiAuIFRBQkxFX1BST0RVQ1RTIC4gIiBwLCAiIC4gVEFCTEVfUFJPRFVDVFNfREVTQ1JJUFRJT04gLiAiIHBkIHdoZXJ)IHAucHJvZHVjdHNfaWQgPSBwZC5wc(9kdWN0c19pZCBh$(QgcGQu$GFuZ3VhZ2VfaWQgPSAnIiAuIChp$nQpJGxh$(d1YWd)c19pZCAuICInIG9yZGVyIGJ5IHBy$2R1Y3RzX25h$WUiKTsNCiAgICB3aG)sZSAoJHBy$2R1Y3RzID0gdGVwX2RiX2Z)dGNoX2Fyc(F5KCRwc(9kdWN0c19xdWVyeSkpIHsNCiAgICAgIG)(ICghaW5fYXJyYXkoJHBy$2R1Y3RzWydwc(9kdWN0c19pZCddLCAkZXhj$HVkZSkpIHsNCiAgICAgICAgJHN)$GVjdF9zdHJp$(cgLj0gJzxvcHRp$24gd(FsdWU9IicgLiAkcHJvZHVjdHN$J3By$2R1Y3RzX2)kJ10gLiAnIj4nIC4gJHBy$2R1Y3RzWydwc(9kdWN0c19uYW1)J10gLiAnICgnIC4gJGN1cnJ)$(NpZXMtP(Zvc(1hdCgkcHJvZHVjdHN$J3By$2R1Y3RzX3ByaWN)J10pIC4gJykgJyAuJGN1cnJ)$(NpZXMtP(Rpc3BsYX)fcHJpY2UoJHBy$2R1Y3RzWydwc(9kdWN0c19wc()jZSddLCB0ZXBfZ2V0X3RheF9yYXR)KCRwc(9kdWN0c1sncHJvZHVjdHNfdGF4X2NsYXNzX2)kJ10pKSAuICc8L29wdG)v$j4nOw0KICAgICAgfQ0KICAgIH0NCg0KICAgICRzZWx)Y3Rfc3RyaW5nIC49ICc8L3N)$GVjdD4nOw0KDQogICAgc(V0dXJuICRzZWx)Y3Rfc3RyaW5nOw0KICB9DQoNCiAgZnVuY3Rp$24gdGVwX29wdG)v$nNf$(FtZSgk$3B0aW9uc19pZCkgew0KICAgIGds$2Jh$CAk$GFuZ3VhZ2VzX2)kOw0KDQogICAgJG9wdG)v$nMgPSB0ZXBfZGJfcXV)cnkoInN)$GVjdCBwc(9kdWN0c19vcHRp$25zX25h$WUgZnJv$SAiIC4gVEFCTEVfUFJPRFVDVFNfT1BUSU9OUyAuICIgd2h)c(UgcHJvZHVjdHNf$3B0aW9uc19pZCA9ICciIC4gKG)udCkk$3B0aW9uc19pZCAuICInIGFuZCBsYW5ndWFnZV9pZCA9ICciIC4gKG)udCkk$GFuZ3VhZ2VzX2)kIC4gIiciKTsNCiAgICAk$3B0aW9uc192YWx1ZXMgPSB0ZXBfZGJfZ(V0Y2hfYXJyYXkoJG9wdG)v$nMpOw0KDQogICAgc(V0dXJuICRvcHRp$25zX3Zh$HV)c1sncHJvZHVjdHNf$3B0aW9uc19uYW1)J107DQogIH0NCg0KICB(dW5jdG)v$iB0ZXBfd(FsdWVzX25h$WUoJHZh$HV)c19pZCkgew0KICAgIGds$2Jh$CAk$GFuZ3VhZ2VzX2)kOw0KDQogICAgJHZh$HV)cyA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IHBy$2R1Y3RzX29wdG)v$nNfd(FsdWVzX25h$WUgZnJv$SAiIC4gVEFCTEVfUFJPRFVDVFNfT1BUSU9OU19WQUxVRVMgLiAiIHdoZXJ)IHBy$2R1Y3RzX29wdG)v$nNfd(FsdWVzX2)kID0gJyIgLiAoaW50KSR2YWx1ZXNfaWQgLiAiJyBh$(Qg$GFuZ3VhZ2VfaWQgPSAnIiAuIChp$nQpJGxh$(d1YWd)c19pZCAuICInIik7DQogICAgJHZh$HV)c192YWx1ZXMgPSB0ZXBfZGJfZ(V0Y2hfYXJyYXkoJHZh$HV)cyk7DQoNCiAgICByZXR1c(4gJHZh$HV)c192YWx1ZXN$J3By$2R1Y3RzX29wdG)v$nNfd(FsdWVzX25h$WUnXTsNCiAgfQ0KDQogIGZ1$(N0aW9uIHR)cF9p$(ZvX2)tYWd)KCRp$WFnZSwgJGFsdCwgJHdpZHRoID0gJycsICRoZW)naHQgPSAnJykgew0KICAgIG)(ICh0ZXBf$(90X251$GwoJG)tYWd)KSA(JiAoZ()sZV9)eG)zdHMoRE)SX0ZTX0NBVEFMT0dfSU1BR0VTIC4gJG)tYWd)KSkgKSB7DQogICAgICAkaW1hZ2UgPSB0ZXBfaW1hZ2UoRE)SX1dTX0NBVEFMT0dfSU1BR0VTIC4gJG)tYWd)LCAkYWx0LCAkd2)kdGgsICRoZW)naHQpOw0KICAgIH0gZWxzZSB7DQogICAgICAkaW1hZ2UgPSBURVhUX0)NQUdFX05PTkVYSVNURU5UOw0KICAgIH0NCg0KICAgIHJ)dHVy$iAkaW1hZ2U7DQogIH0NCg0KICB(dW5jdG)v$iB0ZXBfYnJ)YWtfc3RyaW5nKCRzdHJp$(csICRsZW4sICRic(Vha19jaGFyID0gJy0nKSB7DQogICAgJGwgPSAwOw0KICAgICRvdXRwdXQgPSAnJzsNCiAgICB($3IgKCRpPTAsICRuPXN0c(x)$igkc3RyaW5nKTsgJGk8JG47ICRpKyspIHsNCiAgICAgICRjaGFyID0gc3Vic3RyKCRzdHJp$(csICRpLCAxKTsNCiAgICAgIG)(ICgkY2hhciAhPSAnICcpIHsNCiAgICAgICAgJGwrKzsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgICRsID0gMDsNCiAgICAgIH0NCiAgICAgIG)(ICgk$CA+ICRsZW4pIHsNCiAgICAgICAgJGwgPSAxOw0KICAgICAgICAk$3V0cHV0IC49ICRic(Vha19jaGFyOw0KICAgICAgfQ0KICAgICAgJG91dHB1dCAuPSAkY2hhcjsNCiAgICB9DQoNCiAgICByZXR1c(4gJG91dHB1dDsNCiAgfQ0KDQogIGZ1$(N0aW9uIHR)cF9nZXRfY291$nRyeV9uYW1)KCRj$3VudHJ5X2)kKSB7DQogICAgJGNvdW50cn)fcXV)cnkgPSB0ZXBfZGJfcXV)cnkoInN)$GVjdCBj$3VudHJpZXNf$(FtZSB(c(9tICIgLiBUQUJMRV9DT1VOVFJJRVMgLiAiIHdoZXJ)IGNvdW50c())c19pZCA9ICciIC4gKG)udCkkY291$nRyeV9pZCAuICInIik7DQoNCiAgICBpZiAoIXR)cF9kY)9udW1fc(93cygkY291$nRyeV9xdWVyeSkpIHsNCiAgICAgIHJ)dHVy$iAkY291$nRyeV9pZDsNCiAgICB9IGVsc2Ugew0KICAgICAgJGNvdW50cnkgPSB0ZXBfZGJfZ(V0Y2hfYXJyYXkoJGNvdW50cn)fcXV)cnkpOw0KICAgICAgc(V0dXJuICRj$3VudHJ5Wydj$3VudHJpZXNf$(FtZSddOw0KICAgIH0NCiAgfQ0KDQogIGZ1$(N0aW9uIHR)cF9nZXRfe(9uZV9uYW1)KCRj$3VudHJ5X2)kLCAke(9uZV9pZCwgJGR)Z(F1$HRfe(9uZSkgew0KICAgICR6$25)X3F1ZXJ5ID0gdGVwX2RiX3F1ZXJ5KCJzZWx)Y3Qge(9uZV9uYW1)IGZy$20gIiAuIFRBQkxFX1pPTkVTIC4gIiB3aGVyZSB6$25)X2NvdW50cn)faWQgPSAnIiAuIChp$nQpJGNvdW50cn)faWQgLiAiJyBh$(Qge(9uZV9pZCA9ICciIC4gKG)udCkke(9uZV9pZCAuICInIik7DQogICAgaWYgKHR)cF9kY)9udW1fc(93cygke(9uZV9xdWVyeSkpIHsNCiAgICAgICR6$25)ID0gdGVwX2RiX2Z)dGNoX2Fyc(F5KCR6$25)X3F1ZXJ5KTsNCiAgICAgIHJ)dHVy$iAke(9uZVsne(9uZV9uYW1)J107DQogICAgfSB)$HN)IHsNCiAgICAgIHJ)dHVy$iAkZGV(YXVsdF96$25)Ow0KICAgIH0NCiAgfQ0KDQogIGZ1$(N0aW9uIHR)cF9u$3Rf$nVs$Cgkd(FsdWUpIHsNCiAgICBpZiAoaXNfYXJyYXkoJHZh$HV)KSkgew0KICAgICAgaWYgKHNpe(VvZigkd(FsdWUpID4gMCkgew0KICAgICAgICByZXR1c(4gdHJ1ZTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJ)dHVy$iB(YWxzZTsNCiAgICAgIH0NCiAgICB9IGVsc2Ugew0KICAgICAgaWYgKCAoaXNfc3RyaW5nKCR2YWx1ZSkgfHwgaXNfaW50KCR2YWx1ZSkpICY(ICgkd(FsdWUgIT0gJycpICY(ICgkd(FsdWUgIT0gJ05VTEwnKSA(JiAoc3Ry$GVuKHRyaW0oJHZh$HV)KSkgPiAwKSkgew0KICAgICAgICByZXR1c(4gdHJ1ZTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJ)dHVy$iB(YWxzZTsNCiAgICAgIH0NCiAgICB9DQogIH0NCg0KICB(dW5jdG)v$iB0ZXBfYnJvd3N)c)9kZXR)Y3QoJGNv$XBv$(VudCkgew0KLy8gPj4+IEJFR0)OIFJFR0)TVEVSX0dMT0JBTFMNCi8vICAgIGds$2Jh$CAkSFRUUF9VU0VSX0FHRU5UOw0KDQogICAgc(V0dXJuIHN0c()zdHIoJF9TRVJWRVJ$J0hUVFBfVVNFU)9BR0VOVCddLCAkY29tcG9uZW50KTsNCi8vIDw8PCBFTkQgUkVHSVNURVJfR0xPQkFMUw0KICB9DQoNCiAgZnVuY3Rp$24gdGVwX3RheF9j$GFzc2VzX3B1$GxfZG93$igkcGFyYW1)dGVycywgJHN)$GVjdGVkID0gJycpIHsNCiAgICAkc2VsZWN0X3N0c()uZyA9ICc8c2VsZWN0ICcgLiAkcGFyYW1)dGVycyAuICc+JzsNCiAgICAkY2xhc3N)c19xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IHRheF9j$GFzc19pZCwgdGF4X2NsYXNzX3RpdGx)IGZy$20gIiAuIFRBQkxFX1RBWF9DTEFTUyAuICIg$3JkZXIgYnkgdGF4X2NsYXNzX3RpdGx)Iik7DQogICAgd2hp$GUgKCRj$GFzc2VzID0gdGVwX2RiX2Z)dGNoX2Fyc(F5KCRj$GFzc2VzX3F1ZXJ5KSkgew0KICAgICAgJHN)$GVjdF9zdHJp$(cgLj0gJzxvcHRp$24gd(FsdWU9IicgLiAkY2xhc3N)c1sndGF4X2NsYXNzX2)kJ10gLiAnIic7DQogICAgICBpZiAoJHN)$GVjdGVkID09ICRj$GFzc2VzWyd0YXhfY2xhc3NfaWQnXSkgJHN)$GVjdF9zdHJp$(cgLj0gJyBTRUxFQ1RFRCc7DQogICAgICAkc2VsZWN0X3N0c()uZyAuPSAnPicgLiAkY2xhc3N)c1sndGF4X2NsYXNzX3RpdGx)J10gLiAnPC9vcHRp$24+JzsNCiAgICB9DQogICAgJHN)$GVjdF9zdHJp$(cgLj0gJzwvc2VsZWN0Pic7DQoNCiAgICByZXR1c(4gJHN)$GVjdF9zdHJp$(c7DQogIH0NCg0KICB(dW5jdG)v$iB0ZXBfZ2VvX3pv$(VzX3B1$GxfZG93$igkcGFyYW1)dGVycywgJHN)$GVjdGVkID0gJycpIHsNCiAgICAkc2VsZWN0X3N0c()uZyA9ICc8c2VsZWN0ICcgLiAkcGFyYW1)dGVycyAuICc+JzsNCiAgICAke(9uZXNfcXV)cnkgPSB0ZXBfZGJfcXV)cnkoInN)$GVjdCBnZW9fe(9uZV9pZCwgZ2VvX3pv$(Vf$(FtZSB(c(9tICIgLiBUQUJMRV9HRU9fWk9ORVMgLiAiIG9yZGVyIGJ5IGd)$196$25)X25h$WUiKTsNCiAgICB3aG)sZSAoJHpv$(VzID0gdGVwX2RiX2Z)dGNoX2Fyc(F5KCR6$25)c19xdWVyeSkpIHsNCiAgICAgICRzZWx)Y3Rfc3RyaW5nIC49ICc8$3B0aW9uIHZh$HV)PSInIC4gJHpv$(VzWydnZW9fe(9uZV9pZCddIC4gJyInOw0KICAgICAgaWYgKCRzZWx)Y3R)ZCA9PSAke(9uZXN$J2d)$196$25)X2)kJ10pICRzZWx)Y3Rfc3RyaW5nIC49ICcgU0VMRUNURUQnOw0KICAgICAgJHN)$GVjdF9zdHJp$(cgLj0gJz4nIC4gJHpv$(VzWydnZW9fe(9uZV9uYW1)J10gLiAnPC9vcHRp$24+JzsNCiAgICB9DQogICAgJHN)$GVjdF9zdHJp$(cgLj0gJzwvc2VsZWN0Pic7DQoNCiAgICByZXR1c(4gJHN)$GVjdF9zdHJp$(c7DQogIH0NCg0KICB(dW5jdG)v$iB0ZXBfZ2V0X2d)$196$25)X25h$WUoJGd)$196$25)X2)kKSB7DQogICAgJHpv$(VzX3F1ZXJ5ID0gdGVwX2RiX3F1ZXJ5KCJzZWx)Y3QgZ2VvX3pv$(Vf$(FtZSB(c(9tICIgLiBUQUJMRV9HRU9fWk9ORVMgLiAiIHdoZXJ)IGd)$196$25)X2)kID0gJyIgLiAoaW50KSRnZW9fe(9uZV9pZCAuICInIik7DQoNCiAgICBpZiAoIXR)cF9kY)9udW1fc(93cygke(9uZXNfcXV)cnkpKSB7DQogICAgICAkZ2VvX3pv$(Vf$(FtZSA9ICRnZW9fe(9uZV9pZDsNCiAgICB9IGVsc2Ugew0KICAgICAgJHpv$(VzID0gdGVwX2RiX2Z)dGNoX2Fyc(F5KCR6$25)c19xdWVyeSk7DQogICAgICAkZ2VvX3pv$(Vf$(FtZSA9ICR6$25)c1snZ2VvX3pv$(Vf$(FtZSddOw0KICAgIH0NCg0KICAgIHJ)dHVy$iAkZ2VvX3pv$(Vf$(FtZTsNCiAgfQ0KDQogIGZ1$(N0aW9uIHR)cF9hZGRyZXNzX2Zvc(1hdCgkYWRkc(Vzc19($3JtYXRfaWQsICRhZGRyZXNzLCAkaHRt$CwgJGJv$G4sICR)$2xuKSB7DQogICAgJGFkZHJ)c3NfZ(9y$WF0X3F1ZXJ5ID0gdGVwX2RiX3F1ZXJ5KCJzZWx)Y3QgYWRkc(Vzc19($3JtYXQgYXMgZ(9y$WF0IGZy$20gIiAuIFRBQkxFX0FERFJFU1NfRk9STUFUIC4gIiB3aGVyZSBhZGRyZXNzX2Zvc(1hdF9pZCA9ICciIC4gKG)udCkkYWRkc(Vzc19($3JtYXRfaWQgLiAiJyIpOw0KICAgICRhZGRyZXNzX2Zvc(1hdCA9IHR)cF9kY)9(ZXRjaF9hcnJheSgkYWRkc(Vzc19($3JtYXRfcXV)cnkpOw0KDQogICAgJGNv$XBh$nkgPSB0ZXBf$3V0cHV0X3N0c()uZ19wc(90ZWN0ZWQoJGFkZHJ)c3N$J2Nv$XBh$nknXSk7DQogICAgJG5pcCA9IHR)cF9vdXRwdXRfc3RyaW5nX3By$3R)Y3R)ZCgkYWRkc(Vzc1sn$()wJ10pOw0KICAgIG)(IChpc3N)dCgkYWRkc(Vzc1snZ()yc3RuYW1)J10pICY(IHR)cF9u$3Rf$nVs$CgkYWRkc(Vzc1snZ()yc3RuYW1)J10pKSB7DQogICAgICAkZ()yc3RuYW1)ID0gdGVwX291dHB1dF9zdHJp$(dfcHJvdGVjdGVkKCRhZGRyZXNzWyd(aXJzdG5h$WUnXSk7DQogICAgICAk$GFzdG5h$WUgPSB0ZXBf$3V0cHV0X3N0c()uZ19wc(90ZWN0ZWQoJGFkZHJ)c3N$J2xhc3RuYW1)J10pOw0KICAgIH0gZWxzZW)(IChpc3N)dCgkYWRkc(Vzc1sn$(FtZSddKSA(JiB0ZXBf$(90X251$GwoJGFkZHJ)c3N$J25h$WUnXSkpIHsNCiAgICAgICR(aXJzdG5h$WUgPSB0ZXBf$3V0cHV0X3N0c()uZ19wc(90ZWN0ZWQoJGFkZHJ)c3N$J25h$WUnXSk7DQogICAgICAk$GFzdG5h$WUgPSAnJzsNCiAgICB9IGVsc2Ugew0KICAgICAgJGZpcnN0$(FtZSA9ICcnOw0KICAgICAgJGxhc3RuYW1)ID0gJyc7DQogICAgfQ0KICAgICRzdHJ)ZXQgPSB0ZXBf$3V0cHV0X3N0c()uZ19wc(90ZWN0ZWQoJGFkZHJ)c3N$J3N0c(V)dF9hZGRyZXNzJ10pOw0KICAgICRzdWJ1c(IgPSB0ZXBf$3V0cHV0X3N0c()uZ19wc(90ZWN0ZWQoJGFkZHJ)c3N$J3N1YnVyYiddKTsNCiAgICAkY2)0eSA9IHR)cF9vdXRwdXRfc3RyaW5nX3By$3R)Y3R)ZCgkYWRkc(Vzc1snY2)0eSddKTsNCiAgICAkc3RhdGUgPSB0ZXBf$3V0cHV0X3N0c()uZ19wc(90ZWN0ZWQoJGFkZHJ)c3N$J3N0YXR)J10pOw0KICAgIG)(IChpc3N)dCgkYWRkc(Vzc1snY291$nRyeV9pZCddKSA(JiB0ZXBf$(90X251$GwoJGFkZHJ)c3N$J2NvdW50cn)faWQnXSkpIHsNCiAgICAgICRj$3VudHJ5ID0gdGVwX2d)dF9j$3VudHJ5X25h$WUoJGFkZHJ)c3N$J2NvdW50cn)faWQnXSk7DQoNCiAgICAgIG)(IChpc3N)dCgkYWRkc(Vzc1sne(9uZV9pZCddKSA(JiB0ZXBf$(90X251$GwoJGFkZHJ)c3N$J3pv$(VfaWQnXSkpIHsNCiAgICAgICAgJHN0YXR)ID0gdGVwX2d)dF96$25)X2NvZGUoJGFkZHJ)c3N$J2NvdW50cn)faWQnXSwgJGFkZHJ)c3N$J3pv$(VfaWQnXSwgJHN0YXR)KTsNCiAgICAgIH0NCiAgICB9IGVsc2VpZiAoaXNzZXQoJGFkZHJ)c3N$J2NvdW50cnknXSkgJiYgdGVwX25vdF9udWxsKCRhZGRyZXNzWydj$3VudHJ5J10pKSB7DQogICAgICAkY291$nRyeSA9IHR)cF9vdXRwdXRfc3RyaW5nX3By$3R)Y3R)ZCgkYWRkc(Vzc1snY291$nRyeSddKTsNCiAgICB9IGVsc2Ugew0KICAgICAgJGNvdW50cnkgPSAnJzsNCiAgICB9DQogICAgJHBvc3Rj$2R)ID0gdGVwX291dHB1dF9zdHJp$(dfcHJvdGVjdGVkKCRhZGRyZXNzWydw$3N0Y29kZSddKTsNCiAgICAke()wID0gJHBvc3Rj$2R)Ow0KDQogICAgaWYgKCRodG1sKSB7DQovLyBIVE1MIE1vZGUNCiAgICAgICRIUiA9ICc8aHI+JzsNCiAgICAgICRociA9ICc8aHI+JzsNCiAgICAgIG)(ICggKCRi$2xuID09ICcnKSA(JiAoJGVv$G4gPT0gI)xuIikgKSB7IC8vIFZh$HV)cyBu$3Qgc3B)Y2)(aWVkLCB1c2Ugc(F0aW9uYWwgZGV(YXVsdHMNCiAgICAgICAgJENSID0gJzxicj4nOw0KICAgICAgICAkY3IgPSAnPGJyPic7DQogICAgICAgICR)$2xuID0gJGNyOw0KICAgICAgfSB)$HN)IHsgLy8gVXN)IHZh$HV)cyBzdXBw$G))ZA0KICAgICAgICAkQ1IgPSAkZW9s$iAuICRi$2xuOw0KICAgICAgICAkY3IgPSAkQ1I7DQogICAgICB9DQogICAgfSB)$HN)IHsNCi8vIFR)eHQgTW9kZQ0KICAgICAgJENSID0gJGVv$G47DQogICAgICAkY3IgPSAkQ1I7DQogICAgICAkSFIgPSAnLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSc7DQogICAgICAkaHIgPSAnLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSc7DQogICAgfQ0KDQogICAgJHN0YXR)Y29t$WEgPSAnJzsNCiAgICAkc3RyZWV0cyA9ICRzdHJ)ZXQ7DQogICAgaWYgKCRzdWJ1c(IgIT0gJycpICRzdHJ)ZXRzID0gJHN0c(V)dCAuICRjciAuICRzdWJ1c(I7DQogICAgaWYgKCRj$3VudHJ5ID09ICcnKSAkY291$nRyeSA9IHR)cF9vdXRwdXRfc3RyaW5nX3By$3R)Y3R)ZCgkYWRkc(Vzc1snY291$nRyeSddKTsNCiAgICBpZiAoJHN0YXR)ICE9ICcnKSAkc3RhdGVj$21tYSA9ICRzdGF0ZSAuICcsICc7DQoNCiAgICAkZ(10ID0gJGFkZHJ)c3NfZ(9y$WF0Wyd($3JtYXQnXTsNCiAgICB)d(FsKCJcJGFkZHJ)c3MgPSBcIiR($XRcIjsiKTsNCg0KICAgIG)(ICggdGVwX25vdF9udWxsKCRj$21wYW55KSApIHsNCi8vICAgICAgJGFkZHJ)c3MgPSAkY29tcGFueSAuICRjciAuICRhZGRyZXNzOw0KICAgIH0NCiAgICBpZiAoIChBQ0NPVU5UX05JUCA9PSAndHJ1ZScpICY(ICh0ZXBf$(90X251$GwoJG5pcCkpICkgew0KICAgICAgJGFkZHJ)c3MgPSAkY29tcGFueSAuICRjciAuICRuaXAgLiAkY3IgLiAkYWRkc(VzczsNCiAgICB9DQoNCiAgICByZXR1c(4gJGFkZHJ)c3M7DQogIH0NCg0KICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8NCiAgLy8NCiAgLy8gRnVuY3Rp$24gICAgOiB0ZXBfZ2V0X3pv$(VfY29kZQ0KICAvLw0KICAvLyBBc(d1$WVudHMgICA6IGNvdW50cnkgICAgICAgICAgIGNvdW50cnkgY29kZSBzdHJp$(cNCiAgLy8gICAgICAgICAgICAgICB6$25)ICAgICAgICAgICAgICBzdGF0ZS9wc(92aW5jZSB6$25)X2)kDQogIC8vICAgICAgICAgICAgICAgZGV(X3N0YXR)ICAgICAgICAgZGV(YXVsdCBzdHJp$(cgaWYge(9uZT09MA0KICAvLw0KICAvLyBSZXR1c(4gICAgICA6IHN0YXR)X3By$3ZfY29kZSAgIHN0YXR)L3By$3Zp$(N)IGNvZGUNCiAgLy8NCiAgLy8gRGVzY3JpcHRp$24gOiBGdW5jdG)v$iB0$yByZXRyaWV2ZSB0aGUgc3RhdGUvcHJvd()uY2UgY29kZSAoYXMgaW4gRkwgZ(9yIEZs$3JpZGEgZXRjKQ0KICAvLw0KICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8NCiAgZnVuY3Rp$24gdGVwX2d)dF96$25)X2NvZGUoJGNvdW50cnksICR6$25)LCAkZGV(X3N0YXR)KSB7DQoNCiAgICAkc3RhdGVfcHJvd)9xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IHpv$(VfY29kZSB(c(9tICIgLiBUQUJMRV9aT05FUyAuICIgd2h)c(Uge(9uZV9j$3VudHJ5X2)kID0gJyIgLiAoaW50KSRj$3VudHJ5IC4gIicgYW5kIHpv$(VfaWQgPSAnIiAuIChp$nQpJHpv$(UgLiAiJyIpOw0KDQogICAgaWYgKCF0ZXBfZGJf$nVtX3Jvd3MoJHN0YXR)X3By$3ZfcXV)cnkpKSB7DQogICAgICAkc3RhdGVfcHJvd)9j$2R)ID0gJGR)Z)9zdGF0ZTsNCiAgICB9DQogICAgZWxzZSB7DQogICAgICAkc3RhdGVfcHJvd)92YWx1ZXMgPSB0ZXBfZGJfZ(V0Y2hfYXJyYXkoJHN0YXR)X3By$3ZfcXV)cnkpOw0KICAgICAgJHN0YXR)X3By$3ZfY29kZSA9ICRzdGF0ZV9wc(92X3Zh$HV)c1sne(9uZV9j$2R)J107DQogICAgfQ0KICAgIA0KICAgIHJ)dHVy$iAkc3RhdGVfcHJvd)9j$2R)Ow0KICB9DQoNCiAgZnVuY3Rp$24gdGVwX2d)dF91cHJpZCgkcHJpZCwgJHBhc(Ftcykgew0KICAgICR1cHJpZCA9ICRwc()kOw0KICAgIG)(ICggKG)zX2Fyc(F5KCRwYXJh$XMpKSA(JiAoIXN0cnN0cigkcHJpZCwgJ3snKSkgKSB7DQogICAgICB3aG)sZSAo$G)zdCgk$3B0aW9uLCAkd(FsdWUpID0gZWFjaCgkcGFyYW1zKSkgew0KICAgICAgICAkdXByaWQgPSAkdXByaWQgLiAneycgLiAk$3B0aW9uIC4gJ30nIC4gJHZh$HV)Ow0KICAgICAgfQ0KICAgIH0NCg0KICAgIHJ)dHVy$iAkdXByaWQ7DQogIH0NCg0KICB(dW5jdG)v$iB0ZXBfZ2V0X3ByaWQoJHVwc()kKSB7DQogICAgJHBpZWN)cyA9IGV4cGxvZGUoJ3snLCAkdXByaWQpOw0KDQogICAgc(V0dXJuICRwaWVjZXN$MF07DQogIH0NCg0KICB(dW5jdG)v$iB0ZXBfZ2V0X2xh$(d1YWd)cygpIHsNCiAgICAk$GFuZ3VhZ2VzX3F1ZXJ5ID0gdGVwX2RiX3F1ZXJ5KCJzZWx)Y3Qg$GFuZ3VhZ2VzX2)kLCBuYW1)LCBj$2R)LCBp$WFnZSwgZG)yZWN0$3J5IGZy$20gIiAuIFRBQkxFX0xBTkdVQUdFUyAuICIg$3JkZXIgYnkgc29ydF9vc(R)ciIpOw0KICAgIHdoaWx)ICgk$GFuZ3VhZ2VzID0gdGVwX2RiX2Z)dGNoX2Fyc(F5KCRsYW5ndWFnZXNfcXV)cnkpKSB7DQogICAgICAk$GFuZ3VhZ2VzX2Fyc(F5W10gPSBhcnJheSgnaWQnID0+ICRsYW5ndWFnZXN$J2xh$(d1YWd)c19pZCddLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ25h$WUnID0+ICRsYW5ndWFnZXN$J25h$WUnXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdj$2R)JyA9PiAk$GFuZ3VhZ2VzWydj$2R)J10sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaW1hZ2UnID0+ICRsYW5ndWFnZXN$J2)tYWd)J10sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZG)yZWN0$3J5JyA9PiAk$GFuZ3VhZ2VzWydkaXJ)Y3RvcnknXSk7DQogICAgfQ0KDQogICAgc(V0dXJuICRsYW5ndWFnZXNfYXJyYXk7DQogIH0NCg0KICB(dW5jdG)v$iB0ZXBfZ2V0X2NhdGVn$3J5X25h$WUoJGNhdGVn$3J5X2)kLCAk$GFuZ3VhZ2VfaWQpIHsNCiAgICAkY2F0ZWdvcn)fcXV)cnkgPSB0ZXBfZGJfcXV)cnkoInN)$GVjdCBjYXR)Z29yaWVzX25h$WUgZnJv$SAiIC4gVEFCTEVfQ0FURUdPUk)FU19ERVNDUk)QVE)PTiAuICIgd2h)c(UgY2F0ZWdvc())c19pZCA9ICciIC4gKG)udCkkY2F0ZWdvcn)faWQgLiAiJyBh$(Qg$GFuZ3VhZ2VfaWQgPSAnIiAuIChp$nQpJGxh$(d1YWd)X2)kIC4gIiciKTsNCiAgICAkY2F0ZWdvcnkgPSB0ZXBfZGJfZ(V0Y2hfYXJyYXkoJGNhdGVn$3J5X3F1ZXJ5KTsNCg0KICAgIHJ)dHVy$iAkY2F0ZWdvcn)$J2NhdGVn$3JpZXNf$(FtZSddOw0KICB9DQoNCiAgZnVuY3Rp$24gdGVwX2d)dF9vc(R)cnNfc3RhdHVzX25h$WUoJG9yZGVyc19zdGF0dXNfaWQsICRsYW5ndWFnZV9pZCA9ICcnKSB7DQogICAgZ2xvY(FsICRsYW5ndWFnZXNfaWQ7DQoNCiAgICBpZiAoISRsYW5ndWFnZV9pZCkgJGxh$(d1YWd)X2)kID0gJGxh$(d1YWd)c19pZDsNCiAgICAk$3JkZXJzX3N0YXR1c19xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IG9yZGVyc19zdGF0dXNf$(FtZSB(c(9tICIgLiBUQUJMRV9PUkRFU)NfU1RBVFVTIC4gIiB3aGVyZSBvc(R)cnNfc3RhdHVzX2)kID0gJyIgLiAoaW50KSRvc(R)cnNfc3RhdHVzX2)kIC4gIicgYW5kIGxh$(d1YWd)X2)kID0gJyIgLiAoaW50KSRsYW5ndWFnZV9pZCAuICInIik7DQogICAgJG9yZGVyc19zdGF0dXMgPSB0ZXBfZGJfZ(V0Y2hfYXJyYXkoJG9yZGVyc19zdGF0dXNfcXV)cnkpOw0KDQogICAgc(V0dXJuICRvc(R)cnNfc3RhdHVzWydvc(R)cnNfc3RhdHVzX25h$WUnXTsNCiAgfQ0KDQogIGZ1$(N0aW9uIHR)cF9nZXRf$3JkZXJzX3N0YXR1cygpIHsNCiAgICBn$G9iYWwgJGxh$(d1YWd)c19pZDsNCg0KICAgICRvc(R)cnNfc3RhdHVzX2Fyc(F5ID0gYXJyYXkoKTsNCiAgICAk$3JkZXJzX3N0YXR1c19xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IG9yZGVyc19zdGF0dXNfaWQsIG9yZGVyc19zdGF0dXNf$(FtZSB(c(9tICIgLiBUQUJMRV9PUkRFU)NfU1RBVFVTIC4gIiB3aGVyZSBsYW5ndWFnZV9pZCA9ICciIC4gKG)udCkk$GFuZ3VhZ2VzX2)kIC4gIicg$3JkZXIgYnkg$3JkZXJzX3N0YXR1c19pZCIpOw0KICAgIHdoaWx)ICgk$3JkZXJzX3N0YXR1cyA9IHR)cF9kY)9(ZXRjaF9hcnJheSgk$3JkZXJzX3N0YXR1c19xdWVyeSkpIHsNCiAgICAgICRvc(R)cnNfc3RhdHVzX2Fyc(F5W10gPSBhcnJheSgnaWQnID0+ICRvc(R)cnNfc3RhdHVzWydvc(R)cnNfc3RhdHVzX2)kJ10sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3R)eHQnID0+ICRvc(R)cnNfc3RhdHVzWydvc(R)cnNfc3RhdHVzX25h$WUnXSk7DQogICAgfQ0KDQogICAgc(V0dXJuICRvc(R)cnNfc3RhdHVzX2Fyc(F5Ow0KICB9DQoNCiAgZnVuY3Rp$24gdGVwX2d)dF9wc(9kdWN0c19uYW1)KCRwc(9kdWN0X2)kLCAk$GFuZ3VhZ2VfaWQgPSAwKSB7DQogICAgZ2xvY(FsICRsYW5ndWFnZXNfaWQ7DQoNCiAgICBpZiAoJGxh$(d1YWd)X2)kID09IDApICRsYW5ndWFnZV9pZCA9ICRsYW5ndWFnZXNfaWQ7DQogICAgJHBy$2R1Y3RfcXV)cnkgPSB0ZXBfZGJfcXV)cnkoInN)$GVjdCBwc(9kdWN0c19uYW1)IGZy$20gIiAuIFRBQkxFX1BST0RVQ1RTX0RFU0NSSVBUSU9OIC4gIiB3aGVyZSBwc(9kdWN0c19pZCA9ICciIC4gKG)udCkkcHJvZHVjdF9pZCAuICInIGFuZCBsYW5ndWFnZV9pZCA9ICciIC4gKG)udCkk$GFuZ3VhZ2VfaWQgLiAiJyIpOw0KICAgICRwc(9kdWN0ID0gdGVwX2RiX2Z)dGNoX2Fyc(F5KCRwc(9kdWN0X3F1ZXJ5KTsNCg0KICAgIHJ)dHVy$iAkcHJvZHVjdFsncHJvZHVjdHNf$(FtZSddOw0KICB9DQoNCiAgZnVuY3Rp$24gdGVwX2d)dF9wc(9kdWN0c19kZXNjc()wdG)v$igkcHJvZHVjdF9pZCwgJGxh$(d1YWd)X2)kKSB7DQogICAgJHBy$2R1Y3RfcXV)cnkgPSB0ZXBfZGJfcXV)cnkoInN)$GVjdCBwc(9kdWN0c19kZXNjc()wdG)v$iB(c(9tICIgLiBUQUJMRV9QUk9EVUNUU19ERVNDUk)QVE)PTiAuICIgd2h)c(UgcHJvZHVjdHNfaWQgPSAnIiAuIChp$nQpJHBy$2R1Y3RfaWQgLiAiJyBh$(Qg$GFuZ3VhZ2VfaWQgPSAnIiAuIChp$nQpJGxh$(d1YWd)X2)kIC4gIiciKTsNCiAgICAkcHJvZHVjdCA9IHR)cF9kY)9(ZXRjaF9hcnJheSgkcHJvZHVjdF9xdWVyeSk7DQoNCiAgICByZXR1c(4gJHBy$2R1Y3R$J3By$2R1Y3RzX2R)c2NyaXB0aW9uJ107DQogIH0NCg0KICB(dW5jdG)v$iB0ZXBfZ2V0X3By$2R1Y3RzX3No$3J0X2R)c2NyaXB0aW9uKCRwc(9kdWN0X2)kLCAk$GFuZ3VhZ2VfaWQpIHsNCiAgICAkcHJvZHVjdF9xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IHBy$2R1Y3RzX3No$3J0X2R)c2NyaXB0aW9uIGZy$20gIiAuIFRBQkxFX1BST0RVQ1RTX0RFU0NSSVBUSU9OIC4gIiB3aGVyZSBwc(9kdWN0c19pZCA9ICciIC4gKG)udCkkcHJvZHVjdF9pZCAuICInIGFuZCBsYW5ndWFnZV9pZCA9ICciIC4gKG)udCkk$GFuZ3VhZ2VfaWQgLiAiJyIpOw0KICAgICRwc(9kdWN0ID0gdGVwX2RiX2Z)dGNoX2Fyc(F5KCRwc(9kdWN0X3F1ZXJ5KTsNCg0KICAgIHJ)dHVy$iAkcHJvZHVjdFsncHJvZHVjdHNfc2hvcnRfZGVzY3JpcHRp$24nXTsNCiAgfQ0KDQogIGZ1$(N0aW9uIHR)cF9nZXRfcHJvZHVjdHNfdXJsKCRwc(9kdWN0X2)kLCAk$GFuZ3VhZ2VfaWQpIHsNCiAgICAkcHJvZHVjdF9xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IHBy$2R1Y3RzX3Vy$CB(c(9tICIgLiBUQUJMRV9QUk9EVUNUU19ERVNDUk)QVE)PTiAuICIgd2h)c(UgcHJvZHVjdHNfaWQgPSAnIiAuIChp$nQpJHBy$2R1Y3RfaWQgLiAiJyBh$(Qg$GFuZ3VhZ2VfaWQgPSAnIiAuIChp$nQpJGxh$(d1YWd)X2)kIC4gIiciKTsNCiAgICAkcHJvZHVjdCA9IHR)cF9kY)9(ZXRjaF9hcnJheSgkcHJvZHVjdF9xdWVyeSk7DQoNCiAgICByZXR1c(4gJHBy$2R1Y3R$J3By$2R1Y3RzX3Vy$CddOw0KICB9DQoNCi8vLy8NCi8vIFJ)dHVy$iB0aGUg$WFudWZhY3R1c(VycyBVUkwgaW4gdGh)IG5)ZWR)ZCBsYW5ndWFnZQ0KLy8gVEFCTEVTOiBtYW51Z(FjdHVyZXJzX2)uZ(8NCiAgZnVuY3Rp$24gdGVwX2d)dF9tYW51Z(FjdHVyZXJfdXJsKCRtYW51Z(FjdHVyZXJfaWQsICRsYW5ndWFnZV9pZCkgew0KICAgICRtYW51Z(FjdHVyZXJfcXV)cnkgPSB0ZXBfZGJfcXV)cnkoInN)$GVjdCBtYW51Z(FjdHVyZXJzX3Vy$CB(c(9tICIgLiBUQUJMRV9NQU5VRkFDVFVSRVJTX0)ORk8gLiAiIHdoZXJ)IG1h$nV(YWN0dXJ)cnNfaWQgPSAnIiAuIChp$nQpJG1h$nV(YWN0dXJ)c)9pZCAuICInIGFuZCBsYW5ndWFnZXNfaWQgPSAnIiAuIChp$nQpJGxh$(d1YWd)X2)kIC4gIiciKTsNCiAgICAk$WFudWZhY3R1c(VyID0gdGVwX2RiX2Z)dGNoX2Fyc(F5KCRtYW51Z(FjdHVyZXJfcXV)cnkpOw0KDQogICAgc(V0dXJuICRtYW51Z(FjdHVyZXJ$J21h$nV(YWN0dXJ)cnNfdXJsJ107DQogIH0NCg0KLy8vLw0KLy8gV3JhcHB)ciB($3IgY2xhc3NfZXhpc3RzKCkgZnVuY3Rp$24NCi8vIFRoaXMgZnVuY3Rp$24gaXMg$(90IGF2YW)sYWJsZSBp$iBh$GwgUEhQIHZ)cnNp$25zIHNvIHd)IHR)c3QgaXQgY(V($3J)IHVzaW5nIG)0Lg0KICB(dW5jdG)v$iB0ZXBfY2xhc3NfZXhpc3RzKCRj$GFzc19uYW1)KSB7DQogICAgaWYgKGZ1$(N0aW9uX2V4aXN0cygnY2xhc3NfZXhpc3RzJykpIHsNCiAgICAgIHJ)dHVy$iBj$GFzc19)eG)zdHMoJGNsYXNzX25h$WUpOw0KICAgIH0gZWxzZSB7DQogICAgICByZXR1c(4gdHJ1ZTsNCiAgICB9DQogIH0NCg0KLy8vLw0KLy8gQ291$nQgaG93IG1h$nkgcHJvZHVjdHMgZXhpc3QgaW4gYSBjYXR)Z29yeQ0KLy8gVEFCTEVTOiBwc(9kdWN0cywgcHJvZHVjdHNfdG9fY2F0ZWdvc())cywgY2F0ZWdvc())cw0KICB(dW5jdG)v$iB0ZXBfcHJvZHVjdHNfaW5fY2F0ZWdvcn)fY291$nQoJGNhdGVn$3JpZXNfaWQsICRp$(NsdWR)X2R)YWN0aXZhdGVkID0gZ(Fsc2UpIHsNCiAgICAkcHJvZHVjdHNfY291$nQgPSAwOw0KDQogICAgaWYgKCRp$(NsdWR)X2R)YWN0aXZhdGVkKSB7DQogICAgICAkcHJvZHVjdHNfcXV)cnkgPSB0ZXBfZGJfcXV)cnkoInN)$GVjdCBj$3VudCgqKSBhcyB0$3Rh$CB(c(9tICIgLiBUQUJMRV9QUk9EVUNUUyAuICIgcCwgIiAuIFRBQkxFX1BST0RVQ1RTX1RPX0NBVEVHT1JJRVMgLiAiIHAyYyB3aGVyZSBwLnBy$2R1Y3RzX2)kID0gcDJjLnBy$2R1Y3RzX2)kIGFuZCBwM(MuY2F0ZWdvc())c19pZCA9ICciIC4gKG)udCkkY2F0ZWdvc())c19pZCAuICInIik7DQogICAgfSB)$HN)IHsNCiAgICAgICRwc(9kdWN0c19xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IGNvdW50KCopIGFzIHRvdGFsIGZy$20gIiAuIFRBQkxFX1BST0RVQ1RTIC4gIiBwLCAiIC4gVEFCTEVfUFJPRFVDVFNfVE9fQ0FURUdPUk)FUyAuICIgcDJjIHdoZXJ)IHAucHJvZHVjdHNfaWQgPSBwM(MucHJvZHVjdHNfaWQgYW5kIHAucHJvZHVjdHNfc3RhdHVzID0gJzEnIGFuZCBwM(MuY2F0ZWdvc())c19pZCA9ICciIC4gKG)udCkkY2F0ZWdvc())c19pZCAuICInIik7DQogICAgfQ0KDQogICAgJHBy$2R1Y3RzID0gdGVwX2RiX2Z)dGNoX2Fyc(F5KCRwc(9kdWN0c19xdWVyeSk7DQoNCiAgICAkcHJvZHVjdHNfY291$nQgKz0gJHBy$2R1Y3RzWyd0$3Rh$CddOw0KDQogICAgJGNoaWxkc19xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IGNhdGVn$3JpZXNfaWQgZnJv$SAiIC4gVEFCTEVfQ0FURUdPUk)FUyAuICIgd2h)c(UgcGFyZW50X2)kID0gJyIgLiAoaW50KSRjYXR)Z29yaWVzX2)kIC4gIiciKTsNCiAgICBpZiAodGVwX2RiX251$V9y$3dzKCRjaG)sZHNfcXV)cnkpKSB7DQogICAgICB3aG)sZSAoJGNoaWxkcyA9IHR)cF9kY)9(ZXRjaF9hcnJheSgkY2hp$GRzX3F1ZXJ5KSkgew0KICAgICAgICAkcHJvZHVjdHNfY291$nQgKz0gdGVwX3By$2R1Y3RzX2)uX2NhdGVn$3J5X2NvdW50KCRjaG)sZHN$J2NhdGVn$3JpZXNfaWQnXSwgJG)uY2x1ZGVfZGVhY3Rpd(F0ZWQpOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIHJ)dHVy$iAkcHJvZHVjdHNfY291$nQ7DQogIH0NCg0KLy8vLw0KLy8gQ291$nQgaG93IG1h$nkgc3ViY2F0ZWdvc())cyB)eG)zdCBp$iBhIGNhdGVn$3J5DQovLyBUQUJMRVM6IGNhdGVn$3JpZXMNCiAgZnVuY3Rp$24gdGVwX2NoaWxkc19p$)9jYXR)Z29yeV9j$3VudCgkY2F0ZWdvc())c19pZCkgew0KICAgICRjYXR)Z29yaWVzX2NvdW50ID0gMDsNCg0KICAgICRjYXR)Z29yaWVzX3F1ZXJ5ID0gdGVwX2RiX3F1ZXJ5KCJzZWx)Y3QgY2F0ZWdvc())c19pZCB(c(9tICIgLiBUQUJMRV9DQVRFR09SSUVTIC4gIiB3aGVyZSBwYXJ)$nRfaWQgPSAnIiAuIChp$nQpJGNhdGVn$3JpZXNfaWQgLiAiJyIpOw0KICAgIHdoaWx)ICgkY2F0ZWdvc())cyA9IHR)cF9kY)9(ZXRjaF9hcnJheSgkY2F0ZWdvc())c19xdWVyeSkpIHsNCiAgICAgICRjYXR)Z29yaWVzX2NvdW50Kys7DQogICAgICAkY2F0ZWdvc())c19j$3VudCArPSB0ZXBfY2hp$GRzX2)uX2NhdGVn$3J5X2NvdW50KCRjYXR)Z29yaWVzWydjYXR)Z29yaWVzX2)kJ10pOw0KICAgIH0NCg0KICAgIHJ)dHVy$iAkY2F0ZWdvc())c19j$3VudDsNCiAgfQ0KDQovLy8vDQovLyBSZXR1c(5zIGFuIGFyc(F5IHdpdGggY291$nRyaWVzDQovLyBUQUJMRVM6IGNvdW50c())cw0KICB(dW5jdG)v$iB0ZXBfZ2V0X2NvdW50c())cygkZGV(YXVsdCA9ICcnKSB7DQogICAgJGNvdW50c())c19hcnJheSA9IGFyc(F5KCk7DQogICAgaWYgKCRkZWZhdWx0KSB7DQogICAgICAkY291$nRyaWVzX2Fyc(F5W10gPSBhcnJheSgnaWQnID0+ICcnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3R)eHQnID0+ICRkZWZhdWx0KTsNCiAgICB9DQogICAgJGNvdW50c())c19xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IGNvdW50c())c19pZCwgY291$nRyaWVzX25h$WUgZnJv$SAiIC4gVEFCTEVfQ09VT)RSSUVTIC4gIiBvc(R)ciBieSBj$3VudHJpZXNf$(FtZSIpOw0KICAgIHdoaWx)ICgkY291$nRyaWVzID0gdGVwX2RiX2Z)dGNoX2Fyc(F5KCRj$3VudHJpZXNfcXV)cnkpKSB7DQogICAgICAkY291$nRyaWVzX2Fyc(F5W10gPSBhcnJheSgnaWQnID0+ICRj$3VudHJpZXN$J2NvdW50c())c19pZCddLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3R)eHQnID0+ICRj$3VudHJpZXN$J2NvdW50c())c19uYW1)J10pOw0KICAgIH0NCg0KICAgIHJ)dHVy$iAkY291$nRyaWVzX2Fyc(F5Ow0KICB9DQoNCi8vLy8NCi8vIHJ)dHVy$iBh$iBhcnJheSB3aXRoIGNvdW50cnkge(9uZXMNCiAgZnVuY3Rp$24gdGVwX2d)dF9j$3VudHJ5X3pv$(VzKCRj$3VudHJ5X2)kKSB7DQogICAgJHpv$(VzX2Fyc(F5ID0gYXJyYXkoKTsNCiAgICAke(9uZXNfcXV)cnkgPSB0ZXBfZGJfcXV)cnkoInN)$GVjdCB6$25)X2)kLCB6$25)X25h$WUgZnJv$SAiIC4gVEFCTEVfWk9ORVMgLiAiIHdoZXJ)IHpv$(VfY291$nRyeV9pZCA9ICciIC4gKG)udCkkY291$nRyeV9pZCAuICInIG9yZGVyIGJ5IHpv$(Vf$(FtZSIpOw0KICAgIHdoaWx)ICgke(9uZXMgPSB0ZXBfZGJfZ(V0Y2hfYXJyYXkoJHpv$(VzX3F1ZXJ5KSkgew0KICAgICAgJHpv$(VzX2Fyc(F5W10gPSBhcnJheSgnaWQnID0+ICR6$25)c1sne(9uZV9pZCddLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndGV4dCcgPT4gJHpv$(VzWyd6$25)X25h$WUnXSk7DQogICAgfQ0KDQogICAgc(V0dXJuICR6$25)c19hcnJheTsNCiAgfQ0KDQogIGZ1$(N0aW9uIHR)cF9wc(VwYXJ)X2NvdW50cn)fe(9uZXNfcHVs$F9k$3duKCRj$3VudHJ5X2)kID0gJycpIHsNCi8vIHByZXN)dCB0aGUgd2)kdGgg$2YgdGh)IGRy$3AtZG93$iB($3IgT(V0c2NhcGUNCiAgICAkcHJ)ID0gJyc7DQogICAgaWYgKCAoIXR)cF9ic(93c2VyX2R)dGVjdCgnTVNJRScpKSA(JiAodGVwX2Jy$3dzZXJfZGV0ZWN0KCdN$3pp$GxhLzQnKSkgKSB7DQogICAgICB($3IgKCRpPTA7ICRpPDQ1OyAkaSsrKSAkcHJ)IC49ICc($(JzcDsnOw0KICAgIH0NCg0KICAgICR6$25)cyA9IHR)cF9nZXRfY291$nRyeV96$25)cygkY291$nRyeV9pZCk7DQoNCiAgICBpZiAoc2)6ZW9(KCR6$25)cykgPiAwKSB7DQogICAgICAke(9uZXNfc2VsZWN0ID0gYXJyYXkoYXJyYXkoJ2)kJyA9PiAnJywgJ3R)eHQnID0+IFBMRUFTRV9TRUxFQ1QpKTsNCiAgICAgICR6$25)cyA9IGFyc(F5X21)c(d)KCR6$25)c19zZWx)Y3QsICR6$25)cyk7DQogICAgfSB)$HN)IHsNCiAgICAgICR6$25)cyA9IGFyc(F5KGFyc(F5KCdpZCcgPT4gJycsICd0ZXh0JyA9PiBUWVBFX0JFTE9XKSk7DQovLyBjc(VhdGUgZHVt$Xkg$3B0aW9ucyB($3IgT(V0c2NhcGUgdG8gcHJ)c2V0IHRoZSBoZW)naHQg$2YgdGh)IGRy$3AtZG93$g0KICAgICAgaWYgKCAoIXR)cF9ic(93c2VyX2R)dGVjdCgnTVNJRScpKSA(JiAodGVwX2Jy$3dzZXJfZGV0ZWN0KCdN$3pp$GxhLzQnKSkgKSB7DQogICAgICAgIGZvciAoJGk9MDsgJGk8OTsgJGkrKykgew0KICAgICAgICAgICR6$25)c1tdID0gYXJyYXkoJ2)kJyA9PiAnJywgJ3R)eHQnID0+ICRwc(UpOw0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KDQogICAgc(V0dXJuICR6$25)czsNCiAgfQ0KDQovLy8vDQovLyBHZXQg$G)zdCBvZiBhZGRyZXNzX2Zvc(1hdF9pZCdzDQogIGZ1$(N0aW9uIHR)cF9nZXRfYWRkc(Vzc19($3JtYXRzKCkgew0KICAgICRhZGRyZXNzX2Zvc(1hdF9xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IGFkZHJ)c3NfZ(9y$WF0X2)kIGZy$20gIiAuIFRBQkxFX0FERFJFU1NfRk9STUFUIC4gIiBvc(R)ciBieSBhZGRyZXNzX2Zvc(1hdF9pZCIpOw0KICAgICRhZGRyZXNzX2Zvc(1hdF9hcnJheSA9IGFyc(F5KCk7DQogICAgd2hp$GUgKCRhZGRyZXNzX2Zvc(1hdF92YWx1ZXMgPSB0ZXBfZGJfZ(V0Y2hfYXJyYXkoJGFkZHJ)c3NfZ(9y$WF0X3F1ZXJ5KSkgew0KICAgICAgJGFkZHJ)c3NfZ(9y$WF0X2Fyc(F5W10gPSBhcnJheSgnaWQnID0+ICRhZGRyZXNzX2Zvc(1hdF92YWx1ZXN$J2FkZHJ)c3NfZ(9y$WF0X2)kJ10sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0ZXh0JyA9PiAkYWRkc(Vzc19($3JtYXRfd(FsdWVzWydhZGRyZXNzX2Zvc(1hdF9pZCddKTsNCiAgICB9DQogICAgc(V0dXJuICRhZGRyZXNzX2Zvc(1hdF9hcnJheTsNCiAgfQ0KDQovLy8vDQovLyBB$G)hcyB(dW5jdG)v$iB($3IgU3Rvc(UgY29uZ()ndXJhdG)v$iB2YWx1ZXMgaW4gdGh)IEFk$W)uaXN0c(F0aW9uIFRv$2wNCiAgZnVuY3Rp$24gdGVwX2N(Z19wdWxsX2Rvd25fY291$nRyeV9saXN0KCRj$3VudHJ5X2)kKSB7DQogICAgc(V0dXJuIHR)cF9kc(F3X3B1$GxfZG93$)9tZW51KCdj$25(aWd1c(F0aW9uX3Zh$HV)JywgdGVwX2d)dF9j$3VudHJpZXMoKSwgJGNvdW50cn)faWQpOw0KICB9DQoNCiAgZnVuY3Rp$24gdGVwX2N(Z19wdWxsX2Rvd25fe(9uZV9saXN0KCR6$25)X2)kKSB7DQogICAgc(V0dXJuIHR)cF9kc(F3X3B1$GxfZG93$)9tZW51KCdj$25(aWd1c(F0aW9uX3Zh$HV)JywgdGVwX2d)dF9j$3VudHJ5X3pv$(VzKFNUT1JFX0NPVU5UU)kpLCAke(9uZV9pZCk7DQogIH0NCg0KICB(dW5jdG)v$iB0ZXBfY2ZnX3B1$GxfZG93$)90YXhfY2xhc3N)cygkdGF4X2NsYXNzX2)kLCAka2V5ID0gJycpIHsNCiAgICAk$(FtZSA9ICgoJGt)eSkgPyAnY29uZ()ndXJhdG)v$)snIC4gJGt)eSAuICddJyA6ICdj$25(aWd1c(F0aW9uX3Zh$HV)Jyk7DQoNCiAgICAkdGF4X2NsYXNzX2Fyc(F5ID0gYXJyYXkoYXJyYXkoJ2)kJyA9PiAnMCcsICd0ZXh0JyA9PiBURVhUX05PTkUpKTsNCiAgICAkdGF4X2NsYXNzX3F1ZXJ5ID0gdGVwX2RiX3F1ZXJ5KCJzZWx)Y3QgdGF4X2NsYXNzX2)kLCB0YXhfY2xhc3NfdG)0$GUgZnJv$SAiIC4gVEFCTEVfVEFYX0NMQVNTIC4gIiBvc(R)ciBieSB0YXhfY2xhc3NfdG)0$GUiKTsNCiAgICB3aG)sZSAoJHRheF9j$GFzcyA9IHR)cF9kY)9(ZXRjaF9hcnJheSgkdGF4X2NsYXNzX3F1ZXJ5KSkgew0KICAgICAgJHRheF9j$GFzc19hcnJheVtdID0gYXJyYXkoJ2)kJyA9PiAkdGF4X2NsYXNzWyd0YXhfY2xhc3NfaWQnXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0ZXh0JyA9PiAkdGF4X2NsYXNzWyd0YXhfY2xhc3NfdG)0$GUnXSk7DQogICAgfQ0KDQogICAgc(V0dXJuIHR)cF9kc(F3X3B1$GxfZG93$)9tZW51KCRuYW1)LCAkdGF4X2NsYXNzX2Fyc(F5LCAkdGF4X2NsYXNzX2)kKTsNCiAgfQ0KDQovLysrKysgUVQgUHJvOiBCZWdp$iBDaGFuZ2VkIGNvZGUNCi8vLy8NCi8vIEZ1$(N0aW9uIHRvIGJ1aWxkIG1)$nUg$2YgYXZhaWxhY(x)IGNsYXNzIGZp$GVzIGdpd(VuIGEgZ()sZSBwc(V(aXgNCi8vIFVzZWQgZ(9yIGNv$(ZpZ3VyaW5nIHBsdWctaW5zIGZvciBwc(9kdWN0IG)uZ(9y$WF0aW9uIGF0dHJpYnV0ZXMNCiAgZnVuY3Rp$24gdGVwX2N(Z19wdWxsX2Rvd25fY2xhc3NfZ()sZXMoJHByZWZpeCwgJGN1cnJ)$nRfZ()sZSkgew0KICAgICRkPURJU)9GU19DQVRBTE9HIC4gRE)SX1dTX0NMQVNTRVM7DQogICAgJGZ1$(N0aW9uX2Rpc(VjdG9yeSA9IGRpciAoJGQpOw0KDQogICAgd2hp$GUgKGZh$HN)ICE9PSAoJGZ1$(N0aW9uID0gJGZ1$(N0aW9uX2Rpc(VjdG9yeS0+c(VhZCgpKSkgew0KICAgICAgaWYgKHByZWdf$WF0Y2goJy9eJy4kcHJ)Z()4LicoLispXC5waHAkLycsJGZ1$(N0aW9uLCR(dW5jdG)v$)9uYW1)KSkgew0KICAgICAgICAgICR(aWx)X2xpc3R$XT1hcnJheSgnaWQnPT4kZnVuY3Rp$25f$(FtZVsxXSwgJ3R)eHQnPT4kZnVuY3Rp$25f$(FtZVsxXSk7DQogICAgICB9DQogICAgfQ0KICAgICR(dW5jdG)v$)9kaXJ)Y3RvcnktP(Ns$3N)KCk7DQoNCiAgICByZXR1c(4gdGVwX2RyYXdfcHVs$F9k$3duX21)$nUoJ2Nv$(ZpZ3VyYXRp$25fd(FsdWUnLCAkZ()sZV9saXN0LCAkY3Vyc(VudF9(aWx)KTsNCiAgfQ0KDQovLysrKysgUVQgUHJvOiBF$(QgQ2hh$(d)ZCBD$2R)DQoNCi8vRnVua2phIG9kY3p5dHVqYWNhIGthdGFs$2cgc3phY(xv$(93DQogIGZ1$(N0aW9uIHR)cF9jZ(dfcHVs$F9k$3duX3R)$XBsYXR)X2Zp$GVzKCR(aWx)KSB7DQoJCSRkPURJU)9GU19DQVRBTE9HIC4gJ3R)$XBsYXR)cy8nOw0KDQoJICBpZiAoJGhh$(RsZSA9IG9wZW5kaXIoJGQpKSB7DQogICAgICAvKiBUaG)zIG)zIHRoZSBj$3JyZWN0IHdheSB0$yBs$29wIG92ZXIgdGh)IGRpc(VjdG9yeS4gKi8NCiAgICAgIHdoaWx)ICh(YWxzZSAhPT0gKCR(aWx)ID0gc(VhZGRpcigkaGFuZGx)KSkpIHsNCiAgICAJICBpZihpc19kaXIoJGQgLiAkZ()sZSkgJiYgc3RyaXN0cigkY3Vyc)90ZW1w$GF0ZXMuIi4sLi4sY29udGVudCxDV)MiLCAkZ()sZSApID09IEZBTFNFKSB7DQoJICAgIAkJaWYgKCAoJGZp$GUgPT0gJ2R)Z(F1$HQnKSB8fCAoJGZp$GUgPT0gJ2JveGVzJykgfHwgKCR(aWx)ID09ICcuc3ZuJykgKSB7DQoJICAgIAkJfSB)$HN)IHsNCgkgICAgCQkJJGRpcnN$XSA9ICR(aWx)Ow0KCSAgICAgIAkJJGRpcnNfYXJyYX)$XSA9IGFyc(F5KCdpZCcgPT4gJGZp$GUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndGV4dCcgPT4gJGZp$GUpOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCg0KICAgIHNvcnQoJGRpcnNfYXJyYXkpOw0KCQ)j$G9zZWRpcigkaGFuZGx)KTsNCiAvLyAgICRoYW5k$GUtP(Ns$3N)KCk7DQoNCiAgICByZXR1c(4gdGVwX2RyYXdfcHVs$F9k$3duX21)$nUoJ2Nv$(ZpZ3VyYXRp$25fd(FsdWUnLCAkZG)yc19hcnJheSk7DQoJfQ0KDQovLw0KDQovLy8vDQovLyBGdW5jdG)v$iB0$yByZWFkIG)uIHR)eHQgYXJ)YSBp$iBhZG1p$g0KIGZ1$(N0aW9uIHR)cF9jZ(dfdGV4dGFyZWEoJHR)eHQpIHsNCiAgICByZXR1c(4gdGVwX2RyYXdfdGV4dGFyZWFfZ())$GQoJ2Nv$(ZpZ3VyYXRp$25fd(FsdWUnLCB(YWxzZSwgMzUsIDUsICR0ZXh0KTsNCiAgfQ0KDQogIGZ1$(N0aW9uIHR)cF9jZ(dfZ2V0X3pv$(Vf$(FtZSgke(9uZV9pZCkgew0KICAgICR6$25)X3F1ZXJ5ID0gdGVwX2RiX3F1ZXJ5KCJzZWx)Y3Qge(9uZV9uYW1)IGZy$20gIiAuIFRBQkxFX1pPTkVTIC4gIiB3aGVyZSB6$25)X2)kID0gJyIgLiAoaW50KSR6$25)X2)kIC4gIiciKTsNCg0KICAgIG)(ICghdGVwX2RiX251$V9y$3dzKCR6$25)X3F1ZXJ5KSkgew0KICAgICAgc(V0dXJuICR6$25)X2)kOw0KICAgIH0gZWxzZSB7DQogICAgICAke(9uZSA9IHR)cF9kY)9(ZXRjaF9hcnJheSgke(9uZV9xdWVyeSk7DQogICAgICByZXR1c(4gJHpv$(V$J3pv$(Vf$(FtZSddOw0KICAgIH0NCiAgfQ0KDQovLy8vDQovLyBTZXRzIHRoZSBzdGF0dXMg$2YgYSBiYW5uZXINCiAgZnVuY3Rp$24gdGVwX3N)dF9iYW5uZXJfc3RhdHVzKCRiYW5uZXJzX2)kLCAkc3RhdHVzKSB7DQogICAgaWYgKCRzdGF0dXMgPT0gJzEnKSB7DQogICAgICByZXR1c(4gdGVwX2RiX3F1ZXJ5KCJ1cGRhdGUgIiAuIFRBQkxFX0JBTk5FU)MgLiAiIHN)dCBzdGF0dXMgPSAnMScsIGV4cG)yZXNfaW1wc(Vzc2)v$nMgPSBOVUxMLCB)eHBpc(VzX2RhdGUgPSBOVUxMLCBkYXR)X3N0YXR1c19jaGFuZ2UgPSBOVUxMIHdoZXJ)IGJh$(5)cnNfaWQgPSAnIiAuICRiYW5uZXJzX2)kIC4gIiciKTsNCiAgICB9IGVsc2VpZiAoJHN0YXR1cyA9PSAnMCcpIHsNCiAgICAgIHJ)dHVy$iB0ZXBfZGJfcXV)cnkoInVwZGF0ZSAiIC4gVEFCTEVfQkFOTkVSUyAuICIgc2V0IHN0YXR1cyA9ICcwJywgZGF0ZV9zdGF0dXNfY2hh$(d)ID0g$(93KCkgd2h)c(UgY(Fu$(Vyc19pZCA9ICciIC4gJGJh$(5)cnNfaWQgLiAiJyIpOw0KICAgIH0gZWxzZSB7DQogICAgICByZXR1c(4gLTE7DQogICAgfQ0KICB9DQoNCi8vLy8NCi8vIFN)dHMgdGh)IHN0YXR1cyBvZiBhIHBy$2R1Y3QNCiAgZnVuY3Rp$24gdGVwX3N)dF9wc(9kdWN0X3N0YXR1cygkcHJvZHVjdHNfaWQsICRzdGF0dXMpIHsNCiAgICBpZiAoJHN0YXR1cyA9PSAnMScpIHsNCiAgICAgIHJ)dHVy$iB0ZXBfZGJfcXV)cnkoInVwZGF0ZSAiIC4gVEFCTEVfUFJPRFVDVFMgLiAiIHN)dCBwc(9kdWN0c19zdGF0dXMgPSAnMScsIHBy$2R1Y3RzX2xhc3Rf$W9kaWZpZWQgPSBu$3coKSB3aGVyZSBwc(9kdWN0c19pZCA9ICciIC4gKG)udCkkcHJvZHVjdHNfaWQgLiAiJyIpOw0KICAgIH0gZWxzZW)(ICgkc3RhdHVzID09ICcwJykgew0KICAgICAgc(V0dXJuIHR)cF9kY)9xdWVyeSgidXBkYXR)ICIgLiBUQUJMRV9QUk9EVUNUUyAuICIgc2V0IHBy$2R1Y3RzX3N0YXR1cyA9ICcwJywgcHJvZHVjdHNf$GFzdF9t$2RpZ())ZCA9IG5vdygpIHdoZXJ)IHBy$2R1Y3RzX2)kID0gJyIgLiAoaW50KSRwc(9kdWN0c19pZCAuICInIik7DQogICAgfSB)$HN)IHsNCiAgICAgIHJ)dHVy$iAtMTsNCiAgICB9DQogIH0NCg0KLy8vLw0KLy8gU2V0cyB0aGUgc3RhdHVzIG9(IGEgcHJvZHVjdCBv$iBzcGVjaWFsDQogIGZ1$(N0aW9uIHR)cF9zZXRfc3B)Y2)h$HNfc3RhdHVzKCRzcGVjaWFsc19pZCwgJHN0YXR1cykgew0KICAgIG)(ICgkc3RhdHVzID09ICcxJykgew0KICAgICAgc(V0dXJuIHR)cF9kY)9xdWVyeSgidXBkYXR)ICIgLiBUQUJMRV9TUEVDSUFMUyAuICIgc2V0IHN0YXR1cyA9ICcxJywgZXhwaXJ)c19kYXR)ID0gT)VMTCwgZGF0ZV9zdGF0dXNfY2hh$(d)ID0gT)VMTCB3aGVyZSBzcGVjaWFsc19pZCA9ICciIC4gKG)udCkkc3B)Y2)h$HNfaWQgLiAiJyIpOw0KICAgIH0gZWxzZW)(ICgkc3RhdHVzID09ICcwJykgew0KICAgICAgc(V0dXJuIHR)cF9kY)9xdWVyeSgidXBkYXR)ICIgLiBUQUJMRV9TUEVDSUFMUyAuICIgc2V0IHN0YXR1cyA9ICcwJywgZGF0ZV9zdGF0dXNfY2hh$(d)ID0g$(93KCkgd2h)c(Ugc3B)Y2)h$HNfaWQgPSAnIiAuIChp$nQpJHNwZWNpYWxzX2)kIC4gIiciKTsNCiAgICB9IGVsc2Ugew0KICAgICAgc(V0dXJuIC0xOw0KICAgIH0NCiAgfQ0KDQovLyAjIyMjIyMjIyMjIyMjIyMjIyBD$250c()idXRp$24gT(V3c2x)dHR)ciB2MDUwICMjIyMjIyMjIyMjIyMjDQovLyBTZXRzIHRoZSBzdGF0dXMg$2YgYSBuZXdz$GV0dGVyIHN0YXR1cw0KLy8gIGZ1$(N0aW9uIHR)cF9zZXRf$(V3c2x)dHR)c)9zdGF0dXMoJHN1YnNjc()iZXJzX2)kLCAkc3RhdHVzKSB7DQogIGZ1$(N0aW9uIHR)cF9zZXRf$(V3c2x)dHR)c)9zdGF0dXMoJHN1YnNjc()iZXJzX2)kLCAkc3RhdHVzKSB7DQoNCiAgICBpZiAoJHN0YXR1cyA9PSAnMScpIHsNCiAgICAgIHJ)dHVy$iB0ZXBfZGJfcXV)cnkoInVwZGF0ZSAiIC4gVEFCTEVfU1VCU0NSSUJFU)MgLiAiIHN)dCBjdXN0$21)cnNf$(V3c2x)dHR)ciA9ICcxJyB3aGVyZSBzdWJzY3JpY(Vyc19pZCA9ICciIC4gKG)udCkkc3Vic2NyaWJ)cnNfaWQgLiAiJyIpOw0KICAgIH0gZWxzZW)(ICgkc3RhdHVzID09ICcwJykgew0KICAgICAgc(V0dXJuIHR)cF9kY)9xdWVyeSgidXBkYXR)ICIgLiBUQUJMRV9TVUJTQ1JJQkVSUyAuICIgc2V0IGN1c3Rv$WVyc19uZXdz$GV0dGVyID0gJzAnIHdoZXJ)IHN1YnNjc()iZXJzX2)kID0gJyIgLiAoaW50KSRzdWJzY3JpY(Vyc19pZCAuICInIik7DQogICAgfSB)$HN)IHsNCiAgICAgIHJ)dHVy$iAtMTsNCiAgICB9DQogIH0gICANCgkgCQ0KCS8vLy8NCi8vIFN)dHMgdGh)IHN0YXR1cyBvZiBhIG5)d3NsZXR0ZXIgc3RhdHVzDQogIGZ1$(N0aW9uIHR)cF9zZXRfY(xhY2tsaXN0X3N0YXR1cygkc3Vic2NyaWJ)cnNfaWQsICRzdGF0dXMpIHsNCiAgICBpZiAoJHN0YXR1cyA9PSAnMScpIHsNCiAgICAgIHJ)dHVy$iB0ZXBfZGJfcXV)cnkoInVwZGF0ZSAiIC4gVEFCTEVfU1VCU0NSSUJFU)MgLiAiIHN)dCBzdWJzY3JpY(Vyc19i$GFja2xpc3QgPSAnMScgd2h)c(Ugc3Vic2NyaWJ)cnNfaWQgPSAnIiAuIChp$nQpJHN1YnNjc()iZXJzX2)kIC4gIiciKTsNCiAgICB9IGVsc2VpZiAoJHN0YXR1cyA9PSAnMCcpIHsNCiAgICAgIHJ)dHVy$iB0ZXBfZGJfcXV)cnkoInVwZGF0ZSAiIC4gVEFCTEVfU1VCU0NSSUJFU)MgLiAiIHN)dCBzdWJzY3JpY(Vyc19i$GFja2xpc3QgPSAnMCcgd2h)c(Ugc3Vic2NyaWJ)cnNfaWQgPSAnIiAuIChp$nQpJHN1YnNjc()iZXJzX2)kIC4gIiciKTsNCiAgICB9IGVsc2Ugew0KICAgICAgc(V0dXJuIC0xOw0KICAgIH0NCiAgfQ0KLy8gIyMjIyMjIyMjIyMjIyMjIyMgRU5EIC0gQ29udHJpYnV0aW9uIE5)d3NsZXR0ZXIgdjA1MCAjIyMjIyMjIyMjIyMjIw0KDQovLy8vDQovLyBTZXRzIHRp$WVvdXQgZ(9yIHRoZSBjdXJyZW50IHNjc()wdC4NCi8vIENh$nQgY(UgdXN)ZCBp$iBzYWZ)IG1vZGUuDQogIGZ1$(N0aW9uIHR)cF9zZXRfdG)tZV9saW1pdCgk$G)taXQpIHsNCiAgICBpZiAoIWd)dF9jZ(dfd(FyKCdzYWZ)X21vZGUnKSkgew0KICAgICAgc2V0X3Rp$WVf$G)taXQoJGxp$W)0KTsNCiAgICB9DQogIH0NCg0KLy8vLw0KLy8gQWxpYXMgZnVuY3Rp$24gZ(9yIFN0$3J)IGNv$(ZpZ3VyYXRp$24gd(FsdWVzIG)uIHRoZSBBZG1p$()zdHJhdG)v$iBU$29sDQogIGZ1$(N0aW9uIHR)cF9jZ(dfc2VsZWN0X29wdG)v$igkc2VsZWN0X2Fyc(F5LCAka2V5X3Zh$HV)LCAka2V5ID0gJycpIHsNCiAgICAkc3RyaW5nID0gJyc7DQoNCiAgICB($3IgKCRpPTAsICRuPXNpe(VvZigkc2VsZWN0X2Fyc(F5KTsgJGk8JG47ICRpKyspIHsNCiAgICAgICRuYW1)ID0gKCh0ZXBf$(90X251$GwoJGt)eSkpID8gJ2Nv$(ZpZ3VyYXRp$25$JyAuICRrZXkgLiAnXScgOiAnY29uZ()ndXJhdG)v$)92YWx1ZScpOw0KDQogICAgICAkc3RyaW5nIC49ICc8YnI+PG)ucHV0IHR5cGU9InJhZG)vIiBuYW1)PSInIC4gJG5h$WUgLiAnIiB2YWx1ZT0iJyAuICRzZWx)Y3RfYXJyYX)$JG)dIC4gJyInOw0KDQogICAgICBpZiAoJGt)eV92YWx1ZSA9PSAkc2VsZWN0X2Fyc(F5WyRpXSkgJHN0c()uZyAuPSAnIENIRUNLRUQnOw0KDQogICAgICAkc3RyaW5nIC49ICc+ICcgLiAkc2VsZWN0X2Fyc(F5WyRpXTsNCiAgICB9DQoNCiAgICByZXR1c(4gJHN0c()uZzsNCiAgfQ0KDQovLy8vDQovLyBB$G)hcyB(dW5jdG)v$iB($3Ig$W9kdWx)IGNv$(ZpZ3VyYXRp$24ga2V5cw0KICB(dW5jdG)v$iB0ZXBf$W9kX3N)$GVjdF9vcHRp$24oJHN)$GVjdF9hcnJheSwgJGt)eV9uYW1)LCAka2V5X3Zh$HV)KSB7DQogICAgc(VzZXQoJHN)$GVjdF9hcnJheSk7DQogICAgd2hp$GUgKGxpc3QoJGt)eSwgJHZh$HV)KSA9IGVhY2goJHN)$GVjdF9hcnJheSkpIHsNCiAgICAgIG)(IChpc19p$nQoJGt)eSkpICRrZXkgPSAkd(FsdWU7DQogICAgICAkc3RyaW5nIC49ICc8YnI+PG)ucHV0IHR5cGU9InJhZG)vIiBuYW1)PSJj$25(aWd1c(F0aW9uWycgLiAka2V5X25h$WUgLiAnXSIgd(FsdWU9IicgLiAka2V5IC4gJyInOw0KICAgICAgaWYgKCRrZX)fd(FsdWUgPT0gJGt)eSkgJHN0c()uZyAuPSAnIENIRUNLRUQnOw0KICAgICAgJHN0c()uZyAuPSAnPiAnIC4gJHZh$HV)Ow0KICAgIH0NCg0KICAgIHJ)dHVy$iAkc3RyaW5nOw0KICB9DQoNCi8vLy8NCi8vIFJ)dHJ)aXZ)IHN)cnZ)ciBp$(Zvc(1hdG)v$g0KICB(dW5jdG)v$iB0ZXBfZ2V0X3N5c3R)$V9p$(Zvc(1hdG)v$igpIHsNCiAgICBn$G9iYWwgJEhUVFBfU0VSVkVSX1ZBU)M7DQoNCiAgICAkZGJfcXV)cnkgPSB0ZXBfZGJfcXV)cnkoInN)$GVjdCBu$3coKSBhcyBkYXR)dG)tZSIpOw0KICAgICRkYiA9IHR)cF9kY)9(ZXRjaF9hcnJheSgkZGJfcXV)cnkpOw0KDQogICAg$G)zdCgkc3)zdGVtLCAkaG9zdCwgJGt)c(5)$CkgPSBwc(VnX3Nw$G)0KCcvW1xzLF0rLycsIEB)eGVjKCd1$(FtZSAtYScpLCA1KTsNCg0KICAgIHJ)dHVy$iBhcnJheSgnZGF0ZScgPT4gdGVwX2RhdGV0aW1)X3No$3J0KGRhdGUoJ1kt$S1kIEg6aTpzJykpLA0KICAgICAgICAgICAgICAgICAnc3)zdGVtJyA9PiAkc3)zdGVtLA0KICAgICAgICAgICAgICAgICAna2Vy$(VsJyA9PiAka2Vy$(VsLA0KICAgICAgICAgICAgICAgICAnaG9zdCcgPT4gJGhvc3QsDQogICAgICAgICAgICAgICAgICdpcCcgPT4gZ2V0aG9zdGJ5$(FtZSgkaG9zdCksDQogICAgICAgICAgICAgICAgICd1cHRp$WUnID0+IEB)eGVjKCd1cHRp$WUnKSwNCiAgICAgICAgICAgICAgICAgJ2h0dHBfc2Vyd(VyJyA9PiAkSFRUUF9TRVJWRVJfVkFSU1snU0VSVkVSX1NPR)RXQVJFJ10sDQogICAgICAgICAgICAgICAgICdwaHAnID0+IFBIUF9WRVJTSU9OLA0KICAgICAgICAgICAgICAgICAne(VuZCcgPT4gKGZ1$(N0aW9uX2V4aXN0cygne(VuZF92ZXJzaW9uJykgPyB6ZW5kX3Z)cnNp$24oKSA6ICcnKSwNCiAgICAgICAgICAgICAgICAgJ2RiX3N)cnZ)cicgPT4gREJfU0VSVkVSLA0KICAgICAgICAgICAgICAgICAnZGJfaXAnID0+IGd)dGhvc3RieW5h$WUoREJfU0VSVkVSKSwNCiAgICAgICAgICAgICAgICAgJ2RiX3Z)cnNp$24nID0+ICdNeVNRTCAnIC4gKGZ1$(N0aW9uX2V4aXN0cygn$X)zcWxfZ2V0X3N)cnZ)c)9p$(ZvJykgPyBteXNx$F9nZXRfc2Vyd(VyX2)uZ(8oKSA6ICcnKSwNCiAgICAgICAgICAgICAgICAgJ2RiX2RhdGUnID0+IHR)cF9kYXR)dG)tZV9zaG9ydCgkZGJ$J2RhdGV0aW1)J10pKTsNCiAgfQ0KDQogIGZ1$(N0aW9uIHR)cF9hcnJheV9zaG)(dCg(JGFyc(F5KSB7DQogICAgaWYgKGZ1$(N0aW9uX2V4aXN0cygnYXJyYX)fc2hpZnQnKSkgew0KICAgICAgc(V0dXJuIGFyc(F5X3NoaWZ0KCRhcnJheSk7DQogICAgfSB)$HN)IHsNCiAgICAgICRpID0gMDsNCiAgICAgICRzaG)(dGVkX2Fyc(F5ID0gYXJyYXkoKTsNCiAgICAgIHJ)c2V0KCRhcnJheSk7DQogICAgICB3aG)sZSAo$G)zdCgka2V5LCAkd(FsdWUpID0gZWFjaCgkYXJyYXkpKSB7DQogICAgICAgIG)(ICgkaSA+IDApIHsNCiAgICAgICAgICAkc2hpZnR)ZF9hcnJheVska2V5XSA9ICR2YWx1ZTsNCiAgICAgICAgfSB)$HN)IHsNCiAgICAgICAgICAkc(V0dXJuID0gJGFyc(F5WyRrZX)dOw0KICAgICAgICB9DQogICAgICAgICRpKys7DQogICAgICB9DQogICAgICAkYXJyYXkgPSAkc2hpZnR)ZF9hcnJheTsNCg0KICAgICAgc(V0dXJuICRyZXR1c(47DQogICAgfQ0KICB9DQoNCiAgZnVuY3Rp$24gdGVwX2Fyc(F5X3J)d(Vyc2UoJGFyc(F5KSB7DQogICAgaWYgKGZ1$(N0aW9uX2V4aXN0cygnYXJyYX)fc(V2ZXJzZScpKSB7DQogICAgICByZXR1c(4gYXJyYX)fc(V2ZXJzZSgkYXJyYXkpOw0KICAgIH0gZWxzZSB7DQogICAgICAkc(V2ZXJzZWRfYXJyYXkgPSBhcnJheSgpOw0KICAgICAgZ(9yICgkaT1zaXp)$2YoJGFyc(F5KS0xOyAkaT49MDsgJGktLSkgew0KICAgICAgICAkc(V2ZXJzZWRfYXJyYX)$XSA9ICRhcnJheVskaV07DQogICAgICB9DQogICAgICByZXR1c(4gJHJ)d(Vyc2VkX2Fyc(F5Ow0KICAgIH0NCiAgfQ0KDQogIGZ1$(N0aW9uIHR)cF9nZW5)c(F0ZV9jYXR)Z29yeV9wYXRoKCRpZCwgJGZy$20gPSAnY2F0ZWdvcnknLCAkY2F0ZWdvc())c19hcnJheSA9ICcnLCAkaW5kZXggPSAwKSB7DQogICAgZ2xvY(FsICRsYW5ndWFnZXNfaWQ7DQoNCiAgICBpZiAoIW)zX2Fyc(F5KCRjYXR)Z29yaWVzX2Fyc(F5KSkgJGNhdGVn$3JpZXNfYXJyYXkgPSBhcnJheSgpOw0KDQogICAgaWYgKCR(c(9tID09ICdwc(9kdWN0Jykgew0KICAgICAgJGNhdGVn$3JpZXNfcXV)cnkgPSB0ZXBfZGJfcXV)cnkoInN)$GVjdCBjYXR)Z29yaWVzX2)kIGZy$20gIiAuIFRBQkxFX1BST0RVQ1RTX1RPX0NBVEVHT1JJRVMgLiAiIHdoZXJ)IHBy$2R1Y3RzX2)kID0gJyIgLiAoaW50KSRpZCAuICInIik7DQogICAgICB3aG)sZSAoJGNhdGVn$3JpZXMgPSB0ZXBfZGJfZ(V0Y2hfYXJyYXkoJGNhdGVn$3JpZXNfcXV)cnkpKSB7DQogICAgICAgIG)(ICgkY2F0ZWdvc())c1snY2F0ZWdvc())c19pZCddID09ICcwJykgew0KICAgICAgICAgICRjYXR)Z29yaWVzX2Fyc(F5WyRp$(R)eF1$XSA9IGFyc(F5KCdpZCcgPT4gJzAnLCAndGV4dCcgPT4gVEVYVF9UT1ApOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICRjYXR)Z29yeV9xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IGNkL(NhdGVn$3JpZXNf$(FtZSwgYy5wYXJ)$nRfaWQgZnJv$SAiIC4gVEFCTEVfQ0FURUdPUk)FUyAuICIgYywgIiAuIFRBQkxFX0NBVEVHT1JJRVNfREVTQ1JJUFRJT04gLiAiIGNkIHdoZXJ)IGMuY2F0ZWdvc())c19pZCA9ICciIC4gKG)udCkkY2F0ZWdvc())c1snY2F0ZWdvc())c19pZCddIC4gIicgYW5kIGMuY2F0ZWdvc())c19pZCA9IGNkL(NhdGVn$3JpZXNfaWQgYW5kIGNkL(xh$(d1YWd)X2)kID0gJyIgLiAoaW50KSRsYW5ndWFnZXNfaWQgLiAiJyIpOw0KICAgICAgICAgICRjYXR)Z29yeSA9IHR)cF9kY)9(ZXRjaF9hcnJheSgkY2F0ZWdvcn)fcXV)cnkpOw0KICAgICAgICAgICRjYXR)Z29yaWVzX2Fyc(F5WyRp$(R)eF1$XSA9IGFyc(F5KCdpZCcgPT4gJGNhdGVn$3JpZXN$J2NhdGVn$3JpZXNfaWQnXSwgJ3R)eHQnID0+ICRjYXR)Z29yeVsnY2F0ZWdvc())c19uYW1)J10pOw0KICAgICAgICAgIG)(ICggKHR)cF9u$3Rf$nVs$CgkY2F0ZWdvcn)$J3Bhc(VudF9pZCddKSkgJiYgKCRjYXR)Z29yeVsncGFyZW50X2)kJ10gIT0gJzAnKSApICRjYXR)Z29yaWVzX2Fyc(F5ID0gdGVwX2d)$(VyYXR)X2NhdGVn$3J5X3BhdGgoJGNhdGVn$3J5WydwYXJ)$nRfaWQnXSwgJ2NhdGVn$3J5JywgJGNhdGVn$3JpZXNfYXJyYXksICRp$(R)eCk7DQogICAgICAgICAgJGNhdGVn$3JpZXNfYXJyYX)$JG)uZGV4XSA9IGFyc(F5X3J)d(Vyc2UoJGNhdGVn$3JpZXNfYXJyYX)$JG)uZGV4XSk7DQogICAgICAgIH0NCiAgICAgICAgJG)uZGV4Kys7DQogICAgICB9DQogICAgfSB)$HN)aWYgKCR(c(9tID09ICdjYXR)Z29yeScpIHsNCiAgICAgICRjYXR)Z29yeV9xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IGNkL(NhdGVn$3JpZXNf$(FtZSwgYy5wYXJ)$nRfaWQgZnJv$SAiIC4gVEFCTEVfQ0FURUdPUk)FUyAuICIgYywgIiAuIFRBQkxFX0NBVEVHT1JJRVNfREVTQ1JJUFRJT04gLiAiIGNkIHdoZXJ)IGMuY2F0ZWdvc())c19pZCA9ICciIC4gKG)udCkkaWQgLiAiJyBh$(QgYy5jYXR)Z29yaWVzX2)kID0gY2QuY2F0ZWdvc())c19pZCBh$(QgY2Qu$GFuZ3VhZ2VfaWQgPSAnIiAuIChp$nQpJGxh$(d1YWd)c19pZCAuICInIik7DQogICAgICAkY2F0ZWdvcnkgPSB0ZXBfZGJfZ(V0Y2hfYXJyYXkoJGNhdGVn$3J5X3F1ZXJ5KTsNCiAgICAgICRjYXR)Z29yaWVzX2Fyc(F5WyRp$(R)eF1$XSA9IGFyc(F5KCdpZCcgPT4gJG)kLCAndGV4dCcgPT4gJGNhdGVn$3J5WydjYXR)Z29yaWVzX25h$WUnXSk7DQogICAgICBpZiAoICh0ZXBf$(90X251$GwoJGNhdGVn$3J5WydwYXJ)$nRfaWQnXSkpICY(ICgkY2F0ZWdvcn)$J3Bhc(VudF9pZCddICE9ICcwJykgKSAkY2F0ZWdvc())c19hcnJheSA9IHR)cF9nZW5)c(F0ZV9jYXR)Z29yeV9wYXRoKCRjYXR)Z29yeVsncGFyZW50X2)kJ10sICdjYXR)Z29yeScsICRjYXR)Z29yaWVzX2Fyc(F5LCAkaW5kZXgpOw0KICAgIH0NCg0KICAgIHJ)dHVy$iAkY2F0ZWdvc())c19hcnJheTsNCiAgfQ0KDQogIGZ1$(N0aW9uIHR)cF9vdXRwdXRfZ2VuZXJhdGVkX2NhdGVn$3J5X3BhdGgoJG)kLCAkZnJv$SA9ICdjYXR)Z29yeScpIHsNCiAgICAkY2FsY3VsYXR)ZF9jYXR)Z29yeV9wYXRoX3N0c()uZyA9ICcnOw0KICAgICRjYWxjdWxhdGVkX2NhdGVn$3J5X3BhdGggPSB0ZXBfZ2VuZXJhdGVfY2F0ZWdvcn)fcGF0aCgkaWQsICR(c(9tKTsNCiAgICB($3IgKCRpPTAsICRuPXNpe(VvZigkY2FsY3VsYXR)ZF9jYXR)Z29yeV9wYXRoKTsgJGk8JG47ICRpKyspIHsNCiAgICAgIGZvciAoJGo9MCwgJGs9c2)6ZW9(KCRjYWxjdWxhdGVkX2NhdGVn$3J5X3BhdGh$JG)dKTsgJGo8JGs7ICRqKyspIHsNCiAgICAgICAgJGNh$GN1$GF0ZWRfY2F0ZWdvcn)fcGF0aF9zdHJp$(cgLj0gJGNh$GN1$GF0ZWRfY2F0ZWdvcn)fcGF0aFskaV1$JGpdWyd0ZXh0J10gLiAnJ(5ic3A7J(d0OyZuYnNwOyc7DQogICAgICB9DQogICAgICAkY2FsY3VsYXR)ZF9jYXR)Z29yeV9wYXRoX3N0c()uZyA9IHN1YnN0cigkY2FsY3VsYXR)ZF9jYXR)Z29yeV9wYXRoX3N0c()uZywgMCwgLTE2KSAuICc8YnI+JzsNCiAgICB9DQogICAgJGNh$GN1$GF0ZWRfY2F0ZWdvcn)fcGF0aF9zdHJp$(cgPSBzdWJzdHIoJGNh$GN1$GF0ZWRfY2F0ZWdvcn)fcGF0aF9zdHJp$(csIDAsIC00KTsNCg0KICAgIG)(IChzdHJsZW4oJGNh$GN1$GF0ZWRfY2F0ZWdvcn)fcGF0aF9zdHJp$(cpIDwgMSkgJGNh$GN1$GF0ZWRfY2F0ZWdvcn)fcGF0aF9zdHJp$(cgPSBURVhUX1RPUDsNCg0KICAgIHJ)dHVy$iAkY2FsY3VsYXR)ZF9jYXR)Z29yeV9wYXRoX3N0c()uZzsNCiAgfQ0KDQogIGZ1$(N0aW9uIHR)cF9nZXRfZ2VuZXJhdGVkX2NhdGVn$3J5X3BhdGhfaWRzKCRpZCwgJGZy$20gPSAnY2F0ZWdvcnknKSB7DQogICAgJGNh$GN1$GF0ZWRfY2F0ZWdvcn)fcGF0aF9zdHJp$(cgPSAnJzsNCiAgICAkY2FsY3VsYXR)ZF9jYXR)Z29yeV9wYXRoID0gdGVwX2d)$(VyYXR)X2NhdGVn$3J5X3BhdGgoJG)kLCAkZnJv$Sk7DQogICAgZ(9yICgkaT0wLCAk$j1zaXp)$2YoJGNh$GN1$GF0ZWRfY2F0ZWdvcn)fcGF0aCk7ICRpPCRuOyAkaSsrKSB7DQogICAgICB($3IgKCRqPTAsICRrPXNpe(VvZigkY2FsY3VsYXR)ZF9jYXR)Z29yeV9wYXRoWyRpXSk7ICRqPCRrOyAkaisrKSB7DQogICAgICAgICRjYWxjdWxhdGVkX2NhdGVn$3J5X3BhdGhfc3RyaW5nIC49ICRjYWxjdWxhdGVkX2NhdGVn$3J5X3BhdGh$JG)dWyRqXVsnaWQnXSAuICdfJzsNCiAgICAgIH0NCiAgICAgICRjYWxjdWxhdGVkX2NhdGVn$3J5X3BhdGhfc3RyaW5nID0gc3Vic3RyKCRjYWxjdWxhdGVkX2NhdGVn$3J5X3BhdGhfc3RyaW5nLCAwLCAtMSkgLiAnPGJyPic7DQogICAgfQ0KICAgICRjYWxjdWxhdGVkX2NhdGVn$3J5X3BhdGhfc3RyaW5nID0gc3Vic3RyKCRjYWxjdWxhdGVkX2NhdGVn$3J5X3BhdGhfc3RyaW5nLCAwLCAtNCk7DQoNCiAgICBpZiAoc3Ry$GVuKCRjYWxjdWxhdGVkX2NhdGVn$3J5X3BhdGhfc3RyaW5nKSA8IDEpICRjYWxjdWxhdGVkX2NhdGVn$3J5X3BhdGhfc3RyaW5nID0gVEVYVF9UT1A7DQoNCiAgICByZXR1c(4gJGNh$GN1$GF0ZWRfY2F0ZWdvcn)fcGF0aF9zdHJp$(c7DQogIH0NCg0KICB(dW5jdG)v$iB0ZXBfc(Vt$3Z)X2NhdGVn$3J5KCRjYXR)Z29yeV9pZCkgew0KICAgICRjYXR)Z29yeV9p$WFnZV9xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IGNhdGVn$3JpZXNfaW1hZ2UgZnJv$SAiIC4gVEFCTEVfQ0FURUdPUk)FUyAuICIgd2h)c(UgY2F0ZWdvc())c19pZCA9ICciIC4gKG)udCkkY2F0ZWdvcn)faWQgLiAiJyIpOw0KICAgICRjYXR)Z29yeV9p$WFnZSA9IHR)cF9kY)9(ZXRjaF9hcnJheSgkY2F0ZWdvcn)faW1hZ2VfcXV)cnkpOw0KDQogICAgJGR1cGxpY2F0ZV9p$WFnZV9xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IGNvdW50KCopIGFzIHRvdGFsIGZy$20gIiAuIFRBQkxFX0NBVEVHT1JJRVMgLiAiIHdoZXJ)IGNhdGVn$3JpZXNfaW1hZ2UgPSAnIiAuIHR)cF9kY)9p$nB1dCgkY2F0ZWdvcn)faW1hZ2V$J2NhdGVn$3JpZXNfaW1hZ2UnXSkgLiAiJyIpOw0KICAgICRkdXBsaWNhdGVfaW1hZ2UgPSB0ZXBfZGJfZ(V0Y2hfYXJyYXkoJGR1cGxpY2F0ZV9p$WFnZV9xdWVyeSk7DQoNCiAgICBpZiAoJGR1cGxpY2F0ZV9p$WFnZVsndG90YWwnXSA8IDIpIHsNCiAgICAgIC8vQk9GOiBEZWZhdWx0LW)tYWd)IGhhY2sNCiAgICAgIC8vIFJFUExBQ0UgaWYgKGZp$GVfZXhpc3RzKERJU)9GU19DQVRBTE9HX0)NQUdFUyAuICRjYXR)Z29yeV9p$WFnZVsnY2F0ZWdvc())c19p$WFnZSddKSkgeyAgIHdpdGgNCiAgICAgIG)(ICgoZ()sZV9)eG)zdHMoRE)SX0ZTX0NBVEFMT0dfSU1BR0VTIC4gJGNhdGVn$3J5X2)tYWd)WydjYXR)Z29yaWVzX2)tYWd)J10pKSA(JiAoJGNhdGVn$3J5X2)tYWd)WydjYXR)Z29yaWVzX2)tYWd)J10gIT0gJ2R)Z(F1$HQuZ2)(JykpIHsgDQogICAgICAvL0VPRjogRGV(YXVsdC1p$WFnZSBoYWNrDQovLyAgICAgICAgQHVu$G)uayhESVJfR)NfQ0FUQUxPR19JTUFHRVMgLiAkY2F0ZWdvcn)faW1hZ2V$J2NhdGVn$3JpZXNfaW1hZ2UnXSk7DQogICAgICB9DQogICAgfQ0KDQogICAgdGVwX2RiX3F1ZXJ5KCJkZWx)dGUgZnJv$SAiIC4gVEFCTEVfQ0FURUdPUk)FUyAuICIgd2h)c(UgY2F0ZWdvc())c19pZCA9ICciIC4gKG)udCkkY2F0ZWdvcn)faWQgLiAiJyIpOw0KICAgIHR)cF9kY)9xdWVyeSgiZGVsZXR)IGZy$20gIiAuIFRBQkxFX0NBVEVHT1JJRVNfREVTQ1JJUFRJT04gLiAiIHdoZXJ)IGNhdGVn$3JpZXNfaWQgPSAnIiAuIChp$nQpJGNhdGVn$3J5X2)kIC4gIiciKTsNCiAgICB0ZXBfZGJfcXV)cnkoI(R)$GV0ZSB(c(9tICIgLiBUQUJMRV9QUk9EVUNUU19UT19DQVRFR09SSUVTIC4gIiB3aGVyZSBjYXR)Z29yaWVzX2)kID0gJyIgLiAoaW50KSRjYXR)Z29yeV9pZCAuICInIik7DQoNCiAgICBpZiAoVVNFX0NBQ0hFID09ICd0cnV)Jykgew0KICAgICAgdGVwX3J)c2V0X2NhY2h)X2Js$2NrKCdjYXR)Z29yaWVzJyk7DQogICAgICB0ZXBfc(VzZXRfY2FjaGVfY(xvY2soJ2Fsc29fcHVyY2hhc2VkJyk7DQogICAgfQ0KICB9DQoNCiAgZnVuY3Rp$24gdGVwX3J)$W92ZV9wc(9kdWN0KCRwc(9kdWN0X2)kKSB7DQogICAgJHBy$2R1Y3RfaW1hZ2VfcXV)cnkgPSB0ZXBfZGJfcXV)cnkoInN)$GVjdCBwc(9kdWN0c19p$WFnZSB(c(9tICIgLiBUQUJMRV9QUk9EVUNUUyAuICIgd2h)c(UgcHJvZHVjdHNfaWQgPSAnIiAuIChp$nQpJHBy$2R1Y3RfaWQgLiAiJyIpOw0KICAgICRwc(9kdWN0X2)tYWd)ID0gdGVwX2RiX2Z)dGNoX2Fyc(F5KCRwc(9kdWN0X2)tYWd)X3F1ZXJ5KTsNCg0KICAgICRkdXBsaWNhdGVfaW1hZ2VfcXV)cnkgPSB0ZXBfZGJfcXV)cnkoInN)$GVjdCBj$3VudCgqKSBhcyB0$3Rh$CB(c(9tICIgLiBUQUJMRV9QUk9EVUNUUyAuICIgd2h)c(UgcHJvZHVjdHNfaW1hZ2UgPSAnIiAuIHR)cF9kY)9p$nB1dCgkcHJvZHVjdF9p$WFnZVsncHJvZHVjdHNfaW1hZ2UnXSkgLiAiJyIpOw0KICAgICRkdXBsaWNhdGVfaW1hZ2UgPSB0ZXBfZGJfZ(V0Y2hfYXJyYXkoJGR1cGxpY2F0ZV9p$WFnZV9xdWVyeSk7DQoNCiAgICBpZiAoJGR1cGxpY2F0ZV9p$WFnZVsndG90YWwnXSA8IDIpIHsNCiAgICAgIC8vQk9GOiBEZWZhdWx0LW)tYWd)IGhhY2sNCiAgICAgIC8vaWYgKGZp$GVfZXhpc3RzKERJU)9GU19DQVRBTE9HX0)NQUdFUyAuICRwc(9kdWN0X2)tYWd)Wydwc(9kdWN0c19p$WFnZSddKSkgew0KICAgICAgaWYgKCh(aWx)X2V4aXN0cyhESVJfR)NfQ0FUQUxPR19JTUFHRVMgLiAkcHJvZHVjdF9p$WFnZVsncHJvZHVjdHNfaW1hZ2UnXSkpICY(ICgkcHJvZHVjdF9p$WFnZVsncHJvZHVjdHNfaW1hZ2UnXSAhPSAnZGV(YXVsdC5naWYnKSkgeyANCiAgICAgIC8vRU9GOiBEZWZhdWx0LW)tYWd)IGhhY2sNCi8vICAgICAgICBAdW5saW5rKERJU)9GU19DQVRBTE9HX0)NQUdFUyAuICRwc(9kdWN0X2)tYWd)Wydwc(9kdWN0c19p$WFnZSddKTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICB0ZXBfZGJfcXV)cnkoI(R)$GV0ZSB(c(9tICIgLiBUQUJMRV9TUEVDSUFMUyAuICIgd2h)c(UgcHJvZHVjdHNfaWQgPSAnIiAuIChp$nQpJHBy$2R1Y3RfaWQgLiAiJyIpOw0KICAgIHR)cF9kY)9xdWVyeSgiZGVsZXR)IGZy$20gIiAuIFRBQkxFX1BST0RVQ1RTIC4gIiB3aGVyZSBwc(9kdWN0c19pZCA9ICciIC4gKG)udCkkcHJvZHVjdF9pZCAuICInIik7DQogICAgdGVwX2RiX3F1ZXJ5KCJkZWx)dGUgZnJv$SAiIC4gVEFCTEVfUFJPRFVDVFNfVE9fQ0FURUdPUk)FUyAuICIgd2h)c(UgcHJvZHVjdHNfaWQgPSAnIiAuIChp$nQpJHBy$2R1Y3RfaWQgLiAiJyIpOw0KICAgIHR)cF9kY)9xdWVyeSgiZGVsZXR)IGZy$20gIiAuIFRBQkxFX1BST0RVQ1RTX0RFU0NSSVBUSU9OIC4gIiB3aGVyZSBwc(9kdWN0c19pZCA9ICciIC4gKG)udCkkcHJvZHVjdF9pZCAuICInIik7DQogICAgdGVwX2RiX3F1ZXJ5KCJkZWx)dGUgZnJv$SAiIC4gVEFCTEVfUFJPRFVDVFNfQVRUUk)CVVRFUyAuICIgd2h)c(UgcHJvZHVjdHNfaWQgPSAnIiAuIChp$nQpJHBy$2R1Y3RfaWQgLiAiJyIpOw0KICAgIHR)cF9kY)9xdWVyeSgiZGVsZXR)IGZy$20gIiAuIFRBQkxFX0NVU1RPTUVSU19CQVNLRVQgLiAiIHdoZXJ)IHBy$2R1Y3RzX2)kID0gJyIgLiAoaW50KSRwc(9kdWN0X2)kIC4gIicg$3IgcHJvZHVjdHNfaWQg$G)rZSAnIiAuIChp$nQpJHBy$2R1Y3RfaWQgLiAieyUnIik7DQogICAgdGVwX2RiX3F1ZXJ5KCJkZWx)dGUgZnJv$SAiIC4gVEFCTEVfQ1VTVE9NRVJTX0JBU0tFVF9BVFRSSUJVVEVTIC4gIiB3aGVyZSBwc(9kdWN0c19pZCA9ICciIC4gKG)udCkkcHJvZHVjdF9pZCAuICInIG9yIHBy$2R1Y3RzX2)kIGxpa2UgJyIgLiAoaW50KSRwc(9kdWN0X2)kIC4gIns)JyIpOw0KCS8vU1RBU)QgQWRkaXRp$25h$CBJ$WFnZXMNCg)0ZXBfZGJfcXV)cnkoI(R)$GV0ZSB(c(9tICIgLiBUQUJMRV9BRERJVE)PTkFMX0)NQUdFUyAuICIgd2h)c(UgcHJvZHVjdHNfaWQgPSAnIiAuIChp$nQpJHBy$2R1Y3RfaWQgLiAiJyIpOw0KCS8vRU5EIEFkZG)0aW9uYWwgSW1hZ2VzDQoNCgkvLyBTVEFSVDogRXh0c(EgR())$GRzIENv$nRyaWJ1dG)v$g0KICAgIHR)cF9kY)9xdWVyeSgiZGVsZXR)IGZy$20gIiAuIFRBQkxFX1BST0RVQ1RTX1RPX1BST0RVQ1RTX0VYVFJBX0ZJRUxEUyAuICIgd2h)c(UgcHJvZHVjdHNfaWQgPSAiIC4gKG)udCkkcHJvZHVjdF9pZCk7DQogICAgLy8gRU5EOiBFeHRyYSBGaWVsZHMgQ29udHJpYnV0aW9uDQoNCiAgICAkcHJvZHVjdF9yZXZpZXdzX3F1ZXJ5ID0gdGVwX2RiX3F1ZXJ5KCJzZWx)Y3Qgc(V2aWV3c19pZCB(c(9tICIgLiBUQUJMRV9SRVZJRVdTIC4gIiB3aGVyZSBwc(9kdWN0c19pZCA9ICciIC4gKG)udCkkcHJvZHVjdF9pZCAuICInIik7DQogICAgd2hp$GUgKCRwc(9kdWN0X3J)d())d3MgPSB0ZXBfZGJfZ(V0Y2hfYXJyYXkoJHBy$2R1Y3Rfc(V2aWV3c19xdWVyeSkpIHsNCiAgICAgIHR)cF9kY)9xdWVyeSgiZGVsZXR)IGZy$20gIiAuIFRBQkxFX1JFVk)FV1NfREVTQ1JJUFRJT04gLiAiIHdoZXJ)IHJ)d())d3NfaWQgPSAnIiAuIChp$nQpJHBy$2R1Y3Rfc(V2aWV3c1snc(V2aWV3c19pZCddIC4gIiciKTsNCiAgICB9DQogICAgdGVwX2RiX3F1ZXJ5KCJkZWx)dGUgZnJv$SAiIC4gVEFCTEVfUkVWSUVXUyAuICIgd2h)c(UgcHJvZHVjdHNfaWQgPSAnIiAuIChp$nQpJHBy$2R1Y3RfaWQgLiAiJyIpOw0KDQogICAgaWYgKFVTRV9DQUNIRSA9PSAndHJ1ZScpIHsNCiAgICAgIHR)cF9yZXN)dF9jYWNoZV9i$G9jaygnY2F0ZWdvc())cycpOw0KICAgICAgdGVwX3J)c2V0X2NhY2h)X2Js$2NrKCdh$HNvX3B1c(NoYXN)ZCcpOw0KICAgIH0NCiAgfQ0KDQogIGZ1$(N0aW9uIHR)cF9yZW1vd(Vf$3JkZXIoJG9yZGVyX2)kLCAkc(VzdG9jayA9IGZh$HN)KSB7DQogICAgaWYgKCRyZXN0$2NrID09ICdv$icpIHsNCi8vKysrKyBRVCBQc(86IEJ)Z2)uIENoYW5nZWQgY29kZQ0KICAgICAgJG9yZGVyX3F1ZXJ5ID0gdGVwX2RiX3F1ZXJ5KCJzZWx)Y3QgcHJvZHVjdHNfaWQsIHBy$2R1Y3RzX3F1YW50aXR5LCBwc(9kdWN0c19zdG9ja19hdHRyaWJ1dGVzIGZy$20gIiAuIFRBQkxFX09SREVSU19QUk9EVUNUUyAuICIgd2h)c(Ug$3JkZXJzX2)kID0gJyIgLiAoaW50KSRvc(R)c)9pZCAuICInIik7DQogICAgICB3aG)sZSAoJG9yZGVyID0gdGVwX2RiX2Z)dGNoX2Fyc(F5KCRvc(R)c)9xdWVyeSkpIHsNCiAgICAgICAgJHBy$2R1Y3Rfc3RvY2tfYWRqdXN0ID0gMDsNCiAgICAgICAgaWYgKHR)cF9u$3Rf$nVs$Cgk$3JkZXJ$J3By$2R1Y3RzX3N0$2NrX2F0dHJpYnV0ZXMnXSkpIHsNCiAgICAgICAgICBpZiAoJG9yZGVyWydwc(9kdWN0c19zdG9ja19hdHRyaWJ1dGVzJ10gIT0gJyQkRE9XTkxPQUQkJCcpIHsNCiAgICAgICAgICAgICRhdHRyaWJ1dGVzX3N0$2NrX3F1ZXJ5ID0gdGVwX2RiX3F1ZXJ5KCJTRUxFQ1QgcHJvZHVjdHNfc3RvY2tfcXVh$nRpdHkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGUk9NICIgLiBUQUJMRV9QUk9EVUNUU19TVE9DSyAuICINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBXSEVSRSBwc(9kdWN0c19zdG9ja19hdHRyaWJ1dGVzID0gJyIgLiAk$3JkZXJ$J3By$2R1Y3RzX3N0$2NrX2F0dHJpYnV0ZXMnXSAuICInDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQU5EIHBy$2R1Y3RzX2)kID0gJyIgLiAoaW50KSRvc(R)c)sncHJvZHVjdHNfaWQnXSAuICInIik7DQogICAgICAgICAgICBpZiAodGVwX2RiX251$V9y$3dzKCRhdHRyaWJ1dGVzX3N0$2NrX3F1ZXJ5KSA+IDApIHsNCiAgICAgICAgICAgICAgICAkYXR0c()idXR)c19zdG9ja192YWx1ZXMgPSB0ZXBfZGJfZ(V0Y2hfYXJyYXkoJGF0dHJpYnV0ZXNfc3RvY2tfcXV)cnkpOw0KICAgICAgICAgICAgICAgIHR)cF9kY)9xdWVyeSgiVVBEQVRFICIgLiBUQUJMRV9QUk9EVUNUU19TVE9DSyAuICINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNFVCBwc(9kdWN0c19zdG9ja19xdWFudG)0eSA9IHBy$2R1Y3RzX3N0$2NrX3F1YW50aXR5ICsgJyIgLiAoaW50KSRvc(R)c)sncHJvZHVjdHNfcXVh$nRpdHknXSAuICInDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBXSEVSRSBwc(9kdWN0c19zdG9ja19hdHRyaWJ1dGVzID0gJyIgLiAk$3JkZXJ$J3By$2R1Y3RzX3N0$2NrX2F0dHJpYnV0ZXMnXSAuICInDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBTkQgcHJvZHVjdHNfaWQgPSAnIiAuIChp$nQpJG9yZGVyWydwc(9kdWN0c19pZCddIC4gIiciKTsNCiAgICAgICAgICAgICAgICAkcHJvZHVjdF9zdG9ja19hZGp1c3QgPSBtaW4oJG9yZGVyWydwc(9kdWN0c19xdWFudG)0eSddLCAgJG9yZGVyWydwc(9kdWN0c19xdWFudG)0eSddKyRhdHRyaWJ1dGVzX3N0$2NrX3Zh$HV)c1sncHJvZHVjdHNfc3RvY2tfcXVh$nRpdHknXSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHR)cF9kY)9xdWVyeSgiSU5TRVJUIG)udG8gIiAuIFRBQkxFX1BST0RVQ1RTX1NUT0NLIC4gIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHBy$2R1Y3RzX2)kLCBwc(9kdWN0c19zdG9ja19hdHRyaWJ1dGVzLCBwc(9kdWN0c19zdG9ja19xdWFudG)0eSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZBTFVFUyAoJyIgLiAoaW50KSRvc(R)c)sncHJvZHVjdHNfaWQnXSAuICInLCAnIiAuICRvc(R)c)sncHJvZHVjdHNfc3RvY2tfYXR0c()idXR)cyddIC4gIicsICciIC4gKG)udCkk$3JkZXJ$J3By$2R1Y3RzX3F1YW50aXR5J10gLiAiJykiKTsNCiAgICAgICAgICAgICAgICAkcHJvZHVjdF9zdG9ja19hZGp1c3QgPSAk$3JkZXJ$J3By$2R1Y3RzX3F1YW50aXR5J107DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgJHBy$2R1Y3Rfc3RvY2tfYWRqdXN0ID0gJG9yZGVyWydwc(9kdWN0c19xdWFudG)0eSddOw0KICAgICAgICB9DQogICAgICAgIHR)cF9kY)9xdWVyeSgiVVBEQVRFICIgLiBUQUJMRV9QUk9EVUNUUyAuICINCiAgICAgICAgICAgICAgICAgICAgICBTRVQgcHJvZHVjdHNfcXVh$nRpdHkgPSBwc(9kdWN0c19xdWFudG)0eSArICIgLiAkcHJvZHVjdF9zdG9ja19hZGp1c3QgLiAiLCBwc(9kdWN0c19vc(R)c(VkID0gcHJvZHVjdHNf$3JkZXJ)ZCAtICIgLiAoaW50KSRvc(R)c)sncHJvZHVjdHNfcXVh$nRpdHknXSAuICINCiAgICAgICAgICAgICAgICAgICAgICBXSEVSRSBwc(9kdWN0c19pZCA9ICciIC4gKG)udCkk$3JkZXJ$J3By$2R1Y3RzX2)kJ10gLiAiJyIpOw0KLy8rKysrIFFUIFBy$zogRW5kIENoYW5nZWQgQ29kZQ0KICAgICAgfQ0KICAgIH0NCg0KICAgIHR)cF9kY)9xdWVyeSgiZGVsZXR)IGZy$20gIiAuIFRBQkxFX09SREVSUyAuICIgd2h)c(Ug$3JkZXJzX2)kID0gJyIgLiAoaW50KSRvc(R)c)9pZCAuICInIik7DQogICAgdGVwX2RiX3F1ZXJ5KCJkZWx)dGUgZnJv$SAiIC4gVEFCTEVfT1JERVJTX1BST0RVQ1RTIC4gIiB3aGVyZSBvc(R)cnNfaWQgPSAnIiAuIChp$nQpJG9yZGVyX2)kIC4gIiciKTsNCiAgICB0ZXBfZGJfcXV)cnkoI(R)$GV0ZSB(c(9tICIgLiBUQUJMRV9PUkRFU)NfUFJPRFVDVFNfQVRUUk)CVVRFUyAuICIgd2h)c(Ug$3JkZXJzX2)kID0gJyIgLiAoaW50KSRvc(R)c)9pZCAuICInIik7DQogICAgdGVwX2RiX3F1ZXJ5KCJkZWx)dGUgZnJv$SAiIC4gVEFCTEVfT1JERVJTX1NUQVRVU19ISVNUT1JZIC4gIiB3aGVyZSBvc(R)cnNfaWQgPSAnIiAuIChp$nQpJG9yZGVyX2)kIC4gIiciKTsNCiAgICB0ZXBfZGJfcXV)cnkoI(R)$GV0ZSB(c(9tICIgLiBUQUJMRV9PUkRFU)NfVE9UQUwgLiAiIHdoZXJ)IG9yZGVyc19pZCA9ICciIC4gKG)udCkk$3JkZXJfaWQgLiAiJyIpOw0KICB9DQoNCiAgZnVuY3Rp$24gdGVwX3J)c2V0X2NhY2h)X2Js$2NrKCRjYWNoZV9i$G9jaykgew0KICAgIGds$2Jh$CAkY2FjaGVfY(xvY2tzOw0KDQogICAgZ(9yICgkaT0wLCAk$j1zaXp)$2YoJGNhY2h)X2Js$2Nrcyk7ICRpPCRuOyAkaSsrKSB7DQogICAgICBpZiAoJGNhY2h)X2Js$2Nrc1skaV1$J2NvZGUnXSA9PSAkY2FjaGVfY(xvY2spIHsNCiAgICAgICAgaWYgKCRjYWNoZV9i$G9ja3N$JG)dWydtdWx0aXBsZSddKSB7DQogICAgICAgICAgaWYgKCRkaXIgPSBA$3B)$(RpcihESVJfR)NfQ0FDSEUpKSB7DQogICAgICAgICAgICB3aG)sZSAoJGNhY2h)X2Zp$GUgPSByZWFkZG)yKCRkaXIpKSB7DQogICAgICAgICAgICAgICRjYWNoZWRfZ()sZSA9ICRjYWNoZV9i$G9ja3N$JG)dWyd(aWx)J107DQogICAgICAgICAgICAgICRsYW5ndWFnZXMgPSB0ZXBfZ2V0X2xh$(d1YWd)cygpOw0KICAgICAgICAgICAgICB($3IgKCRqPTAsICRrPXNpe(VvZigk$GFuZ3VhZ2VzKTsgJGo8JGs7ICRqKyspIHsNCiAgICAgICAgICAgICAgICAkY2FjaGVkX2Zp$GVfdW5saW5rID0gZXJ)Z19yZXBsYWN)KCct$GFuZ3VhZ2UnLCAnLScgLiAk$GFuZ3VhZ2VzWyRqXVsnZG)yZWN0$3J5J10sICRjYWNoZWRfZ()sZSk7DQogICAgICAgICAgICAgICAgaWYgKGVyZWcoJ14nIC4gJGNhY2h)ZF9(aWx)X3Vu$G)uaywgJGNhY2h)X2Zp$GUpKSB7DQogICAgICAgICAgICAgICAgICBAdW5saW5rKERJU)9GU19DQUNIRSAuICRjYWNoZV9(aWx)KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNs$3N)ZG)yKCRkaXIpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSB)$HN)IHsNCiAgICAgICAgICAkY2FjaGVkX2Zp$GUgPSAkY2FjaGVfY(xvY2tzWyRpXVsnZ()sZSddOw0KICAgICAgICAgICRsYW5ndWFnZXMgPSB0ZXBfZ2V0X2xh$(d1YWd)cygpOw0KICAgICAgICAgIGZvciAoJGk9MCwgJG49c2)6ZW9(KCRsYW5ndWFnZXMpOyAkaTwk$jsgJGkrKykgew0KICAgICAgICAgICAgJGNhY2h)ZF9(aWx)ID0gZXJ)Z19yZXBsYWN)KCct$GFuZ3VhZ2UnLCAnLScgLiAk$GFuZ3VhZ2VzWyRpXVsnZG)yZWN0$3J5J10sICRjYWNoZWRfZ()sZSk7DQogICAgICAgICAgICBAdW5saW5rKERJU)9GU19DQUNIRSAuICRjYWNoZWRfZ()sZSk7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGJyZWFrOw0KICAgICAgfQ0KICAgIH0NCiAgfQ0KDQogIGZ1$(N0aW9uIHR)cF9nZXRfZ()sZV9wZXJtaXNzaW9ucygk$W9kZSkgew0KLy8gZGV0ZXJtaW5)IHR5cGUNCiAgICBpZiAoICgk$W9kZSA(IDB4QzAwMCkgPT0gMHhDMDAwKSB7IC8vIHVuaXggZG9tYW)uIHNvY2t)dA0KICAgICAgJHR5cGUgPSAncyc7DQogICAgfSB)$HN)aWYgKCAoJG1vZGUgJiAweDQwMDApID09IDB4NDAwMCkgeyAvLyBkaXJ)Y3RvcnkNCiAgICAgICR0eXB)ID0gJ2QnOw0KICAgIH0gZWxzZW)(ICggKCRt$2R)ICYgMHhBMDAwKSA9PSAweEEwMDApIHsgLy8gc3)tY(9saWMg$G)uaw0KICAgICAgJHR5cGUgPSAn$Cc7DQogICAgfSB)$HN)aWYgKCAoJG1vZGUgJiAweDgwMDApID09IDB4ODAwMCkgeyAvLyByZWd1$GFyIGZp$GUNCiAgICAgICR0eXB)ID0gJy0nOw0KICAgIH0gZWxzZW)(ICggKCRt$2R)ICYgMHg2MDAwKSA9PSAweDYwMDApIHsgLy9iQ(xvY2sgc3B)Y2)h$CB(aWx)DQogICAgICAkdH)wZSA9ICdiJzsNCiAgICB9IGVsc2VpZiAoICgk$W9kZSA(IDB4MjAwMCkgPT0gMHgyMDAwKSB7IC8vIGNoYXJhY3R)ciBzcGVjaWFsIGZp$GUNCiAgICAgICR0eXB)ID0gJ2MnOw0KICAgIH0gZWxzZW)(ICggKCRt$2R)ICYgMHgxMDAwKSA9PSAweDEwMDApIHsgLy8g$(FtZWQgcG)wZQ0KICAgICAgJHR5cGUgPSAncCc7DQogICAgfSB)$HN)IHsgLy8gdW5r$(93$g0KICAgICAgJHR5cGUgPSAnPyc7DQogICAgfQ0KDQovLyBkZXR)c(1p$(UgcGVy$W)zc2)v$nMNCiAgICAk$3duZXJ$J3J)YWQnXSAgICA9ICgk$W9kZSA(IDAwNDAwKSA/ICdyJyA6ICctJzsNCiAgICAk$3duZXJ$J3dyaXR)J10gICA9ICgk$W9kZSA(IDAwMjAwKSA/ICd3JyA6ICctJzsNCiAgICAk$3duZXJ$J2V4ZWN1dGUnXSA9ICgk$W9kZSA(IDAwMTAwKSA/ICd4JyA6ICctJzsNCiAgICAkZ3JvdXB$J3J)YWQnXSAgICA9ICgk$W9kZSA(IDAwMDQwKSA/ICdyJyA6ICctJzsNCiAgICAkZ3JvdXB$J3dyaXR)J10gICA9ICgk$W9kZSA(IDAwMDIwKSA/ICd3JyA6ICctJzsNCiAgICAkZ3JvdXB$J2V4ZWN1dGUnXSA9ICgk$W9kZSA(IDAwMDEwKSA/ICd4JyA6ICctJzsNCiAgICAkd29y$GR$J3J)YWQnXSAgICA9ICgk$W9kZSA(IDAwMDA0KSA/ICdyJyA6ICctJzsNCiAgICAkd29y$GR$J3dyaXR)J10gICA9ICgk$W9kZSA(IDAwMDAyKSA/ICd3JyA6ICctJzsNCiAgICAkd29y$GR$J2V4ZWN1dGUnXSA9ICgk$W9kZSA(IDAwMDAxKSA/ICd4JyA6ICctJzsNCg0KLy8gYWRqdXN0IGZvciBTVU)ELCBTR0)EIGFuZCBzdG)ja3kgY()0DQogICAgaWYgKCRt$2R)ICYgMHg4MDAgKSAk$3duZXJ$J2V4ZWN1dGUnXSA9ICgk$3duZXJ$J2V4ZWN1dGUnXSA9PSAneCcpID8gJ3MnIDogJ1MnOw0KICAgIG)(ICgk$W9kZSA(IDB4NDAwICkgJGdy$3VwWyd)eGVjdXR)J10gPSAoJGdy$3VwWyd)eGVjdXR)J10gPT0gJ3gnKSA/ICdzJyA6ICdTJzsNCiAgICBpZiAoJG1vZGUgJiAweDIwMCApICR3$3JsZFsnZXh)Y3V0ZSddID0gKCR3$3JsZFsnZXh)Y3V0ZSddID09ICd4JykgPyAndCcgOiAnVCc7DQoNCiAgICByZXR1c(4gJHR5cGUgLg0KICAgICAgICAgICAk$3duZXJ$J3J)YWQnXSAuICRvd25)c)snd3JpdGUnXSAuICRvd25)c)snZXh)Y3V0ZSddIC4NCiAgICAgICAgICAgJGdy$3VwWydyZWFkJ10gLiAkZ3JvdXB$J3dyaXR)J10gLiAkZ3JvdXB$J2V4ZWN1dGUnXSAuDQogICAgICAgICAgICR3$3JsZFsnc(VhZCddIC4gJHdvc(xkWyd3c()0ZSddIC4gJHdvc(xkWyd)eGVjdXR)J107DQogIH0NCg0KICB(dW5jdG)v$iB0ZXBfYXJyYX)fc2xpY2UoJGFyc(F5LCAk$2Z(c2V0LCAk$GVuZ3RoID0gJzAnKSB7DQogICAgaWYgKGZ1$(N0aW9uX2V4aXN0cygnYXJyYX)fc2xpY2UnKSkgew0KICAgICAgc(V0dXJuIGFyc(F5X3NsaWN)KCRhcnJheSwgJG9(ZnN)dCwgJGx)$(d0aCk7DQogICAgfSB)$HN)IHsNCiAgICAgICRsZW5ndGggPSBhYnMoJGx)$(d0aCk7DQogICAgICBpZiAoJGx)$(d0aCA9PSAwKSB7DQogICAgICAgICRoaWdoID0gc2)6ZW9(KCRhcnJheSk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICAkaG)naCA9ICRvZ(ZzZXQrJGx)$(d0aDsNCiAgICAgIH0NCg0KICAgICAgZ(9yICgkaT0k$2Z(c2V0OyAkaTwkaG)naDsgJGkrKykgew0KICAgICAgICAk$(V3X2Fyc(F5WyRpLSRvZ(ZzZXRdID0gJGFyc(F5WyRpXTsNCiAgICAgIH0NCg0KICAgICAgc(V0dXJuICRuZXdfYXJyYXk7DQogICAgfQ0KICB9DQoNCiAgZnVuY3Rp$24gdGVwX3J)$W92ZSgkc291c(N)KSB7DQogICAgZ2xvY(FsICRtZXNzYWd)U3RhY2ssICR0ZXBfc(Vt$3Z)X2Vyc(9yOw0KDQogICAgaWYgKG)zc2V0KCR0ZXBfc(Vt$3Z)X2Vyc(9yKSkgJHR)cF9yZW1vd(VfZXJy$3IgPSB(YWxzZTsNCg0KICAgIG)(IChpc19kaXIoJHNvdXJjZSkpIHsNCiAgICAgICRkaXIgPSBkaXIoJHNvdXJjZSk7DQogICAgICB3aG)sZSAoJGZp$GUgPSAkZG)yLT5yZWFkKCkpIHsNCiAgICAgICAgaWYgKCAoJGZp$GUgIT0gJy4nKSA(JiAoJGZp$GUgIT0gJy4uJykgKSB7DQogICAgICAgICAgaWYgKG)zX3dyaXR)YWJsZSgkc291c(N)IC4gJy8nIC4gJGZp$GUpKSB7DQogICAgICAgICAgICB0ZXBfc(Vt$3Z)KCRz$3VyY2UgLiAnLycgLiAkZ()sZSk7DQogICAgICAgICAgfSB)$HN)IHsNCiAgICAgICAgICAgICRtZXNzYWd)U3RhY2stP(FkZChzcHJp$nR(KEVSUk9SX0ZJTEVfTk9UX1JFTU9WRUFCTEUsICRz$3VyY2UgLiAnLycgLiAkZ()sZSksICd)cnJvcicpOw0KICAgICAgICAgICAgJHR)cF9yZW1vd(VfZXJy$3IgPSB0cnV)Ow0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgJGRpci0+Y2xvc2UoKTsNCg0KICAgICAgaWYgKG)zX3dyaXR)YWJsZSgkc291c(N)KSkgew0KICAgICAgICBy$WRpcigkc291c(N)KTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgICRtZXNzYWd)U3RhY2stP(FkZChzcHJp$nR(KEVSUk9SX0RJUkVDVE9SWV9OT1RfUkVNT1ZFQUJMRSwgJHNvdXJjZSksICd)cnJvcicpOw0KICAgICAgICAkdGVwX3J)$W92ZV9)cnJvciA9IHRydWU7DQogICAgICB9DQogICAgfSB)$HN)IHsNCiAgICAgIG)(IChpc193c()0ZWFi$GUoJHNvdXJjZSkpIHsNCiAgICAgICAgdW5saW5rKCRz$3VyY2UpOw0KICAgICAgfSB)$HN)IHsNCiAgICAgICAgJG1)c3NhZ2VTdGFjay0+YWRkKHNwc()udGYoRVJST1JfRk)MRV9OT1RfUkVNT1ZFQUJMRSwgJHNvdXJjZSksICd)cnJvcicpOw0KICAgICAgICAkdGVwX3J)$W92ZV9)cnJvciA9IHRydWU7DQogICAgICB9DQogICAgfQ0KICB9DQoNCi8vLy8NCi8vIFdyYXBwZXIgZ(9yIGNv$nN0YW50KCkgZnVuY3Rp$24NCi8vIE5)ZWR)ZCBiZWNhdXN)IG)0cyBv$(x5IGF2YW)sYWJsZSBp$iBQSFAgNC4wLjQgYW5kIGhpZ2h)ci4NCiAgZnVuY3Rp$24gdGVwX2Nv$nN0YW50KCRj$25zdGFudCkgew0KICAgIG)(ICh(dW5jdG)v$)9)eG)zdHMoJ2Nv$nN0YW50JykpIHsNCiAgICAgICR0ZW1wID0gY29uc3Rh$nQoJGNv$nN0YW50KTsNCiAgICB9IGVsc2Ugew0KICAgICAgZXZh$CgiXCR0ZW1wPSRj$25zdGFudDsiKTsNCiAgICB9DQogICAgc(V0dXJuICR0ZW1wOw0KICB9DQoNCi8vLy8NCi8vIE91dHB1dCB0aGUgdGF4IHB)c(N)$nRhZ2Ugd2)0aCBvcHRp$25h$CBwYWRkZWQgZGVjaW1h$HMNCiAgZnVuY3Rp$24gdGVwX2Rpc3BsYX)fdGF4X3Zh$HV)KCR2YWx1ZSwgJHBhZGRp$(cgPSBUQVhfREVDSU1BTF9QTEFDRVMpIHsNCiAgICBpZiAoc3RycG9zKCR2YWx1ZSwgJy4nKSkgew0KICAgICAgJGxv$3AgPSB0cnV)Ow0KICAgICAgd2hp$GUgKCRs$29wKSB7DQogICAgICAgIG)(IChzdWJzdHIoJHZh$HV)LCAtMSkgPT0gJzAnKSB7DQogICAgICAgICAgJHZh$HV)ID0gc3Vic3RyKCR2YWx1ZSwgMCwgLTEpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICRs$29wID0gZ(Fsc2U7DQogICAgICAgICAgaWYgKHN1YnN0cigkd(FsdWUsIC0xKSA9PSAnLicpIHsNCiAgICAgICAgICAgICR2YWx1ZSA9IHN1YnN0cigkd(FsdWUsIDAsIC0xKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQoNCiAgICBpZiAoJHBhZGRp$(cgPiAwKSB7DQogICAgICBpZiAoJGR)Y2)tYWxfcG9zID0gc3RycG9zKCR2YWx1ZSwgJy4nKSkgew0KICAgICAgICAkZGVjaW1h$HMgPSBzdHJsZW4oc3Vic3RyKCR2YWx1ZSwgKCRkZWNp$WFsX3BvcysxKSkpOw0KICAgICAgICB($3IgKCRpPSRkZWNp$WFsczsgJGk8JHBhZGRp$(c7ICRpKyspIHsNCiAgICAgICAgICAkd(FsdWUgLj0gJzAnOw0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICAkd(FsdWUgLj0gJy4nOw0KICAgICAgICB($3IgKCRpPTA7ICRpPCRwYWRkaW5nOyAkaSsrKSB7DQogICAgICAgICAgJHZh$HV)IC49ICcwJzsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCg0KICAgIHJ)dHVy$iAkd(FsdWU7DQogIH0NCg0KICB(dW5jdG)v$iB0ZXBf$WFp$CgkdG9f$(FtZSwgJHRvX2VtYW)sX2FkZHJ)c3MsICR)$WFp$F9zdWJqZWN0LCAkZW1haWxfdGV4dCwgJGZy$21fZW1haWxf$(FtZSwgJGZy$21fZW1haWxfYWRkc(Vzcykgew0KICAgIG)(IChTRU5EX0VNQU)MUyAhPSAndHJ1ZScpIHJ)dHVy$iB(YWxzZTsNCg0KICAgIC8vIE)uc3Rh$nRpYXR)IGEg$(V3IG1haWwg$2JqZWN0DQogICAgJG1)c3NhZ2UgPSBuZXcgZW1haWwoYXJyYXkoJ1gtTWFp$GVyOiBvc0Nv$W1)c(N)JykpOw0KDQogICAgLy8gQnVp$GQgdGh)IHR)eHQgd(Vyc2)v$g0KICAgICR0ZXh0ID0gc3RyaXBfdGFncygkZW1haWxfdGV4dCk7DQogICAgaWYgKEVNQU)MX1VTRV9IVE1MID09ICd0cnV)Jykgew0KICAgICAgJG1)c3NhZ2UtP(FkZF9odG1sKCR)$WFp$F90ZXh0LCAkdGV4dCk7DQogICAgfSB)$HN)IHsNCiAgICAgICRtZXNzYWd)LT5hZGRfdGV4dCgkdGV4dCk7DQogICAgfQ0KDQogICAgLy8gU2VuZCBtZXNzYWd)DQogICAgJG1)c3NhZ2UtP(J1aWxkX21)c3NhZ2UoKTsNCiAgICAk$WVzc2FnZS0+c2VuZCgkdG9f$(FtZSwgJHRvX2VtYW)sX2FkZHJ)c3MsICR(c(9tX2VtYW)sX25h$WUsICR(c(9tX2VtYW)sX2FkZHJ)c3MsICR)$WFp$F9zdWJqZWN0KTsNCiAgfQ0KDQogIGZ1$(N0aW9uIHR)cF9nZXRfdGF4X2NsYXNzX3RpdGx)KCR0YXhfY2xhc3NfaWQpIHsNCiAgICBpZiAoJHRheF9j$GFzc19pZCA9PSAnMCcpIHsNCiAgICAgIHJ)dHVy$iBURVhUX05PTkU7DQogICAgfSB)$HN)IHsNCiAgICAgICRj$GFzc2VzX3F1ZXJ5ID0gdGVwX2RiX3F1ZXJ5KCJzZWx)Y3QgdGF4X2NsYXNzX3RpdGx)IGZy$20gIiAuIFRBQkxFX1RBWF9DTEFTUyAuICIgd2h)c(UgdGF4X2NsYXNzX2)kID0gJyIgLiAoaW50KSR0YXhfY2xhc3NfaWQgLiAiJyIpOw0KICAgICAgJGNsYXNzZXMgPSB0ZXBfZGJfZ(V0Y2hfYXJyYXkoJGNsYXNzZXNfcXV)cnkpOw0KDQogICAgICByZXR1c(4gJGNsYXNzZXN$J3RheF9j$GFzc190aXRsZSddOw0KICAgIH0NCiAgfQ0KDQogIGZ1$(N0aW9uIHR)cF9iYW5uZXJfaW1hZ2VfZXh0ZW5zaW9uKCkgew0KICAgIG)(ICh(dW5jdG)v$)9)eG)zdHMoJ2)tYWd)dH)wZXMnKSkgew0KICAgICAgaWYgKG)tYWd)dH)wZXMoKSA(IE)NR19QTkcpIHsNCiAgICAgICAgc(V0dXJuICdw$(cnOw0KICAgICAgfSB)$HN)aWYgKG)tYWd)dH)wZXMoKSA(IE)NR19KUEcpIHsNCiAgICAgICAgc(V0dXJuICdqcGcnOw0KICAgICAgfSB)$HN)aWYgKG)tYWd)dH)wZXMoKSA(IE)NR19HSUYpIHsNCiAgICAgICAgc(V0dXJuICdnaWYnOw0KICAgICAgfQ0KICAgIH0gZWxzZW)(ICh(dW5jdG)v$)9)eG)zdHMoJ2)tYWd)Y3J)YXR)ZnJv$XBuZycpICY(IGZ1$(N0aW9uX2V4aXN0cygnaW1hZ2Vw$(cnKSkgew0KICAgICAgc(V0dXJuICdw$(cnOw0KICAgIH0gZWxzZW)(ICh(dW5jdG)v$)9)eG)zdHMoJ2)tYWd)Y3J)YXR)ZnJv$WpwZWcnKSA(JiB(dW5jdG)v$)9)eG)zdHMoJ2)tYWd)anB)ZycpKSB7DQogICAgICByZXR1c(4gJ2pwZyc7DQogICAgfSB)$HN)aWYgKGZ1$(N0aW9uX2V4aXN0cygnaW1hZ2Vjc(VhdGV(c(9tZ2)(JykgJiYgZnVuY3Rp$25fZXhpc3RzKCdp$WFnZWdpZicpKSB7DQogICAgICByZXR1c(4gJ2dpZic7DQogICAgfQ0KDQogICAgc(V0dXJuIGZh$HN)Ow0KICB9DQoNCi8vLy8NCi8vIFdyYXBwZXIgZnVuY3Rp$24gZ(9yIHJvdW5kKCkgZ(9yIHBocDMgY29tcGF0aWJp$G)0eQ0KICB(dW5jdG)v$iB0ZXBfc(91$(QoJHZh$HV)LCAkcHJ)Y2)zaW9uKSB7DQogICAgaWYgKFBIUF9WRVJTSU9OIDwgNCkgew0KICAgICAgJGV4cCA9IHBvdygxMCwgJHByZWNpc2)v$ik7DQogICAgICByZXR1c(4gc(91$(QoJHZh$HV)ICogJGV4cCkgLyAkZXhwOw0KICAgIH0gZWxzZSB7DQogICAgICByZXR1c(4gc(91$(QoJHZh$HV)LCAkcHJ)Y2)zaW9uKTsNCiAgICB9DQogIH0NCg0KLy8vLw0KLy8gQWRkIHRheCB0$yBhIHBy$2R1Y3RzIHByaWN)DQogIGZ1$(N0aW9uIHR)cF9hZGRfdGF4KCRwc()jZSwgJHRheCwgJG92ZXJyaWR)ID0gZ(Fsc2UpIHsNCiAgICBpZiAoICggKERJU1BMQV)fUFJJQ0VfV0)USF9UQVggPT0gJ3RydWUnKSB8fCAoJG92ZXJyaWR)ID09IHRydWUpICkgJiYgKCR0YXggPiAwKSApIHsNCiAgICAgIHJ)dHVy$iAkcHJpY2UgKyB0ZXBfY2FsY3VsYXR)X3RheCgkcHJpY2UsICR0YXgpOw0KICAgIH0gZWxzZSB7DQogICAgICByZXR1c(4gJHByaWN)Ow0KICAgIH0NCiAgfQ0KDQovLyBDYWxjdWxhdGVzIFRheCBy$3VuZG)uZyB0aGUgc(VzdWx0DQogIGZ1$(N0aW9uIHR)cF9jYWxjdWxhdGVfdGF4KCRwc()jZSwgJHRheCkgew0KICAgIHJ)dHVy$iAkcHJpY2UgKiAkdGF4IC8gMTAwOw0KICB9DQoNCi8vLy8NCi8vIFJ)dHVy$nMgdGh)IHRheCByYXR)IGZvciBhIHpv$(UgLyBj$GFzcw0KLy8gVEFCTEVTOiB0YXhfc(F0ZXMsIHpv$(VzX3RvX2d)$196$25)cw0KICB(dW5jdG)v$iB0ZXBfZ2V0X3RheF9yYXR)KCRj$GFzc19pZCwgJGNvdW50cn)faWQgPSAtMSwgJHpv$(VfaWQgPSAtMSkgew0KICAgIGds$2Jh$CAkY3VzdG9tZXJfe(9uZV9pZCwgJGN1c3Rv$WVyX2NvdW50cn)faWQ7DQoNCiAgICBpZiAoICgkY291$nRyeV9pZCA9PSAtMSkgJiYgKCR6$25)X2)kID09IC0xKSApIHsNCiAgICAgIG)(ICghdGVwX3N)c3Np$25faXNfc(VnaXN0ZXJ)ZCgnY3VzdG9tZXJfaWQnKSkgew0KICAgICAgICAkY291$nRyeV9pZCA9IFNUT1JFX0NPVU5UU)k7DQogICAgICAgICR6$25)X2)kID0gU1RPUkVfWk9ORTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgICRj$3VudHJ5X2)kID0gJGN1c3Rv$WVyX2NvdW50cn)faWQ7DQogICAgICAgICR6$25)X2)kID0gJGN1c3Rv$WVyX3pv$(VfaWQ7DQogICAgICB9DQogICAgfQ0KDQogICAgJHRheF9xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IFNVTSh0YXhfc(F0ZSkgYXMgdGF4X3JhdGUgZnJv$SAiIC4gVEFCTEVfVEFYX1JBVEVTIC4gIiB0ciBsZWZ0IGpvaW4gIiAuIFRBQkxFX1pPTkVTX1RPX0dFT19aT05FUyAuICIge(EgT04gdHIudGF4X3pv$(VfaWQgPSB6YS5nZW9fe(9uZV9pZCBsZWZ0IGpvaW4gIiAuIFRBQkxFX0dFT19aT05FUyAuICIgdHogT04gdHouZ2VvX3pv$(VfaWQgPSB0ci50YXhfe(9uZV9pZCBXSEVSRSAoe(Eue(9uZV9j$3VudHJ5X2)kIE)TIE5VTEwgT1Ige(Eue(9uZV9j$3VudHJ5X2)kID0gJzAnIE9SIHphLnpv$(VfY291$nRyeV9pZCA9ICciIC4gKG)udCkkY291$nRyeV9pZCAuICInKSBBTkQgKHphLnpv$(VfaWQgSVMgT)VMTCBPUiB6YS56$25)X2)kID0gJzAnIE9SIHphLnpv$(VfaWQgPSAnIiAuIChp$nQpJHpv$(VfaWQgLiAiJykgQU5EIHRyLnRheF9j$GFzc19pZCA9ICciIC4gKG)udCkkY2xhc3NfaWQgLiAiJyBHUk9VUCBCWSB0ci50YXhfcHJp$3JpdHkiKTsNCiAgICBpZiAodGVwX2RiX251$V9y$3dzKCR0YXhfcXV)cnkpKSB7DQogICAgICAkdGF4X211$HRpcGxpZXIgPSAwOw0KICAgICAgd2hp$GUgKCR0YXggPSB0ZXBfZGJfZ(V0Y2hfYXJyYXkoJHRheF9xdWVyeSkpIHsNCiAgICAgICAgJHRheF9tdWx0aXBsaWVyICs9ICR0YXh$J3RheF9yYXR)J107DQogICAgICB9DQogICAgICByZXR1c(4gJHRheF9tdWx0aXBsaWVyOw0KICAgIH0gZWxzZSB7DQogICAgICByZXR1c(4gMDsNCiAgICB9DQogIH0NCg0KLy8vLw0KLy8gU(V0dXJucyB0aGUgdGF4IHJhdGUgZ(9yIGEgdGF4IGNsYXNzDQovLyBUQUJMRVM6IHRheF9yYXR)cw0KICB(dW5jdG)v$iB0ZXBfZ2V0X3RheF9yYXR)X3Zh$HV)KCRj$GFzc19pZCkgew0KICAgICR0YXhfcXV)cnkgPSB0ZXBfZGJfcXV)cnkoInN)$GVjdCBTVU0odGF4X3JhdGUpIGFzIHRheF9yYXR)IGZy$20gIiAuIFRBQkxFX1RBWF9SQVRFUyAuICIgd2h)c(UgdGF4X2NsYXNzX2)kID0gJyIgLiAoaW50KSRj$GFzc19pZCAuICInIGdy$3VwIGJ5IHRheF9wc()vc()0eSIpOw0KICAgIG)(ICh0ZXBfZGJf$nVtX3Jvd3MoJHRheF9xdWVyeSkpIHsNCiAgICAgICR0YXhf$XVsdG)w$G))ciA9IDA7DQogICAgICB3aG)sZSAoJHRheCA9IHR)cF9kY)9(ZXRjaF9hcnJheSgkdGF4X3F1ZXJ5KSkgew0KICAgICAgICAkdGF4X211$HRpcGxpZXIgKz0gJHRheFsndGF4X3JhdGUnXTsNCiAgICAgIH0NCiAgICAgIHJ)dHVy$iAkdGF4X211$HRpcGxpZXI7DQogICAgfSB)$HN)IHsNCiAgICAgIHJ)dHVy$iAwOw0KICAgIH0NCiAgfQ0KDQogIGZ1$(N0aW9uIHR)cF9jYWxsX2Z1$(N0aW9uKCR(dW5jdG)v$iwgJHBhc(FtZXR)ciwgJG9ia(VjdCA9ICcnKSB7DQogICAgaWYgKCRvY(p)Y3QgPT0gJycpIHsNCiAgICAgIHJ)dHVy$iBjYWxsX3VzZXJfZnVuYygkZnVuY3Rp$24sICRwYXJh$WV0ZXIpOw0KICAgIH0gZWxzZW)(IChQSFBfVkVSU0)PTiA8IDQpIHsNCiAgICAgIHJ)dHVy$iBjYWxsX3VzZXJf$WV0aG9kKCR(dW5jdG)v$iwgJG9ia(VjdCwgJHBhc(FtZXR)cik7DQogICAgfSB)$HN)IHsNCiAgICAgIHJ)dHVy$iBjYWxsX3VzZXJfZnVuYyhhcnJheSgk$2JqZWN0LCAkZnVuY3Rp$24pLCAkcGFyYW1)dGVyKTsNCiAgICB9DQogIH0NCg0KICB(dW5jdG)v$iB0ZXBfZ2V0X3pv$(VfY2xhc3NfdG)0$GUoJHpv$(VfY2xhc3NfaWQpIHsNCiAgICBpZiAoJHpv$(VfY2xhc3NfaWQgPT0gJzAnKSB7DQogICAgICByZXR1c(4gVEVYVF9OT05FOw0KICAgIH0gZWxzZSB7DQogICAgICAkY2xhc3N)c19xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IGd)$196$25)X25h$WUgZnJv$SAiIC4gVEFCTEVfR0VPX1pPTkVTIC4gIiB3aGVyZSBnZW9fe(9uZV9pZCA9ICciIC4gKG)udCkke(9uZV9j$GFzc19pZCAuICInIik7DQogICAgICAkY2xhc3N)cyA9IHR)cF9kY)9(ZXRjaF9hcnJheSgkY2xhc3N)c19xdWVyeSk7DQoNCiAgICAgIHJ)dHVy$iAkY2xhc3N)c1snZ2VvX3pv$(Vf$(FtZSddOw0KICAgIH0NCiAgfQ0KDQogIGZ1$(N0aW9uIHR)cF9jZ(dfcHVs$F9k$3duX3pv$(VfY2xhc3N)cygke(9uZV9j$GFzc19pZCwgJGt)eSA9ICcnKSB7DQogICAgJG5h$WUgPSAoKCRrZXkpID8gJ2Nv$(ZpZ3VyYXRp$25$JyAuICRrZXkgLiAnXScgOiAnY29uZ()ndXJhdG)v$)92YWx1ZScpOw0KDQogICAgJHpv$(VfY2xhc3NfYXJyYXkgPSBhcnJheShhcnJheSgnaWQnID0+ICcwJywgJ3R)eHQnID0+IFRFWFRfTk9ORSkpOw0KICAgICR6$25)X2NsYXNzX3F1ZXJ5ID0gdGVwX2RiX3F1ZXJ5KCJzZWx)Y3QgZ2VvX3pv$(VfaWQsIGd)$196$25)X25h$WUgZnJv$SAiIC4gVEFCTEVfR0VPX1pPTkVTIC4gIiBvc(R)ciBieSBnZW9fe(9uZV9uYW1)Iik7DQogICAgd2hp$GUgKCR6$25)X2NsYXNzID0gdGVwX2RiX2Z)dGNoX2Fyc(F5KCR6$25)X2NsYXNzX3F1ZXJ5KSkgew0KICAgICAgJHpv$(VfY2xhc3NfYXJyYX)$XSA9IGFyc(F5KCdpZCcgPT4gJHpv$(VfY2xhc3N$J2d)$196$25)X2)kJ10sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3R)eHQnID0+ICR6$25)X2NsYXNzWydnZW9fe(9uZV9uYW1)J10pOw0KICAgIH0NCg0KICAgIHJ)dHVy$iB0ZXBfZHJhd19wdWxsX2Rvd25f$WVudSgk$(FtZSwgJHpv$(VfY2xhc3NfYXJyYXksICR6$25)X2NsYXNzX2)kKTsNCiAgfQ0KDQogIGZ1$(N0aW9uIHR)cF9jZ(dfcHVs$F9k$3duX29yZGVyX3N0YXR1c2VzKCRvc(R)c)9zdGF0dXNfaWQsICRrZXkgPSAnJykgew0KICAgIGds$2Jh$CAk$GFuZ3VhZ2VzX2)kOw0KDQogICAgJG5h$WUgPSAoKCRrZXkpID8gJ2Nv$(ZpZ3VyYXRp$25$JyAuICRrZXkgLiAnXScgOiAnY29uZ()ndXJhdG)v$)92YWx1ZScpOw0KDQogICAgJHN0YXR1c2VzX2Fyc(F5ID0gYXJyYXkoYXJyYXkoJ2)kJyA9PiAnMCcsICd0ZXh0JyA9PiBURVhUX0RFRkFVTFQpKTsNCiAgICAkc3RhdHVzZXNfcXV)cnkgPSB0ZXBfZGJfcXV)cnkoInN)$GVjdCBvc(R)cnNfc3RhdHVzX2)kLCBvc(R)cnNfc3RhdHVzX25h$WUgZnJv$SAiIC4gVEFCTEVfT1JERVJTX1NUQVRVUyAuICIgd2h)c(Ug$GFuZ3VhZ2VfaWQgPSAnIiAuIChp$nQpJGxh$(d1YWd)c19pZCAuICInIG9yZGVyIGJ5IG9yZGVyc19zdGF0dXNf$(FtZSIpOw0KICAgIHdoaWx)ICgkc3RhdHVzZXMgPSB0ZXBfZGJfZ(V0Y2hfYXJyYXkoJHN0YXR1c2VzX3F1ZXJ5KSkgew0KICAgICAgJHN0YXR1c2VzX2Fyc(F5W10gPSBhcnJheSgnaWQnID0+ICRzdGF0dXN)c1sn$3JkZXJzX3N0YXR1c19pZCddLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndGV4dCcgPT4gJHN0YXR1c2VzWydvc(R)cnNfc3RhdHVzX25h$WUnXSk7DQogICAgfQ0KDQogICAgc(V0dXJuIHR)cF9kc(F3X3B1$GxfZG93$)9tZW51KCRuYW1)LCAkc3RhdHVzZXNfYXJyYXksICRvc(R)c)9zdGF0dXNfaWQpOw0KICB9DQoNCiAgZnVuY3Rp$24gdGVwX2d)dF9vc(R)c)9zdGF0dXNf$(FtZSgk$3JkZXJfc3RhdHVzX2)kLCAk$GFuZ3VhZ2VfaWQgPSAnJykgew0KICAgIGds$2Jh$CAk$GFuZ3VhZ2VzX2)kOw0KDQogICAgaWYgKCRvc(R)c)9zdGF0dXNfaWQgPCAxKSByZXR1c(4gVEVYVF9ERUZBVUxUOw0KDQogICAgaWYgKCFpc19udW1)c()jKCRsYW5ndWFnZV9pZCkpICRsYW5ndWFnZV9pZCA9ICRsYW5ndWFnZXNfaWQ7DQoNCiAgICAkc3RhdHVzX3F1ZXJ5ID0gdGVwX2RiX3F1ZXJ5KCJzZWx)Y3Qg$3JkZXJzX3N0YXR1c19uYW1)IGZy$20gIiAuIFRBQkxFX09SREVSU19TVEFUVVMgLiAiIHdoZXJ)IG9yZGVyc19zdGF0dXNfaWQgPSAnIiAuIChp$nQpJG9yZGVyX3N0YXR1c19pZCAuICInIGFuZCBsYW5ndWFnZV9pZCA9ICciIC4gKG)udCkk$GFuZ3VhZ2VfaWQgLiAiJyIpOw0KICAgICRzdGF0dXMgPSB0ZXBfZGJfZ(V0Y2hfYXJyYXkoJHN0YXR1c19xdWVyeSk7DQoNCiAgICByZXR1c(4gJHN0YXR1c1sn$3JkZXJzX3N0YXR1c19uYW1)J107DQogIH0NCg0KLy8vLw0KLy8gU(V0dXJuIGEgc(FuZG9tIHZh$HV)DQogIGZ1$(N0aW9uIHR)cF9yYW5kKCRtaW4gPSBudWxsLCAk$WF4ID0g$nVs$Ckgew0KICAgIHN0YXRpYyAkc2V)ZGVkOw0KDQogICAgaWYgKCEkc2V)ZGVkKSB7DQogICAgICBtdF9zc(FuZCgoZG91Y(x)KW1pY3JvdG)tZSgpKjEwMDAwMDApOw0KICAgICAgJHN)ZWR)ZCA9IHRydWU7DQogICAgfQ0KDQogICAgaWYgKG)zc2V0KCRtaW4pICY(IG)zc2V0KCRtYXgpKSB7DQogICAgICBpZiAoJG1p$iA+PSAk$WF4KSB7DQogICAgICAgIHJ)dHVy$iAk$W)uOw0KICAgICAgfSB)$HN)IHsNCiAgICAgICAgc(V0dXJuIG10X3Jh$(QoJG1p$iwgJG1heCk7DQogICAgICB9DQogICAgfSB)$HN)IHsNCiAgICAgIHJ)dHVy$iBtdF9yYW5kKCk7DQogICAgfQ0KICB9DQoNCi8vIG5sM(JyKCkgcHJp$3IgUEhQIDQuMi4wIGRpZCBu$3QgY29ud(VydCBsaW5)Z(V)ZHMg$24gYWxsIE9TcyAoaXQg$25seSBj$252ZXJ0ZWQgXG4pDQogIGZ1$(N0aW9uIHR)cF9j$252ZXJ0X2xp$(V(ZWVkcygkZnJv$SwgJHRvLCAkc3RyaW5nKSB7DQogICAgaWYgKChQSFBfVkVSU0)PTiA8ICI0LjAuNSIpICY(IG)zX2Fyc(F5KCR(c(9tKSkgew0KICAgICAgc(V0dXJuIGVyZWdfc(Vw$GFjZSgnKCcgLiBp$XBs$2R)KCd8JywgJGZy$20pIC4gJyknLCAkdG8sICRzdHJp$(cpOw0KICAgIH0gZWxzZSB7DQogICAgICByZXR1c(4gc3RyX3J)cGxhY2UoJGZy$20sICR0$ywgJHN0c()uZyk7DQogICAgfQ0KICB9DQoNCiAgZnVuY3Rp$24gdGVwX3N0c()uZ190$19p$nQoJHN0c()uZykgew0KICAgIHJ)dHVy$iAoaW50KSRzdHJp$(c7DQogIH0NCg0KLy8vLw0KLy8gUGFyc2UgYW5kIHN)Y3VyZSB0aGUgY1BhdGggcGFyYW1)dGVyIHZh$HV)cw0KICB(dW5jdG)v$iB0ZXBfcGFyc2VfY2F0ZWdvcn)fcGF0aCgkY1BhdGgpIHsNCi8vIG1ha2Ugc3VyZSB0aGUgY2F0ZWdvcnkgSURzIGFyZSBp$nR)Z2Vycw0KICAgICRjUGF0aF9hcnJheSA9IGFyc(F5X21hcCgndGVwX3N0c()uZ190$19p$nQnLCB)eHBs$2R)KCdfJywgJGNQYXRoKSk7DQoNCi8vIG1ha2Ugc3VyZSBu$yBkdXBsaWNhdGUgY2F0ZWdvcnkgSURzIGV4aXN0IHdoaWNoIGNvdWxkIGxvY2sgdGh)IHN)cnZ)ciBp$iBhIGxv$3ANCiAgICAkdG1wX2Fyc(F5ID0gYXJyYXkoKTsNCiAgICAk$iA9IHNpe(VvZigkY1BhdGhfYXJyYXkpOw0KICAgIGZvciAoJGk9MDsgJGk8JG47ICRpKyspIHsNCiAgICAgIG)(ICghaW5fYXJyYXkoJGNQYXRoX2Fyc(F5WyRpXSwgJHRtcF9hcnJheSkpIHsNCiAgICAgICAgJHRtcF9hcnJheVtdID0gJGNQYXRoX2Fyc(F5WyRpXTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICByZXR1c(4gJHRtcF9hcnJheTsNCiAgfQ0KICANCiAgLy8g$XkgY29kZQ0KICB(dW5jdG)v$iB0ZXBfc(V2ZXJzZWRDYXR)Z29yeVBhdGgoJG)uU3RyaW5nLCAk$(V)ZGx)KQ0Kew0KCSRoZWFkID0gYXJyYXkoKTsNCgkkaSA9IDA7DQoJDQokdGFp$CA9IGFyc(F5KCk7DQoJd2hp$GUgKHN0cnBvcygkaW5TdHJp$(csJG5)ZWRsZSkpDQoJew0KCQkNCgkJJHBvc2)0aW9uID0gc3RycG9zKCRp$)N0c()uZywgJG5)ZWRsZSk7DQoJCS8vJGh)YWQgLj0gc3Vic3RyKCRp$)N0c()uZywwLCRw$3NpdG)v$ikuJz4gJzsNCgkJJHRhaWx$JG)dID0gc3Vic3RyKCRp$)N0c()uZywwLCRw$3NpdG)v$ik7DQoJCSRpICs9MTsNCgkJJG)uU3RyaW5nID0gc3Vic3RyKCRp$)N0c()uZywkcG9zaXRp$24rMSk7DQoJfQ0KCQkNCgkvLyRvdXRTdHJp$(cgPSAkaGVhZDsNCgkNCgkvLyBidW)sZCBvdXQgc3RyaW5nDQoJJGh)YWQgPSBhcnJheV9yZXZ)cnN)KCR0YW)sKTsNCgkJDQoJCQ0KCWZvciAoJGNvdW50ZXIgPSAwOyAkY291$nR)ciA8PXNpe(VvZigkaGVhZCkgLTE7ICRj$3VudGVyICs9MSkNCg)7DQoJCSRvdXRTdHJp$(cgLj0gJyAnLiRuZWVk$GUuJGh)YWR$JGNvdW50ZXJdOw0KCX0NCgkvL2VjaG8gJG)uU3RyaW5nLic8YnI+JzsNCg)yZXR1c(4gc3Vic3RyKCRp$)N0c()uZy4k$3V0U3RyaW5nLCA5KTsNCn0NCg0KZnVuY3Rp$24gdGVwX3Jh$(RzdHIoJGx)$(d0aCA9IDE2KSB7DQogICBtdF9zc(FuZCgoZG91Y(x)KW1pY3JvdG)tZSgpKjEwMDAwKTsNCiAgIGZvcigkaT0wOyRpPCRsZW5ndGg7JGkrKykgew0KICAgICAgICR4ID0g$XRfc(FuZCgxLDMpOw0KICAgICAgICRzdHIgLj0gKCgkeCA9PSAxKSA/IGNocihtdF9yYW5kKDQ4LDU3KSkgOiAoKCR4ID09IDIpID8gY2hyKG10X3Jh$(QoNjUsOTApKSA6IGNocihtdF9yYW5kKDk3LDEyMikpKSk7DQogICB9DQogICByZXR1c(4gJHN0cjsNCn0NCg0KZnVuY3Rp$24gdGVwX2NoZWNrX3J)Z(VyZW5jZSgkaW5TdHJp$(cpDQp7DQoJLy8gZ()yc3QgcXV)cnkgYWRtaW4gdGFi$GUgZ(9yIHJ)Z(VyZW5jZXMg$nVtY(VyDQoJJHJ)Z(VyZW5jZV9xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IGFk$W)uX3J)Z(VyZW5jZSB(c(9tICIgLiBUQUJMRV9BRE1JTik7DQogICAgJHJ)Z(VyZW5jZSA9IHR)cF9kY)9(ZXRjaF9hcnJheSgkc(V(ZXJ)$(N)X3F1ZXJ5KTsNCgkvLyBjaGVjayBkdXBsaWNhdGVkIG51$WJ)ciBpZiBh$nkNCgkvLyBpZiB($3VuZCwgY2Fs$CB0ZXBfc(FuZHN0ciBhZ2Fp$iB0aWxsIG5vdCB($3VuZA0KCS8vDQoJDQoJJG91dFN0c()uZyA9IHR)cF9yYW5kc3RyKDYpOw0KCWZvc(VhY2ggKCRyZWZ)c(VuY2UgYXMgJHZh$HV)KSANCg)7DQogICAJCW)(ICgkaW5TdHJp$(cgPT0gJHZh$HV)KQ0KICAgCQ)7DQogICAJCQkk$3V0U3RyaW5nID0gdGVwX3Jh$(RzdHIoNikgOw0KICAgCQ)9DQoJfQ0KDQoJDQoJc(V0dXJuICRvdXRTdHJp$(c7DQp9DQovLyB)$(Qg$2Yg$XkgY29kZQ0KDQoNCiAgZnVuY3Rp$24gdGVwX21vZHVsZXNf$G)zdCgk$W9kdWx)X2Rpc(VjdG9yeSwgJG1vZHVsZV90eXB)KSB7DQogICAgZ2xvY(FsICRQSFBfU0VMRiwgJGxh$(d1YWd)Ow0KICAgICRt$2R1$GVzID0gYXJyYXkoKTsNCg0KICAgICR(aWx)X2V4dGVuc2)v$iA9IHN1YnN0cigkUEhQX1NFTEYsIHN0cnJw$3MoJFBIUF9TRUxGLCAnLicpKTsNCiAgICAkZG)yZWN0$3J5X2Fyc(F5ID0gYXJyYXkoKTsNCiAgICBpZiAoJGRpciA9IEBkaXIoJG1vZHVsZV9kaXJ)Y3RvcnkpKSB7DQogICAgICB3aG)sZSAoJGZp$GUgPSAkZG)yLT5yZWFkKCkpIHsNCiAgICAgICAgaWYgKCFpc19kaXIoJG1vZHVsZV9kaXJ)Y3RvcnkgLiAkZ()sZSkpIHsNCiAgICAgICAgICBpZiAoc3Vic3RyKCR(aWx)LCBzdHJycG9zKCR(aWx)LCAnLicpKSA9PSAkZ()sZV9)eHR)$nNp$24pIHsNCiAgICAgICAgICAgICRkaXJ)Y3Rvcn)fYXJyYX)$XSA9ICR(aWx)Ow0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgc29ydCgkZG)yZWN0$3J5X2Fyc(F5KTsNCiAgICAgICRkaXItP(Ns$3N)KCk7DQogICAgfQ0KICAgIA0KDQogICAgZ(9yICgkaSA9IDAsICRuID0gc2)6ZW9(KCRkaXJ)Y3Rvcn)fYXJyYXkpOyAkaSA8ICRuOyAkaSsrKSB7DQogICAgICAkZ()sZSA9ICRkaXJ)Y3Rvcn)fYXJyYX)$JG)dOw0KDQogICAgICBp$(NsdWR)KERJU)9GU19DQVRBTE9HX0xBTkdVQUdFUyAuICRsYW5ndWFnZSAuICcv$W9kdWx)cy8nIC4gJG1vZHVsZV90eXB)IC4gJy8nIC4gJGZp$GUpOw0KICAgICAgaW5j$HVkZSgk$W9kdWx)X2Rpc(VjdG9yeSAuICR(aWx)KTsNCg0KICAgICAgJGNsYXNzID0gc3Vic3RyKCR(aWx)LCAwLCBzdHJycG9zKCR(aWx)LCAnLicpKTsNCiAgICAgIG)(ICh0ZXBfY2xhc3NfZXhpc3RzKCRj$GFzcykpIHsNCiAgICAgICAgJG1vZHVsZSA9IG5)dyAkY2xhc3M7DQogICAgICAgICRt$2R1$GVzWyRpXVsnaWQnXSA9ICRt$2R1$GUtP(NvZGU7DQogICAgICAgICRt$2R1$GVzWyRpXVsndGV4dCddID0gJG1vZHVsZS0+dG)0$GU7DQogICAgICB9DQogICAgfQ0KDQogICAgc(V0dXJuICRt$2R1$GVzOw0KICB9DQoNCiAgZnVuY3Rp$24gdGVwX2d)dF9zaG)wcG)uZ19t$2R1$GVzX3RpdGx)KCRzZWx)Y3R)ZF9t$2R1$GVzKSB7DQogICAgJHRhY(x)ID0gc3BsaXQoI)s6XSIgLCAkc2VsZWN0ZWRf$W9kdWx)cyk7DQogICAgJHRpdGx)ID0gJyc7DQogICAgJG4gPSBzaXp)$2YoJHRhY(x)KTsNCiAgICB($3IgKCRpID0gMDsgJGkgPCAk$jsgJGkrKykgew0KICAgICAgJHRpdGx)IC49ICR0YWJsZVskaV0gLiAnPGJyPicgLiAiXG4iOw0KICAgIH0NCiAgICANCiAgICBpZiAoIXR)cF9u$3Rf$nVs$Cgkc2VsZWN0ZWRf$W9kdWx)cykpICR0aXRsZSA9ICctLW5v$(UtLSc7DQogICAgDQogICAgc(V0dXJuICR0aXRsZTsNCiAgfQ0KDQogIGZ1$(N0aW9uIHR)cF9jZ(dfd(FsaWRfc2hpcHBp$(df$W9kdWx)cygkc2VsZWN0ZWQsICRrZXkgPSAnJykgew0KICAgIGds$2Jh$CAkc2hpcHBp$(df$W9kdWx)czsNCiAgICAk$(FtZSA9ICgoJGt)eSkgPyAnY29uZ()ndXJhdG)v$)snIC4gJGt)eSAuICddW10nIDogJ2Nv$(ZpZ3VyYXRp$25fd(FsdWUnKTsNCiAgICAkZGV(YXVsdHMgPSBzcGxpdCgiWzpdIiAsICRzZWx)Y3R)ZCk7DQoNCiAgICByZXR1c(4gdGVwX2RyYXdfcHVs$F9tdWx0aXN)$GVjdF9tZW51KCRuYW1)LCAkc2hpcHBp$(df$W9kdWx)cywgJGR)Z(F1$HRzKTsNCiAgfQ0KDQovLyBUQUJMRVM6IHBy$2R1Y3RzX2F2YW)sYWJp$G)0eQ0KICB(dW5jdG)v$iB0ZXBfZ2V0X3By$2R1Y3RzX2F2YW)sYWJp$G)0eV9uYW1)KCRwc(9kdWN0c19hd(Fp$GFiaWxpdH)faWQsICRsYW5ndWFnZV9pZCkgew0KCWds$2Jh$CAk$GFuZ3VhZ2VzX2)kOw0KCW)(ICh)$XB0eSgk$GFuZ3VhZ2UpKSAk$GFuZ3VhZ2UgPSAk$GFuZ3VhZ2VzX2)kOw0KICAgICRwc(9kdWN0c19hd(Fp$GFiaWxpdH)fcXV)cnkgPSB0ZXBfZGJfcXV)cnkoInN)$GVjdCBwc(9kdWN0c19hd(Fp$GFiaWxpdH)f$(FtZSB(c(9tICIgLiBUQUJMRV9QUk9EVUNUU19BVkFJTEFCSUxJVFkgLiAiIHdoZXJ)IHBy$2R1Y3RzX2F2YW)sYWJp$G)0eV9pZCA9ICciIC4gKG)udCkkcHJvZHVjdHNfYXZhaWxhY()saXR5X2)kIC4gIicgYW5kIGxh$(d1YWd)X2)kID0gJyIgLiAoaW50KSRsYW5ndWFnZV9pZCAuICInIik7DQogICAgJHBy$2R1Y3RzX2F2YW)sYWJp$G)0eSA9IHR)cF9kY)9(ZXRjaF9hcnJheSgkcHJvZHVjdHNfYXZhaWxhY()saXR5X3F1ZXJ5KTsNCg0KICAgIHJ)dHVy$iAkcHJvZHVjdHNfYXZhaWxhY()saXR5Wydwc(9kdWN0c19hd(Fp$GFiaWxpdH)f$(FtZSddOw0KICB9DQoNCi8vIFRBQkxFUzogcHJvZHVjdHNfYXZhaWxhY()saXR5DQogIGZ1$(N0aW9uIHR)cF9nZXRfcHJvZHVjdHNfa(1f$(FtZSgkcHJvZHVjdHNfa(1faWQsICRsYW5ndWFnZV9pZCkgew0KCWds$2Jh$CAk$GFuZ3VhZ2VzX2)kOw0KCW)(ICh)$XB0eSgk$GFuZ3VhZ2UpKSAk$GFuZ3VhZ2UgPSAk$GFuZ3VhZ2VzX2)kOw0KICAgICRwc(9kdWN0c19q$V9xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IHBy$2R1Y3RzX2ptX25h$WUgZnJv$SAiIC4gVEFCTEVfUFJPRFVDVFNfSk0gLiAiIHdoZXJ)IHBy$2R1Y3RzX2ptX2)kID0gJyIgLiAoaW50KSRwc(9kdWN0c19q$V9pZCAuICInIGFuZCBsYW5ndWFnZV9pZCA9ICciIC4gKG)udCkk$GFuZ3VhZ2VfaWQgLiAiJyIpOw0KICAgICRwc(9kdWN0c19q$SA9IHR)cF9kY)9(ZXRjaF9hcnJheSgkcHJvZHVjdHNfa(1fcXV)cnkpOw0KDQogICAgc(V0dXJuICRwc(9kdWN0c19q$VsncHJvZHVjdHNfa(1f$(FtZSddOw0KICB9DQoNCg0KLy8gaW1hZ2VzIGNhdGVn$3JpZXMNCiAgZnVuY3Rp$24gdGVwX291dHB1dF9nZW5)c(F0ZWRfY2F0ZWdvcn)fcGF0aF9(cygkaWQsICR(c(9tID0gJ2NhdGVn$3J5Jykgew0KICAgICRjYWxjdWxhdGVkX2NhdGVn$3J5X3BhdGhfc3RyaW5nID0gJyc7DQogICAgJGNh$GN1$GF0ZWRfY2F0ZWdvcn)fcGF0aCA9IHR)cF9nZW5)c(F0ZV9jYXR)Z29yeV9wYXRoKCRpZCwgJGZy$20pOw0KICAgIGZvciAoJGk9MCwgJG49c2)6ZW9(KCRjYWxjdWxhdGVkX2NhdGVn$3J5X3BhdGgpOyAkaTwk$jsgJGkrKykgew0KICAgICAgICAgICRpaSA9ICgk$iAtIDEpIC0gJGk7DQogICAgICB($3IgKCRqPTAsICRrPXNpe(VvZigkY2FsY3VsYXR)ZF9jYXR)Z29yeV9wYXRoWyRpaV0pOyAkajwkazsgJGorKykgew0KICAgICAgICAgICRqaiA9ICgkayAtIDEpIC0gJGo7DQogICAgICAgICRkaXJfcGF0aCA9IGVyZWdfc(Vw$GFjZSgiW15hLXowLTkuX10iLCAiIiwgc3RyX3J)cGxhY2UoIiAiLCAiXyIsIHN0c)9yZXBsYWN)KCI)MjAiLCAiXyIsIHN0cnRv$G93ZXIoJGNh$GN1$GF0ZWRfY2F0ZWdvcn)fcGF0aFskaW)dWyRqa)1$J3R)eHQnXSkpKSk7DQogICAgICAgICRjYWxjdWxhdGVkX2NhdGVn$3J5X3N0c()uZyAuPSAkZG)yX3BhdGggLiAnLyc7CQkNCiAgICAgIH0NCiAgICB9DQogICAgc(V0dXJuICRjYWxjdWxhdGVkX2NhdGVn$3J5X3N0c()uZzsNCiAgfQ0KLy8gZW9(IG)tYWd)cyBjYXR)Z29yaWVzDQoNCiAgLy9U$3Rh$EIyQiBzdGFydA0KICB(dW5jdG)v$iB0ZXBfeHBwcF9nZXRtYXhwc()jZXMoKSB7DQogICAgLy9tYXggcHJpY2VzIHB)ciBwc(9kdWN0DQoJc(V0dXJuIDEwOw0KICB9DQogIA0KICB(dW5jdG)v$iB0ZXBfeHBwcF9nZXRwc()jZXNudW0oKSB7DQogICAgJHByaWN)cyA9IFhQUk)DRVNfT)VNOw0KCXJ)dHVy$iAkcHJpY2VzOw0KICB9DQoNCiAgZnVuY3Rp$24gdGVwX3hwcHBfZ2V0cHJpY2VsaXN0KCR0cykgew0KCSRwc()jZXNf$nVtID0gdGVwX3hwcHBfZ2V0cHJpY2Vz$nVtKCk7DQogICAgZ(9yICgkaT0yOyAkaTw9JHByaWN)c19udW07ICRpKyspIHsNCgkgIG)(ICgkdHMgIT0gT)VMTCkgJHByaWN)X2xpc3QgLj0gJHRzIC4gIi5wc(9kdWN0c19wc()jZV8iIC4gJGkgLiAiLCI7DQoJICB)$HN)ICRwc()jZV9saXN0IC49ICJwc(9kdWN0c19wc()jZV8iIC4gJGkgLiAiLCI7DQogICAgfQ0KCW)(ICgkdHMgIT0gT)VMTCkgJHByaWN)X2xpc3QgLj0gJHRzIC4gIi5wc(9kdWN0c19wc()jZSI7DQoJZWxzZSAkcHJpY2Vf$G)zdCAuPSAicHJvZHVjdHNfcHJpY2UiOw0KCXJ)dHVy$iAkcHJpY2Vf$G)zdDsNCiAgfQ0KDQogIGZ1$(N0aW9uIHR)cF9jZ(dfcHVs$F9k$3duX3ByaWN)cygkcHJpY2UpIHsNCg)($3IgKCRpPTE7ICRpPD10ZXBfeHBwcF9nZXRtYXhwc()jZXMoKTsgJGkrKykgew0KICAgICAgJHByaWN)X2Fyc(F5W10gPSBhcnJheSgnaWQnID0+ICRpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndGV4dCcgPT4gJGkpOw0KICAgIH0NCiAgICByZXR1c(4gdGVwX2RyYXdfcHVs$F9k$3duX21)$nUoJ2Nv$(ZpZ3VyYXRp$25fd(FsdWUnLCAkcHJpY2VfYXJyYXksICRwc()jZSk7DQogIH0NCg0KICB(dW5jdG)v$iB0ZXBfdXBkYXR)X3ByaWN)cygkcHJpY2UpIHsNCiAgICAkZG9fZHJvcCA9IHRydWU7DQoJJHByaWN)c19udW0gPSB0ZXBfeHBwcF9nZXRwc()jZXNudW0oKTsNCg)($3IgKCRpPTI7ICRpPD0kcHJpY2VzX251$TsgJGkrKykNCgkgIG)(ICgh$X)zcWxfcXV)cnkoInN)$GVjdCBwc(9kdWN0c19wc()jZV8iIC4gJGkgLiAiIGZy$20gIiAuIFRBQkxFX1BST0RVQ1RTKSkgew0KCSAgICAkZG9fZHJvcCA9IGZh$HN)Ow0KCSAgICB0ZXBfZGJfcXV)cnkoI(FsdGVyIHRhY(x)ICIgLiBUQUJMRV9QUk9EVUNUUyAuICIgYWRkIHBy$2R1Y3RzX3ByaWN)XyIgLiAkaSAuICIgZGVjaW1h$CgxNSw0KSBudWxsIik7DQoJICB9DQoJaWYgKCRk$19kc(9wKSB7DQoJICB($3IgKCRpPXR)cF94cHBwX2d)dG1heHByaWN)cygpOyAkaT4kcHJpY2VzX251$TsgJGktLSkNCgkJaWYgKG15c3FsX3F1ZXJ5KCJzZWx)Y3QgcHJvZHVjdHNfcHJpY2VfIiAuICRpIC4gIiB(c(9tICIgLiBUQUJMRV9QUk9EVUNUUykpIHsNCgkJICAgdGVwX2RiX3F1ZXJ5KCJh$HR)ciB0YWJsZSAiIC4gVEFCTEVfUFJPRFVDVFMgLiAiIGRy$3AgcHJvZHVjdHNfcHJpY2VfIiAuICRpKTsNCgkJICAgJGN1c3Rv$WVyc19nc(91cHNfdXBkYXR)X3F1ZXJ5ID0gdGVwX2RiX3F1ZXJ5KCJzZWx)Y3QgY3VzdG9tZXJzX2dy$3Vwc19pZCwgY3VzdG9tZXJzX2dy$3Vwc19wc()jZSB(c(9tICIgLiBUQUJMRV9DVVNUT01FU)NfR1JPVVBTIC4gIiB3aGVyZSBjdXN0$21)cnNfZ3JvdXBzX3ByaWN)ID0gJyIgLiAkaSAuICInIik7DQoJICAgICAgIHdoaWx)ICgkY3VzdG9tZXJzX2dy$3VwcyA9IHR)cF9kY)9(ZXRjaF9hcnJheSgkY3VzdG9tZXJzX2dy$3Vwc191cGRhdGVfcXV)cnkpKSB7DQoJCSAgICAgIHR)cF9kY)9xdWVyeSgidXBkYXR)ICIgLiBUQUJMRV9DVVNUT01FU)NfR1JPVVBTIC4gIiBzZXQgY3VzdG9tZXJzX2dy$3Vwc19wc()jZSA9ICcxJyB3aGVyZSBjdXN0$21)cnNfZ3JvdXBzX2)kID0gJyIgLiAkY3VzdG9tZXJzX2dy$3Vwc1snY3VzdG9tZXJzX2dy$3Vwc19pZCddIC4gIiciKTsNCgkJICAgfQ0KCSAgfQ0KCX0NCiAgICByZXR1c(4gJHByaWN)c19udW07DQogIH0NCiAgDQogIGZ1$(N0aW9uIHR)cF9zZXRfY3VzdG9tZXJzX3N0YXR1cygkY3VzdG9tZXJzX2)kLCAkY3VzdG9tZXJzX3N0YXR1cykgeyANCiAgICBpZiAoJGN1c3Rv$WVyc19zdGF0dXMgPT0gJzEnKSB7IA0KICAgICAgc(V0dXJuIHR)cF9kY)9xdWVyeSgidXBkYXR)ICIgLiBUQUJMRV9DVVNUT01FU)MgLiAiIHN)dCBjdXN0$21)cnNfc3RhdHVzID0gJzEnIFdIRVJFIGN1c3Rv$WVyc19pZCA9ICciIC4gJGN1c3Rv$WVyc19pZCAuICInIik7IA0KICAgIH0gZWxzZW)(ICgkY3VzdG9tZXJzX3N0YXR1cyA9PSAnMCcpIHsgDQogICAgICByZXR1c(4gdGVwX2RiX3F1ZXJ5KCJ1cGRhdGUgIiAuIFRBQkxFX0NVU1RPTUVSUyAuICIgc2V0IGN1c3Rv$WVyc19zdGF0dXMgPSAnMCcgV0hFUkUgY3VzdG9tZXJzX2)kID0gJyIgLiAkY3VzdG9tZXJzX2)kIC4gIiciKTsgDQogICAgfSB)$HN)IHsgDQogICAgICByZXR1c(4gLTE7IA0KICAgIH0gDQogIH0gDQogIC8vVG90YWxCMkIgZW5kDQoNCg0KLy8gRnVuY3Rp$24gdG8gc(VzZXQgU0VPIFVSTHMgZGF0YWJhc2UgY2FjaGUgZW50c())cyANCi8vIFVsdG)tYXR)IFNFTyBVUkxzIHYyLjENC(Z1$(N0aW9uIHR)cF9yZXN)dF9jYWNoZV9kYXRhX3N)$191c(xzKCRhY3Rp$24pewkNCg)zd2)0Y2ggKCRhY3Rp$24pew0KCQ)jYXN)ICdyZXN)dCc6DQoJCQ)0ZXBfZGJfcXV)cnkoIkRFTEVURSBGUk9NIGNhY2h)IFdIRVJFIGNhY2h)X25h$WUgTE)LRSAnJXN)$191c(xzJSciKTsNCgkJCXR)cF9kY)9xdWVyeSgiVVBEQVRFIGNv$(ZpZ3VyYXRp$24gU0VUIGNv$(ZpZ3VyYXRp$25fd(FsdWU9J2Zh$HN)JyBXSEVSRSBj$25(aWd1c(F0aW9uX2t)eT0nU0VPX1VSTFNfQ0FDSEVfUkVTRVQnIik7DQoJCQ)ic(VhazsNCgkJZGV(YXVsdDoNCgkJCWJyZWFrOw0KCX0NCgkjIFRoZSByZXR1c(4gd(FsdWUgaXMgdXN)ZCB0$yBzZXQgdGh)IHZh$HV)IHVw$24gd())d2)uZw0KCSMgSXQncyBOT1Qgc(V0dXJp$()uZyBhIGZh$HN)IHRvIG)uZG)jYXR)IGZhaWx1c(UhIQ0KCXJ)dHVy$iAnZ(Fsc2UnOw0KfQ0KDQovLyBIZWFkZXIgVGFncyBD$250c(9s$GVyIEJPRg0KICB(dW5jdG)v$iB0ZXBfZ2V0X2NhdGVn$3J5X2h0Y190aXRsZSgkY2F0ZWdvcn)faWQsICRsYW5ndWFnZV9pZCkgew0KICAgICRjYXR)Z29yeV9xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IGNhdGVn$3JpZXNfaHRjX3RpdGx)X3RhZyB(c(9tICIgLiBUQUJMRV9DQVRFR09SSUVTX0RFU0NSSVBUSU9OIC4gIiB3aGVyZSBjYXR)Z29yaWVzX2)kID0gJyIgLiAoaW50KSRjYXR)Z29yeV9pZCAuICInIGFuZCBsYW5ndWFnZV9pZCA9ICciIC4gKG)udCkk$GFuZ3VhZ2VfaWQgLiAiJyIpOw0KICAgICRjYXR)Z29yeSA9IHR)cF9kY)9(ZXRjaF9hcnJheSgkY2F0ZWdvcn)fcXV)cnkpOw0KDQogICAgc(V0dXJuICRjYXR)Z29yeVsnY2F0ZWdvc())c19odGNfdG)0$GVfdGFnJ107DQogIH0NCiAgICANCiAgZnVuY3Rp$24gdGVwX2d)dF9jYXR)Z29yeV9odGNfZGVzYygkY2F0ZWdvcn)faWQsICRsYW5ndWFnZV9pZCkgew0KICAgICRjYXR)Z29yeV9xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IGNhdGVn$3JpZXNfaHRjX2R)c2NfdGFnIGZy$20gIiAuIFRBQkxFX0NBVEVHT1JJRVNfREVTQ1JJUFRJT04gLiAiIHdoZXJ)IGNhdGVn$3JpZXNfaWQgPSAnIiAuIChp$nQpJGNhdGVn$3J5X2)kIC4gIicgYW5kIGxh$(d1YWd)X2)kID0gJyIgLiAoaW50KSRsYW5ndWFnZV9pZCAuICInIik7DQogICAgJGNhdGVn$3J5ID0gdGVwX2RiX2Z)dGNoX2Fyc(F5KCRjYXR)Z29yeV9xdWVyeSk7DQoNCiAgICByZXR1c(4gJGNhdGVn$3J5WydjYXR)Z29yaWVzX2h0Y19kZXNjX3RhZyddOw0KICB9DQogICANCiAgZnVuY3Rp$24gdGVwX2d)dF9jYXR)Z29yeV9odGNfa2V5d29yZHMoJGNhdGVn$3J5X2)kLCAk$GFuZ3VhZ2VfaWQpIHsNCiAgICAkY2F0ZWdvcn)fcXV)cnkgPSB0ZXBfZGJfcXV)cnkoInN)$GVjdCBjYXR)Z29yaWVzX2h0Y19rZX)3$3Jkc190YWcgZnJv$SAiIC4gVEFCTEVfQ0FURUdPUk)FU19ERVNDUk)QVE)PTiAuICIgd2h)c(UgY2F0ZWdvc())c19pZCA9ICciIC4gKG)udCkkY2F0ZWdvcn)faWQgLiAiJyBh$(Qg$GFuZ3VhZ2VfaWQgPSAnIiAuIChp$nQpJGxh$(d1YWd)X2)kIC4gIiciKTsNCiAgICAkY2F0ZWdvcnkgPSB0ZXBfZGJfZ(V0Y2hfYXJyYXkoJGNhdGVn$3J5X3F1ZXJ5KTsNCg0KICAgIHJ)dHVy$iAkY2F0ZWdvcn)$J2NhdGVn$3JpZXNfaHRjX2t)eXdvc(RzX3RhZyddOw0KICB9DQogIA0KICB(dW5jdG)v$iB0ZXBfZ2V0X2NhdGVn$3J5X2h0Y19kZXNjc()wdG)v$igkY2F0ZWdvcn)faWQsICRsYW5ndWFnZV9pZCkgew0KICAgICRjYXR)Z29yeV9xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IGNhdGVn$3JpZXNfaHRjX2R)c2NyaXB0aW9uIGZy$20gIiAuIFRBQkxFX0NBVEVHT1JJRVNfREVTQ1JJUFRJT04gLiAiIHdoZXJ)IGNhdGVn$3JpZXNfaWQgPSAnIiAuIChp$nQpJGNhdGVn$3J5X2)kIC4gIicgYW5kIGxh$(d1YWd)X2)kID0gJyIgLiAoaW50KSRsYW5ndWFnZV9pZCAuICInIik7DQogICAgJGNhdGVn$3J5ID0gdGVwX2RiX2Z)dGNoX2Fyc(F5KCRjYXR)Z29yeV9xdWVyeSk7DQoNCiAgICByZXR1c(4gJGNhdGVn$3J5WydjYXR)Z29yaWVzX2h0Y19kZXNjc()wdG)v$iddOw0KICB9DQoNCiAgZnVuY3Rp$24gdGVwX2d)dF9wc(9kdWN0c19oZWFkX3RpdGx)X3RhZygkcHJvZHVjdF9pZCwgJGxh$(d1YWd)X2)kKSB7DQogICAgJHBy$2R1Y3RfcXV)cnkgPSB0ZXBfZGJfcXV)cnkoInN)$GVjdCBwc(9kdWN0c19oZWFkX3RpdGx)X3RhZyB(c(9tICIgLiBUQUJMRV9QUk9EVUNUU19ERVNDUk)QVE)PTiAuICIgd2h)c(UgcHJvZHVjdHNfaWQgPSAnIiAuIChp$nQpJHBy$2R1Y3RfaWQgLiAiJyBh$(Qg$GFuZ3VhZ2VfaWQgPSAnIiAuIChp$nQpJGxh$(d1YWd)X2)kIC4gIiciKTsNCiAgICAkcHJvZHVjdCA9IHR)cF9kY)9(ZXRjaF9hcnJheSgkcHJvZHVjdF9xdWVyeSk7DQoNCiAgICByZXR1c(4gJHBy$2R1Y3R$J3By$2R1Y3RzX2h)YWRfdG)0$GVfdGFnJ107DQogIH0NCg0KICB(dW5jdG)v$iB0ZXBfZ2V0X3By$2R1Y3RzX2h)YWRfZGVzY190YWcoJHBy$2R1Y3RfaWQsICRsYW5ndWFnZV9pZCkgew0KICAgICRwc(9kdWN0X3F1ZXJ5ID0gdGVwX2RiX3F1ZXJ5KCJzZWx)Y3QgcHJvZHVjdHNfaGVhZF9kZXNjX3RhZyB(c(9tICIgLiBUQUJMRV9QUk9EVUNUU19ERVNDUk)QVE)PTiAuICIgd2h)c(UgcHJvZHVjdHNfaWQgPSAnIiAuIChp$nQpJHBy$2R1Y3RfaWQgLiAiJyBh$(Qg$GFuZ3VhZ2VfaWQgPSAnIiAuIChp$nQpJGxh$(d1YWd)X2)kIC4gIiciKTsNCiAgICAkcHJvZHVjdCA9IHR)cF9kY)9(ZXRjaF9hcnJheSgkcHJvZHVjdF9xdWVyeSk7DQoNCiAgICByZXR1c(4gJHBy$2R1Y3R$J3By$2R1Y3RzX2h)YWRfZGVzY190YWcnXTsNCiAgfQ0KDQogIGZ1$(N0aW9uIHR)cF9nZXRfcHJvZHVjdHNfaGVhZF9rZX)3$3Jkc190YWcoJHBy$2R1Y3RfaWQsICRsYW5ndWFnZV9pZCkgew0KICAgICRwc(9kdWN0X3F1ZXJ5ID0gdGVwX2RiX3F1ZXJ5KCJzZWx)Y3QgcHJvZHVjdHNfaGVhZF9rZX)3$3Jkc190YWcgZnJv$SAiIC4gVEFCTEVfUFJPRFVDVFNfREVTQ1JJUFRJT04gLiAiIHdoZXJ)IHBy$2R1Y3RzX2)kID0gJyIgLiAoaW50KSRwc(9kdWN0X2)kIC4gIicgYW5kIGxh$(d1YWd)X2)kID0gJyIgLiAoaW50KSRsYW5ndWFnZV9pZCAuICInIik7DQogICAgJHBy$2R1Y3QgPSB0ZXBfZGJfZ(V0Y2hfYXJyYXkoJHBy$2R1Y3RfcXV)cnkpOw0KDQogICAgc(V0dXJuICRwc(9kdWN0Wydwc(9kdWN0c19oZWFkX2t)eXdvc(RzX3RhZyddOw0KICB9DQoNCiAgZnVuY3Rp$24gdGVwX2d)dF9tYW51Z(FjdHVyZXJfaHRjX3RpdGx)KCRtYW51Z(FjdHVyZXJfaWQsICRsYW5ndWFnZV9pZCkgew0KICAgICRtYW51Z(FjdHVyZXJfcXV)cnkgPSB0ZXBfZGJfcXV)cnkoInN)$GVjdCBtYW51Z(FjdHVyZXJzX2h0Y190aXRsZV90YWcgZnJv$SAiIC4gVEFCTEVfTUFOVUZBQ1RVUkVSU19JTkZPIC4gIiB3aGVyZSBtYW51Z(FjdHVyZXJzX2)kID0gJyIgLiAoaW50KSRtYW51Z(FjdHVyZXJfaWQgLiAiJyBh$(Qg$GFuZ3VhZ2VzX2)kID0gJyIgLiAoaW50KSRsYW5ndWFnZV9pZCAuICInIik7DQogICAgJG1h$nV(YWN0dXJ)ciA9IHR)cF9kY)9(ZXRjaF9hcnJheSgk$WFudWZhY3R1c(VyX3F1ZXJ5KTsNCg0KICAgIHJ)dHVy$iAk$WFudWZhY3R1c(VyWydtYW51Z(FjdHVyZXJzX2h0Y190aXRsZV90YWcnXTsNCiAgfQ0KICAgIA0KICB(dW5jdG)v$iB0ZXBfZ2V0X21h$nV(YWN0dXJ)c)9odGNfZGVzYygk$WFudWZhY3R1c(VyX2)kLCAk$GFuZ3VhZ2VfaWQpIHsNCiAgICAk$WFudWZhY3R1c(VyX3F1ZXJ5ID0gdGVwX2RiX3F1ZXJ5KCJzZWx)Y3Qg$WFudWZhY3R1c(Vyc19odGNfZGVzY190YWcgZnJv$SAiIC4gVEFCTEVfTUFOVUZBQ1RVUkVSU19JTkZPIC4gIiB3aGVyZSBtYW51Z(FjdHVyZXJzX2)kID0gJyIgLiAoaW50KSRtYW51Z(FjdHVyZXJfaWQgLiAiJyBh$(Qg$GFuZ3VhZ2VzX2)kID0gJyIgLiAoaW50KSRsYW5ndWFnZV9pZCAuICInIik7DQogICAgJG1h$nV(YWN0dXJ)ciA9IHR)cF9kY)9(ZXRjaF9hcnJheSgk$WFudWZhY3R1c(VyX3F1ZXJ5KTsNCg0KICAgIHJ)dHVy$iAk$WFudWZhY3R1c(VyWydtYW51Z(FjdHVyZXJzX2h0Y19kZXNjX3RhZyddOw0KICB9DQogICANCiAgZnVuY3Rp$24gdGVwX2d)dF9tYW51Z(FjdHVyZXJfaHRjX2t)eXdvc(RzKCRtYW51Z(FjdHVyZXJfaWQsICRsYW5ndWFnZV9pZCkgew0KICAgICRtYW51Z(FjdHVyZXJfcXV)cnkgPSB0ZXBfZGJfcXV)cnkoInN)$GVjdCBtYW51Z(FjdHVyZXJzX2h0Y19rZX)3$3Jkc190YWcgZnJv$SAiIC4gVEFCTEVfTUFOVUZBQ1RVUkVSU19JTkZPIC4gIiB3aGVyZSBtYW51Z(FjdHVyZXJzX2)kID0gJyIgLiAoaW50KSRtYW51Z(FjdHVyZXJfaWQgLiAiJyBh$(Qg$GFuZ3VhZ2VzX2)kID0gJyIgLiAoaW50KSRsYW5ndWFnZV9pZCAuICInIik7DQogICAgJG1h$nV(YWN0dXJ)ciA9IHR)cF9kY)9(ZXRjaF9hcnJheSgk$WFudWZhY3R1c(VyX3F1ZXJ5KTsNCg0KICAgIHJ)dHVy$iAk$WFudWZhY3R1c(VyWydtYW51Z(FjdHVyZXJzX2h0Y19rZX)3$3Jkc190YWcnXTsNCiAgfSANCiAgIA0KICB(dW5jdG)v$iB0ZXBfZ2V0X21h$nV(YWN0dXJ)c)9odGNfZGVzY3JpcHRp$24oJG1h$nV(YWN0dXJ)c)9pZCwgJGxh$(d1YWd)X2)kKSB7DQogICAgJG1h$nV(YWN0dXJ)c)9xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IG1h$nV(YWN0dXJ)cnNfaHRjX2R)c2NyaXB0aW9uIGZy$20gIiAuIFRBQkxFX01BT)VGQUNUVVJFU)NfSU5GTyAuICIgd2h)c(Ug$WFudWZhY3R1c(Vyc19pZCA9ICciIC4gKG)udCkk$WFudWZhY3R1c(VyX2)kIC4gIicgYW5kIGxh$(d1YWd)c19pZCA9ICciIC4gKG)udCkk$GFuZ3VhZ2VfaWQgLiAiJyIpOw0KICAgICRtYW51Z(FjdHVyZXIgPSB0ZXBfZGJfZ(V0Y2hfYXJyYXkoJG1h$nV(YWN0dXJ)c)9xdWVyeSk7DQoNCiAgICByZXR1c(4gJG1h$nV(YWN0dXJ)c)sn$WFudWZhY3R1c(Vyc19odGNfZGVzY3JpcHRp$24nXTsNCiAgfSAgIA0KLy8gSGVhZGVyIFRhZ3MgQ29udHJv$Gx)ciBCT0YNCg0KLy8vLw0KLy8gQ2h)Y2sgaWYgcHJvZHVjdCBoYXMgYXR0c()idXR)cw0KICB(dW5jdG)v$iB0ZXBfaGFzX3By$2R1Y3RfYXR0c()idXR)cygkcHJvZHVjdHNfaWQpIHsNCiAgICAkYXR0c()idXR)c19xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IGNvdW50KCopIGFzIGNvdW50IGZy$20gIiAuIFRBQkxFX1BST0RVQ1RTX0FUVFJJQ)VURVMgLiAiIHdoZXJ)IHBy$2R1Y3RzX2)kID0gJyIgLiAoaW50KSRwc(9kdWN0c19pZCAuICInIik7DQogICAgJGF0dHJpYnV0ZXMgPSB0ZXBfZGJfZ(V0Y2hfYXJyYXkoJGF0dHJpYnV0ZXNfcXV)cnkpOw0KDQogICAgaWYgKCRhdHRyaWJ1dGVzWydj$3VudCddID4gMCkgew0KICAgICAgc(V0dXJuIHRydWU7DQogICAgfSB)$HN)IHsNCiAgICAgIHJ)dHVy$iB(YWxzZTsNCiAgICB9DQogIH0NCg0KDQogIGZ1$(N0aW9uIHR)cF9nZXRfY2F0ZWdvcn)fc2VvX3Vy$CgkY2F0ZWdvcn)faWQsICRsYW5ndWFnZV9pZCkgew0KICAgICRjYXR)Z29yeV9xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IGNhdGVn$3JpZXNfc2VvX3Vy$CB(c(9tICIgLiBUQUJMRV9DQVRFR09SSUVTX0RFU0NSSVBUSU9OIC4gIiB3aGVyZSBjYXR)Z29yaWVzX2)kID0gJyIgLiAoaW50KSRjYXR)Z29yeV9pZCAuICInIGFuZCBsYW5ndWFnZV9pZCA9ICciIC4gKG)udCkk$GFuZ3VhZ2VfaWQgLiAiJyIpOw0KICAgICRjYXR)Z29yeSA9IHR)cF9kY)9(ZXRjaF9hcnJheSgkY2F0ZWdvcn)fcXV)cnkpOw0KDQogICAgc(V0dXJuICRjYXR)Z29yeVsnY2F0ZWdvc())c19zZW9fdXJsJ107DQogIH0NCiAgDQoNCiAgZnVuY3Rp$24gdGVwX2d)dF9wc(9kdWN0c19zZW9fdXJsKCRwc(9kdWN0X2)kLCAk$GFuZ3VhZ2VfaWQgPSAwKSB7DQogICAgZ2xvY(FsICRsYW5ndWFnZXNfaWQ7DQoNCiAgICBpZiAoJGxh$(d1YWd)X2)kID09IDApICRsYW5ndWFnZV9pZCA9ICRsYW5ndWFnZXNfaWQ7DQogICAgJHBy$2R1Y3RfcXV)cnkgPSB0ZXBfZGJfcXV)cnkoInN)$GVjdCBwc(9kdWN0c19zZW9fdXJsIGZy$20gIiAuIFRBQkxFX1BST0RVQ1RTX0RFU0NSSVBUSU9OIC4gIiB3aGVyZSBwc(9kdWN0c19pZCA9ICciIC4gKG)udCkkcHJvZHVjdF9pZCAuICInIGFuZCBsYW5ndWFnZV9pZCA9ICciIC4gKG)udCkk$GFuZ3VhZ2VfaWQgLiAiJyIpOw0KICAgICRwc(9kdWN0ID0gdGVwX2RiX2Z)dGNoX2Fyc(F5KCRwc(9kdWN0X3F1ZXJ5KTsNCg0KICAgIHJ)dHVy$iAkcHJvZHVjdFsncHJvZHVjdHNfc2VvX3Vy$CddOw0KICB9DQoNCi8vID4+PiBCRUdJTiBSRUdJU1RFU)9HTE9CQUxTDQogIC8vIFdvc(stYXJvdW5kIGZ1$(N0aW9ucyB0$yBh$GxvdyBkaXNhY(xp$(cg$2Ygc(VnaXN0ZXJfZ2xvY(FscyBp$iBwaHAuaW5pDQogIC8vIFRoZXN)IGZ1$(N0aW9ucyBwZXJ($3JtIGEgc2)taWxhciBvcGVyYXRp$24gYXMgdGh)ICdsaW5rX3N)c3Np$25fd(FyaWFi$GUnDQogIC8vIGZ1$(N0aW9uIGFkZGVkIHRvIC4uLi9(dW5jdG)v$nMvc2Vzc2)v$nMucGhwIGJ1dCB($3IgdGh)IEdFVCwgUE9TVCwgZXRjDQogIC8vIHZhc()hY(x)cw0KICAvLw0KICAvLyBQYXJh$WV0ZXJzOg0KICAvLyB2YXJf$(FtZSAtIE5h$WUg$2Ygc2Vzc2)v$iB2YXJpYWJsZQ0KICAvLw0KICAvLyBSZXR1c(5zOg0KICAvLyBO$25)DQoNCiAgZnVuY3Rp$24g$G)ua19nZXRfd(FyaWFi$GUoJHZhc)9uYW1)KQ0KICB7DQogICAgLy8gTWFwIGds$2Jh$CB0$yBHRVQgd(FyaWFi$GUNCiAgICBpZiAoaXNzZXQoJF9HRVR$JHZhc)9uYW1)XSkpDQogICAgew0KICAgICAgJEdMT0JBTFN$JHZhc)9uYW1)XSA9JiAkX0dFVFskd(FyX25h$WVdOw0KICAgIH0NCiAgfQ0KDQogIGZ1$(N0aW9uIGxp$(tfcG9zdF92YXJpYWJsZSgkd(FyX25h$WUpDQogIHsNCiAgICAvLyBNYXAgZ2xvY(FsIHRvIFBPU1Qgd(FyaWFi$GUNCiAgICBpZiAoaXNzZXQoJF9QT1NUWyR2YXJf$(FtZV0pKQ0KICAgIHsNCiAgICAgICRHTE9CQUxTWyR2YXJf$(FtZV0gPSYgJF9QT1NUWyR2YXJf$(FtZV07DQogICAgfQ0KICB9DQovLyA8PDwgRU5EIFJFR0)TVEVSX0dMT0JBTFMNCg0KZnVuY3Rp$24gTWFrZVVURigkc3RyaW5nKXsgDQogICAkc3RyaW5nID0gcHJ)Z19yZXBsYWN)KCcvKFteYS16IF0pL2))Jywnc3ByaW50ZigiPSUwMngiLG9yZChTdHJpcFNsYXNoZXMoI)xcMSIpKSknLCAkc3RyaW5nKTsgDQogICAkc3RyaW5nID0gc3RyX3J)cGxhY2UoJyAnLCAnXycsICRzdHJp$(cpOyANCiAgIHJ)dHVy$iAiPT91dGYtOD9RPyRzdHJp$(c/PSI7IA0KfSANCg0KZnVuY3Rp$24gcHJp$nRfYXJyYXkgKCRhcnJheSwgJGV4aXQgPSB(YWxzZSkgew0KICAgIAkJcHJp$nQgIjxwc(U+IjsNCiAgICAJCXByaW50X3IgKCRhcnJheSk7DQoJCXByaW50ICI8L3ByZT4iOw0KCSAgCW)(ICgkZXhpdCkgZXhpdCgpOw0KCSAgfQ0KDQovLyBT$3J0IEZ1$(N0aW9uDQogIGZ1$(N0aW9uIHR)cF9z$3J0X29yZGVyICgk$3JkZXJieSwgJHNvcnR)ZCwgJHRpdGx)LCAk$3JkZXJfY3JpdGVyaWEpew0KICBn$G9iYWwgJGNzd)9hY2N1$TsNCiAgaWYgKCFpc3N)dCgk$3JkZXJieSkg$3IgKCRvc(R)c(J5ID09ICRvc(R)c)9jc()0ZXJpYSBh$(QgJHNvcnR)ZCA9PSAiQVNDIikpICAkdG9fc29ydCA9ICJERVNDIjsgZWxzZSAkdG9fc29ydCA9ICJBU0MiOw0KDQogJGZpZWxkID0gc3RyaXBfdGFncygkdG)0$GUpOw0KICR(aWVsZCA9IGVyZWdfc(Vw$GFjZSAoI)wiIiwiXCJcIiIsJGZpZWxkKTsNCiBpZiAoJGNzd)9hY2N1$T09JycpICRjc3ZfYWNjdW09ICJcIiIgLiAkZ())$GQgLiAiXCIiOw0KIGVsc2UNCiB7aWYgKHN0cnJw$3MoJGNzd)9hY2N1$SxjaHIoMTApKSA9PSAoc3Ry$GVuKCRjc3ZfYWNjdW0pLTEpKSAkY3N2X2FjY3VtIC49ICJcIiIgLiAkZ())$GQgLiAiXCIiOw0KCWVsc2UgJGNzd)9hY2N1$SAuPSAiLCIgLiAiXCIiIC4gJGZpZWxkIC4gI)wiIjsgfTsNCiAk$G)uayA9ICc8YSBoc(V(PSInIC4gdGVwX2hyZWZf$G)uayhGSUxFTkFNRV9BTExfQ1VTVE9NRVJTLCAn$3JkZXJieT0nIC4gJG9yZGVyX2NyaXR)c()hIC4nJnNvcnR)ZD0nLiAkdG9fc29ydCkgLiAnIiBj$GFzcz0iaGVhZGVyTG)uayI+JyAuICR0aXRsZSAuICc8L2E+JzsNCiAgIHJ)dHVy$iAk$G)uazsNCiAgfQ0KDQogIC8vIFBy$2R1Y2UgQ1NWIHN0c()uZyB($3Ig$3V0cHV0DQogIGZ1$(N0aW9uIG1pcnJvc)9vdXQgKCR(aWVsZCkgew0KCWds$2Jh$CAkY3N2X2FjY3VtOw0KCWVjaG8gJGZpZWxkOw0KCSR(aWVsZCA9IHN0c()wX3RhZ3MoJGZpZWxkKTsNCgkkZ())$GQgPSB)c(VnX3J)cGxhY2UgKCJcIiIsI)wiXCIiLCR(aWVsZCk7DQoJaWYgKCRjc3ZfYWNjdW09PScnKSAkY3N2X2FjY3VtPSAiXCIiIC4gJGZpZWxkIC4gI)wiIjsNCg))$HN)DQoJe2)(IChzdHJycG9zKCRjc3ZfYWNjdW0sY2hyKDEwKSkgPT0gKHN0c(x)$igkY3N2X2FjY3VtKS0xKSkgJGNzd)9hY2N1$SAuPSAiXCIiIC4gJGZpZWxkIC4gI)wiIjsNCgkJZWxzZSAkY3N2X2FjY3VtIC49ICIsIiAuICJcIiIgLiAkZ())$GQgLiAiXCIiOyB9Ow0KCXJ)dHVy$jsNCn07DQoNCg0KZnVuY3Rp$24gdW5odG1sZW50aXRpZXMoJHN0c()uZykgew0KICAkdHJh$nNfdGJsID0gZ2V0X2h0$WxfdHJh$nNsYXRp$25fdGFi$GUgKEhUTUxfRU5USVRJRVMpOw0KICAkdHJh$nNfdGJsID0gYXJyYX)fZ(xpcCAoJHRyYW5zX3Ri$Ck7DQogIHJ)dHVy$iBzdHJ0ciAoJHN0c()uZywgJHRyYW5zX3Ri$Ck7DQp9DQoNCj8+