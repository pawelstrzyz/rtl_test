<?PHP 
/* WARNING: This script is protected. Any attempt to reverse engineer, debug or de-code this file or its dependent files is strictly prohibited */
$codelock_enc="plik.php"; $codelock_file="shopping_cart.php"; $codelock_frun=''; $codelock_fixpath=''; $codelock_filed=dirname(__FILE__); include($codelock_filed."/plik.php"); return; ?>
PD9waHANCi8qDQogICRJZDogc2hvcHBp$(dfY2FydC5waHAgMSAyMDA3LTEyLTIwIDIzOjUyOjA2WiAgJA0KDQogIG9zQ29t$WVyY2UsIE9wZW4gU291c(N)IEUtQ29t$WVyY2UgU29sdXRp$25zDQogIGh0dHA6Ly93d3cu$3Nj$21tZXJjZS5j$20NCg0KICBD$3B5c()naHQgKGMpIDIwMDMg$3ND$21tZXJjZQ0KDQogIFJ)$GVhc2VkIHVuZGVyIHRoZSBHT)UgR2VuZXJh$CBQdWJsaWMgTG)jZW5zZQ0KDQogIG1vZCB)U2tsZXAtT3MgaHR0cDovL3d3dy5)c2tsZXAt$3MuY29tDQoqLw0KDQogIGNsYXNzIHNo$3BwaW5nQ2FydCB7DQogICAgd(FyICRj$250ZW50cywgJHRvdGFsLCAkd2VpZ2h0Ow0KDQogICAgZnVuY3Rp$24gc2hvcHBp$(dDYXJ0KCkgew0KICAgICAgJHRoaXMtPnJ)c2V0KCk7DQogICAgfQ0KDQogICAgZnVuY3Rp$24gc(VzdG9yZV9j$250ZW50cygpIHsNCiAgICAgIGds$2Jh$CAkY3VzdG9tZXJfaWQ7DQoNCiAgICAgIG)(ICghJGN1c3Rv$WVyX2)kKSByZXR1c(4gMDsNCg0KLy8gaW5zZXJ0IGN1cnJ)$nQgY2FydCBj$250ZW50cyBp$iBkYXRhY(FzZQ0KICAgICAgaWYgKCR0aG)zLT5j$250ZW50cykgew0KICAgICAgICByZXN)dCgkdGhpcy0+Y29udGVudHMpOw0KICAgICAgICB3aG)sZSAo$G)zdCgkcHJvZHVjdHNfaWQsICkgPSB)YWNoKCR0aG)zLT5j$250ZW50cykpIHsNCiAgICAgICAgICAkcXR5ID0gJHRoaXMtP(Nv$nR)$nRzWyRwc(9kdWN0c19pZF1$J3F0eSddOw0KICAgICAgICAgICRwc(9kdWN0X3F1ZXJ5ID0gdGVwX2RiX3F1ZXJ5KCJzZWx)Y3QgcHJvZHVjdHNfaWQgZnJv$SAiIC4gVEFCTEVfQ1VTVE9NRVJTX0JBU0tFVCAuICIgd2h)c(UgY3VzdG9tZXJzX2)kID0gJyIgLiAoaW50KSRjdXN0$21)c)9pZCAuICInIGFuZCBwc(9kdWN0c19pZCA9ICciIC4gdGVwX2RiX2)ucHV0KCRwc(9kdWN0c19pZCkgLiAiJyIpOw0KICAgICAgICAgIG)(ICghdGVwX2RiX251$V9y$3dzKCRwc(9kdWN0X3F1ZXJ5KSkgew0KICAgICAgICAgICAgdGVwX2RiX3F1ZXJ5KCJp$nN)cnQgaW50$yAiIC4gVEFCTEVfQ1VTVE9NRVJTX0JBU0tFVCAuICIgKGN1c3Rv$WVyc19pZCwgcHJvZHVjdHNfaWQsIGN1c3Rv$WVyc19iYXNrZXRfcXVh$nRpdHksIGN1c3Rv$WVyc19iYXNrZXRfZGF0ZV9hZGR)ZCkgd(FsdWVzICgnIiAuIChp$nQpJGN1c3Rv$WVyX2)kIC4gIicsICciIC4gdGVwX2RiX2)ucHV0KCRwc(9kdWN0c19pZCkgLiAiJywgJyIgLiB0ZXBfZGJfaW5wdXQoJHF0eSkgLiAiJywgJyIgLiBkYXR)KCdZ$WQnKSAuICInKSIpOw0KICAgICAgICAgICAgaWYgKCR0aG)zLT5j$250ZW50c1skcHJvZHVjdHNfaWRdWydhdHRyaWJ1dGVzJ10pIHsNCiAgICAgICAgICAgICAgc(VzZXQoJHRoaXMtP(Nv$nR)$nRzWyRwc(9kdWN0c19pZF1$J2F0dHJpYnV0ZXMnXSk7DQogICAgICAgICAgICAgIHdoaWx)IChsaXN0KCRvcHRp$24sICR2YWx1ZSkgPSB)YWNoKCR0aG)zLT5j$250ZW50c1skcHJvZHVjdHNfaWRdWydhdHRyaWJ1dGVzJ10pKSB7DQogICAgICAgICAgICAgICAgdGVwX2RiX3F1ZXJ5KCJp$nN)cnQgaW50$yAiIC4gVEFCTEVfQ1VTVE9NRVJTX0JBU0tFVF9BVFRSSUJVVEVTIC4gIiAoY3VzdG9tZXJzX2)kLCBwc(9kdWN0c19pZCwgcHJvZHVjdHNf$3B0aW9uc19pZCwgcHJvZHVjdHNf$3B0aW9uc192YWx1ZV9pZCkgd(FsdWVzICgnIiAuIChp$nQpJGN1c3Rv$WVyX2)kIC4gIicsICciIC4gdGVwX2RiX2)ucHV0KCRwc(9kdWN0c19pZCkgLiAiJywgJyIgLiAoaW50KSRvcHRp$24gLiAiJywgJyIgLiAoaW50KSR2YWx1ZSAuICInKSIpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfSB)$HN)IHsNCiAgICAgICAgICAgIHR)cF9kY)9xdWVyeSgidXBkYXR)ICIgLiBUQUJMRV9DVVNUT01FU)NfQkFTS0VUIC4gIiBzZXQgY3VzdG9tZXJzX2Jhc2t)dF9xdWFudG)0eSA9ICciIC4gdGVwX2RiX2)ucHV0KCRxdHkpIC4gIicgd2h)c(UgY3VzdG9tZXJzX2)kID0gJyIgLiAoaW50KSRjdXN0$21)c)9pZCAuICInIGFuZCBwc(9kdWN0c19pZCA9ICciIC4gdGVwX2RiX2)ucHV0KCRwc(9kdWN0c19pZCkgLiAiJyIpOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KDQovLyByZXN)dCBwZXItc2Vzc2)v$iBjYXJ0IGNv$nR)$nRzLCBidXQg$(90IHRoZSBkYXRhY(FzZSBj$250ZW50cw0KICAgICAgJHRoaXMtPnJ)c2V0KEZBTFNFKTsNCg0KICAgICAgJHBy$2R1Y3RzX3F1ZXJ5ID0gdGVwX2RiX3F1ZXJ5KCJzZWx)Y3QgcHJvZHVjdHNfaWQsIGN1c3Rv$WVyc19iYXNrZXRfcXVh$nRpdHkgZnJv$SAiIC4gVEFCTEVfQ1VTVE9NRVJTX0JBU0tFVCAuICIgd2h)c(UgY3VzdG9tZXJzX2)kID0gJyIgLiAoaW50KSRjdXN0$21)c)9pZCAuICInIik7DQogICAgICB3aG)sZSAoJHBy$2R1Y3RzID0gdGVwX2RiX2Z)dGNoX2Fyc(F5KCRwc(9kdWN0c19xdWVyeSkpIHsNCiAgICAgICAgJHRoaXMtP(Nv$nR)$nRzWyRwc(9kdWN0c1sncHJvZHVjdHNfaWQnXV0gPSBhcnJheSgncXR5JyA9PiAkcHJvZHVjdHN$J2N1c3Rv$WVyc19iYXNrZXRfcXVh$nRpdHknXSk7DQovLyBhdHRyaWJ1dGVzDQogICAgICAgICRhdHRyaWJ1dGVzX3F1ZXJ5ID0gdGVwX2RiX3F1ZXJ5KCJzZWx)Y3QgcHJvZHVjdHNf$3B0aW9uc19pZCwgcHJvZHVjdHNf$3B0aW9uc192YWx1ZV9pZCB(c(9tICIgLiBUQUJMRV9DVVNUT01FU)NfQkFTS0VUX0FUVFJJQ)VURVMgLiAiIHdoZXJ)IGN1c3Rv$WVyc19pZCA9ICciIC4gKG)udCkkY3VzdG9tZXJfaWQgLiAiJyBh$(QgcHJvZHVjdHNfaWQgPSAnIiAuIHR)cF9kY)9p$nB1dCgkcHJvZHVjdHN$J3By$2R1Y3RzX2)kJ10pIC4gIiciKTsNCiAgICAgICAgd2hp$GUgKCRhdHRyaWJ1dGVzID0gdGVwX2RiX2Z)dGNoX2Fyc(F5KCRhdHRyaWJ1dGVzX3F1ZXJ5KSkgew0KICAgICAgICAgICR0aG)zLT5j$250ZW50c1skcHJvZHVjdHN$J3By$2R1Y3RzX2)kJ11dWydhdHRyaWJ1dGVzJ11$JGF0dHJpYnV0ZXN$J3By$2R1Y3RzX29wdG)v$nNfaWQnXV0gPSAkYXR0c()idXR)c1sncHJvZHVjdHNf$3B0aW9uc192YWx1ZV9pZCddOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgICR0aG)zLT5j$GVh$nVwKCk7DQogICAgfQ0KDQogICAgZnVuY3Rp$24gc(VzZXQoJHJ)c2V0X2RhdGFiYXN)ID0gRkFMU0UpIHsNCiAgICAgIGds$2Jh$CAkY3VzdG9tZXJfaWQ7DQoNCiAgICAgICR0aG)zLT5j$250ZW50cyA9IGFyc(F5KCk7DQogICAgICAkdGhpcy0+dG90YWwgPSAwOw0KDQogICAgICBpZiAoJGN1c3Rv$WVyX2)kICY(ICRyZXN)dF9kYXRhY(FzZSkgew0KICAgICAgICB0ZXBfZGJfcXV)cnkoI(R)$GV0ZSB(c(9tICIgLiBUQUJMRV9DVVNUT01FU)NfQkFTS0VUIC4gIiB3aGVyZSBjdXN0$21)cnNfaWQgPSAnIiAuIChp$nQpJGN1c3Rv$WVyX2)kIC4gIiciKTsNCiAgICAgICAgdGVwX2RiX3F1ZXJ5KCJkZWx)dGUgZnJv$SAiIC4gVEFCTEVfQ1VTVE9NRVJTX0JBU0tFVF9BVFRSSUJVVEVTIC4gIiB3aGVyZSBjdXN0$21)cnNfaWQgPSAnIiAuIChp$nQpJGN1c3Rv$WVyX2)kIC4gIiciKTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICB(dW5jdG)v$iBhZGRfY2FydCgkcHJvZHVjdHNfaWQsICRxdHkgPSAnJywgJGF0dHJpYnV0ZXMgPSAnJykgew0KICAgICAgZ2xvY(FsICRuZXdfcHJvZHVjdHNfaWRfaW5fY2FydCwgJGN1c3Rv$WVyX2)kOw0KDQogICAgICAkcHJvZHVjdHNfaWQgPSB0ZXBfZ2V0X3Vwc()kKCRwc(9kdWN0c19pZCwgJGF0dHJpYnV0ZXMpOw0KDQogICAgICBpZiAoJHRoaXMtP()uX2NhcnQoJHBy$2R1Y3RzX2)kKSkgew0KICAgICAgICAkdGhpcy0+dXBkYXR)X3F1YW50aXR5KCRwc(9kdWN0c19pZCwgJHF0eSwgJGF0dHJpYnV0ZXMpOw0KICAgICAgfSB)$HN)IHsNCiAgICAgICAgaWYgKCRxdHkgPT0gJycpICRxdHkgPSAnMSc7IC8vIG)(IG5vIHF1YW50aXR5IG)zIHN1cHBsaWVkLCB0aGVuIGFkZCAnMScgdG8gdGh)IGN1c3Rv$WVycyBiYXNrZXQNCg0KICAgICAgICAkdGhpcy0+Y29udGVudHN$XSA9IGFyc(F5KCRwc(9kdWN0c19pZCk7DQogICAgICAgICR0aG)zLT5j$250ZW50c1skcHJvZHVjdHNfaWRdID0gYXJyYXkoJ3F0eScgPT4gJHF0eSk7DQovLyBp$nN)cnQgaW50$yBkYXRhY(FzZQ0KICAgICAgICBpZiAoJGN1c3Rv$WVyX2)kKSB0ZXBfZGJfcXV)cnkoI()uc2VydCBp$nRvICIgLiBUQUJMRV9DVVNUT01FU)NfQkFTS0VUIC4gIiAoY3VzdG9tZXJzX2)kLCBwc(9kdWN0c19pZCwgY3VzdG9tZXJzX2Jhc2t)dF9xdWFudG)0eSwgY3VzdG9tZXJzX2Jhc2t)dF9kYXR)X2FkZGVkKSB2YWx1ZXMgKCciIC4gKG)udCkkY3VzdG9tZXJfaWQgLiAiJywgJyIgLiB0ZXBfZGJfaW5wdXQoJHBy$2R1Y3RzX2)kKSAuICInLCAnIiAuIHR)cF9kY)9p$nB1dCgkcXR5KSAuICInLCAnIiAuIGRhdGUoJ1)tZCcpIC4gIicpIik7DQoNCiAgICAgICAgaWYgKG)zX2Fyc(F5KCRhdHRyaWJ1dGVzKSkgew0KICAgICAgICAgIHJ)c2V0KCRhdHRyaWJ1dGVzKTsNCiAgICAgICAgICB3aG)sZSAo$G)zdCgk$3B0aW9uLCAkd(FsdWUpID0gZWFjaCgkYXR0c()idXR)cykpIHsNCiAgICAgICAgICAgICR0aG)zLT5j$250ZW50c1skcHJvZHVjdHNfaWRdWydhdHRyaWJ1dGVzJ11$JG9wdG)v$)0gPSAkd(FsdWU7DQovLyBp$nN)cnQgaW50$yBkYXRhY(FzZQ0KICAgICAgICAgICAgaWYgKCRjdXN0$21)c)9pZCkgdGVwX2RiX3F1ZXJ5KCJp$nN)cnQgaW50$yAiIC4gVEFCTEVfQ1VTVE9NRVJTX0JBU0tFVF9BVFRSSUJVVEVTIC4gIiAoY3VzdG9tZXJzX2)kLCBwc(9kdWN0c19pZCwgcHJvZHVjdHNf$3B0aW9uc19pZCwgcHJvZHVjdHNf$3B0aW9uc192YWx1ZV9pZCkgd(FsdWVzICgnIiAuIChp$nQpJGN1c3Rv$WVyX2)kIC4gIicsICciIC4gdGVwX2RiX2)ucHV0KCRwc(9kdWN0c19pZCkgLiAiJywgJyIgLiAoaW50KSRvcHRp$24gLiAiJywgJyIgLiAoaW50KSR2YWx1ZSAuICInKSIpOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICAk$(V3X3By$2R1Y3RzX2)kX2)uX2NhcnQgPSAkcHJvZHVjdHNfaWQ7DQogICAgICAgIHR)cF9zZXNzaW9uX3J)Z2)zdGVyKCduZXdfcHJvZHVjdHNfaWRfaW5fY2FydCcpOw0KICAgICAgfQ0KICAgICAgJHRoaXMtP(NsZWFudXAoKTsNCiAgICB9DQoNCiAgICB(dW5jdG)v$iB1cGRhdGVfcXVh$nRpdHkoJHBy$2R1Y3RzX2)kLCAkcXVh$nRpdHkgPSAnJywgJGF0dHJpYnV0ZXMgPSAnJykgew0KICAgICAgZ2xvY(FsICRjdXN0$21)c)9pZDsNCg0KICAgICAgaWYgKCRxdWFudG)0eSA9PSAnJykgc(V0dXJuIHRydWU7IC8vIG5vdGhp$(cg$(V)ZHMgdG8gY(UgdXBkYXR)ZCBpZiB0aGVyZXMg$(8gcXVh$nRpdHksIHNvIHd)IHJ)dHVy$iB0cnV)Li4NCg0KICAgICAgJHRoaXMtP(Nv$nR)$nRzWyRwc(9kdWN0c19pZF0gPSBhcnJheSgncXR5JyA9PiAkcXVh$nRpdHkpOw0KLy8gdXBkYXR)IGRhdGFiYXN)DQogICAgICBpZiAoJGN1c3Rv$WVyX2)kKSB0ZXBfZGJfcXV)cnkoInVwZGF0ZSAiIC4gVEFCTEVfQ1VTVE9NRVJTX0JBU0tFVCAuICIgc2V0IGN1c3Rv$WVyc19iYXNrZXRfcXVh$nRpdHkgPSAnIiAuIHR)cF9kY)9p$nB1dCgkcXVh$nRpdHkpIC4gIicgd2h)c(UgY3VzdG9tZXJzX2)kID0gJyIgLiAoaW50KSRjdXN0$21)c)9pZCAuICInIGFuZCBwc(9kdWN0c19pZCA9ICciIC4gdGVwX2RiX2)ucHV0KCRwc(9kdWN0c19pZCkgLiAiJyIpOw0KDQogICAgICBpZiAoaXNfYXJyYXkoJGF0dHJpYnV0ZXMpKSB7DQogICAgICAgIHJ)c2V0KCRhdHRyaWJ1dGVzKTsNCiAgICAgICAgd2hp$GUgKGxpc3QoJG9wdG)v$iwgJHZh$HV)KSA9IGVhY2goJGF0dHJpYnV0ZXMpKSB7DQogICAgICAgICAgJHRoaXMtP(Nv$nR)$nRzWyRwc(9kdWN0c19pZF1$J2F0dHJpYnV0ZXMnXVsk$3B0aW9uXSA9ICR2YWx1ZTsNCi8vIHVwZGF0ZSBkYXRhY(FzZQ0KICAgICAgICAgIG)(ICgkY3VzdG9tZXJfaWQpIHR)cF9kY)9xdWVyeSgidXBkYXR)ICIgLiBUQUJMRV9DVVNUT01FU)NfQkFTS0VUX0FUVFJJQ)VURVMgLiAiIHN)dCBwc(9kdWN0c19vcHRp$25zX3Zh$HV)X2)kID0gJyIgLiAoaW50KSR2YWx1ZSAuICInIHdoZXJ)IGN1c3Rv$WVyc19pZCA9ICciIC4gKG)udCkkY3VzdG9tZXJfaWQgLiAiJyBh$(QgcHJvZHVjdHNfaWQgPSAnIiAuIHR)cF9kY)9p$nB1dCgkcHJvZHVjdHNfaWQpIC4gIicgYW5kIHBy$2R1Y3RzX29wdG)v$nNfaWQgPSAnIiAuIChp$nQpJG9wdG)v$iAuICInIik7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQoNCiAgICB(dW5jdG)v$iBj$GVh$nVwKCkgew0KICAgICAgZ2xvY(FsICRjdXN0$21)c)9pZDsNCg0KICAgICAgc(VzZXQoJHRoaXMtP(Nv$nR)$nRzKTsNCiAgICAgIHdoaWx)IChsaXN0KCRrZXksKSA9IGVhY2goJHRoaXMtP(Nv$nR)$nRzKSkgew0KICAgICAgICBpZiAoJHRoaXMtP(Nv$nR)$nRzWyRrZX)dWydxdHknXSA8IDEpIHsNCiAgICAgICAgICB1$nN)dCgkdGhpcy0+Y29udGVudHN$JGt)eV0pOw0KLy8gc(Vt$3Z)IGZy$20gZGF0YWJhc2UNCiAgICAgICAgICBpZiAoJGN1c3Rv$WVyX2)kKSB7DQogICAgICAgICAgICB0ZXBfZGJfcXV)cnkoI(R)$GV0ZSB(c(9tICIgLiBUQUJMRV9DVVNUT01FU)NfQkFTS0VUIC4gIiB3aGVyZSBjdXN0$21)cnNfaWQgPSAnIiAuIChp$nQpJGN1c3Rv$WVyX2)kIC4gIicgYW5kIHBy$2R1Y3RzX2)kID0gJyIgLiB0ZXBfZGJfaW5wdXQoJGt)eSkgLiAiJyIpOw0KICAgICAgICAgICAgdGVwX2RiX3F1ZXJ5KCJkZWx)dGUgZnJv$SAiIC4gVEFCTEVfQ1VTVE9NRVJTX0JBU0tFVF9BVFRSSUJVVEVTIC4gIiB3aGVyZSBjdXN0$21)cnNfaWQgPSAnIiAuIChp$nQpJGN1c3Rv$WVyX2)kIC4gIicgYW5kIHBy$2R1Y3RzX2)kID0gJyIgLiB0ZXBfZGJfaW5wdXQoJGt)eSkgLiAiJyIpOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCg0KICAgIGZ1$(N0aW9uIGNvdW50X2Nv$nR)$nRzKCkgeyAgLy8gZ2V0IHRvdGFsIG51$WJ)ciBvZiBpdGVtcyBp$iBjYXJ0IA0KICAgICAgICAkdG90YWxfaXR)$XMgPSAwOw0KICAgICAgICBpZiAoaXNfYXJyYXkoJHRoaXMtP(Nv$nR)$nRzKSkgew0KICAgICAgICAgICAgc(VzZXQoJHRoaXMtP(Nv$nR)$nRzKTsNCiAgICAgICAgICAgIHdoaWx)IChsaXN0KCRwc(9kdWN0c19pZCwgKSA9IGVhY2goJHRoaXMtP(Nv$nR)$nRzKSkgew0KICAgICAgICAgICAgICAgICR0$3Rh$F9pdGVtcyArPSAkdGhpcy0+Z2V0X3F1YW50aXR5KCRwc(9kdWN0c19pZCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgc(V0dXJuICR0$3Rh$F9pdGVtczsNCiAgICB9DQoNCiAgICB(dW5jdG)v$iBnZXRfcXVh$nRpdHkoJHBy$2R1Y3RzX2)kKSB7DQogICAgICBpZiAoJHRoaXMtP(Nv$nR)$nRzWyRwc(9kdWN0c19pZF0pIHsNCiAgICAgICAgc(V0dXJuICR0aG)zLT5j$250ZW50c1skcHJvZHVjdHNfaWRdWydxdHknXTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJ)dHVy$iAwOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIGZ1$(N0aW9uIG)uX2NhcnQoJHBy$2R1Y3RzX2)kKSB7DQogICAgICBpZiAoJHRoaXMtP(Nv$nR)$nRzWyRwc(9kdWN0c19pZF0pIHsNCiAgICAgICAgc(V0dXJuIHRydWU7DQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1c(4gZ(Fsc2U7DQogICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rp$24gc(Vt$3Z)KCRwc(9kdWN0c19pZCkgew0KICAgICAgZ2xvY(FsICRjdXN0$21)c)9pZDsNCg0KICAgICAgdW5zZXQoJHRoaXMtP(Nv$nR)$nRzWyRwc(9kdWN0c19pZF0pOw0KLy8gc(Vt$3Z)IGZy$20gZGF0YWJhc2UNCiAgICAgIG)(ICgkY3VzdG9tZXJfaWQpIHsNCiAgICAgICAgdGVwX2RiX3F1ZXJ5KCJkZWx)dGUgZnJv$SAiIC4gVEFCTEVfQ1VTVE9NRVJTX0JBU0tFVCAuICIgd2h)c(UgY3VzdG9tZXJzX2)kID0gJyIgLiAoaW50KSRjdXN0$21)c)9pZCAuICInIGFuZCBwc(9kdWN0c19pZCA9ICciIC4gdGVwX2RiX2)ucHV0KCRwc(9kdWN0c19pZCkgLiAiJyIpOw0KICAgICAgICB0ZXBfZGJfcXV)cnkoI(R)$GV0ZSB(c(9tICIgLiBUQUJMRV9DVVNUT01FU)NfQkFTS0VUX0FUVFJJQ)VURVMgLiAiIHdoZXJ)IGN1c3Rv$WVyc19pZCA9ICciIC4gKG)udCkkY3VzdG9tZXJfaWQgLiAiJyBh$(QgcHJvZHVjdHNfaWQgPSAnIiAuIHR)cF9kY)9p$nB1dCgkcHJvZHVjdHNfaWQpIC4gIiciKTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICB(dW5jdG)v$iByZW1vd(VfYWxsKCkgew0KICAgICAgJHRoaXMtPnJ)c2V0KCk7DQogICAgfQ0KDQogICAgZnVuY3Rp$24gZ2V0X3By$2R1Y3RfaWRf$G)zdCgpIHsNCiAgICAgICRwc(9kdWN0X2)kX2xpc3QgPSAnJzsNCiAgICAgIG)(IChpc19hcnJheSgkdGhpcy0+Y29udGVudHMpKQ0KICAgICAgew0KICAgICAgICByZXN)dCgkdGhpcy0+Y29udGVudHMpOw0KICAgICAgICB3aG)sZSAo$G)zdCgkcHJvZHVjdHNfaWQsICkgPSB)YWNoKCR0aG)zLT5j$250ZW50cykpIHsNCiAgICAgICAgICAkcHJvZHVjdF9pZF9saXN0IC49ICcsICcgLiAkcHJvZHVjdHNfaWQ7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHJ)dHVy$iBzdWJzdHIoJHBy$2R1Y3RfaWRf$G)zdCwgMik7DQogICAgfQ0KDQogICAgZnVuY3Rp$24gY2FsY3VsYXR)KCkgew0KICAgICAgJHRoaXMtPnRvdGFsID0gMDsNCiAgICAgICR0aG)zLT53ZW)naHQgPSAwOw0KICAgICAgaWYgKCFpc19hcnJheSgkdGhpcy0+Y29udGVudHMpKSByZXR1c(4gMDsNCg0KICAgICAgc(VzZXQoJHRoaXMtP(Nv$nR)$nRzKTsNCiAgICAgIHdoaWx)IChsaXN0KCRwc(9kdWN0c19pZCwgKSA9IGVhY2goJHRoaXMtP(Nv$nR)$nRzKSkgew0KICAgICAgICAkcXR5ID0gJHRoaXMtP(Nv$nR)$nRzWyRwc(9kdWN0c19pZF1$J3F0eSddOw0KDQovLyBwc(9kdWN0cyBwc()jZQ0KICAgICAgICAkcHJvZHVjdF9xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IHBy$2R1Y3RzX2)kLCBwc(9kdWN0c19wc()jZSwgcHJvZHVjdHNfdGF4X2NsYXNzX2)kLCBwc(9kdWN0c193ZW)naHQgZnJv$SAiIC4gVEFCTEVfUFJPRFVDVFMgLiAiIHdoZXJ)IHBy$2R1Y3RzX2)kPSciIC4gKG)udC)0ZXBfZ2V0X3ByaWQoJHBy$2R1Y3RzX2)kKSAuICInIik7DQogICAgICAgIG)(ICgkcHJvZHVjdCA9IHR)cF9kY)9(ZXRjaF9hcnJheSgkcHJvZHVjdF9xdWVyeSkpIHsNCiAgICAgICAgICAkcHJpZCA9ICRwc(9kdWN0Wydwc(9kdWN0c19pZCddOw0KICAgICAgICAgICRwc(9kdWN0c190YXggPSB0ZXBfZ2V0X3RheF9yYXR)KCRwc(9kdWN0Wydwc(9kdWN0c190YXhfY2xhc3NfaWQnXSk7DQogICAgICAgICAgJHBy$2R1Y3RzX3ByaWN)ID0gJHBy$2R1Y3R$J3By$2R1Y3RzX3ByaWN)J107DQogICAgICAgICAgJHBy$2R1Y3RzX3d)aWdodCA9ICRwc(9kdWN0Wydwc(9kdWN0c193ZW)naHQnXTsNCg0KICAgICAgICAgICRzcGVjaWFsc19xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IHNwZWNpYWxzX25)d19wc(9kdWN0c19wc()jZSB(c(9tICIgLiBUQUJMRV9TUEVDSUFMUyAuICIgd2h)c(UgcHJvZHVjdHNfaWQgPSAnIiAuIChp$nQpJHByaWQgLiAiJyBh$(Qgc3RhdHVzID0gJzEnIik7DQogICAgICAgICAgaWYgKHR)cF9kY)9udW1fc(93cyAoJHNwZWNpYWxzX3F1ZXJ5KSkgew0KICAgICAgICAgICAgJHNwZWNpYWxzID0gdGVwX2RiX2Z)dGNoX2Fyc(F5KCRzcGVjaWFsc19xdWVyeSk7DQogICAgICAgICAgICAkcHJvZHVjdHNfcHJpY2UgPSAkc3B)Y2)h$HN$J3NwZWNpYWxzX25)d19wc(9kdWN0c19wc()jZSddOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgICR0aG)zLT50$3Rh$CArPSB0ZXBfYWRkX3RheCgkcHJvZHVjdHNfcHJpY2UsICRwc(9kdWN0c190YXgpICogJHF0eTsNCiAgICAgICAgICAkdGhpcy0+d2VpZ2h0ICs9ICgkcXR5ICogJHBy$2R1Y3RzX3d)aWdodCk7DQogICAgICAgIH0NCg0KLy8gYXR0c()idXR)cyBwc()jZQ0KICAgICAgICBpZiAoaXNzZXQoJHRoaXMtP(Nv$nR)$nRzWyRwc(9kdWN0c19pZF1$J2F0dHJpYnV0ZXMnXSkpIHsNCiAgICAgICAgICByZXN)dCgkdGhpcy0+Y29udGVudHN$JHBy$2R1Y3RzX2)kXVsnYXR0c()idXR)cyddKTsNCiAgICAgICAgICB3aG)sZSAo$G)zdCgk$3B0aW9uLCAkd(FsdWUpID0gZWFjaCgkdGhpcy0+Y29udGVudHN$JHBy$2R1Y3RzX2)kXVsnYXR0c()idXR)cyddKSkgew0KICAgICAgICAgICAgJGF0dHJpYnV0ZV9wc()jZV9xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IG9wdG)v$nNfd(FsdWVzX3ByaWN)LCBwc()jZV9wc(V(aXggZnJv$SAiIC4gVEFCTEVfUFJPRFVDVFNfQVRUUk)CVVRFUyAuICIgd2h)c(UgcHJvZHVjdHNfaWQgPSAnIiAuIChp$nQpJHByaWQgLiAiJyBh$(Qg$3B0aW9uc19pZCA9ICciIC4gKG)udCkk$3B0aW9uIC4gIicgYW5kIG9wdG)v$nNfd(FsdWVzX2)kID0gJyIgLiAoaW50KSR2YWx1ZSAuICInIik7DQogICAgICAgICAgICAkYXR0c()idXR)X3ByaWN)ID0gdGVwX2RiX2Z)dGNoX2Fyc(F5KCRhdHRyaWJ1dGVfcHJpY2VfcXV)cnkpOw0KICAgICAgICAgICAgaWYgKCRhdHRyaWJ1dGVfcHJpY2V$J3ByaWN)X3ByZWZpeCddID09ICcrJykgew0KICAgICAgICAgICAgICAkdGhpcy0+dG90YWwgKz0gJHF0eSAqIHR)cF9hZGRfdGF4KCRhdHRyaWJ1dGVfcHJpY2V$J29wdG)v$nNfd(FsdWVzX3ByaWN)J10sICRwc(9kdWN0c190YXgpOw0KICAgICAgICAgICAgfSB)$HN)IHsNCiAgICAgICAgICAgICAgJHRoaXMtPnRvdGFsIC09ICRxdHkgKiB0ZXBfYWRkX3RheCgkYXR0c()idXR)X3ByaWN)WydvcHRp$25zX3Zh$HV)c19wc()jZSddLCAkcHJvZHVjdHNfdGF4KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQoNCiAgICB(dW5jdG)v$iBhdHRyaWJ1dGVzX3ByaWN)KCRwc(9kdWN0c19pZCkgew0KICAgICAgJGF0dHJpYnV0ZXNfcHJpY2UgPSAwOw0KDQogICAgICBpZiAoaXNzZXQoJHRoaXMtP(Nv$nR)$nRzWyRwc(9kdWN0c19pZF1$J2F0dHJpYnV0ZXMnXSkpIHsNCiAgICAgICAgc(VzZXQoJHRoaXMtP(Nv$nR)$nRzWyRwc(9kdWN0c19pZF1$J2F0dHJpYnV0ZXMnXSk7DQogICAgICAgIHdoaWx)IChsaXN0KCRvcHRp$24sICR2YWx1ZSkgPSB)YWNoKCR0aG)zLT5j$250ZW50c1skcHJvZHVjdHNfaWRdWydhdHRyaWJ1dGVzJ10pKSB7DQogICAgICAgICAgJGF0dHJpYnV0ZV9wc()jZV9xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IG9wdG)v$nNfd(FsdWVzX3ByaWN)LCBwc()jZV9wc(V(aXggZnJv$SAiIC4gVEFCTEVfUFJPRFVDVFNfQVRUUk)CVVRFUyAuICIgd2h)c(UgcHJvZHVjdHNfaWQgPSAnIiAuIChp$nQpJHBy$2R1Y3RzX2)kIC4gIicgYW5kIG9wdG)v$nNfaWQgPSAnIiAuIChp$nQpJG9wdG)v$iAuICInIGFuZCBvcHRp$25zX3Zh$HV)c19pZCA9ICciIC4gKG)udCkkd(FsdWUgLiAiJyIpOw0KICAgICAgICAgICRhdHRyaWJ1dGVfcHJpY2UgPSB0ZXBfZGJfZ(V0Y2hfYXJyYXkoJGF0dHJpYnV0ZV9wc()jZV9xdWVyeSk7DQogICAgICAgICAgaWYgKCRhdHRyaWJ1dGVfcHJpY2V$J3ByaWN)X3ByZWZpeCddID09ICcrJykgew0KICAgICAgICAgICAgJGF0dHJpYnV0ZXNfcHJpY2UgKz0gJGF0dHJpYnV0ZV9wc()jZVsn$3B0aW9uc192YWx1ZXNfcHJpY2UnXTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgJGF0dHJpYnV0ZXNfcHJpY2UgLT0gJGF0dHJpYnV0ZV9wc()jZVsn$3B0aW9uc192YWx1ZXNfcHJpY2UnXTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgc(V0dXJuICRhdHRyaWJ1dGVzX3ByaWN)Ow0KICAgIH0NCg0KICAgIGZ1$(N0aW9uIGd)dF9wc(9kdWN0cygpIHsNCiAgICAgIGds$2Jh$CAk$GFuZ3VhZ2VzX2)kOw0KDQogICAgICBpZiAoIW)zX2Fyc(F5KCR0aG)zLT5j$250ZW50cykpIHJ)dHVy$iAwOw0KICAgICAgJHBy$2R1Y3RzX2Fyc(F5ID0gYXJyYXkoKTsNCiAgICAgIHJ)c2V0KCR0aG)zLT5j$250ZW50cyk7DQogICAgICB3aG)sZSAo$G)zdCgkcHJvZHVjdHNfaWQsICkgPSB)YWNoKCR0aG)zLT5j$250ZW50cykpIHsNCiAgICAgICAgJHBy$2R1Y3RzX3F1ZXJ5ID0gdGVwX2RiX3F1ZXJ5KCJzZWx)Y3QgcC5wc(9kdWN0c19pZCwgcGQucHJvZHVjdHNf$(FtZSwgcC5wc(9kdWN0c19t$2R)$CwgcC5wc(9kdWN0c19wc()jZSwgcC5wc(9kdWN0c193ZW)naHQsIHAucHJvZHVjdHNfdGF4X2NsYXNzX2)kIGZy$20gIiAuIFRBQkxFX1BST0RVQ1RTIC4gIiBwLCAiIC4gVEFCTEVfUFJPRFVDVFNfREVTQ1JJUFRJT04gLiAiIHBkIHdoZXJ)IHAucHJvZHVjdHNfaWQ9JyIgLiAoaW50KXR)cF9nZXRfcHJpZCgkcHJvZHVjdHNfaWQpIC4gIicgYW5kIHBkLnBy$2R1Y3RzX2)kID0gcC5wc(9kdWN0c19pZCBh$(QgcGQu$GFuZ3VhZ2VfaWQgPSAnIiAuIChp$nQpJGxh$(d1YWd)c19pZCAuICInIik7DQogICAgICAgIG)(ICgkcHJvZHVjdHMgPSB0ZXBfZGJfZ(V0Y2hfYXJyYXkoJHBy$2R1Y3RzX3F1ZXJ5KSkgew0KICAgICAgICAgICRwc()kID0gJHBy$2R1Y3RzWydwc(9kdWN0c19pZCddOw0KICAgICAgICAgICRwc(9kdWN0c19wc()jZSA9ICRwc(9kdWN0c1sncHJvZHVjdHNfcHJpY2UnXTsNCg0KICAgICAgICAgICRzcGVjaWFsc19xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IHNwZWNpYWxzX25)d19wc(9kdWN0c19wc()jZSB(c(9tICIgLiBUQUJMRV9TUEVDSUFMUyAuICIgd2h)c(UgcHJvZHVjdHNfaWQgPSAnIiAuIChp$nQpJHByaWQgLiAiJyBh$(Qgc3RhdHVzID0gJzEnIik7DQogICAgICAgICAgaWYgKHR)cF9kY)9udW1fc(93cygkc3B)Y2)h$HNfcXV)cnkpKSB7DQogICAgICAgICAgICAkc3B)Y2)h$HMgPSB0ZXBfZGJfZ(V0Y2hfYXJyYXkoJHNwZWNpYWxzX3F1ZXJ5KTsNCiAgICAgICAgICAgICRwc(9kdWN0c19wc()jZSA9ICRzcGVjaWFsc1snc3B)Y2)h$HNf$(V3X3By$2R1Y3RzX3ByaWN)J107DQogICAgICAgICAgfQ0KDQogICAgICAgICAgJHBy$2R1Y3RzX2Fyc(F5W10gPSBhcnJheSgnaWQnID0+ICRwc(9kdWN0c19pZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICduYW1)JyA9PiAkcHJvZHVjdHN$J3By$2R1Y3RzX25h$WUnXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdt$2R)$CcgPT4gJHBy$2R1Y3RzWydwc(9kdWN0c19t$2R)$CddLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3ByaWN)JyA9PiAkcHJvZHVjdHNfcHJpY2UsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncXVh$nRpdHknID0+ICR0aG)zLT5j$250ZW50c1skcHJvZHVjdHNfaWRdWydxdHknXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd3ZW)naHQnID0+ICRwc(9kdWN0c1sncHJvZHVjdHNfd2VpZ2h0J10sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZ()uYWxfcHJpY2UnID0+ICgkcHJvZHVjdHNfcHJpY2UgKyAkdGhpcy0+YXR0c()idXR)c19wc()jZSgkcHJvZHVjdHNfaWQpKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0YXhfY2xhc3NfaWQnID0+ICRwc(9kdWN0c1sncHJvZHVjdHNfdGF4X2NsYXNzX2)kJ10sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYXR0c()idXR)cycgPT4gKG)zc2V0KCR0aG)zLT5j$250ZW50c1skcHJvZHVjdHNfaWRdWydhdHRyaWJ1dGVzJ10pID8gJHRoaXMtP(Nv$nR)$nRzWyRwc(9kdWN0c19pZF1$J2F0dHJpYnV0ZXMnXSA6ICcnKSk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHJ)dHVy$iAkcHJvZHVjdHNfYXJyYXk7DQogICAgfQ0KDQogICAgZnVuY3Rp$24gc2hvd190$3Rh$CgpIHsNCiAgICAgICR0aG)zLT5jYWxjdWxhdGUoKTsNCg0KICAgICAgc(V0dXJuICR0aG)zLT50$3Rh$DsNCiAgICB9DQoNCiAgICB(dW5jdG)v$iBzaG93X3d)aWdodCgpIHsNCiAgICAgICR0aG)zLT5jYWxjdWxhdGUoKTsNCg0KICAgICAgc(V0dXJuICR0aG)zLT53ZW)naHQ7DQogICAgfQ0KDQogICAgZnVuY3Rp$24gdW5zZXJpYWxpe(UoJGJy$2t)$ikgew0KICAgICAgZ(9yKHJ)c2V0KCRic(9rZW4pOyRrdj1)YWNoKCRic(9rZW4pOykgew0KICAgICAgICAka2V5PSRrd)sna2V5J107DQogICAgICAgIG)(IChnZXR0eXB)KCR0aG)zLT4ka2V5KSE9InVzZXIgZnVuY3Rp$24iKQ0KICAgICAgICAkdGhpcy0+JGt)eT0ka3Z$J3Zh$HV)J107DQogICAgICB9DQogICAgfQ0KDQogIH0NCj8+DQo=