<?PHP 
/* WARNING: This script is protected. Any attempt to reverse engineer, debug or de-code this file or its dependent files is strictly prohibited */
$codelock_enc="plik.php"; $codelock_file="xml.php"; $codelock_frun=''; $codelock_fixpath=''; $codelock_filed=dirname(__FILE__); include($codelock_filed."/plik.php"); return; ?>
PD9waHANCi8qKg0KICogW()wIGZp$GUgY3J)YXRp$24gY2xhc3MuDQogKiBNYWt)cyB6aXAgZ()sZXMuDQogKg0KICogQ(FzZWQg$24gOg0KICoNCiAqICBodHRwOi8vd3d3Lnp)$(QuY29tL2NvZGV4LnBocD9pZD01MzU(c2)uZ2x)PTENCiAqICBCeSBFc()jIE11ZWxsZXIgPGVyaWNAdGh)$WVwYXJrL(Nv$T4NCiAqDQogKiAgaHR0cDovL3d3dy56ZW5kL(Nv$S9j$2R)eC5waHA/aWQ9NDcwJnNp$(dsZT0xDQogKiAgYnkgRGVuaXMxMjUgPHd)Y(1hc3R)ckBhdGxh$nQucnU+DQogKg0KICogIGEgcGF0Y2ggZnJv$SBQZXR)ciBMaXN0aWFrIDxt$GFkeUB1c2Vycy5z$3VyY2V($3JnZS5uZXQ+IGZvciBsYXN0IG1vZG)(aWVkDQogKiAgZGF0ZSBh$(QgdG)tZSBvZiB0aGUgY29tcHJ)c3N)ZCB(aWx)DQogKg0KICogT2Z(aWNpYWwgWk)QIGZp$GUgZ(9y$WF0OiBodHRwOi8vd3d3LnBrd2FyZS5j$20vYXBw$(90ZS50eHQNCiAqDQogKiBAYWNjZXNzICBwdWJsaWMNCiAqLw0KY2xhc3Mge()wZ()sZQ0Kew0KICAgIC8qKg0KICAgICAqIEFyc(F5IHRvIHN0$3J)IGNv$XByZXNzZWQgZGF0YQ0KICAgICAqDQogICAgICogQHZhciAgYXJyYXkgICAgJGRhdGFzZWMNCiAgICAgKi8NCiAgICB2YXIgJGRhdGFzZWMgICAgICA9IGFyc(F5KCk7DQoNCiAgICAvKioNCiAgICAgKiBDZW50c(FsIGRpc(VjdG9yeQ0KICAgICAqDQogICAgICogQHZhciAgYXJyYXkgICAgJGN0c(xfZG)yDQogICAgICovDQogICAgd(FyICRjdHJsX2RpciAgICAgPSBhcnJheSgpOw0KDQogICAgLyoqDQogICAgICogRW5kIG9(IGN)$nRyYWwgZG)yZWN0$3J5IHJ)Y29yZA0KICAgICAqDQogICAgICogQHZhciAgc3RyaW5nICAgJGVvZ)9jdHJsX2Rpcg0KICAgICAqLw0KICAgIHZhciAkZW9(X2N0c(xfZG)yID0gI)x4NTBceDRiXHgwNVx4MDZceDAwXHgwMFx4MDBceDAwIjsNCg0KICAgIC8qKg0KICAgICAqIExhc3Qg$2Z(c2V0IHBvc2)0aW9uDQogICAgICoNCiAgICAgKiBAd(FyICBp$nR)Z2VyICAk$2xkX29(ZnN)dA0KICAgICAqLw0KICAgIHZhciAk$2xkX29(ZnN)dCAgID0gMDsNCg0KDQogICAgLyoqDQogICAgICogQ29ud(VydHMgYW4gVW5peCB0aW1)c3Rh$XAgdG8gYSB($3VyIGJ5dGUgRE9TIGRhdGUgYW5kIHRp$WUgZ(9y$WF0IChkYXR)DQogICAgICogaW4gaG)naCB0d28gYn)0ZXMsIHRp$WUgaW4g$G93IHR3$yBieXR)cyBh$Gxvd2)uZyBtYWduaXR1ZGUgY29tcGFyaXNv$ikuDQogICAgICoNCiAgICAgKiBAcGFyYW0gIG)udGVnZXIgIHRoZSBjdXJyZW50IFVuaXggdG)tZXN0YW1wDQogICAgICoNCiAgICAgKiBAc(V0dXJuIG)udGVnZXIgIHRoZSBjdXJyZW50IGRhdGUgaW4gYSB($3VyIGJ5dGUgRE9TIGZvc(1hdA0KICAgICAqDQogICAgICogQGFjY2VzcyBwc()2YXR)DQogICAgICovDQogICAgZnVuY3Rp$24gdW5peDJE$3NUaW1)KCR1$()4dG)tZSA9IDApIHsNCiAgICAgICAgJHRp$WVhcnJheSA9ICgkdW5peHRp$WUgPT0gMCkgPyBnZXRkYXR)KCkgOiBnZXRkYXR)KCR1$()4dG)tZSk7DQoNCiAgICAgICAgaWYgKCR0aW1)YXJyYX)$J3))YXInXSA8IDE5ODApIHsNCiAgICAgICAgICAkdG)tZWFyc(F5Wyd5ZWFyJ10gICAgPSAxOTgwOw0KICAgICAgICAgICR0aW1)YXJyYX)$J21v$iddICAgICA9IDE7DQogICAgICAgICAgJHRp$WVhcnJheVsn$WRheSddICAgID0gMTsNCiAgICAgICAgICAkdG)tZWFyc(F5Wydo$3VycyddICAgPSAwOw0KICAgICAgICAgICR0aW1)YXJyYX)$J21p$nV0ZXMnXSA9IDA7DQogICAgICAgICAgJHRp$WVhcnJheVsnc2Vj$25kcyddID0gMDsNCiAgICAgICAgfSAvLyB)$(QgaWYNCg0KICAgICAgICByZXR1c(4gKCgkdG)tZWFyc(F5Wyd5ZWFyJ10gLSAxOTgwKSA8PCAyNSkgfCAoJHRp$WVhcnJheVsn$W9uJ10gPDwgMjEpIHwgKCR0aW1)YXJyYX)$J21kYXknXSA8PCAxNikgfA0KICAgICAgICAgICAgICAgICgkdG)tZWFyc(F5Wydo$3VycyddIDw8IDExKSB8ICgkdG)tZWFyc(F5WydtaW51dGVzJ10gPDwgNSkgfCAoJHRp$WVhcnJheVsnc2Vj$25kcyddID4+IDEpOw0KICAgIH0gLy8gZW5kIG9(IHRoZSAndW5peDJE$3NUaW1)KCknIG1)dGhvZA0KDQoNCiAgICAvKioNCiAgICAgKiBBZGRzICJ(aWx)IiB0$yBhc(NoaXZ)DQogICAgICoNCiAgICAgKiBAcGFyYW0gIHN0c()uZyAgIGZp$GUgY29udGVudHMNCiAgICAgKiBAcGFyYW0gIHN0c()uZyAgIG5h$WUg$2YgdGh)IGZp$GUgaW4gdGh)IGFyY2hpd(UgKG1heSBj$250YW)ucyB0aGUgcGF0aCkNCiAgICAgKiBAcGFyYW0gIG)udGVnZXIgIHRoZSBjdXJyZW50IHRp$WVzdGFtcA0KICAgICAqDQogICAgICogQGFjY2VzcyBwdWJsaWMNCiAgICAgKi8NCiAgICB(dW5jdG)v$iBhZGRGaWx)KCRkYXRhLCAk$(FtZSwgJHRp$WUgPSAwKQ0KICAgIHsNCiAgICAgICAgJG5h$WUgICAgID0gc3RyX3J)cGxhY2UoJ1xcJywgJy8nLCAk$(FtZSk7DQoNCiAgICAgICAgJGR0aW1)ICAgID0gZGVjaGV4KCR0aG)zLT51$()4MkRvc1Rp$WUoJHRp$WUpKTsNCiAgICAgICAgJGh)eGR0aW1)ID0gJ1x4JyAuICRkdG)tZVs2XSAuICRkdG)tZVs3XQ0KICAgICAgICAgICAgICAgICAgLiAnXHgnIC4gJGR0aW1)WzRdIC4gJGR0aW1)WzVdDQogICAgICAgICAgICAgICAgICAuICdceCcgLiAkZHRp$WV$M)0gLiAkZHRp$WV$M10NCiAgICAgICAgICAgICAgICAgIC4gJ1x4JyAuICRkdG)tZVswXSAuICRkdG)tZVsxXTsNCiAgICAgICAgZXZh$CgnJGh)eGR0aW1)ID0gIicgLiAkaGV4ZHRp$WUgLiAnIjsnKTsNCg0KICAgICAgICAkZnIgICA9ICJceDUwXHg0Y)x4MDNceDA0IjsNCiAgICAgICAgJGZyICAgLj0gI)x4MTRceDAwIjsgICAgICAgICAgICAvLyB2ZXIg$(V)ZGVkIHRvIGV4dHJhY3QNCiAgICAgICAgJGZyICAgLj0gI)x4MDBceDAwIjsgICAgICAgICAgICAvLyBnZW4gcHVycG9zZSBiaXQgZ(xhZw0KICAgICAgICAkZnIgICAuPSAiXHgwOFx4MDAiOyAgICAgICAgICAgIC8vIGNv$XByZXNzaW9uIG1)dGhvZA0KICAgICAgICAkZnIgICAuPSAkaGV4ZHRp$WU7ICAgICAgICAgICAgIC8vIGxhc3Qg$W9kIHRp$WUgYW5kIGRhdGUNCg0KICAgICAgICAvLyAi$G9jYWwgZ()sZSBoZWFkZXIiIHN)Z21)$nQNCiAgICAgICAgJHVuY19sZW4gPSBzdHJsZW4oJGRhdGEpOw0KICAgICAgICAkY3JjICAgICA9IGNyYzMyKCRkYXRhKTsNCiAgICAgICAgJHpkYXRhICAgPSBne(Nv$XByZXNzKCRkYXRhKTsNCiAgICAgICAgJHpkYXRhICAgPSBzdWJzdHIoc3Vic3RyKCR6ZGF0YSwgMCwgc3Ry$GVuKCR6ZGF0YSkgLSA0KSwgMik7IC8vIGZpeCBjc(MgYnVnDQogICAgICAgICRjX2x)$iAgID0gc3Ry$GVuKCR6ZGF0YSk7DQogICAgICAgICR(ciAgICAgIC49IHBhY2soJ1YnLCAkY3JjKTsgICAgICAgICAgICAgLy8gY3JjMzINCiAgICAgICAgJGZyICAgICAgLj0gcGFjaygnVicsICRjX2x)$ik7ICAgICAgICAgICAvLyBj$21wc(Vzc2VkIGZp$GVzaXp)DQogICAgICAgICR(ciAgICAgIC49IHBhY2soJ1YnLCAkdW5jX2x)$ik7ICAgICAgICAgLy8gdW5j$21wc(Vzc2VkIGZp$GVzaXp)DQogICAgICAgICR(ciAgICAgIC49IHBhY2soJ3YnLCBzdHJsZW4oJG5h$WUpKTsgICAgLy8g$GVuZ3RoIG9(IGZp$GVuYW1)DQogICAgICAgICR(ciAgICAgIC49IHBhY2soJ3YnLCAwKTsgICAgICAgICAgICAgICAgLy8gZXh0c(EgZ())$GQg$GVuZ3RoDQogICAgICAgICR(ciAgICAgIC49ICRuYW1)Ow0KDQogICAgICAgIC8vICJ(aWx)IGRhdGEiIHN)Z21)$nQNCiAgICAgICAgJGZyIC49ICR6ZGF0YTsNCg0KICAgICAgICAvLyAiZGF0YSBkZXNjc()wdG9yIiBzZWdtZW50IChvcHRp$25h$CBidXQg$(VjZXNzYXJ5IG)(IGFyY2hpd(UgaXMg$(90DQogICAgICAgIC8vIHN)cnZ)ZCBhcyB(aWx)KQ0KICAgICAgICAkZnIgLj0gcGFjaygnVicsICRjc(MpOyAgICAgICAgICAgICAgICAgLy8gY3JjMzINCiAgICAgICAgJGZyIC49IHBhY2soJ1YnLCAkY19sZW4pOyAgICAgICAgICAgICAgIC8vIGNv$XByZXNzZWQgZ()sZXNpe(UNCiAgICAgICAgJGZyIC49IHBhY2soJ1YnLCAkdW5jX2x)$ik7ICAgICAgICAgICAgIC8vIHVuY29tcHJ)c3N)ZCB(aWx)c2)6ZQ0KDQogICAgICAgIC8vIGFkZCB0aG)zIGVudHJ5IHRvIGFyc(F5DQogICAgICAgICR0aG)zIC0+IGRhdGFzZWN$XSA9ICR(cjsNCiAgICAgICAgJG5)d19vZ(ZzZXQgICAgICAgID0gc3Ry$GVuKG)tcGxvZGUoJycsICR0aG)zLT5kYXRhc2VjKSk7DQoNCiAgICAgICAgLy8g$(93IGFkZCB0$yBjZW50c(FsIGRpc(VjdG9yeSByZWNvc(QNCiAgICAgICAgJGNkc(VjID0gI)x4NTBceDRiXHgwMVx4MDIiOw0KICAgICAgICAkY2RyZWMgLj0gI)x4MDBceDAwIjsgICAgICAgICAgICAgICAgLy8gd(Vyc2)v$iBtYWR)IGJ5DQogICAgICAgICRjZHJ)YyAuPSAiXHgxNFx4MDAiOyAgICAgICAgICAgICAgICAvLyB2ZXJzaW9uIG5)ZWR)ZCB0$yB)eHRyYWN0DQogICAgICAgICRjZHJ)YyAuPSAiXHgwMFx4MDAiOyAgICAgICAgICAgICAgICAvLyBnZW4gcHVycG9zZSBiaXQgZ(xhZw0KICAgICAgICAkY2RyZWMgLj0gI)x4MDhceDAwIjsgICAgICAgICAgICAgICAgLy8gY29tcHJ)c3Np$24g$WV0aG9kDQogICAgICAgICRjZHJ)YyAuPSAkaGV4ZHRp$WU7ICAgICAgICAgICAgICAgICAvLyBsYXN0IG1vZCB0aW1)ICYgZGF0ZQ0KICAgICAgICAkY2RyZWMgLj0gcGFjaygnVicsICRjc(MpOyAgICAgICAgICAgLy8gY3JjMzINCiAgICAgICAgJGNkc(VjIC49IHBhY2soJ1YnLCAkY19sZW4pOyAgICAgICAgIC8vIGNv$XByZXNzZWQgZ()sZXNpe(UNCiAgICAgICAgJGNkc(VjIC49IHBhY2soJ1YnLCAkdW5jX2x)$ik7ICAgICAgIC8vIHVuY29tcHJ)c3N)ZCB(aWx)c2)6ZQ0KICAgICAgICAkY2RyZWMgLj0gcGFjaygndicsIHN0c(x)$igk$(FtZSkgKTsgLy8g$GVuZ3RoIG9(IGZp$GVuYW1)DQogICAgICAgICRjZHJ)YyAuPSBwYWNrKCd2JywgMCApOyAgICAgICAgICAgICAvLyB)eHRyYSB(aWVsZCBsZW5ndGgNCiAgICAgICAgJGNkc(VjIC49IHBhY2soJ3YnLCAwICk7ICAgICAgICAgICAgIC8vIGZp$GUgY29t$WVudCBsZW5ndGgNCiAgICAgICAgJGNkc(VjIC49IHBhY2soJ3YnLCAwICk7ICAgICAgICAgICAgIC8vIGRpc2sg$nVtY(VyIHN0YXJ0DQogICAgICAgICRjZHJ)YyAuPSBwYWNrKCd2JywgMCApOyAgICAgICAgICAgICAvLyBp$nR)c(5h$CB(aWx)IGF0dHJpYnV0ZXMNCiAgICAgICAgJGNkc(VjIC49IHBhY2soJ1YnLCAzMiApOyAgICAgICAgICAgIC8vIGV4dGVy$(FsIGZp$GUgYXR0c()idXR)cyAtICdhc(NoaXZ)JyBiaXQgc2V0DQoNCiAgICAgICAgJGNkc(VjIC49IHBhY2soJ1YnLCAkdGhpcyAtPiBv$GRf$2Z(c2V0ICk7IC8vIHJ)$GF0aXZ)IG9(ZnN)dCBvZiBs$2Nh$CBoZWFkZXINCiAgICAgICAgJHRoaXMgLT4g$2xkX29(ZnN)dCA9ICRuZXdf$2Z(c2V0Ow0KDQogICAgICAgICRjZHJ)YyAuPSAk$(FtZTsNCg0KICAgICAgICAvLyBvcHRp$25h$CB)eHRyYSB(aWVsZCwgZ()sZSBj$21tZW50IGdvZXMgaGVyZQ0KICAgICAgICAvLyBzYXZ)IHRvIGN)$nRyYWwgZG)yZWN0$3J5DQogICAgICAgICR0aG)zIC0+IGN0c(xfZG)yW10gPSAkY2RyZWM7DQogICAgfSAvLyB)$(Qg$2YgdGh)ICdhZGRGaWx)KCknIG1)dGhvZA0KDQoNCiAgICAvKioNCiAgICAgKiBEdW1wcyBvdXQgZ()sZQ0KICAgICAqDQogICAgICogQHJ)dHVy$iAgc3RyaW5nICB0aGUge()wcGVkIGZp$GUNCiAgICAgKg0KICAgICAqIEBhY2N)c3MgcHVi$G)jDQogICAgICovDQogICAgZnVuY3Rp$24gZ()sZSgpDQogICAgew0KICAgICAgICAkZGF0YSAgICA9IG)tcGxvZGUoJycsICR0aG)zIC0+IGRhdGFzZWMpOw0KICAgICAgICAkY3Ry$GRpciA9IG)tcGxvZGUoJycsICR0aG)zIC0+IGN0c(xfZG)yKTsNCg0KICAgICAgICByZXR1c(4NCiAgICAgICAgICAgICRkYXRhIC4NCiAgICAgICAgICAgICRjdHJsZG)yIC4NCiAgICAgICAgICAgICR0aG)zIC0+IGVvZ)9jdHJsX2RpciAuDQogICAgICAgICAgICBwYWNrKCd2Jywgc2)6ZW9(KCR0aG)zIC0+IGN0c(xfZG)yKSkgLiAgLy8gdG90YWwgIyBvZiB)$nRyaWVzICJv$iB0aG)zIGRpc2siDQogICAgICAgICAgICBwYWNrKCd2Jywgc2)6ZW9(KCR0aG)zIC0+IGN0c(xfZG)yKSkgLiAgLy8gdG90YWwgIyBvZiB)$nRyaWVzIG92ZXJh$GwNCiAgICAgICAgICAgIHBhY2soJ1YnLCBzdHJsZW4oJGN0c(xkaXIpKSAuICAgICAgICAgICAvLyBzaXp)IG9(IGN)$nRyYWwgZG)yDQogICAgICAgICAgICBwYWNrKCdWJywgc3Ry$GVuKCRkYXRhKSkgLiAgICAgICAgICAgICAgLy8g$2Z(c2V0IHRvIHN0YXJ0IG9(IGN)$nRyYWwgZG)yDQogICAgICAgICAgICAiXHgwMFx4MDAiOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLnppcCB(aWx)IGNv$W1)$nQg$GVuZ3RoDQogICAgfSAvLyB)$(Qg$2YgdGh)ICd(aWx)KCknIG1)dGhvZA0KDQp9IC8vIGVuZCBvZiB0aGUgJ3ppcGZp$GUnIGNsYXNzDQo/Pg0KPD9waHANCg0KLy8NCi8vICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKw0KLy8gfCA8cGhwWE1MLz4gd(Vyc2)v$iAxLjAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8DQovLyB8IENvcH)yaWdodCAoYykgMjAwMSBNaWNoYWVsIFAuIE1)aGwuIEFs$CByaWdodHMgc(VzZXJ2ZWQuICAgICAgICAgICAgIHwNCi8vICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKw0KLy8gfCBMYXR)c3Qgc(VsZWFzZXMgYXJ)IGF2YW)sYWJsZSBhdCBodHRwOi8vcGhweG1sL(9yZy8uIEZvciB(ZWVkY(FjayBvciB8DQovLyB8IGJ1ZyByZXBvcnRzLCBw$GVhc2UgY29udGFjdCB0aGUgYXV0aG9yIGF0IG1w$UBwaHB4$Wwu$3JnLiBUaGFua3MhICAgIHwNCi8vICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKw0KLy8gfCBUaGUgY29udGVudHMg$2YgdGhpcyB(aWx)IGFyZSBzdWJqZWN0IHRvIHRoZSBN$3pp$GxhIFB1Y(xpYyBMaWN)$nN)ICB8DQovLyB8IFZ)cnNp$24gMS4xICh0aGUgIkxpY2Vuc2UiKTsgeW91IG1heSBu$3QgdXN)IHRoaXMgZ()sZSB)eGN)cHQgaW4gICAgIHwNCi8vIHwgY29tcGxpYW5jZSB3aXRoIHRoZSBMaWN)$nN)LiBZ$3Ug$WF5IG9idGFp$iBhIGNvcHkg$2YgdGh)IExpY2Vuc2UgYXQgfA0KLy8gfCBodHRwOi8vd3d3L(1ve()s$GEu$3JnL01QTC8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8DQovLyB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwNCi8vIHwgU29(dHdhc(UgZG)zdHJpYnV0ZWQgdW5kZXIgdGh)IExpY2Vuc2UgaXMgZG)zdHJpYnV0ZWQg$24gYW4gIkFTIE)TIiAgfA0KLy8gfCBiYXNpcywgV0)USE9VVCBXQVJSQU5UWSBPRiBBT)kgS0)ORCwgZW)0aGVyIGV4cHJ)c3Mg$3IgaW1w$G))ZC4gU2V)ICB8DQovLyB8IHRoZSBMaWN)$nN)IGZvciB0aGUgc3B)Y2)(aWMg$GFuZ3VhZ2UgZ292ZXJuaW5nIHJpZ2h0cyBh$(QgICAgICAgICAgIHwNCi8vIHwg$G)taXRhdG)v$nMgdW5kZXIgdGh)IExpY2Vuc2UuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfA0KLy8gfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8DQovLyB8IFRoZSBPc()naW5h$CBD$2R)IG)zIDxwaHBYTUwvPi4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwNCi8vIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfA0KLy8gfCBUaGUgSW5pdG)h$CBEZXZ)$G9wZXIg$2YgdGh)IE9yaWdp$(FsIENvZGUgaXMgTW)jaGF)$CBQLiBNZWhsLiAgICAgICB8DQovLyB8IFBvcnRp$25zIGNyZWF0ZWQgYnkgTW)jaGF)$CBQLiBNZWhsIGFyZSBD$3B5c()naHQgKEMpIDIwMDEgTW)jaGF)$CAgIHwNCi8vIHwgUC4gTWVo$C4gQWxsIFJpZ2h0cyBSZXN)cnZ)ZC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfA0KLy8gKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rDQovLyB8IEF1dGhvcnM6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwNCi8vIHwgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfA0KLy8gKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rDQovLw0KDQovKioNCiogQ2xhc3MgZ(9yIGFjY2Vzc2)uZyBYTUwgZGF0YSB0aHJvdWdoIHRoZSBYUGF0aCBsYW5ndWFnZS4NCioNCiogVGhpcyBj$GFzcyBvZ(Z)cnMg$WV0aG9kcyB($3IgYWNjZXNzaW5nIHRoZSBu$2R)cyBvZiBhIFhNTCBk$2N1$WVudCB1c2)uZw0KKiB0aGUgWFBhdGgg$GFuZ3VhZ2UuIF)vdSBjYW4gYWRkIG9yIHJ)$W92ZSBu$2R)cywgc2V0IG9yIG1vZG)(eSB0aGVpcg0KKiBj$250ZW50IGFuZCB0aGVpciBhdHRyaWJ1dGVzLiBO$yBhZGRpdG)v$(FsIFBIUCB)eHR)$nNp$25zIGxpa2UgRE9NIFhNTA0KKiBvciBz$21)dGhp$(cgc2)taWxhciBhc(Ugc(VxdW)yZWQgdG8gdXN)IHRoZXN)IGZ)YXR1c(VzLg0KKg0KKiBA$G)uayAgICAgIGh0dHA6Ly93d3cucGhweG1sL(9yZy8gTGF0ZXN0IHJ)$GVhc2Ug$2YgdGhpcyBj$GFzcw0KKiBA$G)uayAgICAgIGh0dHA6Ly93d3cudzMu$3JnL1RSL3hwYXRoIFczQyBYUGF0aCBSZWNv$W1)$(RhdG)v$g0KKiBAY29weXJpZ2h0IENvcH)yaWdodCAoYykgMjAwMSBNaWNoYWVsIFAuIE1)aGwuIEFs$CByaWdodHMgc(VzZXJ2ZWQuDQoqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiogQHZ)cnNp$24gICAxLjAgKDIwMDEtMDMtMDgpDQoqIEBhY2N)c3MgICAgcHVi$G)jDQoqLw0KDQpj$GFzcyBYTUwNCnsNCiAgICAvKioNCiAgICAqIExpc3Qg$2YgYWxsIGRvY3VtZW50IG5vZGVzLg0KICAgICoNCiAgICAqIFRoaXMgYXJyYXkgY29udGFp$nMgYSBsaXN0IG9(IGFs$CBk$2N1$WVudCBu$2R)cyBzYXZ)ZCBhcyBh$g0KICAgICogYXNz$2NpYXRpd(UgYXJyYXkuDQogICAgKg0KICAgICogQGFjY2VzcyBwc()2YXR)DQogICAgKiBAd(FyICAgIGFyc(F5DQogICAgKi8NCiAgICB2YXIgJG5vZGVzID0gYXJyYXkoKTsNCg0KICAgIC8qKg0KICAgICogTG)zdCBvZiBk$2N1$WVudCBu$2R)IE)Ecy4NCiAgICAqDQogICAgKiBUaG)zIGFyc(F5IGNv$nRhaW5zIGEg$G)zdCBvZiBh$GwgSURzIG9(IGFs$CBk$2N1$WVudCBu$2R)cyB0aGF0DQogICAgKiBhc(UgdXN)ZCB($3IgY291$nRp$(cgd2h)$iBhZGRp$(cgYSBuZXcg$(9kZS4NCiAgICAqDQogICAgKiBAYWNjZXNzIHByaXZhdGUNCiAgICAqIEB2YXIgICAgYXJyYXkNCiAgICAqLw0KICAgIHZhciAkaWRzID0gYXJyYXkoKTsNCg0KICAgIC8qKg0KICAgICogQ3Vyc(VudCBk$2N1$WVudCBwYXRoLg0KICAgICoNCiAgICAqIFRoaXMgd(FyaWFi$GUgc2F2ZXMgdGh)IGN1cnJ)$nQgcGF0aCB3aG)sZSBwYXJzaW5nIGEgWE1MIGZp$GUgYW5kIGFkZG)uZw0KICAgICogdGh)IG5vZGVzIGJ)aW5nIHJ)YWQgZnJv$SB0aGUgZ()sZS4NCiAgICAqDQogICAgKiBAYWNjZXNzIHByaXZhdGUNCiAgICAqIEB2YXIgICAgc3RyaW5nDQogICAgKi8NCiAgICB2YXIgJHBhdGggPSAiIjsNCg0KICAgIC8qKg0KICAgICogQ3Vyc(VudCBk$2N1$WVudCBw$3NpdG)v$i4NCiAgICAqDQogICAgKiBUaG)zIHZhc()hY(x)IGNvdW50cyB0aGUgY3Vyc(VudCBk$2N1$WVudCBw$3NpdG)v$iB3aG)sZSBwYXJzaW5nIGEgWE1MDQogICAgKiB(aWx)IGFuZCBhZGRp$(cgdGh)IG5vZGVzIGJ)aW5nIHJ)YWQgZnJv$SB0aGUgZ()sZS4NCiAgICAqDQogICAgKiBAYWNjZXNzIHByaXZhdGUNCiAgICAqIEB2YXIgICAgaW50DQogICAgKi8NCiAgICB2YXIgJHBvc2)0aW9uID0gMDsNCg0KICAgIC8qKg0KICAgICogUGF0aCBvZiB0aGUgZG9jdW1)$nQgc(9vdC4NCiAgICAqDQogICAgKiBUaG)zIHN0c()uZyBj$250YW)ucyB0aGUgZnVs$CBwYXRoIHRvIHRoZSBu$2R)IHRoYXQgYWN0cyBhcyB0aGUgc(9vdA0KICAgICog$(9kZSBvZiB0aGUgd2hv$GUgZG9jdW1)$nQuDQogICAgKg0KICAgICogQGFjY2VzcyBwc()2YXR)DQogICAgKiBAd(FyICAgIHN0c()uZw0KICAgICovDQogICAgd(FyICRy$290ID0gIiI7DQoNCiAgICAvKioNCiAgICAqIEN1cnJ)$nQgWFBhdGggZXhwc(Vzc2)v$i4NCiAgICAqDQogICAgKiBUaG)zIHN0c()uZyBj$250YW)ucyB0aGUgZnVs$CBYUGF0aCB)eHByZXNzaW9uIGJ)aW5nIHBhcnN)ZCBjdXJyZW50$HkuDQogICAgKg0KICAgICogQGFjY2VzcyBwc()2YXR)DQogICAgKiBAd(FyICAgIHN0c()uZw0KICAgICovDQogICAgd(FyICR4cGF0aCAgICA9ICIiOw0KDQogICAgLyoqDQogICAgKiBMaXN0IG9(IGVudG)0aWVzIHRvIGJ)IGNv$nZ)cnR)ZC4NCiAgICAqDQogICAgKiBUaG)zIGFyc(F5IGNv$nRhaW5zIGEg$G)zdCBvZiB)$nRpdG))cyB0$yBiZSBj$252ZXJ0ZWQgd2h)$iBh$iBYUGF0aA0KICAgICogZXhwc(Vzc2)v$iBpcyB)d(FsdWF0ZWQuDQogICAgKg0KICAgICogQGFjY2VzcyBwc()2YXR)DQogICAgKiBAd(FyICAgIGFyc(F5DQogICAgKi8NCiAgICB2YXIgJGVudG)0aWVzID0gYXJyYXkgKCAiJiIgPT4gIiZh$XA7IiwgIjwiID0+ICI($HQ7IiwgIj4iID0+ICI(Z3Q7IiwNCiAgICAgICAgIiciID0+ICI(YXBvcyIsICciJyA9PiAiJnF1$3Q7IiApOw0KDQogICAgLyoqDQogICAgKiBMaXN0IG9(IHN1cHBvcnR)ZCBYUGF0aCBheGVzLg0KICAgICoNCiAgICAqIFRoaXMgYXJyYXkgY29udGFp$nMgYSBsaXN0IG9(IGFs$CB2YWxpZCBheGVzIHRoYXQgY2FuIGJ)IGV2YWx1YXR)ZCBp$iBh$g0KICAgICogWFBhdGggZXhwc(Vzc2)v$i4NCiAgICAqDQogICAgKiBAYWNjZXNzIHByaXZhdGUNCiAgICAqIEB2YXIgICAgYXJyYXkNCiAgICAqLw0KICAgIHZhciAkYXh)cyA9IGFyc(F5ICggI(NoaWxkIiwgI(R)c2N)$(Rh$nQiLCAicGFyZW50IiwgI(FuY2VzdG9yIiwNCiAgICAgICAgI(Zv$Gxvd2)uZy1zaWJsaW5nIiwgInByZWN)ZG)uZy1zaWJsaW5nIiwgI(Zv$Gxvd2)uZyIsICJwc(VjZWRp$(ciLA0KICAgICAgICAiYXR0c()idXR)IiwgI(5h$WVzcGFjZSIsICJzZWx(IiwgI(R)c2N)$(Rh$nQt$3Itc2VsZiIsDQogICAgICAgICJh$(N)c3Rvci1vci1zZWx(IiApOw0KDQogICAgLyoqDQogICAgKiBMaXN0IG9(IHN1cHBvcnR)ZCBYUGF0aCB(dW5jdG)v$nMuDQogICAgKg0KICAgICogVGhpcyBhcnJheSBj$250YW)ucyBhIGxpc3Qg$2YgYWxsIHZh$G)kIGZ1$(N0aW9ucyB0aGF0IGNh$iBiZSB)d(FsdWF0ZWQNCiAgICAqIG)uIGFuIFhQYXRoIGV4cHJ)c3Np$24uDQogICAgKg0KICAgICogQGFjY2VzcyBwc()2YXR)DQogICAgKiBAd(FyICAgIGFyc(F5DQogICAgKi8NCiAgICB2YXIgJGZ1$(N0aW9ucyA9IGFyc(F5ICggI(xhc3QiLCAicG9zaXRp$24iLCAiY291$nQiLCAiaWQiLCAi$(FtZSIsDQogICAgICAgICJzdHJp$(ciLCAiY29uY2F0IiwgInN0YXJ0cy13aXRoIiwgI(Nv$nRhaW5zIiwgInN1YnN0c()uZy1iZWZvc(UiLA0KICAgICAgICAic3Vic3RyaW5nLWF(dGVyIiwgInN1YnN0c()uZyIsICJzdHJp$(ct$GVuZ3RoIiwgInRyYW5z$GF0ZSIsDQogICAgICAgICJi$29sZWFuIiwgI(5vdCIsICJ0cnV)IiwgI(Zh$HN)IiwgI(xh$(ciLCAi$nVtY(VyIiwgInN1$SIsICJ($G9vciIsDQogICAgICAgICJjZW)saW5nIiwgInJvdW5kIiwgInR)eHQiICk7DQoNCiAgICAvKioNCiAgICAqIExpc3Qg$2Ygc3VwcG9ydGVkIFhQYXRoIG9wZXJhdG9ycy4NCiAgICAqDQogICAgKiBUaG)zIGFyc(F5IGNv$nRhaW5zIGEg$G)zdCBvZiBh$Gwgd(FsaWQg$3B)c(F0$3JzIHRoYXQgY2FuIGJ)IGV2YWx1YXR)ZA0KICAgICogaW4gYSBwc(VkaWNhdGUg$2YgYW4gWFBhdGggZXhwc(Vzc2)v$i4gVGh)IGxpc3QgaXMg$3JkZXJ)ZCBieSB0aGUNCiAgICAqIHByZWN)ZGVuY2Ug$2YgdGh)IG9wZXJhdG9ycyAo$G93ZXN0IHByZWN)ZGVuY2UgZ()yc3QpLg0KICAgICoNCiAgICAqIEBhY2N)c3MgcHJpd(F0ZQ0KICAgICogQHZhciAgICBhcnJheQ0KICAgICovDQogICAgd(FyICRvcGVyYXRvcnMgPSBhcnJheSggIiBvciAiLCAiIGFuZCAiLCAiPSIsICIhPSIsICI8PSIsICI8IiwgIj49IiwgIj4iLA0KICAgICAgICAiKyIsICItIiwgIioiLCAiIGRpdiAiLCAiIG1vZCAiICk7DQoNCiAgICAvKioNCiAgICAqIENv$nN0cnVjdG9yIG9(IHRoZSBj$GFzcy4NCiAgICAqDQogICAgKiBUaG)zIGNv$nN0cnVjdG9yIG)uaXRpYWxpe(VzIHRoZSBj$GFzcyBh$(QsIHdoZW4gYSB(aWx)$(FtZSBpcyBnaXZ)$iwNCiAgICAqIHRyaWVzIHRvIHJ)YWQgYW5kIHBhcnN)IHRoZSBnaXZ)$iB(aWx)Lg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHVi$G)jDQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkZ()sZSBQYXRoIGFuZCBuYW1)IG9(IHRoZSB(aWx)IHRvIHJ)YWQgYW5kIHBhcnN)ZC4NCiAgICAqIEBzZWUgICAgICAg$G9hZF9(aWx)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIFhNTCAoICR(aWx)ID0gIiIgKQ0KICAgIHsNCiAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciBhIGZp$GUgd2FzIGdpd(VuLg0KICAgICAgICBpZiAoICF)$XB0eSgkZ()sZSkgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBM$2FkIHRoZSBYTUwgZ()sZS4NCiAgICAgICAgICAgICR0aG)zLT5s$2FkX2Zp$GUoJGZp$GUpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgKiBSZWFkcyBhIGZp$GUgYW5kIHBhcnN)cyB0aGUgWE1MIGRhdGEuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2Qgc(VhZHMgdGh)IGNv$nR)$nQg$2YgYSBYTUwgZ()sZSwgdHJpZXMgdG8gcGFyc2UgaXRzDQogICAgKiBj$250ZW50IGFuZCB1cG9uIHN1Y2N)c3Mgc3Rvc(VzIHRoZSBp$(Zvc(1hdG)v$iByZXRyaWV2ZWQgZnJv$Q0KICAgICogdGh)IGZp$GUgaW50$yBh$iBhcnJheS4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHB1Y(xpYw0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGZp$GUgUGF0aCBh$(Qg$(FtZSBvZiB0aGUgZ()sZSB0$yBiZSByZWFkIGFuZCBwYXJzZWQuDQogICAgKiBAc2V)ICAgICAgIGhh$(RsZV9zdGFydF9)$GVtZW50KCksIGhh$(RsZV9)$(RfZWx)$WVudCgpLA0KICAgICogICAgICAgICAgICBoYW5k$GVfY2hhc(FjdGVyX2RhdGEoKQ0KICAgICovDQogICAgZnVuY3Rp$24g$G9hZF9(aWx)ICggJGZp$GUgKQ0KICAgIHsNCiAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUgZ()sZSB)eG)zdHMgYW5kIG)zIHJ)YWRhY(x)Lg0KICAgICAgICBpZiAoIGZp$GVfZXhpc3RzKCR(aWx)KSA(JiBpc19yZWFkYWJsZSgkZ()sZSkgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBSZWFkIHRoZSBj$250ZW50IG9(IHRoZSB(aWx)Lg0KICAgICAgICAgICAgJGNv$nR)$nQgPSBp$XBs$2R)KCIiLCB(aWx)KCR(aWx)KSk7DQoNCiAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgY29udGVudCBoYXMgY(V)$iByZWFkLg0KICAgICAgICAgICAgaWYgKCAhZW1wdHkoJGNv$nR)$nQpICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBDc(VhdGUgYW4gWE1MIHBhcnN)ci4NCiAgICAgICAgICAgICAgICAkcGFyc2VyID0geG1sX3BhcnN)c)9jc(VhdGUoKTsNCg0KICAgICAgICAgICAgICAgIC8vIFN)dCB0aGUg$3B0aW9ucyB($3IgcGFyc2)uZyB0aGUgWE1MIGRhdGEuDQogICAgICAgICAgICAgICAgeG1sX3BhcnN)c)9zZXRf$3B0aW9uKCRwYXJzZXIsIFhNTF9PUFRJT05fU0tJUF9XSE)URSwgMSk7DQogICAgICAgICAgICAgICAgeG1sX3BhcnN)c)9zZXRf$3B0aW9uKCRwYXJzZXIsIFhNTF9PUFRJT05fQ0FTRV9GT0xESU5HLCAwKTsNCg0KICAgICAgICAgICAgICAgIC8vIFN)dCB0aGUg$2JqZWN0IGZvciB0aGUgcGFyc2VyLg0KICAgICAgICAgICAgICAgIHht$F9zZXRf$2JqZWN0KCRwYXJzZXIsICYkdGhpcyk7DQoNCiAgICAgICAgICAgICAgICAvLyBTZXQgdGh)IGVsZW1)$nQgaGFuZGx)cnMgZ(9yIHRoZSBwYXJzZXIuDQogICAgICAgICAgICAgICAgeG1sX3N)dF9)$GVtZW50X2hh$(RsZXIoJHBhcnN)ciwgI(hh$(RsZV9zdGFydF9)$GVtZW50IiwNCiAgICAgICAgICAgICAgICAgICAgI(hh$(RsZV9)$(RfZWx)$WVudCIpOw0KICAgICAgICAgICAgICAgIHht$F9zZXRfY2hhc(FjdGVyX2RhdGFfaGFuZGx)cigkcGFyc2VyLA0KICAgICAgICAgICAgICAgICAgICAiaGFuZGx)X2NoYXJhY3R)c)9kYXRhIik7DQoNCiAgICAgICAgICAgICAgICAvLyBQYXJzZSB0aGUgWE1MIGZp$GUuDQogICAgICAgICAgICAgICAgaWYgKCAheG1sX3BhcnN)KCRwYXJzZXIsICRj$250ZW50LCB0cnV)KSApDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAvLyBEaXNw$GF5IGFuIGVyc(9yIG1)c3NhZ2UuDQogICAgICAgICAgICAgICAgICAgICR0aG)zLT5kaXNw$GF5X2Vyc(9yKCJYTUwgZXJy$3IgaW4gZ()sZSA)cywg$G)uZSA)ZDogJXMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgJGZp$GUsIHht$F9nZXRfY3Vyc(VudF9saW5)X251$WJ)cigkcGFyc2VyKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHht$F9)cnJvc)9zdHJp$(coeG1sX2d)dF9)cnJvc)9j$2R)KCRwYXJzZXIpKSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gRnJ)ZSB0aGUgcGFyc2VyLg0KICAgICAgICAgICAgICAgIHht$F9wYXJzZXJfZnJ)ZSgkcGFyc2VyKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICB)$HN)DQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIERpc3BsYXkgYW4gZXJy$3Ig$WVzc2FnZS4NCiAgICAgICAgICAgICR0aG)zLT5kaXNw$GF5X2Vyc(9yKCJGaWx)ICVzIGNvdWxkIG5vdCBiZSB($3VuZCBvciByZWFkLiIsICR(aWx)KTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICogR2VuZXJhdGVzIGEgWE1MIGZp$GUgd2)0aCB0aGUgY29udGVudCBvZiB0aGUgY3Vyc(VudCBk$2N1$WVudC4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBjc(VhdGVzIGEgc3RyaW5nIGNv$nRhaW5p$(cgdGh)IFhNTCBkYXRhIGJ)aW5nIHJ)YWQNCiAgICAqIGFuZCBt$2RpZ())ZCBieSB0aG)zIGNsYXNzIGJ)Z(9yZS4gVGhpcyBzdHJp$(cgY2FuIGJ)IHVzZWQgdG8gc2F2ZQ0KICAgICogYSBt$2RpZ())ZCBk$2N1$WVudCBiYWNrIHRvIGEgZ()sZSBvciBk$2)uZyBvdGh)ciBuaWN)IHRoaW5ncyB3aXRoDQogICAgKiBpdC4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHB1Y(xpYw0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBhcnJheSAkaG)naGxpZ2h0IEFyc(F5IGNv$nRhaW5p$(cgYSBsaXN0IG9(IGZ1$GwgZG9jdW1)$nQNCiAgICAqICAgICAgICAgICAgcGF0aHMg$2Yg$(9kZXMgdG8gY(UgaG)naGxpZ2h0ZWQgYnkgPGZv$nQ+Li4uPC9($250PiB0YWdzDQogICAgKiAgICAgICAgICAgIG)uIHRoZSBnZW5)c(F0ZWQgWE1MIHN0c()uZy4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRy$290IFdoaWx)IGRvaW5nIGEgc(VjdXJzaW9uIHdpdGggdGhpcyBtZXRo$2QsIHRoaXMNCiAgICAqICAgICAgICAgICAgcGFyYW1)dGVyIG)zIHVzZWQgZ(9yIG)udGVy$(FsIHB1cnBvc2UuDQogICAgKiBAcGFyYW0gICAgIG)udCAk$GV2ZWwgV2hp$GUgZG9p$(cgYSByZWN1cnNp$24gd2)0aCB0aG)zIG1)dGhvZCwgdGhpcw0KICAgICogICAgICAgICAgICBwYXJh$WV0ZXIgaXMgdXN)ZCB($3IgaW50ZXJuYWwgcHVycG9zZS4NCiAgICAqIEByZXR1c(4gICAgc3RyaW5nIFRoZSByZXR1c(5)ZCBzdHJp$(cgY29udGFp$nMgd2Vs$C1($3JtZWQgWE1MIGRhdGENCiAgICAqICAgICAgICAgICAgc(Vwc(VzZW50aW5nIHRoZSBj$250ZW50IG9(IHRoaXMgZG9jdW1)$nQuDQogICAgKiBAc2V)ICAgICAgIGxvYWRfZ()sZSgpLCB)d(FsdWF0ZSgpLCBnZXRfY29udGVudCgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBnZXRfZ()sZSAoICRoaWdo$G)naHQgPSBhcnJheSgpLCAkc(9vdCA9ICIiLCAk$GV2ZWwgPSAwICkNCiAgICB7DQogICAgICAgIC8vIENyZWF0ZSBhIHN0c()uZyB0$yBzYXZ)IHRoZSBnZW5)c(F0ZWQgWE1MIGRhdGEuDQogICAgICAgICR4$WwgPSAiIjsNCg0KICAgICAgICAvLyBDc(VhdGUgdHdvIHN0c()uZ3MgY29udGFp$()uZyB0aGUgdGFncyB($3IgaG)naGxpZ2h0aW5nIGEg$(9kZS4NCiAgICAgICAgJGhpZ2hsaWdodF9zdGFydCA9ICI8Z(9udCBj$2xvcj1cIiNGRjAwMDBcIj48Yj4iOw0KICAgICAgICAkaG)naGxpZ2h0X2VuZCAgID0gIjwvYj48L2Zv$nQ+IjsNCg0KICAgICAgICAvLyBHZW5)c(F0ZSBhIHN0c()uZyB0$yBiZSBkaXNw$GF5ZWQgY(V($3J)IHRoZSB0YWdzLg0KICAgICAgICAkY(V($3J)ID0gIiI7DQoNCiAgICAgICAgLy8gQ2FsY3VsYXR)IHRoZSBh$W91$nQg$2Ygd2hpdGVzcGFjZXMgdG8gZG)zcGxheS4NCiAgICAgICAgZ(9yICggJGkgPSAwOyAkaSA8ICggJGx)d(VsICogMiApOyAkaSsrICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gQWRkIGEgd2hpdGVzcGFjZXMgdG8gdGh)IHN0c()uZy4NCiAgICAgICAgICAgICRiZWZvc(UgLj0gIiAiOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciBhIHJv$3Qg$(9kZSBpcyBnaXZ)$i4NCiAgICAgICAgaWYgKCB)$XB0eSgkc(9vdCkgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBTZXQgaXQgdG8gdGh)IGRvY3VtZW50IHJv$3QuDQogICAgICAgICAgICAkc(9vdCA9ICR0aG)zLT5y$290Ow0KICAgICAgICB9DQoNCiAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUg$(9kZSBpcyBzZWx)Y3R)ZC4NCiAgICAgICAgJHN)$GVjdGVkID0gaW5fYXJyYXkoJHJv$3QsICRoaWdo$G)naHQpOw0KDQogICAgICAgIC8vIE5vdyBhZGQgdGh)IHdoaXR)c3BhY2VzIHRvIHRoZSBYTUwgZGF0YS4NCiAgICAgICAgJHht$CAuPSAkY(V($3J)Ow0KDQogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGh)IG5vZGUgaXMgc2VsZWN0ZWQuDQogICAgICAgIG)(ICggJHN)$GVjdGVkICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gQWRkIHRoZSBoaWdo$G)naHQgY29kZSB0$yB0aGUgWE1MIGRhdGEuDQogICAgICAgICAgICAkeG1sIC49ICRoaWdo$G)naHRfc3RhcnQ7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBO$3cg$3B)$iB0aGUgdGFnLg0KICAgICAgICAkeG1sIC49ICI($HQ7Ii4kdGhpcy0+$(9kZXN$JHJv$3RdWyJuYW1)I)07DQoNCiAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGVyZSBhc(UgYXR0c()idXR)cyB($3IgdGhpcyBu$2R)Lg0KICAgICAgICBpZiAoIGNvdW50KCR0aG)zLT5u$2R)c1skc(9vdF1$I(F0dHJpYnV0ZXMiXSkgPiAwICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gUnVuIHRoc(91Z2ggYWxsIGF0dHJpYnV0ZXMuDQogICAgICAgICAgICB($3J)YWNoICggJHRoaXMtP(5vZGVzWyRy$290XVsiYXR0c()idXR)cyJdIGFzICRrZXkgPT4gJHZh$HV)ICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoaXMgYXR0c()idXR)IG)zIGhpZ2hsaWdodGVkLg0KICAgICAgICAgICAgICAgIG)(ICggaW5fYXJyYXkoJHJv$3QuIi9hdHRyaWJ1dGU6OiIuJGt)eSwgJGhpZ2hsaWdodCkgKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBoaWdo$G)naHQgY29kZSB0$yB0aGUgWE1MIGRhdGEuDQogICAgICAgICAgICAgICAgICAgICR4$WwgLj0gJGhpZ2hsaWdodF9zdGFydDsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyBBZGQgdGh)IGF0dHJpYnV0ZSB0$yB0aGUgWE1MIGRhdGEuDQogICAgICAgICAgICAgICAgJHht$CAuPSAiICIuJGt)eS4iPVwiIi50c()tKHN0c()wc2xhc2h)cygkd(FsdWUpKS4iXCIiOw0KDQogICAgICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aG)zIGF0dHJpYnV0ZSBpcyBoaWdo$G)naHR)ZC4NCiAgICAgICAgICAgICAgICBpZiAoIG)uX2Fyc(F5KCRy$290LiIvYXR0c()idXR)OjoiLiRrZXksICRoaWdo$G)naHQpICkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgaG)naGxpZ2h0IGNvZGUgdG8gdGh)IFhNTCBkYXRhLg0KICAgICAgICAgICAgICAgICAgICAkeG1sIC49ICRoaWdo$G)naHRfZW5kOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGh)IG5vZGUgY29udGFp$nMgY2hhc(FjdGVyIGRhdGEg$3IgaGFzIGNoaWxkc(VuLg0KICAgICAgICBpZiAoIGVtcHR5KCR0aG)zLT5u$2R)c1skc(9vdF1$InR)eHQiXSkgJiYNCiAgICAgICAgICAgICFpc3N)dCgkdGhpcy0+$(9kZXN$JHJv$3RdWyJjaG)sZHJ)$iJdKSApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIEFkZCB0aGUgZW5kIHRvIHRoZSB0YWcuDQogICAgICAgICAgICAkeG1sIC49ICIvIjsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIENs$3N)IHRoZSB0YWcuDQogICAgICAgICR4$WwgLj0gIiZndDtc$iI7DQoNCiAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUg$(9kZSBpcyBzZWx)Y3R)ZC4NCiAgICAgICAgaWYgKCAkc2VsZWN0ZWQgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBBZGQgdGh)IGhpZ2hsaWdodCBj$2R)IHRvIHRoZSBYTUwgZGF0YS4NCiAgICAgICAgICAgICR4$WwgLj0gJGhpZ2hsaWdodF9)$(Q7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSBu$2R)IGNv$nRhaW5zIGNoYXJhY3R)ciBkYXRhLg0KICAgICAgICBpZiAoICF)$XB0eSgkdGhpcy0+$(9kZXN$JHJv$3RdWyJ0ZXh0I)0pICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gQWRkIHRoZSBjaGFyYWN0ZXIgZGF0YSB0$yB0aGUgWE1MIGRhdGEuDQogICAgICAgICAgICAkeG1sIC49ICRiZWZvc(UuIiAgIi4kdGhpcy0+$(9kZXN$JHJv$3RdWyJ0ZXh0I)0uI)xuIjsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGh)IG5vZGUgaGFzIGNoaWxkc(VuLg0KICAgICAgICBpZiAoIG)zc2V0KCR0aG)zLT5u$2R)c1skc(9vdF1$I(NoaWxkc(VuI)0pICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gUnVuIHRoc(91Z2ggYWxsIGNoaWxkc(VuIHdpdGggZG)(Z(VyZW50IG5h$WVzLg0KICAgICAgICAgICAgZ(9yZWFjaCAoICR0aG)zLT5u$2R)c1skc(9vdF1$I(NoaWxkc(VuI)0gYXMgJGNoaWxkID0+ICRw$3MgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIFJ1$iB0aHJvdWdoIGFs$CBjaG)sZHJ)$iB3aXRoIHRoZSBzYW1)IG5h$WUuDQogICAgICAgICAgICAgICAgZ(9yICggJGkgPSAxOyAkaSA8PSAkcG9zOyAkaSsrICkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIC8vIEd)$(VyYXR)IHRoZSB(dWxsIHBhdGgg$2YgdGh)IGNoaWxkLg0KICAgICAgICAgICAgICAgICAgICAkZnVs$GNoaWxkID0gJHJv$3QuIi8iLiRjaG)sZC4iWyIuJGkuI)0iOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgY2hp$GQncyBYTUwgZGF0YSB0$yB0aGUgZXhpc3Rp$(cgZGF0YS4NCiAgICAgICAgICAgICAgICAgICAgJHht$CAuPSAkdGhpcy0+Z2V0X2Zp$GUoJGhpZ2hsaWdodCwgJGZ1$GxjaG)sZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICRsZXZ)$CArIDEpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGh)c(UgYXJ)IGF0dHJpYnV0ZXMgZ(9yIHRoaXMg$(9kZS4NCiAgICAgICAgaWYgKCAhZW1wdHkoJHRoaXMtP(5vZGVzWyRy$290XVsidGV4dCJdKSB8fA0KICAgICAgICAgICAgaXNzZXQoJHRoaXMtP(5vZGVzWyRy$290XVsiY2hp$GRyZW4iXSkgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBBZGQgdGh)IHdoaXR)c3BhY2VzIHRvIHRoZSBYTUwgZGF0YS4NCiAgICAgICAgICAgICR4$WwgLj0gJGJ)Z(9yZTsNCg0KICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUg$(9kZSBpcyBzZWx)Y3R)ZC4NCiAgICAgICAgICAgIG)(ICggJHN)$GVjdGVkICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBBZGQgdGh)IGhpZ2hsaWdodCBj$2R)IHRvIHRoZSBYTUwgZGF0YS4NCiAgICAgICAgICAgICAgICAkeG1sIC49ICRoaWdo$G)naHRfc3RhcnQ7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIEFkZCB0aGUgY2xvc2)uZyB0YWcuDQogICAgICAgICAgICAkeG1sIC49ICI($HQ7LyIuJHRoaXMtP(5vZGVzWyRy$290XVsi$(FtZSJdLiI(Z3Q7IjsNCg0KICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUg$(9kZSBpcyBzZWx)Y3R)ZC4NCiAgICAgICAgICAgIG)(ICggJHN)$GVjdGVkICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBBZGQgdGh)IGhpZ2hsaWdodCBj$2R)IHRvIHRoZSBYTUwgZGF0YS4NCiAgICAgICAgICAgICAgICAkeG1sIC49ICRoaWdo$G)naHRfZW5kOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBBZGQgYSBsaW5)YnJ)YWsuDQogICAgICAgICAgICAkeG1sIC49ICJc$iI7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBSZXR1c(4gdGh)IFhNTCBkYXRhLg0KICAgICAgICByZXR1c(4gJHht$DsNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIEFkZHMgYSBuZXcg$(9kZSB0$yB0aGUgWE1MIGRvY3VtZW50Lg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIGFkZHMgYSBuZXcg$(9kZSB0$yB0aGUgdHJ)ZSBvZiBu$2R)cyBvZiB0aGUgWE1MIGRvY3VtZW50DQogICAgKiBiZW)uZyBoYW5k$GVkIGJ5IHRoaXMgY2xhc3MuIFRoZSBuZXcg$(9kZSBpcyBjc(VhdGVkIGFjY29yZG)uZyB0$yB0aGUNCiAgICAqIHBhc(FtZXR)cnMgcGFzc2VkIHRvIHRoaXMg$WV0aG9kLg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHVi$G)jDQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkY29udGVudCBGdWxsIHBhdGgg$2YgdGh)IHBhc(VudCwgdG8gd2hpY2ggdGh)IG5)dw0KICAgICogICAgICAgICAgICBu$2R)IHNo$3VsZCBiZSBhZGR)ZCBhcyBhIGNoaWxkLg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJG5h$WUgT(FtZSBvZiB0aGUg$(V3IG5vZGUuDQogICAgKiBAc(V0dXJuICAgIHN0c()uZyBUaGUgc3RyaW5nIHJ)dHVy$(VkIGJ5IHRoaXMg$WV0aG9kIHdp$GwgY29udGFp$iB0aGUNCiAgICAqICAgICAgICAgICAgZnVs$CBk$2N1$WVudCBwYXRoIG9(IHRoZSBjc(VhdGVkIG5vZGUuDQogICAgKiBAc2V)ICAgICAgIHJ)$W92ZV9u$2R)KCksIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGFkZF9u$2R)ICggJGNv$nR)eHQsICRuYW1)ICkNCiAgICB7DQogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgYSBuYW1)IGZvciB0aG)zIGVsZW1)$nQgaXMgYWxyZWFkeSBzZXQuDQogICAgICAgIG)(ICggZW1wdHkoJHRoaXMtPnJv$3QpICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gVXN)IHRoaXMgdGFnIGFzIHRoZSBy$290IGVsZW1)$nQuDQogICAgICAgICAgICAkdGhpcy0+c(9vdCA9ICIvIi4k$(FtZS4iWzFdIjsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIENh$GN1$GF0ZSB0aGUgZnVs$CBwYXRoIGZvciB0aG)zIGVsZW1)$nQuDQogICAgICAgICRwYXRoID0gJGNv$nR)eHQuIi8iLiRuYW1)Ow0KDQogICAgICAgIC8vIFN)dCB0aGUgc(VsYXRpd(UgY29udGV4dCBh$(QgdGh)IHBvc2)0aW9uLg0KICAgICAgICAkcG9zaXRp$24gPSArKyR0aG)zLT5pZHN$JHBhdGhdOw0KICAgICAgICAkc(VsYXRpd(UgPSAk$(FtZS4iWyIuJHBvc2)0aW9uLiJdIjsNCg0KICAgICAgICAvLyBDYWxjdWxhdGUgdGh)IGZ1$GwgcGF0aC4NCiAgICAgICAgJGZ1$GxwYXRoID0gJGNv$nR)eHQuIi8iLiRyZWxhdG)2ZTsNCg0KICAgICAgICAvLyBDYWxjdWxhdGUgdGh)IGNv$nR)eHQgcG9zaXRp$24sIHdoaWNoIG)zIHRoZSBw$3NpdG)v$iBvZiB0aG)zDQogICAgICAgIC8vIGVsZW1)$nQgd2)0aG)uIGVsZW1)$nRzIG9(IHRoZSBzYW1)IG5h$WUgaW4gdGh)IHBhc(VudCBu$2R)Lg0KICAgICAgICAkdGhpcy0+$(9kZXN$JGZ1$GxwYXRoXVsiY29udGV4dC1w$3NpdG)v$iJdID0gJHBvc2)0aW9uOw0KDQogICAgICAgIC8vIENh$GN1$GF0ZSB0aGUgcG9zaXRp$24gZ(9yIHRoZSB($2xs$3dp$(cgYW5kIHByZWN)ZG)uZyBheG)zDQogICAgICAgIC8vIGR)dGVjdG)v$i4NCiAgICAgICAgJHRoaXMtP(5vZGVzWyR(dWxscGF0aF1$I(RvY3VtZW50LXBvc2)0aW9uI)0gPQ0KICAgICAgICAgICAgJHRoaXMtP(5vZGVzWyRj$250ZXh0XVsiZG9jdW1)$nQtcG9zaXRp$24iXSArIDE7DQoNCiAgICAgICAgLy8gU2F2ZSB0aGUgaW5($3JtYXRp$24gYWJvdXQgdGh)IG5vZGUuDQogICAgICAgICR0aG)zLT5u$2R)c1skZnVs$HBhdGhdWyJuYW1)I)0gICA9ICRuYW1)Ow0KICAgICAgICAkdGhpcy0+$(9kZXN$JGZ1$GxwYXRoXVsidGV4dCJdICAgPSAiIjsNCiAgICAgICAgJHRoaXMtP(5vZGVzWyR(dWxscGF0aF1$InBhc(VudCJdID0gJGNv$nR)eHQ7DQoNCiAgICAgICAgLy8gQWRkIHRoaXMgZWx)$WVudCB0$yB0aGUgZWx)$WVudCBj$3VudCBhcnJheS4NCiAgICAgICAgaWYgKCAhJHRoaXMtP(5vZGVzWyRj$250ZXh0XVsiY2hp$GRyZW4iXVsk$(FtZV0gKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBTZXQgdGh)IGR)Z(F1$HQg$(FtZS4NCiAgICAgICAgICAgICR0aG)zLT5u$2R)c1skY29udGV4dF1$I(NoaWxkc(VuI)1$JG5h$WVdID0gMTsNCiAgICAgICAgfQ0KICAgICAgICB)$HN)DQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIENh$GN1$GF0ZSB0aGUg$(FtZS4NCiAgICAgICAgICAgICR0aG)zLT5u$2R)c1skY29udGV4dF1$I(NoaWxkc(VuI)1$JG5h$WVdID0NCiAgICAgICAgICAgICAgICAkdGhpcy0+$(9kZXN$JGNv$nR)eHRdWyJjaG)sZHJ)$iJdWyRuYW1)XSArIDE7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBSZXR1c(4gdGh)IHBhdGgg$2YgdGh)IG5)dyBu$2R)Lg0KICAgICAgICByZXR1c(4gJGZ1$GxwYXRoOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICogU(Vt$3Z)cyBhIG5vZGUgZnJv$SB0aGUgWE1MIGRvY3VtZW50Lg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIHJ)$W92ZXMgYSBu$2R)IGZy$20gdGh)IHRyZWUg$2Yg$(9kZXMg$2YgdGh)IFhNTCBk$2N1$WVudC4NCiAgICAqIE)(IHRoZSBu$2R)IG)zIGEgZG9jdW1)$nQg$(9kZSwgYWxsIGNoaWxkc(VuIG9(IHRoZSBu$2R)IGFuZCBpdHMNCiAgICAqIGNoYXJhY3R)ciBkYXRhIHdp$GwgY(Ugc(Vt$3Z)ZC4gSWYgdGh)IG5vZGUgaXMgYW4gYXR0c()idXR)IG5vZGUsDQogICAgKiBv$(x5IHRoaXMgYXR0c()idXR)IHdp$GwgY(Ugc(Vt$3Z)ZCwgdGh)IG5vZGUgdG8gd2hpY2ggdGh)IGF0dHJpYnV0ZQ0KICAgICogY(Vs$25ncyBhcyB3ZWxsIGFzIG)0cyBjaG)sZHJ)$iB3aWxsIHJ)$WFp$iB1$(1vZG)(aWVkLg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHVi$G)jDQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAk$(9kZSBGdWxsIHBhdGgg$2YgdGh)IG5vZGUgdG8gY(Ugc(Vt$3Z)ZC4NCiAgICAqIEBzZWUgICAgICAgYWRkX25vZGUoKSwgZXZh$HVhdGUoKQ0KICAgICovDQogICAgZnVuY3Rp$24gc(Vt$3Z)X25vZGUgKCAk$(9kZSApDQogICAgew0KICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSBu$2R)IG)zIGFuIGF0dHJpYnV0ZSBu$2R)Lg0KICAgICAgICBpZiAoIGVyZWcoIi9hdHRyaWJ1dGU6OiIsICRu$2R)KSApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIEd)dCB0aGUgcGF0aCB0$yB0aGUgYXR0c()idXR)IG5vZGUncyBwYXJ)$nQuDQogICAgICAgICAgICAkcGFyZW50ID0gJHRoaXMtPnByZXN0cigk$(9kZSwgIi9hdHRyaWJ1dGU6OiIpOw0KDQogICAgICAgICAgICAvLyBHZXQgdGh)IG5h$WUg$2YgdGh)IGF0dHJpYnV0ZS4NCiAgICAgICAgICAgICRhdHRyaWJ1dGUgPSAkdGhpcy0+YWZ0ZXJzdHIoJG5vZGUsICIvYXR0c()idXR)OjoiKTsNCg0KICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUgYXR0c()idXR)IGV4aXN0cy4NCiAgICAgICAgICAgIG)(ICggaXNzZXQoJHRoaXMtP(5vZGVzWyRwYXJ)$nRdWyJhdHRyaWJ1dGVzI)1$JGF0dHJpYnV0ZV0pICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBDc(VhdGUgYSBuZXcgYXJyYXkuDQogICAgICAgICAgICAgICAgJG5)dyA9IGFyc(F5KCk7DQoNCiAgICAgICAgICAgICAgICAvLyBSdW4gdGhy$3VnaCB0aGUgZXhpc3Rp$(cgYXR0c()idXR)cy4NCiAgICAgICAgICAgICAgICB($3J)YWNoICggJHRoaXMtP(5vZGVzWyRwYXJ)$nRdWyJhdHRyaWJ1dGVzI)0NCiAgICAgICAgICAgICAgICAgICAgYXMgJGt)eSA9PiAkd(FsdWUgKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciBpdCdzIHRoZSBhdHRyaWJ1dGUgdG8gc(Vt$3Z)Lg0KICAgICAgICAgICAgICAgICAgICBpZiAoICRrZXkgIT0gJGF0dHJpYnV0ZSApDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCBpdCB0$yB0aGUg$(V3IGFyc(F5IGFnYW)uLg0KICAgICAgICAgICAgICAgICAgICAgICAgJG5)d1ska2V5XSA9ICR2YWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIFNhd(UgdGh)IG5)dyBhdHRyaWJ1dGVzLg0KICAgICAgICAgICAgICAgICR0aG)zLT5u$2R)c1skcGFyZW50XVsiYXR0c()idXR)cyJdID0gJG5)dzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICB)$HN)DQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIENyZWF0ZSBh$iBhc3NvY2)hdG)2ZSBhcnJheSwgd2hpY2ggY29udGFp$nMgaW5($3JtYXRp$24gYWJvdXQNCiAgICAgICAgICAgIC8vIGFs$CBu$2R)cyB0aGF0IHJ)cXVpc(VkIHRvIGJ)IHJ)$(FtZWQuDQogICAgICAgICAgICAkc(VuYW1)ID0gYXJyYXkoKTsNCg0KICAgICAgICAgICAgLy8gR2V0IHRoZSBuYW1)LCB0aGUgcGFyZW50IGFuZCB0aGUgc2)i$G)uZ3Mg$2YgY3Vyc(VudCBu$2R)Lg0KICAgICAgICAgICAgJG5h$WUgICAgID0gJHRoaXMtP(5vZGVzWyRu$2R)XVsi$(FtZSJdOw0KICAgICAgICAgICAgJHBhc(VudCAgID0gJHRoaXMtP(5vZGVzWyRu$2R)XVsicGFyZW50I)07DQogICAgICAgICAgICAkc2)i$G)uZ3MgPSAkdGhpcy0+$(9kZXN$JHBhc(VudF1$I(NoaWxkc(VuI)1$JG5h$WVdOw0KDQogICAgICAgICAgICAvLyBEZWNyZWFzZSB0aGUg$nVtY(VyIG9(IGNoaWxkc(VuLg0KICAgICAgICAgICAgJHRoaXMtP(5vZGVzWyRwYXJ)$nRdWyJjaG)sZHJ)$iJdWyRuYW1)XS0tOw0KDQogICAgICAgICAgICAvLyBDc(VhdGUgYSBj$3VudGVyIGZvciByZW51$WJ)c()uZyB0aGUgc2)i$G)uZ3MuDQogICAgICAgICAgICAkY291$nR)ciA9IDE7DQoNCiAgICAgICAgICAgIC8vIE5vdyBydW4gdGhy$3VnaCB0aGUgc2)i$G)uZ3MuDQogICAgICAgICAgICB($3IgKCAkaSA9IDE7ICRpIDw9ICRzaWJsaW5nczsgJGkrKyApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gQ3J)YXR)IHRoZSBuYW1)IG9(IHRoZSBzaWJsaW5nLg0KICAgICAgICAgICAgICAgICRzaWJsaW5nID0gJHBhc(VudC4iLyIuJG5h$WUuI)siLiRpLiJdIjsNCg0KICAgICAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgaXQncyB0aGUg$(FtZSBvZiB0aGUgY3Vyc(VudCBu$2R)Lg0KICAgICAgICAgICAgICAgIG)(ICggJHNpY(xp$(cgIT0gJG5vZGUgKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gQ3J)YXR)IHRoZSBuZXcg$(FtZSB($3IgdGh)IHNpY(xp$(cuDQogICAgICAgICAgICAgICAgICAgICRuZXcgPSAkcGFyZW50LiIvIi4k$(FtZS4iWyIuJGNvdW50ZXIuI)0iOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIE)uY3J)YXN)IHRoZSBj$3VudGVyLg0KICAgICAgICAgICAgICAgICAgICAkY291$nR)cisrOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUg$2xkIGFuZCB0aGUg$(V3IG5h$WUgdG8gdGh)IGxpc3Qg$2Yg$(9kZXMNCiAgICAgICAgICAgICAgICAgICAgLy8gdG8gY(Ugc(VuYW1)ZC4NCiAgICAgICAgICAgICAgICAgICAgJHJ)$(FtZVskc2)i$G)uZ10gPSAk$(V3Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gQ3J)YXR)IGFuIGFyc(F5IGZvciBzYXZp$(cgdGh)IG5)dyBu$2R)LWxpc3QuDQogICAgICAgICAgICAk$(9kZXMgPSBhcnJheSgpOw0KDQogICAgICAgICAgICAvLyBO$3cgcnVuIHRoc(91Z2ggdGhy$3VnaCB0aGUgZXhpc3Rp$(cg$(9kZXMuDQogICAgICAgICAgICB($3J)YWNoICggJHRoaXMtP(5vZGVzIGFzICRuYW1)ID0+ICR2YWx1ZXMgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIENoZWNrIHRoZSBw$3NpdG)v$iBvZiB0aGUgcGF0aCBvZiB0aGUg$(9kZSB0$yBiZSBkZWx)dGVkDQogICAgICAgICAgICAgICAgLy8gaW4gdGh)IHBhdGgg$2YgdGh)IGN1cnJ)$nQg$(9kZS4NCiAgICAgICAgICAgICAgICAkcG9zaXRp$24gPSBzdHJw$3MoJG5h$WUsICRu$2R)KTsNCg0KICAgICAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgaXQncyBu$3QgdGh)IG5vZGUgdG8gY(UgZGVsZXR)ZC4NCiAgICAgICAgICAgICAgICBpZiAoICRw$3NpdG)v$iA9PT0gZ(Fsc2UgKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gUnVuIHRoc(91Z2ggdGh)IGFyc(F5IG9(IG5vZGVzIHRvIGJ)IHJ)$(FtZWQuDQogICAgICAgICAgICAgICAgICAgIGZvc(VhY2ggKCAkc(VuYW1)IGFzICRv$GQgPT4gJG5)dyApDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGhpcyBu$2R)IGFuZCBpdCdzIHBhc(VudCByZXF1aXJ)cyB0$w0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gY(Ugc(VuYW1)ZC4NCiAgICAgICAgICAgICAgICAgICAgICAgICRuYW1)ICAgICAgICAgICAgID0gc3RyX3J)cGxhY2UoJG9sZCwgJG5)dywgJG5h$WUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgJHZh$HV)c1sicGFyZW50I)0gPSBzdHJfc(Vw$GFjZSgk$2xkLCAk$(V3LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICR2YWx1ZXN$InBhc(VudCJdKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUg$(9kZSB0$yB0aGUg$G)zdCBvZiBu$2R)cy4NCiAgICAgICAgICAgICAgICAgICAgJG5vZGVzWyRuYW1)XSA9ICR2YWx1ZXM7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBTYXZ)IHRoZSBuZXcgYXJyYXkg$2Yg$(9kZXMuDQogICAgICAgICAgICAkdGhpcy0+$(9kZXMgPSAk$(9kZXM7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvKioNCiAgICAqIEFkZCBj$250ZW50IHRvIGEg$(9kZS4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBhZGRzIGNv$nR)$nQgdG8gYSBu$2R)LiBJZiBpdCdzIGFuIGF0dHJpYnV0ZSBu$2R)LCB0aGVuDQogICAgKiB0aGUgd(FsdWUg$2YgdGh)IGF0dHJpYnV0ZSB3aWxsIGJ)IHN)dCwg$3RoZXJ3aXN)IHRoZSBjaGFyYWN0ZXIgZGF0YSBvZg0KICAgICogdGh)IG5vZGUgd2)s$CBiZSBzZXQuIFRoZSBj$250ZW50IG)zIGFwcGVuZGVkIHRvIGV4aXN0aW5nIGNv$nR)$nQsDQogICAgKiBz$yBu$3RoaW5nIHdp$GwgY(Ug$3Z)cndyaXR0ZW4uDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwdWJsaWMNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRwYXRoIEZ1$GwgZG9jdW1)$nQgcGF0aCBvZiB0aGUg$(9kZS4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICR2YWx1ZSBTdHJp$(cgY29udGFp$()uZyB0aGUgY29udGVudCB0$yBiZSBhZGR)ZC4NCiAgICAqIEBzZWUgICAgICAgZ2V0X2Nv$nR)$nQoKSwgZXZh$HVhdGUoKQ0KICAgICovDQogICAgZnVuY3Rp$24gYWRkX2Nv$nR)$nQgKCAkcGF0aCwgJHZh$HV)ICkNCiAgICB7DQogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgaXQncyBh$iBhdHRyaWJ1dGUg$(9kZS4NCiAgICAgICAgaWYgKCB)c(VnKCIvYXR0c()idXR)OjoiLCAkcGF0aCkgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBHZXQgdGh)IHBhdGggdG8gdGh)IGF0dHJpYnV0ZSBu$2R)J3MgcGFyZW50Lg0KICAgICAgICAgICAgJHBhc(VudCA9ICR0aG)zLT5wc(VzdHIoJHBhdGgsICIvYXR0c()idXR)OjoiKTsNCg0KICAgICAgICAgICAgLy8gR2V0IHRoZSBwYXJ)$nQg$(9kZS4NCiAgICAgICAgICAgICRwYXJ)$nQgPSAkdGhpcy0+$(9kZXN$JHBhc(VudF07DQoNCiAgICAgICAgICAgIC8vIEd)dCB0aGUg$(FtZSBvZiB0aGUgYXR0c()idXR)Lg0KICAgICAgICAgICAgJGF0dHJpYnV0ZSA9ICR0aG)zLT5hZnR)cnN0cigkcGF0aCwgIi9hdHRyaWJ1dGU6OiIpOw0KDQogICAgICAgICAgICAvLyBTZXQgdGh)IGF0dHJpYnV0ZS4NCiAgICAgICAgICAgICRwYXJ)$nR$I(F0dHJpYnV0ZXMiXVskYXR0c()idXR)XSAuPSAkd(FsdWU7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBTZXQgdGh)IGNoYXJhY3R)ciBkYXRhIG9(IHRoZSBu$2R)Lg0KICAgICAgICAgICAgJHRoaXMtP(5vZGVzWyRwYXRoXVsidGV4dCJdIC49ICR2YWx1ZTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICogU2V0IHRoZSBj$250ZW50IG9(IGEg$(9kZS4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBzZXRzIHRoZSBj$250ZW50IG9(IGEg$(9kZS4gSWYgaXQncyBh$iBhdHRyaWJ1dGUg$(9kZSwgdGh)$g0KICAgICogdGh)IHZh$HV)IG9(IHRoZSBhdHRyaWJ1dGUgd2)s$CBiZSBzZXQsIG90aGVyd2)zZSB0aGUgY2hhc(FjdGVyIGRhdGEg$2YNCiAgICAqIHRoZSBu$2R)IHdp$GwgY(Ugc2V0LiBFeG)zdG)uZyBj$250ZW50IHdp$GwgY(Ug$3Z)cndyaXR0ZW4uDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwdWJsaWMNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRwYXRoIEZ1$GwgZG9jdW1)$nQgcGF0aCBvZiB0aGUg$(9kZS4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICR2YWx1ZSBTdHJp$(cgY29udGFp$()uZyB0aGUgY29udGVudCB0$yBiZSBzZXQuDQogICAgKiBAc2V)ICAgICAgIGd)dF9j$250ZW50KCksIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIHN)dF9j$250ZW50ICggJHBhdGgsICR2YWx1ZSApDQogICAgew0KICAgICAgICAvLyBDaGVjayB3aGV0aGVyIG)0J3MgYW4gYXR0c()idXR)IG5vZGUuDQogICAgICAgIG)(ICggZXJ)ZygiL2F0dHJpYnV0ZTo6IiwgJHBhdGgpICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gR2V0IHRoZSBwYXRoIHRvIHRoZSBhdHRyaWJ1dGUg$(9kZSdzIHBhc(VudC4NCiAgICAgICAgICAgICRwYXJ)$nQgPSAkdGhpcy0+cHJ)c3RyKCRwYXRoLCAiL2F0dHJpYnV0ZTo6Iik7DQoNCiAgICAgICAgICAgIC8vIEd)dCB0aGUgcGFyZW50IG5vZGUuDQogICAgICAgICAgICAkcGFyZW50ID0gJHRoaXMtP(5vZGVzWyRwYXJ)$nRdOw0KDQogICAgICAgICAgICAvLyBHZXQgdGh)IG5h$WUg$2YgdGh)IGF0dHJpYnV0ZS4NCiAgICAgICAgICAgICRhdHRyaWJ1dGUgPSAkdGhpcy0+YWZ0ZXJzdHIoJHBhdGgsICIvYXR0c()idXR)OjoiKTsNCg0KICAgICAgICAgICAgLy8gU2V0IHRoZSBhdHRyaWJ1dGUuDQogICAgICAgICAgICAkcGFyZW50WyJhdHRyaWJ1dGVzI)1$JGF0dHJpYnV0ZV0gPSAkd(FsdWU7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBTZXQgdGh)IGNoYXJhY3R)ciBkYXRhIG9(IHRoZSBu$2R)Lg0KICAgICAgICAgICAgJHRoaXMtP(5vZGVzWyRwYXRoXVsidGV4dCJdID0gJHZh$HV)Ow0KICAgICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgKiBSZXRyaWV2ZXMgdGh)IGNv$nR)$nQg$2YgYSBu$2R)Lg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIHJ)dHJpZXZ)cyB0aGUgY29udGVudCBvZiBhIG5vZGUuIE)(IG)0J3MgYW4gYXR0c()idXR)DQogICAgKiBu$2R)LCB0aGVuIHRoZSB2YWx1ZSBvZiB0aGUgYXR0c()idXR)IHdp$GwgY(Ugc(V0c())d(VkLCBvdGh)cndpc2UNCiAgICAqIG)0J2xsIGJ)IHRoZSBjaGFyYWN0ZXIgZGF0YSBvZiB0aGUg$(9kZS4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHB1Y(xpYw0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJHBhdGggRnVs$CBk$2N1$WVudCBwYXRoIG9(IHRoZSBu$2R)LCB(c(9tIHdoaWNoIHRoZQ0KICAgICogICAgICAgICAgICBj$250ZW50IHNo$3VsZCBiZSByZXRyaWV2ZWQuDQogICAgKiBAc(V0dXJuICAgIHN0c()uZyBUaGUgc(V0dXJuZWQgc3RyaW5nIGNv$nRhaW5zIGVpdGh)ciB0aGUgd(FsdWUg$3IgdGh)DQogICAgKiAgICAgICAgICAgIGNoYXJhY3R)ciBkYXRhIG9(IHRoZSBu$2R)Lg0KICAgICogQHN)ZSAgICAgICBzZXRfY29udGVudCgpLCB)d(FsdWF0ZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBnZXRfY29udGVudCAoICRwYXRoICkNCiAgICB7DQogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgaXQncyBh$iBhdHRyaWJ1dGUg$(9kZS4NCiAgICAgICAgaWYgKCB)c(VnKCIvYXR0c()idXR)OjoiLCAkcGF0aCkgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBHZXQgdGh)IHBhdGggdG8gdGh)IGF0dHJpYnV0ZSBu$2R)J3MgcGFyZW50Lg0KICAgICAgICAgICAgJHBhc(VudCA9ICR0aG)zLT5wc(VzdHIoJHBhdGgsICIvYXR0c()idXR)OjoiKTsNCg0KICAgICAgICAgICAgLy8gR2V0IHRoZSBwYXJ)$nQg$(9kZS4NCiAgICAgICAgICAgICRwYXJ)$nQgPSAkdGhpcy0+$(9kZXN$JHBhc(VudF07DQoNCiAgICAgICAgICAgIC8vIEd)dCB0aGUg$(FtZSBvZiB0aGUgYXR0c()idXR)Lg0KICAgICAgICAgICAgJGF0dHJpYnV0ZSA9ICR0aG)zLT5hZnR)cnN0cigkcGF0aCwgIi9hdHRyaWJ1dGU6OiIpOw0KDQogICAgICAgICAgICAvLyBHZXQgdGh)IGF0dHJpYnV0ZS4NCiAgICAgICAgICAgICRhdHRyaWJ1dGUgPSAkcGFyZW50WyJhdHRyaWJ1dGVzI)1$JGF0dHJpYnV0ZV07DQoNCiAgICAgICAgICAgIC8vIFJ)dHVy$iB0aGUgd(FsdWUg$2YgdGh)IGF0dHJpYnV0ZS4NCiAgICAgICAgICAgIHJ)dHVy$iAkYXR0c()idXR)Ow0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gU(V0dXJuIHRoZSBjZGF0YSBvZiB0aGUg$(9kZS4NCiAgICAgICAgICAgIHJ)dHVy$iBzdHJpcHNsYXNoZXMoJHRoaXMtP(5vZGVzWyRwYXRoXVsidGV4dCJdKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICogQWRkIGF0dHJpYnV0ZXMgdG8gYSBu$2R)Lg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIGFkZHMgYXR0c()idXR)cyB0$yBhIG5vZGUuIEV4aXN0aW5nIGF0dHJpYnV0ZXMgd2)s$CBu$3QgY(UNCiAgICAqIG92ZXJ3c()0dGVuLg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHVi$G)jDQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkcGF0aCBGdWxsIGRvY3VtZW50IHBhdGgg$2YgdGh)IG5vZGUsIHRoZSBhdHRyaWJ1dGVzDQogICAgKiAgICAgICAgICAgIHNo$3VsZCBiZSBhZGR)ZCB0$y4NCiAgICAqIEBwYXJh$SAgICAgYXJyYXkgJGF0dHJpYnV0ZXMgQXNz$2NpYXRpd(UgYXJyYXkgY29udGFp$()uZyB0aGUg$(V3DQogICAgKiAgICAgICAgICAgIGF0dHJpYnV0ZXMgZ(9yIHRoZSBu$2R)Lg0KICAgICogQHN)ZSAgICAgICBzZXRfY29udGVudCgpLCBnZXRfY29udGVudCgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBhZGRfYXR0c()idXR)cyAoICRwYXRoLCAkYXR0c()idXR)cyApDQogICAgew0KICAgICAgICAvLyBBZGQgdGh)IGF0dHJpYnV0ZXMgdG8gdGh)IG5vZGUuDQogICAgICAgICR0aG)zLT5u$2R)c1skcGF0aF1$I(F0dHJpYnV0ZXMiXSA9IGFyc(F5X21)c(d)KCRhdHRyaWJ1dGVzLA0KICAgICAgICAgICAgJHRoaXMtP(5vZGVzWyRwYXRoXVsiYXR0c()idXR)cyJdKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIFN)dHMgdGh)IGF0dHJpYnV0ZXMg$2YgYSBu$2R)Lg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIHN)dHMgdGh)IGF0dHJpYnV0ZXMg$2YgYSBu$2R)IGFuZCBvd(Vyd3JpdGVzIGFs$CB)eG)zdG)uZw0KICAgICogYXR0c()idXR)cyBieSBk$2)uZyB0aG)zLg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHVi$G)jDQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkcGF0aCBGdWxsIGRvY3VtZW50IHBhdGgg$2YgdGh)IG5vZGUsIHRoZSBhdHRyaWJ1dGVzDQogICAgKiAgICAgICAgICAgIG9(IHdoaWNoIHNo$3VsZCBiZSBzZXQuDQogICAgKiBAcGFyYW0gICAgIGFyc(F5ICRhdHRyaWJ1dGVzIEFzc29jaWF0aXZ)IGFyc(F5IGNv$nRhaW5p$(cgdGh)IG5)dw0KICAgICogICAgICAgICAgICBhdHRyaWJ1dGVzIGZvciB0aGUg$(9kZS4NCiAgICAqIEBzZWUgICAgICAgc2V0X2Nv$nR)$nQoKSwgZ2V0X2Nv$nR)$nQoKQ0KICAgICovDQogICAgZnVuY3Rp$24gc2V0X2F0dHJpYnV0ZXMgKCAkcGF0aCwgJGF0dHJpYnV0ZXMgKQ0KICAgIHsNCiAgICAgICAgLy8gU2V0IHRoZSBhdHRyaWJ1dGVzIG9(IHRoZSBu$2R)Lg0KICAgICAgICAkdGhpcy0+$(9kZXN$JHBhdGhdWyJhdHRyaWJ1dGVzI)0gPSAkYXR0c()idXR)czsNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIFJ)dHJpZXZ)cyBhIGxpc3Qg$2YgYWxsIGF0dHJpYnV0ZXMg$2YgYSBu$2R)Lg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIHJ)dHJpZXZ)cyBhIGxpc3Qg$2YgYWxsIGF0dHJpYnV0ZXMg$2YgdGh)IG5vZGUgc3B)Y2)(aWVkIG)uDQogICAgKiB0aGUgYXJndW1)$nQuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwdWJsaWMNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRwYXRoIEZ1$GwgZG9jdW1)$nQgcGF0aCBvZiB0aGUg$(9kZSwgZnJv$SB3aG)jaCB0aGUNCiAgICAqICAgICAgICAgICAg$G)zdCBvZiBhdHRyaWJ1dGVzIHNo$3VsZCBiZSByZXRyaWV2ZWQuDQogICAgKiBAc(V0dXJuICAgIGFyc(F5IFRoZSByZXR1c(5)ZCBhc3NvY2)hdG)2ZSBhcnJheSBj$250YW)ucyB0aGUgYWxsDQogICAgKiAgICAgICAgICAgIGF0dHJpYnV0ZXMg$2YgdGh)IHNwZWNpZ())ZCBu$2R)Lg0KICAgICogQHN)ZSAgICAgICBnZXRfY29udGVudCgpLCAk$(9kZXMsICRpZHMNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGd)dF9hdHRyaWJ1dGVzICggJHBhdGggKQ0KICAgIHsNCiAgICAgICAgLy8gU(V0dXJuIHRoZSBhdHRyaWJ1dGVzIG9(IHRoZSBu$2R)Lg0KICAgICAgICByZXR1c(4gJHRoaXMtP(5vZGVzWyRwYXRoXVsiYXR0c()idXR)cyJdOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICogU(V0c())d(VzIHRoZSBuYW1)IG9(IGEgZG9jdW1)$nQg$(9kZS4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCByZXRyaWV2ZXMgdGh)IG5h$WUg$2YgZG9jdW1)$nQg$(9kZSBzcGVjaWZpZWQgaW4gdGh)DQogICAgKiBhc(d1$WVudC4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHB1Y(xpYw0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJHBhdGggRnVs$CBk$2N1$WVudCBwYXRoIG9(IHRoZSBu$2R)LCB(c(9tIHdoaWNoIHRoZQ0KICAgICogICAgICAgICAgICBuYW1)IHNo$3VsZCBiZSByZXRyaWV2ZWQuDQogICAgKiBAc(V0dXJuICAgIHN0c()uZyBUaGUgc(V0dXJuZWQgYXJyYXkgY29udGFp$nMgdGh)IG5h$WUg$2YgdGh)IHNwZWNpZ())ZA0KICAgICogICAgICAgICAgICBu$2R)Lg0KICAgICogQHN)ZSAgICAgICBnZXRfY29udGVudCgpLCAk$(9kZXMsICRpZHMNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGd)dF9uYW1)ICggJHBhdGggKQ0KICAgIHsNCiAgICAgICAgLy8gU(V0dXJuIHRoZSBuYW1)IG9(IHRoZSBu$2R)Lg0KICAgICAgICByZXR1c(4gJHRoaXMtP(5vZGVzWyRwYXRoXVsi$(FtZSJdOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICogRXZh$HVhdGVzIGFuIFhQYXRoIGV4cHJ)c3Np$24uDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgdHJpZXMgdG8gZXZh$HVhdGUgYW4gWFBhdGggZXhwc(Vzc2)v$iBieSBwYXJzaW5nIG)0LiBBDQogICAgKiBYTUwgZG9jdW1)$nQgaGFzIHRvIGJ)IHJ)YWQgY(V($3J)IHRoaXMg$WV0aG9kIG)zIGFi$GUgdG8gd29yay4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHB1Y(xpYw0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJHBhdGggWFBhdGggZXhwc(Vzc2)v$iB0$yBiZSB)d(FsdWF0ZWQuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkY29udGV4dCBGdWxsIHBhdGgg$2YgYSBk$2N1$WVudCBu$2R)LCBzdGFydG)uZw0KICAgICogICAgICAgICAgICB(c(9tIHdoaWNoIHRoZSBYUGF0aCB)eHByZXNzaW9uIHNo$3VsZCBiZSB)d(FsdWF0ZWQuDQogICAgKiBAc(V0dXJuICAgIGFyc(F5IFRoZSByZXR1c(5)ZCBhcnJheSBj$250YW)ucyBhIGxpc3Qg$2YgdGh)IGZ1$GwNCiAgICAqICAgICAgICAgICAgZG9jdW1)$nQgcGF0aHMg$2YgYWxsIG5vZGVzIHRoYXQg$WF0Y2ggdGh)IGV2YWx1YXR)ZA0KICAgICogICAgICAgICAgICBYUGF0aCB)eHByZXNzaW9uLg0KICAgICogQHN)ZSAgICAgICAk$(9kZXMsICRpZHMNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGV2YWx1YXR)ICggJHBhdGgsICRj$250ZXh0ID0gIiIgKQ0KICAgIHsNCiAgICAgICAgLy8gU(Vt$3Z)IHNsYXNoZXMgYW5kIHF1$3R)IHNpZ25zLg0KICAgICAgICAkcGF0aCA9IHN0c()wc2xhc2h)cygkcGF0aCk7DQogICAgICAgICRwYXRoID0gc3RyX3J)cGxhY2UoI)wiIiwgIiIsICRwYXRoKTsNCiAgICAgICAgJHBhdGggPSBzdHJfc(Vw$GFjZSgiJyIsICIiLCAkcGF0aCk7DQoNCiAgICAgICAgLy8gU3BsaXQgdGh)IHBhdGhzIG)udG8gZG)(Z(VyZW50IHBhdGhzLg0KICAgICAgICAkcGF0aHMgPSAkdGhpcy0+c3BsaXRfcGF0aHMoJHBhdGgpOw0KDQogICAgICAgIC8vIENyZWF0ZSBh$iB)$XB0eSBzZXQgdG8gc2F2ZSB0aGUgc(VzdWx0Lg0KICAgICAgICAkc(VzdWx0ID0gYXJyYXkoKTsNCg0KICAgICAgICAvLyBSdW4gdGhy$3VnaCBh$GwgcGF0aHMuDQogICAgICAgIGZvc(VhY2ggKCAkcGF0aHMgYXMgJHBhdGggKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBUc()tIHRoZSBwYXRoLg0KICAgICAgICAgICAgJHBhdGggPSB0c()tKCRwYXRoKTsNCg0KICAgICAgICAgICAgLy8gU2F2ZSB0aGUgY3Vyc(VudCBwYXRoLg0KICAgICAgICAgICAgJHRoaXMtPnhwYXRoID0gJHBhdGg7DQoNCiAgICAgICAgICAgIC8vIENv$nZ)cnQgYWxsIGVudG)0aWVzLg0KICAgICAgICAgICAgJHBhdGggPSBzdHJ0cigkcGF0aCwgYXJyYX)fZ(xpcCgkdGhpcy0+ZW50aXRpZXMpKTsNCg0KICAgICAgICAgICAgLy8gU3BsaXQgdGh)IHBhdGggYXQgZXZ)cnkgc2xhc2guDQogICAgICAgICAgICAkc3R)cHMgPSAkdGhpcy0+c3BsaXRfc3R)cHMoJHBhdGgpOw0KDQogICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSB(aXJzdCB)$GVtZW50IG)zIGVtcHR5Lg0KICAgICAgICAgICAgaWYgKCB)$XB0eSgkc3R)cHN$MF0pICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBSZW1vd(UgdGh)IGZpcnN0IGFuZCB)$XB0eSB)$GVtZW50Lg0KICAgICAgICAgICAgICAgIGFyc(F5X3NoaWZ0KCRzdGVwcyk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIFN0YXJ0IHRvIGV2YWx1YXR)IHRoZSBzdGVwcy4NCiAgICAgICAgICAgICRu$2R)cyA9ICR0aG)zLT5)d(FsdWF0ZV9zdGVwKCRj$250ZXh0LCAkc3R)cHMpOw0KDQogICAgICAgICAgICAvLyBSZW1vd(UgZHVw$G)jYXR)ZCBu$2R)cy4NCiAgICAgICAgICAgICRu$2R)cyA9IGFyc(F5X3VuaXF1ZSgk$(9kZXMpOw0KDQogICAgICAgICAgICAvLyBBZGQgdGh)IG5vZGVzIHRvIHRoZSByZXN1$HQgc2V0Lg0KICAgICAgICAgICAgJHJ)c3VsdCA9IGFyc(F5X21)c(d)KCRyZXN1$HQsICRu$2R)cyk7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBSZXR1c(4gdGh)IHJ)c3VsdC4NCiAgICAgICAgc(V0dXJuICRyZXN1$HQ7DQogICAgfQ0KDQogICAgLyoqDQogICAgKiBIYW5k$GVzIG9wZW5p$(cgWE1MIHRhZ3Mgd2hp$GUgcGFyc2)uZy4NCiAgICAqDQogICAgKiBXaG)sZSBwYXJzaW5nIGEgWE1MIGRvY3VtZW50IGZvciB)YWNoIG9wZW5p$(cgdGFnIHRoaXMg$WV0aG9kIG)zDQogICAgKiBjYWxsZWQuIE)0J2xsIGFkZCB0aGUgdGFnIGZvdW5kIHRvIHRoZSB0c(V)IG9(IGRvY3VtZW50IG5vZGVzLg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBp$nQgJHBhcnN)ciBIYW5k$GVyIGZvciBhY2N)c3Np$(cgdGh)IGN1cnJ)$nQgWE1MIHBhcnN)ci4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRuYW1)IE5h$WUg$2YgdGh)IG9wZW5p$(cgdGFnIGZvdW5kIG)uIHRoZSBk$2N1$WVudC4NCiAgICAqIEBwYXJh$SAgICAgYXJyYXkgJGF0dHJpYnV0ZXMgQXNz$2NpYXRpd(UgYXJyYXkgY29udGFp$()uZyBhIGxpc3Qg$2YNCiAgICAqICAgICAgICAgICAgYWxsIGF0dHJpYnV0ZXMg$2YgdGh)IHRhZyB($3VuZCBp$iB0aGUgZG9jdW1)$nQuDQogICAgKiBAc2V)ICAgICAgIGhh$(RsZV9)$(RfZWx)$WVudCgpLCBoYW5k$GVfY2hhc(FjdGVyX2RhdGEoKSwgJG5vZGVzLCAkaWRzDQogICAgKi8NCiAgICB(dW5jdG)v$iBoYW5k$GVfc3RhcnRfZWx)$WVudCAoICRwYXJzZXIsICRuYW1)LCAkYXR0c()idXR)cyApDQogICAgew0KICAgICAgICAvLyBBZGQgYSBu$2R)Lg0KICAgICAgICAkdGhpcy0+cGF0aCA9ICR0aG)zLT5hZGRf$(9kZSgkdGhpcy0+cGF0aCwgJG5h$WUpOw0KDQogICAgICAgIC8vIFN)dCB0aGUgYXR0c()idXR)cy4NCiAgICAgICAgJHRoaXMtPnN)dF9hdHRyaWJ1dGVzKCR0aG)zLT5wYXRoLCAkYXR0c()idXR)cyk7DQogICAgfQ0KDQogICAgLyoqDQogICAgKiBIYW5k$GVzIGNs$3Np$(cgWE1MIHRhZ3Mgd2hp$GUgcGFyc2)uZy4NCiAgICAqDQogICAgKiBXaG)sZSBwYXJzaW5nIGEgWE1MIGRvY3VtZW50IGZvciB)YWNoIGNs$3Np$(cgdGFnIHRoaXMg$WV0aG9kIG)zDQogICAgKiBjYWxsZWQuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIG)udCAkcGFyc2VyIEhh$(RsZXIgZ(9yIGFjY2Vzc2)uZyB0aGUgY3Vyc(VudCBYTUwgcGFyc2VyLg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJG5h$WUgT(FtZSBvZiB0aGUgY2xvc2)uZyB0YWcgZ(91$(QgaW4gdGh)IGRvY3VtZW50Lg0KICAgICogQHN)ZSAgICAgICBoYW5k$GVfc3RhcnRfZWx)$WVudCgpLCBoYW5k$GVfY2hhc(FjdGVyX2RhdGEoKSwgJG5vZGVzLCAkaWRzDQogICAgKi8NCiAgICB(dW5jdG)v$iBoYW5k$GVfZW5kX2VsZW1)$nQgKCAkcGFyc2VyLCAk$(FtZSApDQogICAgew0KICAgICAgICAvLyBKdW1wIGJhY2sgdG8gdGh)IHBhc(VudCB)$GVtZW50Lg0KICAgICAgICAkdGhpcy0+cGF0aCA9IHN1YnN0cigkdGhpcy0+cGF0aCwgMCwgc3RycnBvcygkdGhpcy0+cGF0aCwgIi8iKSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgKiBIYW5k$GVzIGNoYXJhY3R)ciBkYXRhIHdoaWx)IHBhcnNp$(cuDQogICAgKg0KICAgICogV2hp$GUgcGFyc2)uZyBhIFhNTCBk$2N1$WVudCB($3IgZWFjaCBjaGFyYWN0ZXIgZGF0YSB0aG)zIG1)dGhvZA0KICAgICogaXMgY2Fs$GVkLiBJdCds$CBhZGQgdGh)IGNoYXJhY3R)ciBkYXRhIHRvIHRoZSBk$2N1$WVudCB0c(V)Lg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBp$nQgJHBhcnN)ciBIYW5k$GVyIGZvciBhY2N)c3Np$(cgdGh)IGN1cnJ)$nQgWE1MIHBhcnN)ci4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICR0ZXh0IENoYXJhY3R)ciBkYXRhIGZvdW5kIG)uIHRoZSBk$2N1$WVudC4NCiAgICAqIEBzZWUgICAgICAgaGFuZGx)X3N0YXJ0X2VsZW1)$nQoKSwgaGFuZGx)X2VuZF9)$GVtZW50KCksICRu$2R)cywgJG)kcw0KICAgICovDQogICAgZnVuY3Rp$24gaGFuZGx)X2NoYXJhY3R)c)9kYXRhICggJHBhcnN)ciwgJHR)eHQgKQ0KICAgIHsNCiAgICAgICAgLy8gU(Vw$GFjZSB)$nRpdG))cy4NCiAgICAgICAgJHR)eHQgPSBzdHJ0cigkdGV4dCwgJHRoaXMtP(VudG)0aWVzKTsNCg0KICAgICAgICAvLyBTYXZ)IHRoZSB0ZXh0Lg0KICAgICAgICAkdGhpcy0+YWRkX2Nv$nR)$nQoJHRoaXMtPnBhdGgsIGFkZHNsYXNoZXModHJp$SgkdGV4dCkpKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIFNw$G)0cyBh$iBYUGF0aCB)eHByZXNzaW9uIG)udG8gaXRzIGRpZ(Z)c(VudCB)eHByZXNzaW9ucy4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBzcGxpdHMgYW4gWFBhdGggZXhwc(Vzc2)v$i4gRWFjaCB)eHByZXNzaW9uIGNh$iBj$25zaXN0cyBvZg0KICAgICog$G)zdCBvZiB)eHByZXNzaW9uIGJ)aW5nIHN)cGFyYXR)ZCB(c(9tIGVhY2gg$3RoZXIgYnkgYSB8IGNoYXJhY3R)ci4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHByaXZhdGUNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICR)eHByZXNzaW9uIFRoZSBj$21w$GV0ZSB)eHByZXNzaW9uIHRvIGJ)IHNw$G)0dGVkDQogICAgKiAgICAgICAgICAgIG)udG8gaXRzIGRpZ(Z)c(VudCB)eHByZXNzaW9ucy4NCiAgICAqIEByZXR1c(4gICAgYXJyYXkgVGh)IGFyc(F5IHJ)dHVy$(VkIGZy$20gdGhpcyBtZXRo$2QgY29udGFp$nMgYSBsaXN0DQogICAgKiAgICAgICAgICAgIG9(IGFs$CB)eHByZXNzaW9ucyB($3VuZCBp$iB0aGUgZXhwc(Vzc2)v$iBwYXNzZWQgdG8gdGhpcw0KICAgICogICAgICAgICAgICBtZXRo$2QgYXMgYSBwYXJh$WV0ZXIuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1dGUoKQ0KICAgICovDQogICAgZnVuY3Rp$24gc3BsaXRfcGF0aHMgKCAkZXhwc(Vzc2)v$iApDQogICAgew0KICAgICAgICAvLyBDc(VhdGUgYW4gZW1wdHkgYXJyYXkuDQogICAgICAgICRwYXRocyA9IGFyc(F5KCk7DQoNCiAgICAgICAgLy8gU2F2ZSB0aGUgcG9zaXRp$24g$2YgdGh)IHNsYXNoLg0KICAgICAgICAkcG9zaXRp$24gPSAtMTsNCg0KICAgICAgICAvLyBSdW4gdGhy$3VnaCB0aGUgZXhwc(Vzc2)v$i4NCiAgICAgICAgZG8NCiAgICAgICAgew0KICAgICAgICAgICAgLy8gU2Vhc(NoIGZvciBhIHNsYXNoLg0KICAgICAgICAgICAgJHBvc2)0aW9uID0gJHRoaXMtPnN)YXJjaF9zdHJp$(coJGV4cHJ)c3Np$24sICJ8Iik7DQoNCiAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgYSB8IHdhcyB($3VuZC4NCiAgICAgICAgICAgIG)(ICggJHBvc2)0aW9uID49IDAgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIEd)dCB0aGUg$GV(dCBwYXJ0IG9(IHRoZSB)eHByZXNzaW9uLg0KICAgICAgICAgICAgICAgICRsZWZ0ICA9IHN1YnN0cigkZXhwc(Vzc2)v$iwgMCwgJHBvc2)0aW9uKTsNCiAgICAgICAgICAgICAgICAkc()naHQgPSBzdWJzdHIoJGV4cHJ)c3Np$24sICRw$3NpdG)v$iArIDEpOw0KDQogICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBsZWZ0IHZh$HV)IHRvIHRoZSBzdGVwcy4NCiAgICAgICAgICAgICAgICAkcGF0aHN$XSA9ICRsZWZ0Ow0KDQogICAgICAgICAgICAgICAgLy8gU(VkdWN)IHRoZSB)eHByZXNzaW9uIHRvIHRoZSByaWdodCBwYXJ0Lg0KICAgICAgICAgICAgICAgICR)eHByZXNzaW9uID0gJHJpZ2h0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHdoaWx)ICggJHBvc2)0aW9uID4gLTEgKTsNCg0KICAgICAgICAvLyBBZGQgdGh)IHJ)$WFp$(cgZXhwc(Vzc2)v$iB0$yB0aGUg$G)zdCBvZiBzdGVwcy4NCiAgICAgICAgJHBhdGhzW10gPSAkZXhwc(Vzc2)v$jsNCg0KICAgICAgICAvLyBSZXR1c(4gdGh)IHN0ZXBzLg0KICAgICAgICByZXR1c(4gJHBhdGhzOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICogU3BsaXRzIGFuIFhQYXRoIGV4cHJ)c3Np$24gaW50$yBpdHMgZG)(Z(VyZW50IHN0ZXBzLg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIHNw$G)0cyBh$iBYUGF0aCB)eHByZXNzaW9uLiBFYWNoIGV4cHJ)c3Np$24gY2FuIGNv$nNpc3RzIG9(DQogICAgKiBsaXN0IG9(IHN0ZXBzIGJ)aW5nIHN)cGFyYXR)ZCB(c(9tIGVhY2gg$3RoZXIgYnkgYSAvIGNoYXJhY3R)ci4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHByaXZhdGUNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICR)eHByZXNzaW9uIFRoZSBj$21w$GV0ZSB)eHByZXNzaW9uIHRvIGJ)IHNw$G)0dGVkDQogICAgKiAgICAgICAgICAgIG)udG8gaXRzIGRpZ(Z)c(VudCBzdGVwcy4NCiAgICAqIEByZXR1c(4gICAgYXJyYXkgVGh)IGFyc(F5IHJ)dHVy$(VkIGZy$20gdGhpcyBtZXRo$2QgY29udGFp$nMgYSBsaXN0DQogICAgKiAgICAgICAgICAgIG9(IGFs$CBzdGVwcyB($3VuZCBp$iB0aGUgZXhwc(Vzc2)v$iBwYXNzZWQgdG8gdGhpcw0KICAgICogICAgICAgICAgICBtZXRo$2QgYXMgYSBwYXJh$WV0ZXIuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1dGUoKQ0KICAgICovDQogICAgZnVuY3Rp$24gc3BsaXRfc3R)cHMgKCAkZXhwc(Vzc2)v$iApDQogICAgew0KICAgICAgICAvLyBDc(VhdGUgYW4gZW1wdHkgYXJyYXkuDQogICAgICAgICRzdGVwcyA9IGFyc(F5KCk7DQoNCiAgICAgICAgLy8gU(Vw$GFjZSBhIGRvdWJsZSBz$GFzaGVzLCBiZWNhdXN)IHRoZXkn$GwgY2F1c2UgcHJvY(x)$XMg$3RoZXJ3aXN)Lg0KICAgICAgICAkZXhwc(Vzc2)v$iA9IHN0c)9yZXBsYWN)KCIvL0AiLCAiL2R)c2N)$(Rh$nQ6OiovQCIsICR)eHByZXNzaW9uKTsNCiAgICAgICAgJGV4cHJ)c3Np$24gPSBzdHJfc(Vw$GFjZSgiLy8iLCAiL2R)c2N)$(Rh$nQ6OiIsICR)eHByZXNzaW9uKTsNCg0KICAgICAgICAvLyBTYXZ)IHRoZSBw$3NpdG)v$iBvZiB0aGUgc2xhc2guDQogICAgICAgICRw$3NpdG)v$iA9IC0xOw0KDQogICAgICAgIC8vIFJ1$iB0aHJvdWdoIHRoZSB)eHByZXNzaW9uLg0KICAgICAgICBk$w0KICAgICAgICB7DQogICAgICAgICAgICAvLyBTZWFyY2ggZ(9yIGEgc2xhc2guDQogICAgICAgICAgICAkcG9zaXRp$24gPSAkdGhpcy0+c2Vhc(NoX3N0c()uZygkZXhwc(Vzc2)v$iwgIi8iKTsNCg0KICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciBhIHNsYXNoIHdhcyB($3VuZC4NCiAgICAgICAgICAgIG)(ICggJHBvc2)0aW9uID49IDAgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIEd)dCB0aGUg$GV(dCBwYXJ0IG9(IHRoZSB)eHByZXNzaW9uLg0KICAgICAgICAgICAgICAgICRsZWZ0ICA9IHN1YnN0cigkZXhwc(Vzc2)v$iwgMCwgJHBvc2)0aW9uKTsNCiAgICAgICAgICAgICAgICAkc()naHQgPSBzdWJzdHIoJGV4cHJ)c3Np$24sICRw$3NpdG)v$iArIDEpOw0KDQogICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBsZWZ0IHZh$HV)IHRvIHRoZSBzdGVwcy4NCiAgICAgICAgICAgICAgICAkc3R)cHN$XSA9ICRsZWZ0Ow0KDQogICAgICAgICAgICAgICAgLy8gU(VkdWN)IHRoZSB)eHByZXNzaW9uIHRvIHRoZSByaWdodCBwYXJ0Lg0KICAgICAgICAgICAgICAgICR)eHByZXNzaW9uID0gJHJpZ2h0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHdoaWx)ICggJHBvc2)0aW9uID4gLTEgKTsNCg0KICAgICAgICAvLyBBZGQgdGh)IHJ)$WFp$(cgZXhwc(Vzc2)v$iB0$yB0aGUg$G)zdCBvZiBzdGVwcy4NCiAgICAgICAgJHN0ZXBzW10gPSAkZXhwc(Vzc2)v$jsNCg0KICAgICAgICAvLyBSZXR1c(4gdGh)IHN0ZXBzLg0KICAgICAgICByZXR1c(4gJHN0ZXBzOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICogU(V0c())d(VzIGF4aXMgaW5($3JtYXRp$24gZnJv$SBh$iBYUGF0aCB)eHByZXNzaW9uIHN0ZXAuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgdHJpZXMgdG8gZXh0c(FjdCB0aGUg$(FtZSBvZiB0aGUgYXhpcyBh$(QgaXRzIG5vZGUtdGVzdA0KICAgICogZnJv$SBhIGdpd(VuIHN0ZXAg$2YgYW4gWFBhdGggZXhwc(Vzc2)v$iBhdCBhIGdpd(VuIG5vZGUuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkc3R)cCBTdHJp$(cgY29udGFp$()uZyBhIHN0ZXAg$2YgYW4gWFBhdGggZXhwc(Vzc2)v$i4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRu$2R)IEZ1$GwgZG9jdW1)$nQgcGF0aCBvZiB0aGUg$(9kZSBv$iB3aG)jaCB0aGUNCiAgICAqICAgICAgICAgICAgc3R)cCBpcyB)eGVjdXR)ZC4NCiAgICAqIEByZXR1c(4gICAgYXJyYXkgVGhpcyBtZXRo$2Qgc(V0dXJucyBh$iBhcnJheSBj$250YW)uaW5nIG)uZ(9y$WF0aW9uDQogICAgKiAgICAgICAgICAgIGFi$3V0IHRoZSBheG)zIGZvdW5kIG)uIHRoZSBzdGVwLg0KICAgICogQHN)ZSAgICAgICB)d(FsdWF0ZV9zdGVwKCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGd)dF9heG)zICggJHN0ZXAsICRu$2R)ICkNCiAgICB7DQogICAgICAgIC8vIENyZWF0ZSBh$iBhcnJheSB0$yBzYXZ)IHRoZSBheG)zIG)uZ(9y$WF0aW9uLg0KICAgICAgICAkYXhpcyA9IGFyc(F5KA0KICAgICAgICAgICAgI(F4aXMiICAgICAgPT4gIiIsDQogICAgICAgICAgICAi$(9kZS10ZXN0IiA9PiAiIiwNCiAgICAgICAgICAgICJwc(VkaWNhdGUiID0+IGFyc(F5KCkNCiAgICAgICAgKTsNCg0KICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZXJ)IGFyZSBwc(VkaWNhdGVzLg0KICAgICAgICBpZiAoIGVyZWcoI)x$IiwgJHN0ZXApICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gR2V0IHRoZSBwc(VkaWNhdGVzLg0KICAgICAgICAgICAgJHByZWRpY2F0ZXMgPSBzdWJzdHIoJHN0ZXAsIHN0cnBvcygkc3R)cCwgI)siKSk7DQoNCiAgICAgICAgICAgIC8vIFJ)ZHVjZSB0aGUgc3R)cC4NCiAgICAgICAgICAgICRzdGVwID0gJHRoaXMtPnByZXN0cigkc3R)cCwgI)siKTsNCg0KICAgICAgICAgICAgLy8gVHJ5IHRvIHNw$G)0IHRoZSBwc(VkaWNhdGVzLg0KICAgICAgICAgICAgJHByZWRpY2F0ZXMgPSBzdHJfc(Vw$GFjZSgiXVsiLCAiXXx$IiwgJHByZWRpY2F0ZXMpOw0KICAgICAgICAgICAgJHByZWRpY2F0ZXMgPSB)eHBs$2R)KCJ8IiwgJHByZWRpY2F0ZXMpOw0KDQogICAgICAgICAgICAvLyBSdW4gdGhy$3VnaCBh$GwgcHJ)ZG)jYXR)cy4NCiAgICAgICAgICAgIGZvc(VhY2ggKCAkcHJ)ZG)jYXR)cyBhcyAkcHJ)ZG)jYXR)ICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBSZW1vd(UgdGh)IGJyYWNrZXRzLg0KICAgICAgICAgICAgICAgICRwc(VkaWNhdGUgPSBzdWJzdHIoJHByZWRpY2F0ZSwgMSwgc3Ry$GVuKCRwc(VkaWNhdGUpIC0gMik7DQoNCiAgICAgICAgICAgICAgICAvLyBBZGQgdGh)IHByZWRpY2F0ZSB0$yB0aGUg$G)zdCBvZiBwc(VkaWNhdGVzLg0KICAgICAgICAgICAgICAgICRheG)zWyJwc(VkaWNhdGUiXVtdID0gJHByZWRpY2F0ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGh)IGF4aXMgaXMgZ2)2ZW4gaW4gcGxhaW4gdGV4dC4NCiAgICAgICAgaWYgKCAkdGhpcy0+c2Vhc(NoX3N0c()uZygkc3R)cCwgIjo6IikgPiAtMSApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIFNw$G)0IHRoZSBzdGVwIHRvIGV4dHJhY3QgYXhpcyBh$(Qg$(9kZS10ZXN0Lg0KICAgICAgICAgICAgJGF4aXN$I(F4aXMiXSAgICAgID0gJHRoaXMtPnByZXN0cigkc3R)cCwgIjo6Iik7DQogICAgICAgICAgICAkYXhpc1si$(9kZS10ZXN0I)0gPSAkdGhpcy0+YWZ0ZXJzdHIoJHN0ZXAsICI6OiIpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUgc3R)cCBpcyB)$XB0eS4NCiAgICAgICAgICAgIG)(ICggZW1wdHkoJHN0ZXApICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBTZXQgaXQgdG8gdGh)IGR)Z(F1$HQgd(FsdWUuDQogICAgICAgICAgICAgICAgJHN0ZXAgPSAiLiI7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgaXMgYW4gYWJic(V2aWF0ZWQgc3)udGF4Lg0KICAgICAgICAgICAgaWYgKCAkc3R)cCA9PSAiKiIgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIFVzZSB0aGUgY2hp$GQgYXhpcyBh$(Qgc2VsZWN0IGFs$CBjaG)sZHJ)$i4NCiAgICAgICAgICAgICAgICAkYXhpc1siYXhpcyJdICAgICAgPSAiY2hp$GQiOw0KICAgICAgICAgICAgICAgICRheG)zWyJu$2R)LXR)c3QiXSA9ICIqIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2VpZiAoIGVyZWcoI)woIiwgJHN0ZXApICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIG)0J3MgYSB(dW5jdG)v$i4NCiAgICAgICAgICAgICAgICBpZiAoICR0aG)zLT5pc19(dW5jdG)v$igkdGhpcy0+cHJ)c3RyKCRzdGVwLCAiKCIpKSApDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAvLyBHZXQgdGh)IHBvc2)0aW9uIG9(IHRoZSB(aXJzdCBic(Fja2V0Lg0KICAgICAgICAgICAgICAgICAgICAkc3RhcnQgPSBzdHJw$3MoJHN0ZXAsICIoIik7DQogICAgICAgICAgICAgICAgICAgICR)$(QgICA9IHN0cnBvcygkc3R)cCwgIikiLCAkc3RhcnQpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIEd)dCB)d(VyeXRoaW5nIGJ)Z(9yZSwgY(V0d2V)$iBh$(QgYWZ0ZXIgdGh)IGJyYWNrZXRzLg0KICAgICAgICAgICAgICAgICAgICAkY(V($3J)ICA9IHN1YnN0cigkc3R)cCwgMCwgJHN0YXJ0KTsNCiAgICAgICAgICAgICAgICAgICAgJGJ)dHd)ZW4gPSBzdWJzdHIoJHN0ZXAsICRzdGFydCArIDEsICR)$(QgLSAkc3RhcnQgLSAxKTsNCiAgICAgICAgICAgICAgICAgICAgJGF(dGVyICAgPSBzdWJzdHIoJHN0ZXAsICR)$(QgKyAxKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBUc()tIGVhY2ggc3RyaW5nLg0KICAgICAgICAgICAgICAgICAgICAkY(V($3J)ICA9IHRyaW0oJGJ)Z(9yZSk7DQogICAgICAgICAgICAgICAgICAgICRiZXR3ZWVuID0gdHJp$SgkY(V0d2V)$ik7DQogICAgICAgICAgICAgICAgICAgICRhZnR)ciAgID0gdHJp$SgkYWZ0ZXIpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIFNhd(UgdGh)IGV2YWx1YXR)ZCB(dW5jdG)v$i4NCiAgICAgICAgICAgICAgICAgICAgJGF4aXN$I(F4aXMiXSAgICAgID0gI(Z1$(N0aW9uIjsNCiAgICAgICAgICAgICAgICAgICAgJGF4aXN$I(5vZGUtdGVzdCJdID0gJHRoaXMtP(V2YWx1YXR)X2Z1$(N0aW9uKCRiZWZvc(UsDQogICAgICAgICAgICAgICAgICAgICAgICAkY(V0d2V)$iwgJG5vZGUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB)$HN)DQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAvLyBVc2UgdGh)IGNoaWxkIGF4aXMgYW5kIGEgZnVuY3Rp$24uDQogICAgICAgICAgICAgICAgICAgICRheG)zWyJheG)zI)0gICAgICA9ICJjaG)sZCI7DQogICAgICAgICAgICAgICAgICAgICRheG)zWyJu$2R)LXR)c3QiXSA9ICRzdGVwOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2VpZiAoIGVyZWdpKCJeQCIsICRzdGVwKSApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gVXN)IHRoZSBhdHRyaWJ1dGUgYXhpcyBh$(Qgc2VsZWN0IHRoZSBhdHRyaWJ1dGUuDQogICAgICAgICAgICAgICAgJGF4aXN$I(F4aXMiXSAgICAgID0gI(F0dHJpYnV0ZSI7DQogICAgICAgICAgICAgICAgJGF4aXN$I(5vZGUtdGVzdCJdID0gc3Vic3RyKCRzdGVwLCAxKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2VpZiAoIGVyZWdpKCJcXSQiLCAkc3R)cCkgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIFVzZSB0aGUgY2hp$GQgYXhpcyBh$(Qgc2VsZWN0IGEgcG9zaXRp$24uDQogICAgICAgICAgICAgICAgJGF4aXN$I(F4aXMiXSAgICAgID0gI(NoaWxkIjsNCiAgICAgICAgICAgICAgICAkYXhpc1si$(9kZS10ZXN0I)0gPSBzdWJzdHIoJHN0ZXAsIHN0cnBvcygkc3R)cCwgI)siKSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB)$HN)aWYgKCAkc3R)cCA9PSAiLiIgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIFN)$GVjdCB0aGUgc2VsZiBheG)zLg0KICAgICAgICAgICAgICAgICRheG)zWyJheG)zI)0gICAgICA9ICJzZWx(IjsNCiAgICAgICAgICAgICAgICAkYXhpc1si$(9kZS10ZXN0I)0gPSAiKiI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB)$HN)aWYgKCAkc3R)cCA9PSAiLi4iICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBTZWx)Y3QgdGh)IHBhc(VudCBheG)zLg0KICAgICAgICAgICAgICAgICRheG)zWyJheG)zI)0gICAgICA9ICJwYXJ)$nQiOw0KICAgICAgICAgICAgICAgICRheG)zWyJu$2R)LXR)c3QiXSA9ICIqIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2VpZiAoIGVyZWcoI)5$YS16QS1aMC05XC1fXSskIiwgJHN0ZXApICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBTZWx)Y3QgdGh)IGNoaWxkIGF4aXMgYW5kIHRoZSBjaG)sZC4NCiAgICAgICAgICAgICAgICAkYXhpc1siYXhpcyJdICAgICAgPSAiY2hp$GQiOw0KICAgICAgICAgICAgICAgICRheG)zWyJu$2R)LXR)c3QiXSA9ICRzdGVwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIFVzZSB0aGUgY2hp$GQgYXhpcyBh$(QgYSBuYW1)Lg0KICAgICAgICAgICAgICAgICRheG)zWyJheG)zI)0gICAgICA9ICJjaG)sZCI7DQogICAgICAgICAgICAgICAgJGF4aXN$I(5vZGUtdGVzdCJdID0gJHN0ZXA7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyBDaGVjayB3aGV0aGVyIG)0J3MgYSB2YWxpZCBheG)zLg0KICAgICAgICBpZiAoICFp$)9hcnJheSgkYXhpc1siYXhpcyJdLCBhcnJheV9tZXJnZSgkdGhpcy0+YXh)cywNCiAgICAgICAgICAgIGFyc(F5KCJ(dW5jdG)v$iIpKSkgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBEaXNw$GF5IGFuIGVyc(9yIG1)c3NhZ2UuDQogICAgICAgICAgICAkdGhpcy0+ZG)zcGxheV9)cnJvcigiV2hp$GUgcGFyc2)uZyBh$iBYUGF0aCB)eHByZXNzaW9uLCBp$iAiLg0KICAgICAgICAgICAgICAgICJ0aGUgc3R)cCBcIiVzXCIgdGh)IG)ud(FsaWQgYXhpcyBcIiVzXCIgd2FzIGZvdW5kLiIsDQogICAgICAgICAgICAgICAgc3RyX3J)cGxhY2UoJHN0ZXAsICI8Yj4iLiRzdGVwLiI8L2I+IiwgJHRoaXMtPnhwYXRoKSwjDQogICAgICAgICAgICAgICAgJGF4aXN$I(F4aXMiXSk7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBSZXR1c(4gdGh)IGF4aXMgaW5($3JtYXRp$24uDQogICAgICAgIHJ)dHVy$iAkYXhpczsNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIExv$2tzIGZvciBhIHN0c()uZyB3aXRoaW4gYW5vdGh)ciBzdHJp$(cuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2Qg$G9va3MgZ(9yIGEgc3RyaW5nIHdpdGhp$iBh$(90aGVyIHN0c()uZy4gQnJhY2t)dHMgaW4gdGh)DQogICAgKiBzdHJp$(cgdGh)IG1)dGhvZCBpcyBs$29raW5nIHRoc(91Z2ggd2)s$CBiZSByZXNwZWN0ZWQsIHdoaWNoIG1)YW5zIHRoYXQNCiAgICAqIG9u$HkgaWYgdGh)IHN0c()uZyB0aGUg$WV0aG9kIG)zIGxv$2tp$(cgZ(9yIG)zIGxvY2F0ZWQg$3V0c2)kZSBvZg0KICAgICogYnJhY2t)dHMsIHRoZSBzZWFyY2ggd2)s$CBiZSBzdWNjZXNzZnVsLg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJHR)c(0gU3RyaW5nIG)uIHdoaWNoIHRoZSBzZWFyY2ggc2hh$GwgdGFrZSBw$GFjZS4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICR)eHByZXNzaW9uIFN0c()uZyB0aGF0IHNo$3VsZCBiZSBzZWFyY2h)ZC4NCiAgICAqIEByZXR1c(4gICAgaW50IFRoaXMg$WV0aG9kIHJ)dHVy$nMgLTEgaWYg$(8gc3RyaW5nIHdhcyB($3VuZCwg$3RoZXJ3aXN)DQogICAgKiAgICAgICAgICAgIHRoZSBvZ(ZzZXQgYXQgd2hpY2ggdGh)IHN0c()uZyB3YXMgZ(91$(QuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1YXR)X3N0ZXAoKQ0KICAgICovDQogICAgZnVuY3Rp$24gc2Vhc(NoX3N0c()uZyAoICR0ZXJtLCAkZXhwc(Vzc2)v$iApDQogICAgew0KICAgICAgICAvLyBDc(VhdGUgYSBuZXcgY291$nR)ciB($3IgdGh)IGJyYWNrZXRzLg0KICAgICAgICAkYnJhY2t)dHMgPSAwOw0KDQogICAgICAgIC8vIFJ1$iB0aHJvdWdoIHRoZSBzdHJp$(cuDQogICAgICAgIGZvciAoICRpID0gMDsgJGkgPCBzdHJsZW4oJHR)c(0pOyAkaSsrICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gR2V0IHRoZSBjaGFyYWN0ZXIgYXQgdGh)IHBvc2)0aW9uIG9(IHRoZSBzdHJp$(cuDQogICAgICAgICAgICAkY2hhc(FjdGVyID0gc3Vic3RyKCR0ZXJtLCAkaSwgMSk7DQoNCiAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgaXQncyBhIGJyZWFja2V0Lg0KICAgICAgICAgICAgaWYgKCAoICRjaGFyYWN0ZXIgPT0gIigiICkgfHwgKCAkY2hhc(FjdGVyID09ICJ$IiApICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBJ$(NyZWFzZSB0aGUg$nVtY(VyIG9(IGJyYWNrZXRzLg0KICAgICAgICAgICAgICAgICRic(Fja2V0cysrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZW)(ICggKCAkY2hhc(FjdGVyID09ICIpIiApIHx8ICggJGNoYXJhY3R)ciA9PSAiXSIgKSApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gRGVjc(Vhc2UgdGh)IG51$WJ)ciBvZiBic(Fja2V0cy4NCiAgICAgICAgICAgICAgICAkYnJhY2t)dHMtLTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2VpZiAoICRic(Fja2V0cyA9PSAwICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHd)IGNh$iB(aW5kIHRoZSB)eHByZXNzaW9uIGF0IHRoaXMgaW5kZXguDQogICAgICAgICAgICAgICAgaWYgKCBzdWJzdHIoJHR)c(0sICRpLCBzdHJsZW4oJGV4cHJ)c3Np$24pKSA9PSAkZXhwc(Vzc2)v$iApDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAvLyBSZXR1c(4gdGh)IGN1cnJ)$nQgaW5kZXguDQogICAgICAgICAgICAgICAgICAgIHJ)dHVy$iAkaTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHd)IGhhZCBhIHZh$G)kIG51$WJ)ciBvZiBic(Fja2V0cy4NCiAgICAgICAgaWYgKCAkYnJhY2t)dHMgIT0gMCApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIERpc3BsYXkgYW4gZXJy$3Ig$WVzc2FnZS4NCiAgICAgICAgICAgICR0aG)zLT5kaXNw$GF5X2Vyc(9yKCJXaG)sZSBwYXJzaW5nIGFuIFhQYXRoIGV4cHJ)c3Np$24sIG)uIHRoZSAiLg0KICAgICAgICAgICAgICAgICJwc(VkaWNhdGUgXCI)c1wiLCB0aGVyZSB3YXMgYW4gaW52YWxpZCBudW1iZXIg$2YgYnJhY2t)dHMuIiwNCiAgICAgICAgICAgICAgICBzdHJfc(Vw$GFjZSgkdGVy$SwgIjxiPiIuJHR)c(0uIjwvYj4iLCAkdGhpcy0+eHBhdGgpKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIE5vdGhp$(cgd2FzIGZvdW5kLg0KICAgICAgICByZXR1c(4gKC0xKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIENoZWNrcyB($3IgYSB2YWxpZCB(dW5jdG)v$iBuYW1)Lg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIGNoZWNrIHdoZXRoZXIgYW4gZXhwc(Vzc2)v$iBj$250YW)ucyBhIHZh$G)kIG5h$WUg$2YgYW4NCiAgICAqIFhQYXRoIGZ1$(N0aW9uLg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGV4cHJ)c3Np$24gT(FtZSBvZiB0aGUgZnVuY3Rp$24gdG8gY(UgY2h)Y2t)ZC4NCiAgICAqIEByZXR1c(4gICAgY(9v$GVh$iBUaG)zIG1)dGhvZCByZXR1c(5zIHRydWUgaWYgdGh)IGdpd(VuIG5h$WUgaXMgYSB2YWxpZA0KICAgICogICAgICAgICAgICBYUGF0aCB(dW5jdG)v$iBuYW1)LCBvdGh)cndpc2UgZ(Fsc2UuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIG)zX2Z1$(N0aW9uICggJGV4cHJ)c3Np$24gKQ0KICAgIHsNCiAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciBpdCdzIG)uIHRoZSBsaXN0IG9(IHN1cHBvcnR)ZCB(dW5jdG)v$nMuDQogICAgICAgIG)(ICggaW5fYXJyYXkoJGV4cHJ)c3Np$24sICR0aG)zLT5(dW5jdG)v$nMpICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gSXQncyBhIGZ1$(N0aW9uLg0KICAgICAgICAgICAgc(V0dXJuIHRydWU7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBJdCdzIG5vdCBhIGZ1$(N0aW9uLg0KICAgICAgICAgICAgc(V0dXJuIGZh$HN)Ow0KICAgICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgKiBFd(FsdWF0ZXMgYSBzdGVwIG9(IGFuIFhQYXRoIGV4cHJ)c3Np$24uDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgdHJpZXMgdG8gZXZh$HVhdGUgYSBzdGVwIGZy$20gYW4gWFBhdGggZXhwc(Vzc2)v$iBhdCBhDQogICAgKiBzcGVjaWZpYyBj$250ZXh0Lg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGNv$nR)eHQgRnVs$CBk$2N1$WVudCBwYXRoIG9(IHRoZSBj$250ZXh0IGZy$20NCiAgICAqICAgICAgICAgICAgd2hpY2ggc3RhcnRp$(cgdGh)IHN0ZXAgc2hvdWxkIGJ)IGV2YWx1YXR)ZC4NCiAgICAqIEBwYXJh$SAgICAgYXJyYXkgJHN0ZXBzIEFyc(F5IGNv$nRhaW5p$(cgdGh)IHJ)$WFp$()uZyBzdGVwcyBvZiB0aGUNCiAgICAqICAgICAgICAgICAgY3Vyc(VudCBYUGF0aCB)eHByZXNzaW9uLg0KICAgICogQHJ)dHVy$iAgICBhcnJheSBUaG)zIG1)dGhvZCByZXR1c(5zIGFuIGFyc(F5IGNv$nRhaW5p$(cgYWxsIG5vZGVzDQogICAgKiAgICAgICAgICAgIHRoYXQgYXJ)IHRoZSByZXN1$HQg$2YgZXZh$HVhdG)uZyB0aGUgZ2)2ZW4gWFBhdGggc3R)cC4NCiAgICAqIEBzZWUgICAgICAgZXZh$HVhdGUoKQ0KICAgICovDQogICAgZnVuY3Rp$24gZXZh$HVhdGVfc3R)cCAoICRj$250ZXh0LCAkc3R)cHMgKQ0KICAgIHsNCiAgICAgICAgLy8gQ3J)YXR)IGFuIGVtcHR5IGFyc(F5IGZvciBzYXZp$(cgdGh)IG5vZGVzIGZvdW5kLg0KICAgICAgICAk$(9kZXMgPSBhcnJheSgpOw0KDQogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGh)IGNv$nR)eHQgaXMgYW4gYXJyYXkg$2YgY29udGV4dHMuDQogICAgICAgIG)(ICggaXNfYXJyYXkoJGNv$nR)eHQpICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gUnVuIHRoc(91Z2ggdGh)IGFyc(F5Lg0KICAgICAgICAgICAgZ(9yZWFjaCAoICRj$250ZXh0IGFzICRwYXRoICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBDYWxsIHRoaXMg$WV0aG9kIGZvciB0aG)zIHNp$(dsZSBwYXRoLg0KICAgICAgICAgICAgICAgICRu$2R)cyA9IGFyc(F5X21)c(d)KCRu$2R)cywNCiAgICAgICAgICAgICAgICAgICAgJHRoaXMtP(V2YWx1YXR)X3N0ZXAoJHBhdGgsICRzdGVwcykpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gR2V0IHRoaXMgc3R)cC4NCiAgICAgICAgICAgICRzdGVwID0gYXJyYX)fc2hpZnQoJHN0ZXBzKTsNCg0KICAgICAgICAgICAgLy8gQ3J)YXR)IGFuIGFyc(F5IHRvIHNhd(UgdGh)IG5)dyBj$250ZXh0cy4NCiAgICAgICAgICAgICRj$250ZXh0cyA9IGFyc(F5KCk7DQoNCiAgICAgICAgICAgIC8vIEd)dCB0aGUgYXhpcyBvZiB0aGUgY3Vyc(VudCBzdGVwLg0KICAgICAgICAgICAgJGF4aXMgPSAkdGhpcy0+Z2V0X2F4aXMoJHN0ZXAsICRj$250ZXh0KTsNCg0KICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciBpdCdzIGEgZnVuY3Rp$24uDQogICAgICAgICAgICBpZiAoICRheG)zWyJheG)zI)0gPT0gI(Z1$(N0aW9uIiApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciBh$iBhcnJheSB3YXMgc(V0dXJuIGJ5IHRoZSB(dW5jdG)v$i4NCiAgICAgICAgICAgICAgICBpZiAoIG)zX2Fyc(F5KCRheG)zWyJu$2R)LXR)c3QiXSkgKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSByZXN1$HRzIHRvIHRoZSBsaXN0IG9(IGNv$nR)eHRzLg0KICAgICAgICAgICAgICAgICAgICAkY29udGV4dHMgPSBhcnJheV9tZXJnZSgkY29udGV4dHMsICRheG)zWyJu$2R)LXR)c3QiXSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgc(VzdWx0IHRvIHRoZSBsaXN0IG9(IGNv$nR)eHRzLg0KICAgICAgICAgICAgICAgICAgICAkY29udGV4dHN$XSA9ICRheG)zWyJu$2R)LXR)c3QiXTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB)$HN)DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gQ3J)YXR)IHRoZSBuYW1)IG9(IHRoZSBtZXRo$2QuDQogICAgICAgICAgICAgICAgJG1)dGhvZCA9ICJoYW5k$GVfYXhpc18iLnN0c)9yZXBsYWN)KCItIiwgI)8iLCAkYXhpc1siYXhpcyJdKTsNCg0KICAgICAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGh)IGF4aXMgaGFuZGx)ciBpcyBkZWZp$(VkLg0KICAgICAgICAgICAgICAgIG)(ICggIW1)dGhvZF9)eG)zdHMoJiR0aG)zLCAk$WV0aG9kKSApDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAvLyBEaXNw$GF5IGFuIGVyc(9yIG1)c3NhZ2UuDQogICAgICAgICAgICAgICAgICAgICR0aG)zLT5kaXNw$GF5X2Vyc(9yKCJXaG)sZSBwYXJzaW5nIGFuIFhQYXRoIGV4cHJ)c3Np$24sICIuDQogICAgICAgICAgICAgICAgICAgICAgICAidGh)IGF4aXMgXCI)c1wiIGNvdWxkIG5vdCBiZSBoYW5k$GVkLCBiZWNhdXN)IHRoaXMgIi4NCiAgICAgICAgICAgICAgICAgICAgICAgICJ2ZXJzaW9uIGRvZXMg$(90IHN1cHBvcnQgdGhpcyBheG)zLiIsICRheG)zWyJheG)zI)0pOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIFB)c(Zvc(0gYW4gYXhpcyBhY3Rp$24uDQogICAgICAgICAgICAgICAgJGNv$nR)eHRzID0gY2Fs$F91c2VyX21)dGhvZCgk$WV0aG9kLCA(JHRoaXMsICRheG)zLCAkY29udGV4dCk7DQoNCiAgICAgICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZXJ)IGFyZSBwc(VkaWNhdGVzLg0KICAgICAgICAgICAgICAgIG)(ICggY291$nQoJGF4aXN$InByZWRpY2F0ZSJdKSA+IDAgKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB)YWNoIG5vZGUgZ()0cyB0aGUgcHJ)ZG)jYXR)cy4NCiAgICAgICAgICAgICAgICAgICAgJGNv$nR)eHRzID0gJHRoaXMtP(NoZWNrX3ByZWRpY2F0ZXMoJGNv$nR)eHRzLA0KICAgICAgICAgICAgICAgICAgICAgICAgJGF4aXN$InByZWRpY2F0ZSJdKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGh)c(UgYXJ)IG1vc(Ugc3R)cHMg$GV(dC4NCiAgICAgICAgICAgIG)(ICggY291$nQoJHN0ZXBzKSA+IDAgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIENv$nRp$nV)IHRoZSB)d(FsdWF0aW9uIG9(IHRoZSBuZXh0IHN0ZXBzLg0KICAgICAgICAgICAgICAgICRu$2R)cyA9ICR0aG)zLT5)d(FsdWF0ZV9zdGVwKCRj$250ZXh0cywgJHN0ZXBzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBTYXZ)IHRoZSB($3VuZCBj$250ZXh0cy4NCiAgICAgICAgICAgICAgICAk$(9kZXMgPSAkY29udGV4dHM7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyBSZXR1c(4gdGh)IG5vZGVzIGZvdW5kLg0KICAgICAgICByZXR1c(4gJG5vZGVzOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICogRXZh$HVhdGVzIGFuIFhQYXRoIGZ1$(N0aW9uDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgZXZh$HVhdGVzIGEgZ2)2ZW4gWFBhdGggZnVuY3Rp$24gd2)0aCBpdHMgYXJndW1)$nRzIG9uIGENCiAgICAqIHNwZWNpZ()jIG5vZGUg$2YgdGh)IGRvY3VtZW50Lg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGZ1$(N0aW9uIE5h$WUg$2YgdGh)IGZ1$(N0aW9uIHRvIGJ)IGV2YWx1YXR)ZC4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRhc(d1$WVudHMgU3RyaW5nIGNv$nRhaW5p$(cgdGh)IGFyZ3VtZW50cyBiZW)uZw0KICAgICogICAgICAgICAgICBwYXNzZWQgdG8gdGh)IGZ1$(N0aW9uLg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJG5vZGUgRnVs$CBwYXRoIHRvIHRoZSBk$2N1$WVudCBu$2R)IG9uIHdoaWNoIHRoZQ0KICAgICogICAgICAgICAgICB(dW5jdG)v$iBzaG91$GQgY(UgZXZh$HVhdGVkLg0KICAgICogQHJ)dHVy$iAgICBtaXh)ZCBUaG)zIG1)dGhvZCByZXR1c(5zIHRoZSByZXN1$HQg$2YgdGh)IGV2YWx1YXRp$24g$2YNCiAgICAqICAgICAgICAgICAgdGh)IGZ1$(N0aW9uLiBEZXB)$(Rp$(cg$24gdGh)IGZ1$(N0aW9uIHRoZSB0eXB)IG9(IHRoZQ0KICAgICogICAgICAgICAgICByZXR1c(4gd(FsdWUgY2FuIGJ)IGRpZ(Z)c(VudC4NCiAgICAqIEBzZWUgICAgICAgZXZh$HVhdGUoKQ0KICAgICovDQogICAgZnVuY3Rp$24gZXZh$HVhdGVfZnVuY3Rp$24gKCAkZnVuY3Rp$24sICRhc(d1$WVudHMsICRu$2R)ICkNCiAgICB7DQogICAgICAgIC8vIFJ)$W92ZSB3aG)0ZXNwYWN)cy4NCiAgICAgICAgJGZ1$(N0aW9uICA9IHRyaW0oJGZ1$(N0aW9uKTsNCiAgICAgICAgJGFyZ3VtZW50cyA9IHRyaW0oJGFyZ3VtZW50cyk7DQoNCiAgICAgICAgLy8gQ3J)YXR)IHRoZSBuYW1)IG9(IHRoZSB(dW5jdG)v$iBoYW5k$G)uZyB(dW5jdG)v$i4NCiAgICAgICAgJG1)dGhvZCA9ICJoYW5k$GVfZnVuY3Rp$25fIi5zdHJfc(Vw$GFjZSgiLSIsICJfIiwgJGZ1$(N0aW9uKTsNCg0KICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSB(dW5jdG)v$iBoYW5k$G)uZyB(dW5jdG)v$iBpcyBhd(Fp$GFi$GUuDQogICAgICAgIG)(ICggIW1)dGhvZF9)eG)zdHMoJiR0aG)zLCAk$WV0aG9kKSApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIERpc3BsYXkgYW4gZXJy$3Ig$WVzc2FnZS4NCiAgICAgICAgICAgICR0aG)zLT5kaXNw$GF5X2Vyc(9yKCJXaG)sZSBwYXJzaW5nIGFuIFhQYXRoIGV4cHJ)c3Np$24sICIuDQogICAgICAgICAgICAgICAgInRoZSB(dW5jdG)v$iBcIiVzXCIgY291$GQg$(90IGJ)IGhh$(RsZWQsIGJ)Y2F1c2UgdGhpcyAiLg0KICAgICAgICAgICAgICAgICJ2ZXJzaW9uIGRvZXMg$(90IHN1cHBvcnQgdGhpcyB(dW5jdG)v$i4iLCAkZnVuY3Rp$24pOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gU(V0dXJuIHRoZSByZXN1$HQg$2YgdGh)IGZ1$(N0aW9uLg0KICAgICAgICByZXR1c(4gY2Fs$F91c2VyX21)dGhvZCgk$WV0aG9kLCA(JHRoaXMsICRu$2R)LCAkYXJndW1)$nRzKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIEV2YWx1YXR)cyBhIHByZWRpY2F0ZSBv$iBhIG5vZGUuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgdHJpZXMgdG8gZXZh$HVhdGUgYSBwc(VkaWNhdGUg$24gYSBnaXZ)$iBu$2R)Lg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJG5vZGUgRnVs$CBwYXRoIG9(IHRoZSBu$2R)IG9uIHdoaWNoIHRoZSBwc(VkaWNhdGUNCiAgICAqICAgICAgICAgICAgc2hvdWxkIGJ)IGV2YWx1YXR)ZC4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRwc(VkaWNhdGUgU3RyaW5nIGNv$nRhaW5p$(cgdGh)IHByZWRpY2F0ZSB)eHByZXNzaW9uDQogICAgKiAgICAgICAgICAgIHRvIGJ)IGV2YWx1YXR)ZC4NCiAgICAqIEByZXR1c(4gICAg$W)4ZWQgVGhpcyBtZXRo$2QgaXMgY2Fs$GVkIHJ)Y3Vyc2)2ZWx5LiBUaGUgZ()yc3QgY2Fs$CBzaG91$GQNCiAgICAqICAgICAgICAgICAgc(V0dXJuIGEgY(9v$GVh$iB2YWx1ZSwgd2h)dGh)ciB0aGUg$(9kZSBtYXRjaGVzIHRoZSBwc(VkaWNhdGUNCiAgICAqICAgICAgICAgICAg$3Ig$(90LiBB$nkgY2Fs$CB0$yB0aGUg$WV0aG9kIGJ)aW5nIG1hZGUgZHVyaW5nIHRoZSByZWN1cnNp$24NCiAgICAqICAgICAgICAgICAg$WF5IGFsc28gc(V0dXJuIG90aGVyIHR5cGVzIGZvciB(dXJ0aGVyIHBy$2N)c3Np$(cuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGV2YWx1YXR)X3ByZWRpY2F0ZSAoICRu$2R)LCAkcHJ)ZG)jYXR)ICkNCiAgICB7DQogICAgICAgIC8vIFN)dCB0aGUgZGV(YXVsdCBw$3NpdG)v$iBh$(QgdGh)IHR5cGUg$2YgdGh)IG9wZXJhdG9yLg0KICAgICAgICAkcG9zaXRp$24gPSAwOw0KICAgICAgICAk$3B)c(F0$3IgPSAiIjsNCg0KICAgICAgICAvLyBSdW4gdGhy$3VnaCBh$Gwg$3B)c(F0$3JzIGFuZCB0cnkgdG8gZ()uZCB0aGVtLg0KICAgICAgICB($3J)YWNoICggJHRoaXMtP(9wZXJhdG9ycyBhcyAkZXhwc(Vzc2)v$iApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgYSBw$3NpdG)v$iB3YXMgYWxyZWFkeSB($3VuZC4NCiAgICAgICAgICAgIG)(ICggJHBvc2)0aW9uIDw9IDAgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIFRyeSB0$yB(aW5kIHRoZSBvcGVyYXRvci4NCiAgICAgICAgICAgICAgICAkcG9zaXRp$24gPSAkdGhpcy0+c2Vhc(NoX3N0c()uZygkcHJ)ZG)jYXR)LCAkZXhwc(Vzc2)v$ik7DQoNCiAgICAgICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIGEg$3B)c(F0$3Igd2FzIGZvdW5kLg0KICAgICAgICAgICAgICAgIG)(ICggJHBvc2)0aW9uID4gMCApDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAvLyBTYXZ)IHRoZSBvcGVyYXRvci4NCiAgICAgICAgICAgICAgICAgICAgJG9wZXJhdG9yID0gJGV4cHJ)c3Np$247DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciBpdCdzIHRoZSB)cXVh$CBvcGVyYXRvci4NCiAgICAgICAgICAgICAgICAgICAgaWYgKCAk$3B)c(F0$3IgPT0gIj0iICkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWxz$yBs$29rIGZvciBvdGh)ciBvcGVyYXRvcnMgY29udGFp$()uZyB0aGUNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVxdWFsIHNpZ24uDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoICR0aG)zLT5zZWFyY2hfc3RyaW5nKCRwc(VkaWNhdGUsICIhPSIpID09DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKCAkcG9zaXRp$24gLSAxICkgKQ0KICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEd)dCB0aGUg$(V3IHBvc2)0aW9uLg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRw$3NpdG)v$iA9ICR0aG)zLT5zZWFyY2hfc3RyaW5nKCRwc(VkaWNhdGUsICIhPSIpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2F2ZSB0aGUg$(V3IG9wZXJhdG9yLg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRvcGVyYXRvciA9ICIhPSI7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoICR0aG)zLT5zZWFyY2hfc3RyaW5nKCRwc(VkaWNhdGUsICI8PSIpID09DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKCAkcG9zaXRp$24gLSAxICkgKQ0KICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEd)dCB0aGUg$(V3IHBvc2)0aW9uLg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRw$3NpdG)v$iA9ICR0aG)zLT5zZWFyY2hfc3RyaW5nKCRwc(VkaWNhdGUsICI8PSIpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2F2ZSB0aGUg$(V3IG9wZXJhdG9yLg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRvcGVyYXRvciA9ICI8PSI7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoICR0aG)zLT5zZWFyY2hfc3RyaW5nKCRwc(VkaWNhdGUsICI+PSIpID09DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKCAkcG9zaXRp$24gLSAxICkgKQ0KICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEd)dCB0aGUg$(V3IHBvc2)0aW9uLg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRw$3NpdG)v$iA9ICR0aG)zLT5zZWFyY2hfc3RyaW5nKCRwc(VkaWNhdGUsICI+PSIpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2F2ZSB0aGUg$(V3IG9wZXJhdG9yLg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRvcGVyYXRvciA9ICI+PSI7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSBvcGVyYXRvciBpcyBhIC0gc2)n$i4NCiAgICAgICAgaWYgKCAk$3B)c(F0$3IgPT0gIi0iICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciBpdCdzIG5vdCBhIGZ1$(N0aW9uIGNv$nRhaW5p$(cgYSAtIG)uIG)0cyBuYW1)Lg0KICAgICAgICAgICAgZ(9yZWFjaCAoICR0aG)zLT5(dW5jdG)v$nMgYXMgJGZ1$(N0aW9uICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZXJ)J3MgYSAtIHNpZ24gaW4gdGh)IGZ1$(N0aW9uIG5h$WUuDQogICAgICAgICAgICAgICAgaWYgKCB)c(VnKCItIiwgJGZ1$(N0aW9uKSApDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAvLyBHZXQgdGh)IHBvc2)0aW9uIG9(IHRoZSAtIG)uIHRoZSB(dW5jdG)v$iBuYW1)Lg0KICAgICAgICAgICAgICAgICAgICAkc2)n$iA9IHN0cnBvcygkZnVuY3Rp$24sICItIik7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gRXh0c(FjdCBhIHN1YnN0c()uZyB(c(9tIHRoZSBwc(VkaWNhdGUuDQogICAgICAgICAgICAgICAgICAgICRzdWIgPSBzdWJzdHIoJHByZWRpY2F0ZSwgJHBvc2)0aW9uIC0gJHNpZ24sDQogICAgICAgICAgICAgICAgICAgICAgICBzdHJsZW4oJGZ1$(N0aW9uKSk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciBpdCdzIHRoZSB(dW5jdG)v$i4NCiAgICAgICAgICAgICAgICAgICAgaWYgKCAkc3ViID09ICR(dW5jdG)v$iApDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERv$id0IHVzZSB0aGUg$3B)c(F0$3IuDQogICAgICAgICAgICAgICAgICAgICAgICAk$3B)c(F0$3IgPSAiIjsNCiAgICAgICAgICAgICAgICAgICAgICAgICRw$3NpdG)v$iA9IC0xOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGVsc2VpZiAoICRvcGVyYXRvciA9PSAiKiIgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBHZXQgc29tZSBzdWJzdHJp$(dzLg0KICAgICAgICAgICAgJGNoYXJhY3R)ciA9IHN1YnN0cigkcHJ)ZG)jYXR)LCAkcG9zaXRp$24gLSAxLCAxKTsNCiAgICAgICAgICAgICRhdHRyaWJ1dGUgPSBzdWJzdHIoJHByZWRpY2F0ZSwgJHBvc2)0aW9uIC0gMTEsIDExKTsNCg0KICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciBpdCdzIGFuIGF0dHJpYnV0ZSBzZWx)Y3Rp$24uDQogICAgICAgICAgICBpZiAoICggJGNoYXJhY3R)ciA9PSAiQCIgKSB8fCAoICRhdHRyaWJ1dGUgPT0gI(F0dHJpYnV0ZTo6IiApICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBE$24ndCB1c2UgdGh)IG9wZXJhdG9yLg0KICAgICAgICAgICAgICAgICRvcGVyYXRvciA9ICIiOw0KICAgICAgICAgICAgICAgICRw$3NpdG)v$iA9IC0xOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciBh$iBvcGVyYXRvciB3YXMgZ(91$(QuDQogICAgICAgIG)(ICggJHBvc2)0aW9uID4gMCApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIEd)dCB0aGUg$GV(dCBh$(QgdGh)IHJpZ2h0IHBhcnQg$2YgdGh)IGV4cHJ)c3Np$24uDQogICAgICAgICAgICAk$GV(dCAgPSBzdWJzdHIoJHByZWRpY2F0ZSwgMCwgJHBvc2)0aW9uKTsNCiAgICAgICAgICAgICRyaWdodCA9IHN1YnN0cigkcHJ)ZG)jYXR)LCAkcG9zaXRp$24gKyBzdHJsZW4oJG9wZXJhdG9yKSk7DQoNCiAgICAgICAgICAgIC8vIFJ)$W92ZSB3aG)0ZXNwYWN)cy4NCiAgICAgICAgICAgICRsZWZ0ICA9IHRyaW0oJGx)ZnQpOw0KICAgICAgICAgICAgJHJpZ2h0ID0gdHJp$Sgkc()naHQpOw0KDQogICAgICAgICAgICAvLyBFd(FsdWF0ZSB0aGUg$GV(dCBh$(QgdGh)IHJpZ2h0IHBhcnQuDQogICAgICAgICAgICAk$GV(dCAgPSAkdGhpcy0+ZXZh$HVhdGVfcHJ)ZG)jYXR)KCRu$2R)LCAk$GV(dCk7DQogICAgICAgICAgICAkc()naHQgPSAkdGhpcy0+ZXZh$HVhdGVfcHJ)ZG)jYXR)KCRu$2R)LCAkc()naHQpOw0KDQogICAgICAgICAgICAvLyBDaGVjayB0aGUga2)uZCBvZiBvcGVyYXRvci4NCiAgICAgICAgICAgIHN3aXRjaCAoICRvcGVyYXRvciApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgY2FzZSAiIG9yICI6DQogICAgICAgICAgICAgICAgICAgIC8vIFJ)dHVy$iB0aGUgdHdvIHJ)c3VsdHMgY29u$(VjdGVkIGJ5IGFuICJvciIuDQogICAgICAgICAgICAgICAgICAgIHJ)dHVy$iAoICRsZWZ0IG9yICRyaWdodCApOw0KDQogICAgICAgICAgICAgICAgY2FzZSAiIGFuZCAiOg0KICAgICAgICAgICAgICAgICAgICAvLyBSZXR1c(4gdGh)IHR3$yByZXN1$HRzIGNv$(5)Y3R)ZCBieSBh$iAiYW5kIi4NCiAgICAgICAgICAgICAgICAgICAgc(V0dXJuICggJGx)ZnQgYW5kICRyaWdodCApOw0KDQogICAgICAgICAgICAgICAgY2FzZSAiPSI6DQogICAgICAgICAgICAgICAgICAgIC8vIENv$XBhc(UgdGh)IHR3$yByZXN1$HRzLg0KICAgICAgICAgICAgICAgICAgICByZXR1c(4gKCAk$GV(dCA9PSAkc()naHQgKTsNCg0KICAgICAgICAgICAgICAgIGNhc2UgIiE9IjoNCiAgICAgICAgICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUgdHdvIHJ)c3VsdHMgYXJ)IG5vdCB)cXVh$C4NCiAgICAgICAgICAgICAgICAgICAgc(V0dXJuICggJGx)ZnQgIT0gJHJpZ2h0ICk7DQoNCiAgICAgICAgICAgICAgICBjYXN)ICI8PSI6DQogICAgICAgICAgICAgICAgICAgIC8vIENv$XBhc(UgdGh)IHR3$yByZXN1$HRzLg0KICAgICAgICAgICAgICAgICAgICByZXR1c(4gKCAk$GV(dCA8PSAkc()naHQgKTsNCg0KICAgICAgICAgICAgICAgIGNhc2UgIjwiOg0KICAgICAgICAgICAgICAgICAgICAvLyBD$21wYXJ)IHRoZSB0d28gc(VzdWx0cy4NCiAgICAgICAgICAgICAgICAgICAgc(V0dXJuICggJGx)ZnQgPCAkc()naHQgKTsNCg0KICAgICAgICAgICAgICAgIGNhc2UgIj49IjoNCiAgICAgICAgICAgICAgICAgICAgLy8gQ29tcGFyZSB0aGUgdHdvIHJ)c3VsdHMuDQogICAgICAgICAgICAgICAgICAgIHJ)dHVy$iAoICRsZWZ0ID49ICRyaWdodCApOw0KDQogICAgICAgICAgICAgICAgY2FzZSAiPiI6DQogICAgICAgICAgICAgICAgICAgIC8vIENv$XBhc(UgdGh)IHR3$yByZXN1$HRzLg0KICAgICAgICAgICAgICAgICAgICByZXR1c(4gKCAk$GV(dCA+ICRyaWdodCApOw0KDQogICAgICAgICAgICAgICAgY2FzZSAiKyI6DQogICAgICAgICAgICAgICAgICAgIC8vIFJ)dHVy$iB0aGUgc(VzdWx0IGJ5IGFkZG)uZyBv$(Ugc(VzdWx0IHRvIHRoZSBvdGh)ci4NCiAgICAgICAgICAgICAgICAgICAgc(V0dXJuICggJGx)ZnQgKyAkc()naHQgKTsNCg0KICAgICAgICAgICAgICAgIGNhc2UgIi0iOg0KICAgICAgICAgICAgICAgICAgICAvLyBSZXR1c(4gdGh)IHJ)c3VsdCBieSBkZWNyZWFzZSBv$(Ugc(VzdWx0IGJ5IHRoZSBvdGh)ci4NCiAgICAgICAgICAgICAgICAgICAgc(V0dXJuICggJGx)ZnQgLSAkc()naHQgKTsNCg0KICAgICAgICAgICAgICAgIGNhc2UgIioiOg0KICAgICAgICAgICAgICAgICAgICAvLyBSZXR1c(4gYSBtdWx0aXBsaWNhdG)v$iBvZiB0aGUgdHdvIHJ)c3VsdHMuDQogICAgICAgICAgICAgICAgICAgIHJ)dHVy$iAoICRsZWZ0ICogJHJpZ2h0ICk7DQoNCiAgICAgICAgICAgICAgICBjYXN)ICIgZG)2ICI6DQogICAgICAgICAgICAgICAgICAgIC8vIFJ)dHVy$iBhIGRpd()zaW9uIG9(IHRoZSB0d28gc(VzdWx0cy4NCiAgICAgICAgICAgICAgICAgICAgaWYgKCAkc()naHQgPT0gMCApDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERpc3BsYXkgYW4gZXJy$3Ig$WVzc2FnZS4NCiAgICAgICAgICAgICAgICAgICAgICAgICR0aG)zLT5kaXNw$GF5X2Vyc(9yKCJXaG)sZSBwYXJzaW5nIGFuIFhQYXRoICIuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgInByZWRpY2F0ZSwgYSB)cnJvciBkdWUgYSBkaXZpc2)v$iBieSB6ZXJvICIuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgI(9jY3VyZWQuIik7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXR1c(4gdGh)IHJ)c3VsdCBvZiB0aGUgZG)2aXNp$24uDQogICAgICAgICAgICAgICAgICAgICAgICByZXR1c(4gKCAk$GV(dCAvICRyaWdodCApOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KDQogICAgICAgICAgICAgICAgY2FzZSAiIG1vZCAiOg0KICAgICAgICAgICAgICAgICAgICAvLyBSZXR1c(4gYSBt$2R1$G8g$2YgdGh)IHR3$yByZXN1$HRzLg0KICAgICAgICAgICAgICAgICAgICByZXR1c(4gKCAk$GV(dCA)ICRyaWdodCApOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUgcHJ)ZG)jYXR)IG)zIGEgZnVuY3Rp$24uDQogICAgICAgIG)(ICggZXJ)ZygiXCgiLCAkcHJ)ZG)jYXR)KSApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIEd)dCB0aGUgcG9zaXRp$24g$2YgdGh)IGZpcnN0IGJyYWNrZXQuDQogICAgICAgICAgICAkc3RhcnQgPSBzdHJw$3MoJHByZWRpY2F0ZSwgIigiKTsNCiAgICAgICAgICAgICR)$(QgICA9IHN0cnBvcygkcHJ)ZG)jYXR)LCAiKSIsICRzdGFydCk7DQoNCiAgICAgICAgICAgIC8vIEd)dCB)d(VyeXRoaW5nIGJ)Z(9yZSwgY(V0d2V)$iBh$(QgYWZ0ZXIgdGh)IGJyYWNrZXRzLg0KICAgICAgICAgICAgJGJ)Z(9yZSAgPSBzdWJzdHIoJHByZWRpY2F0ZSwgMCwgJHN0YXJ0KTsNCiAgICAgICAgICAgICRiZXR3ZWVuID0gc3Vic3RyKCRwc(VkaWNhdGUsICRzdGFydCArIDEsICR)$(QgLSAkc3RhcnQgLSAxKTsNCiAgICAgICAgICAgICRhZnR)ciAgID0gc3Vic3RyKCRwc(VkaWNhdGUsICR)$(QgKyAxKTsNCg0KICAgICAgICAgICAgLy8gVHJp$SB)YWNoIHN0c()uZy4NCiAgICAgICAgICAgICRiZWZvc(UgID0gdHJp$SgkY(V($3J)KTsNCiAgICAgICAgICAgICRiZXR3ZWVuID0gdHJp$SgkY(V0d2V)$ik7DQogICAgICAgICAgICAkYWZ0ZXIgICA9IHRyaW0oJGF(dGVyKTsNCg0KICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGVyZSdzIHNv$WV0aG)uZyBhZnR)ciB0aGUgYnJhY2t)dC4NCiAgICAgICAgICAgIG)(ICggIWVtcHR5KCRhZnR)cikgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIERpc3BsYXkgYW4gZXJy$3Ig$WVzc2FnZS4NCiAgICAgICAgICAgICAgICAkdGhpcy0+ZG)zcGxheV9)cnJvcigiV2hp$GUgcGFyc2)uZyBh$iBYUGF0aCB)eHByZXNzaW9uICIuDQogICAgICAgICAgICAgICAgICAgICJ0aGVyZSB3YXMgZ(91$(QgYW4gZXJy$3IgaW4gdGh)IHByZWRpY2F0ZSBcIiVzXCIsICIuDQogICAgICAgICAgICAgICAgICAgICJiZWNhdXN)IGF(dGVyIGEgY2xvc2)uZyBic(Fja2V0IHRoZXJ)IHdhcyB($3VuZCAiLg0KICAgICAgICAgICAgICAgICAgICAic29tZXRoaW5nIHVua25vd24uIiwgc3RyX3J)cGxhY2UoJHByZWRpY2F0ZSwNCiAgICAgICAgICAgICAgICAgICAgIjxiPiIuJHByZWRpY2F0ZS4iPC9iPiIsICR0aG)zLT54cGF0aCkpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIG)0J3MgYSB(dW5jdG)v$i4NCiAgICAgICAgICAgIG)(ICggZW1wdHkoJGJ)Z(9yZSkgJiYgZW1wdHkoJGF(dGVyKSApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gRXZh$HVhdGUgdGh)IGNv$nR)$nQg$2YgdGh)IGJyYWNrZXRzLg0KICAgICAgICAgICAgICAgIHJ)dHVy$iAkdGhpcy0+ZXZh$HVhdGVfcHJ)ZG)jYXR)KCRu$2R)LCAkY(V0d2V)$ik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB)$HN)aWYgKCAkdGhpcy0+aXNfZnVuY3Rp$24oJGJ)Z(9yZSkgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIFJ)dHVy$iB0aGUgZXZh$HVhdGVkIGZ1$(N0aW9uLg0KICAgICAgICAgICAgICAgIHJ)dHVy$iAkdGhpcy0+ZXZh$HVhdGVfZnVuY3Rp$24oJGJ)Z(9yZSwgJGJ)dHd)ZW4sICRu$2R)KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBEaXNw$GF5IGFuIGVyc(9yIG1)c3NhZ2UuDQogICAgICAgICAgICAgICAgJHRoaXMtP(Rpc3BsYX)fZXJy$3IoI)doaWx)IHBhcnNp$(cgYSBwc(VkaWNhdGUgaW4gYW4gWFBhdGggIi4NCiAgICAgICAgICAgICAgICAgICAgI(V4cHJ)c3Np$24sIGEgZnVuY3Rp$24gXCI)c1wiIHdhcyB($3VuZCwgd2hpY2ggaXMg$(90ICIuDQogICAgICAgICAgICAgICAgICAgICJ5ZXQgc3VwcG9ydGVkIGJ5IHRoZSBwYXJzZXIuIiwgc3RyX3J)cGxhY2UoJGJ)Z(9yZSwNCiAgICAgICAgICAgICAgICAgICAgIjxiPiIuJGJ)Z(9yZS4iPC9iPiIsICR0aG)zLT54cGF0aCkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUgcHJ)ZG)jYXR)IG)zIGp1c3QgYSBkaWdpdC4NCiAgICAgICAgaWYgKCB)c(VnKCJeWzAtOV0rKFwuWzAtOV0rKT8kIiwgJHByZWRpY2F0ZSkgfHwNCiAgICAgICAgICAgIGVyZWcoI)5cL)swLT)dKyQiLCAkcHJ)ZG)jYXR)KSApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIFJ)dHVy$iB0aGUgd(FsdWUg$2YgdGh)IGRpZ2)0Lg0KICAgICAgICAgICAgc(V0dXJuIGRvdWJsZXZh$CgkcHJ)ZG)jYXR)KTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgaXQncyBh$iBYUGF0aCB)eHByZXNzaW9uLg0KICAgICAgICAkc(VzdWx0ID0gJHRoaXMtP(V2YWx1YXR)KCRwc(VkaWNhdGUsICRu$2R)KTsNCiAgICAgICAgaWYgKCBj$3VudCgkc(VzdWx0KSA+IDAgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBD$252ZXJ0IHRoZSBhcnJheS4NCiAgICAgICAgICAgICRyZXN1$HQgPSB)eHBs$2R)KCJ8IiwgaW1w$G9kZSgifCIsICRyZXN1$HQpKTsNCg0KICAgICAgICAgICAgLy8gR2V0IHRoZSB2YWx1ZSBvZiB0aGUgZ()yc3Qgc(VzdWx0Lg0KICAgICAgICAgICAgJHZh$HV)ID0gJHRoaXMtP(d)dF9j$250ZW50KCRyZXN1$HR$MF0pOw0KDQogICAgICAgICAgICAvLyBSZXR1c(4gdGh)IHZh$HV)Lg0KICAgICAgICAgICAgc(V0dXJuICR2YWx1ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIFJ)dHVy$iB0aGUgcHJ)ZG)jYXR)IGFzIGEgc3RyaW5nLg0KICAgICAgICByZXR1c(4gJHByZWRpY2F0ZTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIENoZWNrcyB3aGV0aGVyIGEg$(9kZSBtYXRjaGVzIHByZWRpY2F0ZXMuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgY2h)Y2tzIHdoZXRoZXIgYSBsaXN0IG9(IG5vZGVzIHBhc3N)ZCB0$yB0aG)zIG1)dGhvZCBtYXRjaA0KICAgICogYSBnaXZ)$iBsaXN0IG9(IHByZWRpY2F0ZXMuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIGFyc(F5ICRu$2R)cyBBcnJheSBvZiB(dWxsIHBhdGhzIG9(IGFs$CBu$2R)cyB0$yBiZSB0ZXN0ZWQuDQogICAgKiBAcGFyYW0gICAgIGFyc(F5ICRwc(VkaWNhdGVzIEFyc(F5IG9(IHByZWRpY2F0ZXMgdG8gdXN)Lg0KICAgICogQHJ)dHVy$iAgICBhcnJheSBUaGUgYXJyYXkgc(V0dXJuZWQgYnkgdGhpcyBtZXRo$2QgY29udGFp$nMgYSBsaXN0IG9(DQogICAgKiAgICAgICAgICAgIGFs$CBu$2R)cyBtYXRjaG)uZyB0aGUgZ2)2ZW4gcHJ)ZG)jYXR)cy4NCiAgICAqIEBzZWUgICAgICAgZXZh$HVhdGVfc3R)cCgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBjaGVja19wc(VkaWNhdGVzICggJG5vZGVzLCAkcHJ)ZG)jYXR)cyApDQogICAgew0KICAgICAgICAvLyBDc(VhdGUgYW4gZW1wdHkgc2V0IG9(IG5vZGVzLg0KICAgICAgICAkc(VzdWx0ID0gYXJyYXkoKTsNCg0KICAgICAgICAvLyBSdW4gdGhy$3VnaCBh$Gwg$(9kZXMuDQogICAgICAgIGZvc(VhY2ggKCAk$(9kZXMgYXMgJG5vZGUgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBDc(VhdGUgYSB2YXJpYWJsZSB3aGV0aGVyIHRvIGFkZCB0aG)zIG5vZGUgdG8gdGh)IG5vZGUtc2V0Lg0KICAgICAgICAgICAgJGFkZCA9IHRydWU7DQoNCiAgICAgICAgICAgIC8vIFJ1$iB0aHJvdWdoIGFs$CBwc(VkaWNhdGVzLg0KICAgICAgICAgICAgZ(9yZWFjaCAoICRwc(VkaWNhdGVzIGFzICRwc(VkaWNhdGUgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGh)IHByZWRpY2F0ZSBpcyBqdXN0IGFuIG51$WJ)ci4NCiAgICAgICAgICAgICAgICBpZiAoIGVyZWcoI)5$MC05XSskIiwgJHByZWRpY2F0ZSkgKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gRW5oYW5jZSB0aGUgcHJ)ZG)jYXR)Lg0KICAgICAgICAgICAgICAgICAgICAkcHJ)ZG)jYXR)IC49ICI9cG9zaXRp$24oKSI7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gRG8gdGh)IHByZWRpY2F0ZSBjaGVjay4NCiAgICAgICAgICAgICAgICAkY2h)Y2sgPSAkdGhpcy0+ZXZh$HVhdGVfcHJ)ZG)jYXR)KCRu$2R)LCAkcHJ)ZG)jYXR)KTsNCg0KICAgICAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgaXQncyBhIHN0c()uZy4NCiAgICAgICAgICAgICAgICBpZiAoIG)zX3N0c()uZygkY2h)Y2spICY(ICggKCAkY2h)Y2sgPT0gIiIgKSB8fA0KICAgICAgICAgICAgICAgICAgICAoICRjaGVjayA9PSAkcHJ)ZG)jYXR)ICkgKSApDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGh)IHJ)c3VsdCB0$yB(YWxzZS4NCiAgICAgICAgICAgICAgICAgICAgJGNoZWNrID0gZ(Fsc2U7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciBpdCdzIGFuIG)udGVnZXIuDQogICAgICAgICAgICAgICAgaWYgKCBpc19p$nQoJGNoZWNrKSApDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIG)0J3MgdGh)IGN1cnJ)$nQgcG9zaXRp$24uDQogICAgICAgICAgICAgICAgICAgIG)(ICggJGNoZWNrID09ICR0aG)zLT5oYW5k$GVfZnVuY3Rp$25fcG9zaXRp$24oJG5vZGUsICIiKSApDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN)dCBpdCB0$yB0cnV)Lg0KICAgICAgICAgICAgICAgICAgICAgICAgJGNoZWNrID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB)$HN)DQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN)dCBpdCB0$yB(YWxzZS4NCiAgICAgICAgICAgICAgICAgICAgICAgICRjaGVjayA9IGZh$HN)Ow0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUgcHJ)ZG)jYXR)IG)zIE9LIGZvciB0aG)zIG5vZGUuDQogICAgICAgICAgICAgICAgJGFkZCA9ICRhZGQgJiYgJGNoZWNrOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRvIGFkZCB0aG)zIG5vZGUgdG8gdGh)IG5vZGUtc2V0Lg0KICAgICAgICAgICAgaWYgKCAkYWRkICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBBZGQgdGh)IG5vZGUgdG8gdGh)IG5vZGUtc2V0Lg0KICAgICAgICAgICAgICAgICRyZXN1$HR$XSA9ICRu$2R)Ow0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8gU(V0dXJuIHRoZSBhcnJheSBvZiBu$2R)cy4NCiAgICAgICAgc(V0dXJuICRyZXN1$HQ7DQogICAgfQ0KDQogICAgLyoqDQogICAgKiBDaGVja3Mgd2h)dGh)ciBhIG5vZGUg$WF0Y2h)cyBhIG5vZGUtdGVzdC4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBjaGVja3Mgd2h)dGh)ciBhIG5vZGUgaW4gdGh)IGRvY3VtZW50IG1hdGNoZXMgYSBnaXZ)$g0KICAgICog$(9kZS10ZXN0Lg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGNv$nR)eHQgRnVs$CBwYXRoIG9(IHRoZSBu$2R)LCB3aG)jaCBzaG91$GQgY(UgdGVzdGVkDQogICAgKiAgICAgICAgICAgIGZvciBtYXRjaG)uZyB0aGUg$(9kZS10ZXN0Lg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJG5vZGVfdGVzdCBTdHJp$(cgY29udGFp$()uZyB0aGUg$(9kZS10ZXN0IGZvciB0aGUNCiAgICAqICAgICAgICAgICAg$(9kZS4NCiAgICAqIEByZXR1c(4gICAgY(9v$GVh$iBUaG)zIG1)dGhvZCByZXR1c(5zIHRydWUgaWYgdGh)IG5vZGUg$WF0Y2h)cyB0aGUNCiAgICAqICAgICAgICAgICAg$(9kZS10ZXN0LCBvdGh)cndpc2UgZ(Fsc2UuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGNoZWNrX25vZGVfdGVzdCAoICRj$250ZXh0LCAk$(9kZV90ZXN0ICkNCiAgICB7DQogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgaXQncyBhIGZ1$(N0aW9uLg0KICAgICAgICBpZiAoIGVyZWcoI)woIiwgJG5vZGVfdGVzdCkgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBHZXQgdGh)IHR5cGUg$2YgZnVuY3Rp$24gdG8gdXN)Lg0KICAgICAgICAgICAgJGZ1$(N0aW9uID0gJHRoaXMtPnByZXN0cigk$(9kZV90ZXN0LCAiKCIpOw0KDQogICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSBu$2R)IGZpdHMgdGh)IG1)dGhvZC4NCiAgICAgICAgICAgIHN3aXRjaCAoICR(dW5jdG)v$iApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgY2FzZSAi$(9kZSI6DQogICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aG)zIG5vZGUgdG8gdGh)IGxpc3Qg$2Yg$(9kZXMuDQogICAgICAgICAgICAgICAgICAgIHJ)dHVy$iB0cnV)Ow0KDQogICAgICAgICAgICAgICAgY2FzZSAidGV4dCI6DQogICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGh)IG5vZGUgaGFzIHNv$WUgdGV4dC4NCiAgICAgICAgICAgICAgICAgICAgaWYgKCAhZW1wdHkoJHRoaXMtP(5vZGVzWyRj$250ZXh0XVsidGV4dCJdKSApDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aG)zIG5vZGUgdG8gdGh)IGxpc3Qg$2Yg$(9kZXMuDQogICAgICAgICAgICAgICAgICAgICAgICByZXR1c(4gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBic(VhazsNCg0KICAgICAgICAgICAgICAgIGNhc2UgI(Nv$W1)$nQiOg0KICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSBu$2R)IGhhcyBz$21)IGNv$W1)$nQuDQogICAgICAgICAgICAgICAgICAgIG)(ICggIWVtcHR5KCR0aG)zLT5u$2R)c1skY29udGV4dF1$I(Nv$W1)$nQiXSkgKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhpcyBu$2R)IHRvIHRoZSBsaXN0IG9(IG5vZGVzLg0KICAgICAgICAgICAgICAgICAgICAgICAgc(V0dXJuIHRydWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgYnJ)YWs7DQoNCiAgICAgICAgICAgICAgICBjYXN)ICJwc(9jZXNzaW5nLW)uc3RydWN0aW9uIjoNCiAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBsaXR)c(FsIGFyZ3VtZW50Lg0KICAgICAgICAgICAgICAgICAgICAk$G)0ZXJh$CA9ICR0aG)zLT5hZnR)cnN0cigkYXhpc1si$(9kZS10ZXN0I)0sICIoIik7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gQ3V0IHRoZSBsaXR)c(FsLg0KICAgICAgICAgICAgICAgICAgICAk$G)0ZXJh$CA9IHN1YnN0cigk$G)0ZXJh$CwgMCwgc3Ry$GVuKCRsaXR)c(FsKSAtIDEpOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgYSBsaXR)c(FsIHdhcyBnaXZ)$i4NCiAgICAgICAgICAgICAgICAgICAgaWYgKCAhZW1wdHkoJGxpdGVyYWwpICkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUg$(9kZSdzIHBy$2N)c3Np$(cgaW5zdHJ1Y3Rp$25zDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBhc(Ug$WF0Y2hp$(cgdGh)IGxpdGVyYWxzIGdpd(VuLg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAkdGhpcy0+$(9kZXN$JGNv$nR)eHRdDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgWyJwc(9jZXNzaW5nLW)uc3RydWN0aW9ucyJdID09ICRsaXR)c(FsICkNCiAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhpcyBu$2R)IHRvIHRoZSBu$2R)LXN)dC4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1c(4gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB)$HN)DQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGh)IG5vZGUgaGFzIHBy$2N)c3Np$(cNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG)uc3RydWN0aW9ucy4NCiAgICAgICAgICAgICAgICAgICAgICAgIG)(ICggIWVtcHR5KCR0aG)zLT5u$2R)c1skY29udGV4dF0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB$InBy$2N)c3Np$(ctaW5zdHJ1Y3Rp$25zI)0pICkNCiAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhpcyBu$2R)IHRvIHRoZSBu$2R)LXN)dC4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1c(4gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBic(VhazsNCg0KICAgICAgICAgICAgICAgIGR)Z(F1$HQ6DQogICAgICAgICAgICAgICAgICAgIC8vIERpc3BsYXkgYW4gZXJy$3Ig$WVzc2FnZS4NCiAgICAgICAgICAgICAgICAgICAgJHRoaXMtP(Rpc3BsYX)fZXJy$3IoI)doaWx)IHBhcnNp$(cgYW4gWFBhdGggIi4NCiAgICAgICAgICAgICAgICAgICAgICAgICJ)eHByZXNzaW9uIHRoZXJ)IHdhcyB($3VuZCBh$iB1$(R)Z()uZWQgIi4NCiAgICAgICAgICAgICAgICAgICAgICAgICJ(dW5jdG)v$iBjYWxsZWQgXCI)c1wiLiIsDQogICAgICAgICAgICAgICAgICAgICAgICBzdHJfc(Vw$GFjZSgkZnVuY3Rp$24sICI8Yj4iLiR(dW5jdG)v$i4iPC9iPiIsDQogICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy0+eHBhdGgpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICB)$HN)aWYgKCAk$(9kZV90ZXN0ID09ICIqIiApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIEFkZCB0aG)zIG5vZGUgdG8gdGh)IG5vZGUtc2V0Lg0KICAgICAgICAgICAgc(V0dXJuIHRydWU7DQogICAgICAgIH0NCiAgICAgICAgZWxzZW)(ICggZXJ)ZygiX)thLXpBLVowLT)cLV9dKyIsICRu$2R)X3R)c3QpICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUg$(9kZS10ZXN0IGNh$iBiZSB(dWx(aWxsZWQuDQogICAgICAgICAgICBpZiAoICR0aG)zLT5u$2R)c1skY29udGV4dF1$I(5h$WUiXSA9PSAk$(9kZV90ZXN0ICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBBZGQgdGhpcyBu$2R)IHRvIHRoZSBu$2R)LXN)dC4NCiAgICAgICAgICAgICAgICByZXR1c(4gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICB)$HN)DQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIERpc3BsYXkgYW4gZXJy$3Ig$WVzc2FnZS4NCiAgICAgICAgICAgICR0aG)zLT5kaXNw$GF5X2Vyc(9yKCJXaG)sZSBwYXJzaW5nIHRoZSBYUGF0aCB)eHByZXNzaW9uIFwiJXNcIiAiLg0KICAgICAgICAgICAgICAgICJh$iB)$XB0eSBh$(QgdGh)c(V($3J)IG)ud(FsaWQg$(9kZS10ZXN0IGhhcyBiZWVuIGZvdW5kLiIsDQogICAgICAgICAgICAgICAgJHRoaXMtPnhwYXRoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIERv$id0IGFkZCB0aG)zIGNv$nR)eHQuDQogICAgICAgIHJ)dHVy$iB(YWxzZTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIEhh$(RsZXMgdGh)IFhQYXRoIGNoaWxkIGF4aXMuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgaGFuZGx)cyB0aGUgWFBhdGggY2hp$GQgYXhpcy4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHByaXZhdGUNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgYXJyYXkgJGF4aXMgQXJyYXkgY29udGFp$()uZyBp$(Zvc(1hdG)v$iBhY(91dCB0aGUgYXhpcy4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRj$250ZXh0IE5vZGUgZnJv$SB3aG)jaCBzdGFydG)uZyB0aGUgYXhpcyBzaG91$GQNCiAgICAqICAgICAgICAgICAgY(UgcHJvY2Vzc2VkLg0KICAgICogQHJ)dHVy$iAgICBhcnJheSBUaG)zIG1)dGhvZCByZXR1c(5zIGFuIGFyc(F5IGNv$nRhaW5p$(cgYWxsIG5vZGVzDQogICAgKiAgICAgICAgICAgIHRoYXQgd2VyZSB($3VuZCBkdXJp$(cgdGh)IGV2YWx1YXRp$24g$2YgdGh)IGdpd(VuIGF4aXMuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGhh$(RsZV9heG)zX2NoaWxkICggJGF4aXMsICRj$250ZXh0ICkNCiAgICB7DQogICAgICAgIC8vIENyZWF0ZSBh$iB)$XB0eSBu$2R)LXN)dC4NCiAgICAgICAgJG5vZGVzID0gYXJyYXkoKTsNCg0KICAgICAgICAvLyBHZXQgYSBsaXN0IG9(IGFs$CBjaG)sZHJ)$i4NCiAgICAgICAgJGNoaWxkc(VuID0gJHRoaXMtP(5vZGVzWyRj$250ZXh0XVsiY2hp$GRyZW4iXTsNCg0KICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZXJ)IGFyZSBjaG)sZHJ)$i4NCiAgICAgICAgaWYgKCAhZW1wdHkoJGNoaWxkc(VuKSApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIFJ1$iB0aHJvdWdoIGFs$CBjaG)sZHJ)$i4NCiAgICAgICAgICAgIGZvc(VhY2ggKCAkY2hp$GRyZW4gYXMgJGNoaWxkX25h$WUgPT4gJGNoaWxkX3Bvc2)0aW9uICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBSdW4gdGhy$3VnaCBh$GwgY2hp$GRzIHdpdGggdGhpcyBuYW1)Lg0KICAgICAgICAgICAgICAgIGZvciAoICRpID0gMTsgJGkgPD0gJGNoaWxkX3Bvc2)0aW9uOyAkaSsrICkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgcGF0aCBvZiB0aGUgY2hp$GQuDQogICAgICAgICAgICAgICAgICAgICRjaG)sZCA9ICRj$250ZXh0LiIvIi4kY2hp$GRf$(FtZS4iWyIuJGkuI)0iOw0KDQogICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXINCiAgICAgICAgICAgICAgICAgICAgaWYgKCAkdGhpcy0+Y2h)Y2tf$(9kZV90ZXN0KCRjaG)sZCwgJGF4aXN$I(5vZGUtdGVzdCJdKSApDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgY2hp$GQgdG8gdGh)IG5vZGUtc2V0Lg0KICAgICAgICAgICAgICAgICAgICAgICAgJG5vZGVzW10gPSAkY2hp$GQ7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyBSZXR1c(4gdGh)IG5vZGVzZXQuDQogICAgICAgIHJ)dHVy$iAk$(9kZXM7DQogICAgfQ0KDQogICAgLyoqDQogICAgKiBIYW5k$GVzIHRoZSBYUGF0aCBwYXJ)$nQgYXhpcy4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBoYW5k$GVzIHRoZSBYUGF0aCBwYXJ)$nQgYXhpcy4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHByaXZhdGUNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgYXJyYXkgJGF4aXMgQXJyYXkgY29udGFp$()uZyBp$(Zvc(1hdG)v$iBhY(91dCB0aGUgYXhpcy4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRj$250ZXh0IE5vZGUgZnJv$SB3aG)jaCBzdGFydG)uZyB0aGUgYXhpcyBzaG91$GQNCiAgICAqICAgICAgICAgICAgY(UgcHJvY2Vzc2VkLg0KICAgICogQHJ)dHVy$iAgICBhcnJheSBUaG)zIG1)dGhvZCByZXR1c(5zIGFuIGFyc(F5IGNv$nRhaW5p$(cgYWxsIG5vZGVzDQogICAgKiAgICAgICAgICAgIHRoYXQgd2VyZSB($3VuZCBkdXJp$(cgdGh)IGV2YWx1YXRp$24g$2YgdGh)IGdpd(VuIGF4aXMuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGhh$(RsZV9heG)zX3Bhc(VudCAoICRheG)zLCAkY29udGV4dCApDQogICAgew0KICAgICAgICAvLyBDc(VhdGUgYW4gZW1wdHkg$(9kZS1zZXQuDQogICAgICAgICRu$2R)cyA9IGFyc(F5KCk7DQoNCiAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUgcGFyZW50IG1hdGNoZXMgdGh)IG5vZGUtdGVzdC4NCiAgICAgICAgaWYgKCAkdGhpcy0+Y2h)Y2tf$(9kZV90ZXN0KCR0aG)zLT5u$2R)c1skY29udGV4dF1$InBhc(VudCJdLA0KICAgICAgICAgICAgJGF4aXN$I(5vZGUtdGVzdCJdKSApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIEFkZCB0aG)zIG5vZGUgdG8gdGh)IGxpc3Qg$2Yg$(9kZXMuDQogICAgICAgICAgICAk$(9kZXN$XSA9ICR0aG)zLT5u$2R)c1skY29udGV4dF1$InBhc(VudCJdOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gU(V0dXJuIHRoZSBu$2R)c2V0Lg0KICAgICAgICByZXR1c(4gJG5vZGVzOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICogSGFuZGx)cyB0aGUgWFBhdGggYXR0c()idXR)IGF4aXMuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgaGFuZGx)cyB0aGUgWFBhdGggYXR0c()idXR)IGF4aXMuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIGFyc(F5ICRheG)zIEFyc(F5IGNv$nRhaW5p$(cgaW5($3JtYXRp$24gYWJvdXQgdGh)IGF4aXMuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkY29udGV4dCBO$2R)IGZy$20gd2hpY2ggc3RhcnRp$(cgdGh)IGF4aXMgc2hvdWxkDQogICAgKiAgICAgICAgICAgIGJ)IHBy$2N)c3N)ZC4NCiAgICAqIEByZXR1c(4gICAgYXJyYXkgVGhpcyBtZXRo$2Qgc(V0dXJucyBh$iBhcnJheSBj$250YW)uaW5nIGFs$CBu$2R)cw0KICAgICogICAgICAgICAgICB0aGF0IHd)c(UgZ(91$(QgZHVyaW5nIHRoZSB)d(FsdWF0aW9uIG9(IHRoZSBnaXZ)$iBheG)zLg0KICAgICogQHN)ZSAgICAgICB)d(FsdWF0ZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBoYW5k$GVfYXhpc19hdHRyaWJ1dGUgKCAkYXhpcywgJGNv$nR)eHQgKQ0KICAgIHsNCiAgICAgICAgLy8gQ3J)YXR)IGFuIGVtcHR5IG5vZGUtc2V0Lg0KICAgICAgICAk$(9kZXMgPSBhcnJheSgpOw0KDQogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgYWxsIG5vZGVzIHNo$3VsZCBiZSBzZWx)Y3R)ZC4NCiAgICAgICAgaWYgKCAkYXhpc1si$(9kZS10ZXN0I)0gPT0gIioiICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGVyZSBhc(UgYXR0c()idXR)cy4NCiAgICAgICAgICAgIG)(ICggY291$nQoJHRoaXMtP(5vZGVzWyRj$250ZXh0XVsiYXR0c()idXR)cyJdKSA+IDAgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIFJ1$iB0aHJvdWdoIHRoZSBhdHRyaWJ1dGVzLg0KICAgICAgICAgICAgICAgIGZvc(VhY2ggKCAkdGhpcy0+$(9kZXN$JGNv$nR)eHRdWyJhdHRyaWJ1dGVzI)0gYXMNCiAgICAgICAgICAgICAgICAgICAgJGt)eSA9PiAkd(FsdWUgKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoaXMg$(9kZSB0$yB0aGUg$(9kZS1zZXQuDQogICAgICAgICAgICAgICAgICAgICRu$2R)c1tdID0gJGNv$nR)eHQuIi9hdHRyaWJ1dGU6OiIuJGt)eTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgZWxzZW)(ICggIWVtcHR5KCR0aG)zLT5u$2R)c1skY29udGV4dF1$I(F0dHJpYnV0ZXMiXQ0KICAgICAgICAgICAgWyRheG)zWyJu$2R)LXR)c3QiXV0pICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gQWRkIHRoaXMg$(9kZSB0$yB0aGUg$(9kZS1zZXQuDQogICAgICAgICAgICAk$(9kZXN$XSA9ICRj$250ZXh0LiIvYXR0c()idXR)OjoiLiRheG)zWyJu$2R)LXR)c3QiXTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIFJ)dHVy$iB0aGUg$(9kZXN)dC4NCiAgICAgICAgc(V0dXJuICRu$2R)czsNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIEhh$(RsZXMgdGh)IFhQYXRoIHN)$GYgYXhpcy4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBoYW5k$GVzIHRoZSBYUGF0aCBzZWx(IGF4aXMuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIGFyc(F5ICRheG)zIEFyc(F5IGNv$nRhaW5p$(cgaW5($3JtYXRp$24gYWJvdXQgdGh)IGF4aXMuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkY29udGV4dCBO$2R)IGZy$20gd2hpY2ggc3RhcnRp$(cgdGh)IGF4aXMgc2hvdWxkDQogICAgKiAgICAgICAgICAgIGJ)IHBy$2N)c3N)ZC4NCiAgICAqIEByZXR1c(4gICAgYXJyYXkgVGhpcyBtZXRo$2Qgc(V0dXJucyBh$iBhcnJheSBj$250YW)uaW5nIGFs$CBu$2R)cw0KICAgICogICAgICAgICAgICB0aGF0IHd)c(UgZ(91$(QgZHVyaW5nIHRoZSB)d(FsdWF0aW9uIG9(IHRoZSBnaXZ)$iBheG)zLg0KICAgICogQHN)ZSAgICAgICB)d(FsdWF0ZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBoYW5k$GVfYXhpc19zZWx(ICggJGF4aXMsICRj$250ZXh0ICkNCiAgICB7DQogICAgICAgIC8vIENyZWF0ZSBh$iB)$XB0eSBu$2R)LXN)dC4NCiAgICAgICAgJG5vZGVzID0gYXJyYXkoKTsNCg0KICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSBj$250ZXh0IG1hdGNoIHRoZSBu$2R)LXR)c3QuDQogICAgICAgIG)(ICggJHRoaXMtP(NoZWNrX25vZGVfdGVzdCgkY29udGV4dCwgJGF4aXN$I(5vZGUtdGVzdCJdKSApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIEFkZCB0aG)zIG5vZGUgdG8gdGh)IG5vZGUtc2V0Lg0KICAgICAgICAgICAgJG5vZGVzW10gPSAkY29udGV4dDsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIFJ)dHVy$iB0aGUg$(9kZXN)dC4NCiAgICAgICAgc(V0dXJuICRu$2R)czsNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIEhh$(RsZXMgdGh)IFhQYXRoIGR)c2N)$(Rh$nQgYXhpcy4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBoYW5k$GVzIHRoZSBYUGF0aCBkZXNjZW5kYW50IGF4aXMuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIGFyc(F5ICRheG)zIEFyc(F5IGNv$nRhaW5p$(cgaW5($3JtYXRp$24gYWJvdXQgdGh)IGF4aXMuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkY29udGV4dCBO$2R)IGZy$20gd2hpY2ggc3RhcnRp$(cgdGh)IGF4aXMgc2hvdWxkDQogICAgKiAgICAgICAgICAgIGJ)IHBy$2N)c3N)ZC4NCiAgICAqIEByZXR1c(4gICAgYXJyYXkgVGhpcyBtZXRo$2Qgc(V0dXJucyBh$iBhcnJheSBj$250YW)uaW5nIGFs$CBu$2R)cw0KICAgICogICAgICAgICAgICB0aGF0IHd)c(UgZ(91$(QgZHVyaW5nIHRoZSB)d(FsdWF0aW9uIG9(IHRoZSBnaXZ)$iBheG)zLg0KICAgICogQHN)ZSAgICAgICB)d(FsdWF0ZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBoYW5k$GVfYXhpc19kZXNjZW5kYW50ICggJGF4aXMsICRj$250ZXh0ICkNCiAgICB7DQogICAgICAgIC8vIENyZWF0ZSBh$iB)$XB0eSBu$2R)LXN)dC4NCiAgICAgICAgJG5vZGVzID0gYXJyYXkoKTsNCg0KICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSBjdXJyZW50IG5vZGUgaGFzIGNoaWxkc(VuLg0KICAgICAgICBpZiAoIGNvdW50KCR0aG)zLT5u$2R)c1skY29udGV4dF1$I(NoaWxkc(VuI)0pID4gMCApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIEd)dCBhIGxpc3Qg$2YgY2hp$GRyZW4uDQogICAgICAgICAgICAkY2hp$GRyZW4gPSAkdGhpcy0+$(9kZXN$JGNv$nR)eHRdWyJjaG)sZHJ)$iJdOw0KDQogICAgICAgICAgICAvLyBSdW4gdGhy$3VnaCBh$GwgY2hp$GRyZW4uDQogICAgICAgICAgICB($3J)YWNoICggJGNoaWxkc(VuIGFzICRjaG)sZF9uYW1)ID0+ICRjaG)sZF9w$3NpdG)v$iApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gUnVuIHRoc(91Z2ggYWxsIGNoaWxkc(VuIG9(IHRoaXMg$(FtZS4NCiAgICAgICAgICAgICAgICB($3IgKCAkaSA9IDE7ICRpIDw9ICRjaG)sZF9w$3NpdG)v$jsgJGkrKyApDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAvLyBDc(VhdGUgdGh)IGZ1$GwgcGF0aCB($3IgdGh)IGNoaWxkc(VuLg0KICAgICAgICAgICAgICAgICAgICAkY2hp$GQgPSAkY29udGV4dC4iLyIuJGNoaWxkX25h$WUuI)siLiRpLiJdIjsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSBjaG)sZCBtYXRjaGVzIHRoZSBu$2R)LXR)c3QuDQogICAgICAgICAgICAgICAgICAgIG)(ICggJHRoaXMtP(NoZWNrX25vZGVfdGVzdCgkY2hp$GQsICRheG)zWyJu$2R)LXR)c3QiXSkgKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGh)IGNoaWxkIHRvIHRoZSBsaXN0IG9(IG5vZGVzLg0KICAgICAgICAgICAgICAgICAgICAgICAgJG5vZGVzW10gPSAkY2hp$GQ7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAvLyBSZWN1cnN)IHRvIHRoZSBuZXh0IGx)d(VsLg0KICAgICAgICAgICAgICAgICAgICAk$(9kZXMgPSBhcnJheV9tZXJnZSgk$(9kZXMsDQogICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy0+aGFuZGx)X2F4aXNfZGVzY2VuZGFudCgkYXhpcywgJGNoaWxkKSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8gU(V0dXJuIHRoZSBu$2R)c2V0Lg0KICAgICAgICByZXR1c(4gJG5vZGVzOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICogSGFuZGx)cyB0aGUgWFBhdGggYW5jZXN0$3IgYXhpcy4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBoYW5k$GVzIHRoZSBYUGF0aCBh$(N)c3RvciBheG)zLg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBhcnJheSAkYXhpcyBBcnJheSBj$250YW)uaW5nIG)uZ(9y$WF0aW9uIGFi$3V0IHRoZSBheG)zLg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGNv$nR)eHQgT(9kZSB(c(9tIHdoaWNoIHN0YXJ0aW5nIHRoZSBheG)zIHNo$3VsZA0KICAgICogICAgICAgICAgICBiZSBwc(9jZXNzZWQuDQogICAgKiBAc(V0dXJuICAgIGFyc(F5IFRoaXMg$WV0aG9kIHJ)dHVy$nMgYW4gYXJyYXkgY29udGFp$()uZyBh$Gwg$(9kZXMNCiAgICAqICAgICAgICAgICAgdGhhdCB3ZXJ)IGZvdW5kIGR1c()uZyB0aGUgZXZh$HVhdG)v$iBvZiB0aGUgZ2)2ZW4gYXhpcy4NCiAgICAqIEBzZWUgICAgICAgZXZh$HVhdGUoKQ0KICAgICovDQogICAgZnVuY3Rp$24gaGFuZGx)X2F4aXNfYW5jZXN0$3IgKCAkYXhpcywgJGNv$nR)eHQgKQ0KICAgIHsNCiAgICAgICAgLy8gQ3J)YXR)IGFuIGVtcHR5IG5vZGUtc2V0Lg0KICAgICAgICAk$(9kZXMgPSBhcnJheSgpOw0KDQogICAgICAgIC8vIEd)dCB0aGUgcGFyZW50IG9(IHRoZSBjdXJyZW50IG5vZGUuDQogICAgICAgICRwYXJ)$nQgPSAkdGhpcy0+$(9kZXN$JGNv$nR)eHRdWyJwYXJ)$nQiXTsNCg0KICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSBwYXJ)$nQgaXNuJ3QgZW1wdHkuDQogICAgICAgIG)(ICggIWVtcHR5KCRwYXJ)$nQpICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUgcGFyZW50IG1hdGNoZXMgdGh)IG5vZGUtdGVzdC4NCiAgICAgICAgICAgIG)(ICggJHRoaXMtP(NoZWNrX25vZGVfdGVzdCgkcGFyZW50LCAkYXhpc1si$(9kZS10ZXN0I)0pICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBBZGQgdGh)IHBhc(VudCB0$yB0aGUg$G)zdCBvZiBu$2R)cy4NCiAgICAgICAgICAgICAgICAk$(9kZXN$XSA9ICRwYXJ)$nQ7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIEhh$(RsZSBh$Gwg$3RoZXIgYW5jZXN0$3JzLg0KICAgICAgICAgICAgJG5vZGVzID0gYXJyYX)f$WVyZ2UoJG5vZGVzLA0KICAgICAgICAgICAgICAgICR0aG)zLT5oYW5k$GVfYXhpc19h$(N)c3RvcigkYXhpcywgJHBhc(VudCkpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gU(V0dXJuIHRoZSBu$2R)c2V0Lg0KICAgICAgICByZXR1c(4gJG5vZGVzOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICogSGFuZGx)cyB0aGUgWFBhdGgg$(FtZXNwYWN)IGF4aXMuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgaGFuZGx)cyB0aGUgWFBhdGgg$(FtZXNwYWN)IGF4aXMuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIGFyc(F5ICRheG)zIEFyc(F5IGNv$nRhaW5p$(cgaW5($3JtYXRp$24gYWJvdXQgdGh)IGF4aXMuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkY29udGV4dCBO$2R)IGZy$20gd2hpY2ggc3RhcnRp$(cgdGh)IGF4aXMgc2hvdWxkDQogICAgKiAgICAgICAgICAgIGJ)IHBy$2N)c3N)ZC4NCiAgICAqIEByZXR1c(4gICAgYXJyYXkgVGhpcyBtZXRo$2Qgc(V0dXJucyBh$iBhcnJheSBj$250YW)uaW5nIGFs$CBu$2R)cw0KICAgICogICAgICAgICAgICB0aGF0IHd)c(UgZ(91$(QgZHVyaW5nIHRoZSB)d(FsdWF0aW9uIG9(IHRoZSBnaXZ)$iBheG)zLg0KICAgICogQHN)ZSAgICAgICB)d(FsdWF0ZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBoYW5k$GVfYXhpc19uYW1)c3BhY2UgKCAkYXhpcywgJGNv$nR)eHQgKQ0KICAgIHsNCiAgICAgICAgLy8gQ3J)YXR)IGFuIGVtcHR5IG5vZGUtc2V0Lg0KICAgICAgICAk$(9kZXMgPSBhcnJheSgpOw0KDQogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgYWxsIG5vZGVzIHNo$3VsZCBiZSBzZWx)Y3R)ZC4NCiAgICAgICAgaWYgKCAhZW1wdHkoJHRoaXMtP(5vZGVzWyRj$250ZXh0XVsi$(FtZXNwYWN)I)0pICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gQWRkIHRoaXMg$(9kZSB0$yB0aGUg$(9kZS1zZXQuDQogICAgICAgICAgICAk$(9kZXN$XSA9ICRj$250ZXh0Ow0KICAgICAgICB9DQoNCiAgICAgICAgLy8gU(V0dXJuIHRoZSBu$2R)c2V0Lg0KICAgICAgICByZXR1c(4gJG5vZGVzOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICogSGFuZGx)cyB0aGUgWFBhdGggZ(9s$G93aW5nIGF4aXMuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgaGFuZGx)cyB0aGUgWFBhdGggZ(9s$G93aW5nIGF4aXMuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIGFyc(F5ICRheG)zIEFyc(F5IGNv$nRhaW5p$(cgaW5($3JtYXRp$24gYWJvdXQgdGh)IGF4aXMuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkY29udGV4dCBO$2R)IGZy$20gd2hpY2ggc3RhcnRp$(cgdGh)IGF4aXMgc2hvdWxkDQogICAgKiAgICAgICAgICAgIGJ)IHBy$2N)c3N)ZC4NCiAgICAqIEByZXR1c(4gICAgYXJyYXkgVGhpcyBtZXRo$2Qgc(V0dXJucyBh$iBhcnJheSBj$250YW)uaW5nIGFs$CBu$2R)cw0KICAgICogICAgICAgICAgICB0aGF0IHd)c(UgZ(91$(QgZHVyaW5nIHRoZSB)d(FsdWF0aW9uIG9(IHRoZSBnaXZ)$iBheG)zLg0KICAgICogQHN)ZSAgICAgICB)d(FsdWF0ZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBoYW5k$GVfYXhpc19($2xs$3dp$(cgKCAkYXhpcywgJGNv$nR)eHQgKQ0KICAgIHsNCiAgICAgICAgLy8gQ3J)YXR)IGFuIGVtcHR5IG5vZGUtc2V0Lg0KICAgICAgICAk$(9kZXMgPSBhcnJheSgpOw0KDQogICAgICAgIC8vIEd)dCB0aGUgY3Vyc(VudCBk$2N1$WVudCBw$3NpdG)v$i4NCiAgICAgICAgJHBvc2)0aW9uID0gJHRoaXMtP(5vZGVzWyRj$250ZXh0XVsiZG9jdW1)$nQtcG9zaXRp$24iXTsNCg0KICAgICAgICAvLyBDc(VhdGUgYSB($GFnLCB3aGV0aGVyIHd)IGFsc(VhZHkgZ(91$(QgdGh)IGNv$nR)eHQg$(9kZS4NCiAgICAgICAgJGZvdW5kID0gZ(Fsc2U7DQoNCiAgICAgICAgLy8gUnVuIHRoc(91Z2ggYWxsIG5vZGVzIG9(IHRoZSBk$2N1$WVudC4NCiAgICAgICAgZ(9yZWFjaCAoICR0aG)zLT5u$2R)cyBhcyAk$(9kZSA9PiAkZGF0YSApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGh)IGNv$nR)eHQg$(9kZSBoYXMgYWxyZWFkeSBiZWVuIGZvdW5kLg0KICAgICAgICAgICAgaWYgKCAkZ(91$(QgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGh)IHBvc2)0aW9uIG)zIGNvcnJ)Y3QuDQogICAgICAgICAgICAgICAgaWYgKCAkdGhpcy0+$(9kZXN$JG5vZGVdWyJk$2N1$WVudC1w$3NpdG)v$iJdID09ICRw$3NpdG)v$iApDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSBu$2R)IGZpdHMgdGh)IG5vZGUtdGVzdC4NCiAgICAgICAgICAgICAgICAgICAgaWYgKCAkdGhpcy0+Y2h)Y2tf$(9kZV90ZXN0KCRu$2R)LCAkYXhpc1si$(9kZS10ZXN0I)0pICkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBu$2R)IHRvIHRoZSBsaXN0IG9(IG5vZGVzLg0KICAgICAgICAgICAgICAgICAgICAgICAgJG5vZGVzW10gPSAk$(9kZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aG)zIG)zIHRoZSBj$250ZXh0IG5vZGUuDQogICAgICAgICAgICBpZiAoICRu$2R)ID09ICRj$250ZXh0ICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBBZnR)ciB0aG)zIHd)J2xsIGxv$2sgZ(9yIG1vc(Ug$(9kZXMuDQogICAgICAgICAgICAgICAgJGZvdW5kID0gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vIFJ)dHVy$iB0aGUg$(9kZXN)dC4NCiAgICAgICAgc(V0dXJuICRu$2R)czsNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIEhh$(RsZXMgdGh)IFhQYXRoIHByZWN)ZG)uZyBheG)zLg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIGhh$(RsZXMgdGh)IFhQYXRoIHByZWN)ZG)uZyBheG)zLg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBhcnJheSAkYXhpcyBBcnJheSBj$250YW)uaW5nIG)uZ(9y$WF0aW9uIGFi$3V0IHRoZSBheG)zLg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGNv$nR)eHQgT(9kZSB(c(9tIHdoaWNoIHN0YXJ0aW5nIHRoZSBheG)zIHNo$3VsZA0KICAgICogICAgICAgICAgICBiZSBwc(9jZXNzZWQuDQogICAgKiBAc(V0dXJuICAgIGFyc(F5IFRoaXMg$WV0aG9kIHJ)dHVy$nMgYW4gYXJyYXkgY29udGFp$()uZyBh$Gwg$(9kZXMNCiAgICAqICAgICAgICAgICAgdGhhdCB3ZXJ)IGZvdW5kIGR1c()uZyB0aGUgZXZh$HVhdG)v$iBvZiB0aGUgZ2)2ZW4gYXhpcy4NCiAgICAqIEBzZWUgICAgICAgZXZh$HVhdGUoKQ0KICAgICovDQogICAgZnVuY3Rp$24gaGFuZGx)X2F4aXNfcHJ)Y2VkaW5nICggJGF4aXMsICRj$250ZXh0ICkNCiAgICB7DQogICAgICAgIC8vIENyZWF0ZSBh$iB)$XB0eSBu$2R)LXN)dC4NCiAgICAgICAgJG5vZGVzID0gYXJyYXkoKTsNCg0KICAgICAgICAvLyBHZXQgdGh)IGN1cnJ)$nQgZG9jdW1)$nQgcG9zaXRp$24uDQogICAgICAgICRw$3NpdG)v$iA9ICR0aG)zLT5u$2R)c1skY29udGV4dF1$I(RvY3VtZW50LXBvc2)0aW9uI)07DQoNCiAgICAgICAgLy8gQ3J)YXR)IGEgZ(xhZywgd2h)dGh)ciB3ZSBh$HJ)YWR5IGZvdW5kIHRoZSBj$250ZXh0IG5vZGUuDQogICAgICAgICR($3VuZCA9IHRydWU7DQoNCiAgICAgICAgLy8gUnVuIHRoc(91Z2ggYWxsIG5vZGVzIG9(IHRoZSBk$2N1$WVudC4NCiAgICAgICAgZ(9yZWFjaCAoICR0aG)zLT5u$2R)cyBhcyAk$(9kZSA9PiAkZGF0YSApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGhpcyBpcyB0aGUgY29udGV4dCBu$2R)Lg0KICAgICAgICAgICAgaWYgKCAk$(9kZSA9PSAkY29udGV4dCApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gQWZ0ZXIgdGhpcyB3ZSB3$24ndCBs$29rIGZvciBt$3J)IG5vZGVzLg0KICAgICAgICAgICAgICAgICR($3VuZCA9IGZh$HN)Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSBj$250ZXh0IG5vZGUgaGFzIGFsc(VhZHkgY(V)$iB($3VuZC4NCiAgICAgICAgICAgIG)(ICggJGZvdW5kICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSBw$3NpdG)v$iBpcyBj$3JyZWN0Lg0KICAgICAgICAgICAgICAgIG)(ICggJHRoaXMtP(5vZGVzWyRu$2R)XVsiZG9jdW1)$nQtcG9zaXRp$24iXSA9PSAkcG9zaXRp$24gKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUg$(9kZSB(aXRzIHRoZSBu$2R)LXR)c3QuDQogICAgICAgICAgICAgICAgICAgIG)(ICggJHRoaXMtP(NoZWNrX25vZGVfdGVzdCgk$(9kZSwgJGF4aXN$I(5vZGUtdGVzdCJdKSApDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUg$(9kZSB0$yB0aGUg$G)zdCBvZiBu$2R)cy4NCiAgICAgICAgICAgICAgICAgICAgICAgICRu$2R)c1tdID0gJG5vZGU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyBSZXR1c(4gdGh)IG5vZGVzZXQuDQogICAgICAgIHJ)dHVy$iAk$(9kZXM7DQogICAgfQ0KDQogICAgLyoqDQogICAgKiBIYW5k$GVzIHRoZSBYUGF0aCB($2xs$3dp$(ctc2)i$G)uZyBheG)zLg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIGhh$(RsZXMgdGh)IFhQYXRoIGZv$Gxvd2)uZy1zaWJsaW5nIGF4aXMuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIGFyc(F5ICRheG)zIEFyc(F5IGNv$nRhaW5p$(cgaW5($3JtYXRp$24gYWJvdXQgdGh)IGF4aXMuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkY29udGV4dCBO$2R)IGZy$20gd2hpY2ggc3RhcnRp$(cgdGh)IGF4aXMgc2hvdWxkDQogICAgKiAgICAgICAgICAgIGJ)IHBy$2N)c3N)ZC4NCiAgICAqIEByZXR1c(4gICAgYXJyYXkgVGhpcyBtZXRo$2Qgc(V0dXJucyBh$iBhcnJheSBj$250YW)uaW5nIGFs$CBu$2R)cw0KICAgICogICAgICAgICAgICB0aGF0IHd)c(UgZ(91$(QgZHVyaW5nIHRoZSB)d(FsdWF0aW9uIG9(IHRoZSBnaXZ)$iBheG)zLg0KICAgICogQHN)ZSAgICAgICB)d(FsdWF0ZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBoYW5k$GVfYXhpc19($2xs$3dp$(dfc2)i$G)uZyAoICRheG)zLCAkY29udGV4dCApDQogICAgew0KICAgICAgICAvLyBDc(VhdGUgYW4gZW1wdHkg$(9kZS1zZXQuDQogICAgICAgICRu$2R)cyA9IGFyc(F5KCk7DQoNCiAgICAgICAgLy8gR2V0IGFs$CBjaG)sZHJ)$iB(c(9tIHRoZSBwYXJ)$nQuDQogICAgICAgICRzaWJsaW5ncyA9ICR0aG)zLT5oYW5k$GVfYXhpc19jaG)sZCgkYXhpcywNCiAgICAgICAgICAgICR0aG)zLT5u$2R)c1skY29udGV4dF1$InBhc(VudCJdKTsNCg0KICAgICAgICAvLyBDc(VhdGUgYSB($GFnIHdoZXRoZXIgdGh)IGNv$nR)eHQg$(9kZSB3YXMgYWxyZWFkeSB($3VuZC4NCiAgICAgICAgJGZvdW5kID0gZ(Fsc2U7DQoNCiAgICAgICAgLy8gUnVuIHRoc(91Z2ggYWxsIHNpY(xp$(dzLg0KICAgICAgICB($3J)YWNoICggJHNpY(xp$(dzIGFzICRzaWJsaW5nICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUgY29udGV4dCBu$2R)IHdhcyBh$HJ)YWR5IGZvdW5kLg0KICAgICAgICAgICAgaWYgKCAkZ(91$(QgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGh)IHNpY(xp$(cgaXMgYSByZWFsIHNpY(xp$(cuDQogICAgICAgICAgICAgICAgaWYgKCAkdGhpcy0+$(9kZXN$JHNpY(xp$(ddWyJuYW1)I)0gPT0NCiAgICAgICAgICAgICAgICAgICAgJHRoaXMtP(5vZGVzWyRj$250ZXh0XVsi$(FtZSJdICkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGh)IHNpY(xp$(cg$WF0Y2h)cyB0aGUg$(9kZS10ZXN0Lg0KICAgICAgICAgICAgICAgICAgICBpZiAoICR0aG)zLT5jaGVja19u$2R)X3R)c3QoJHNpY(xp$(csICRheG)zWyJu$2R)LXR)c3QiXSkgKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGh)IHNpY(xp$(cgdG8gdGh)IGxpc3Qg$2Yg$(9kZXMuDQogICAgICAgICAgICAgICAgICAgICAgICAk$(9kZXN$XSA9ICRzaWJsaW5nOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoaXMgaXMgdGh)IGNv$nR)eHQg$(9kZS4NCiAgICAgICAgICAgIG)(ICggJHNpY(xp$(cgPT0gJGNv$nR)eHQgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIENv$nRp$nV)IGxv$2tp$(cgZ(9yIG90aGVyIHNpY(xp$(dzLg0KICAgICAgICAgICAgICAgICR($3VuZCA9IHRydWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyBSZXR1c(4gdGh)IG5vZGVzZXQuDQogICAgICAgIHJ)dHVy$iAk$(9kZXM7DQogICAgfQ0KDQogICAgLyoqDQogICAgKiBIYW5k$GVzIHRoZSBYUGF0aCBwc(VjZWRp$(ctc2)i$G)uZyBheG)zLg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIGhh$(RsZXMgdGh)IFhQYXRoIHByZWN)ZG)uZy1zaWJsaW5nIGF4aXMuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIGFyc(F5ICRheG)zIEFyc(F5IGNv$nRhaW5p$(cgaW5($3JtYXRp$24gYWJvdXQgdGh)IGF4aXMuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkY29udGV4dCBO$2R)IGZy$20gd2hpY2ggc3RhcnRp$(cgdGh)IGF4aXMgc2hvdWxkDQogICAgKiAgICAgICAgICAgIGJ)IHBy$2N)c3N)ZC4NCiAgICAqIEByZXR1c(4gICAgYXJyYXkgVGhpcyBtZXRo$2Qgc(V0dXJucyBh$iBhcnJheSBj$250YW)uaW5nIGFs$CBu$2R)cw0KICAgICogICAgICAgICAgICB0aGF0IHd)c(UgZ(91$(QgZHVyaW5nIHRoZSB)d(FsdWF0aW9uIG9(IHRoZSBnaXZ)$iBheG)zLg0KICAgICogQHN)ZSAgICAgICB)d(FsdWF0ZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBoYW5k$GVfYXhpc19wc(VjZWRp$(dfc2)i$G)uZyAoICRheG)zLCAkY29udGV4dCApDQogICAgew0KICAgICAgICAvLyBDc(VhdGUgYW4gZW1wdHkg$(9kZS1zZXQuDQogICAgICAgICRu$2R)cyA9IGFyc(F5KCk7DQoNCiAgICAgICAgLy8gR2V0IGFs$CBjaG)sZHJ)$iB(c(9tIHRoZSBwYXJ)$nQuDQogICAgICAgICRzaWJsaW5ncyA9ICR0aG)zLT5oYW5k$GVfYXhpc19jaG)sZCgkYXhpcywNCiAgICAgICAgICAgICR0aG)zLT5u$2R)c1skY29udGV4dF1$InBhc(VudCJdKTsNCg0KICAgICAgICAvLyBDc(VhdGUgYSB($GFnIHdoZXRoZXIgdGh)IGNv$nR)eHQg$(9kZSB3YXMgYWxyZWFkeSB($3VuZC4NCiAgICAgICAgJGZvdW5kID0gdHJ1ZTsNCg0KICAgICAgICAvLyBSdW4gdGhy$3VnaCBh$Gwgc2)i$G)uZ3MuDQogICAgICAgIGZvc(VhY2ggKCAkc2)i$G)uZ3MgYXMgJHNpY(xp$(cgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoaXMgaXMgdGh)IGNv$nR)eHQg$(9kZS4NCiAgICAgICAgICAgIG)(ICggJHNpY(xp$(cgPT0gJGNv$nR)eHQgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIERv$id0IGNv$nRp$nV)IGxv$2tp$(cgZ(9yIG90aGVyIHNpY(xp$(dzLg0KICAgICAgICAgICAgICAgICR($3VuZCA9IGZh$HN)Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSBj$250ZXh0IG5vZGUgd2FzIGFsc(VhZHkgZ(91$(QuDQogICAgICAgICAgICBpZiAoICR($3VuZCApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUgc2)i$G)uZyBpcyBhIHJ)YWwgc2)i$G)uZy4NCiAgICAgICAgICAgICAgICBpZiAoICR0aG)zLT5u$2R)c1skc2)i$G)uZ11$I(5h$WUiXSA9PQ0KICAgICAgICAgICAgICAgICAgICAkdGhpcy0+$(9kZXN$JGNv$nR)eHRdWyJuYW1)I)0gKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUgc2)i$G)uZyBtYXRjaGVzIHRoZSBu$2R)LXR)c3QuDQogICAgICAgICAgICAgICAgICAgIG)(ICggJHRoaXMtP(NoZWNrX25vZGVfdGVzdCgkc2)i$G)uZywgJGF4aXN$I(5vZGUtdGVzdCJdKSApDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgc2)i$G)uZyB0$yB0aGUg$G)zdCBvZiBu$2R)cy4NCiAgICAgICAgICAgICAgICAgICAgICAgICRu$2R)c1tdID0gJHNpY(xp$(c7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyBSZXR1c(4gdGh)IG5vZGVzZXQuDQogICAgICAgIHJ)dHVy$iAk$(9kZXM7DQogICAgfQ0KDQogICAgLyoqDQogICAgKiBIYW5k$GVzIHRoZSBYUGF0aCBkZXNjZW5kYW50LW9yLXN)$GYgYXhpcy4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBoYW5k$GVzIHRoZSBYUGF0aCBkZXNjZW5kYW50LW9yLXN)$GYgYXhpcy4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHByaXZhdGUNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgYXJyYXkgJGF4aXMgQXJyYXkgY29udGFp$()uZyBp$(Zvc(1hdG)v$iBhY(91dCB0aGUgYXhpcy4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRj$250ZXh0IE5vZGUgZnJv$SB3aG)jaCBzdGFydG)uZyB0aGUgYXhpcyBzaG91$GQNCiAgICAqICAgICAgICAgICAgY(UgcHJvY2Vzc2VkLg0KICAgICogQHJ)dHVy$iAgICBhcnJheSBUaG)zIG1)dGhvZCByZXR1c(5zIGFuIGFyc(F5IGNv$nRhaW5p$(cgYWxsIG5vZGVzDQogICAgKiAgICAgICAgICAgIHRoYXQgd2VyZSB($3VuZCBkdXJp$(cgdGh)IGV2YWx1YXRp$24g$2YgdGh)IGdpd(VuIGF4aXMuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGhh$(RsZV9heG)zX2R)c2N)$(Rh$nRf$3Jfc2VsZiAoICRheG)zLCAkY29udGV4dCApDQogICAgew0KICAgICAgICAvLyBDc(VhdGUgYW4gZW1wdHkg$(9kZS1zZXQuDQogICAgICAgICRu$2R)cyA9IGFyc(F5KCk7DQoNCiAgICAgICAgLy8gU(VhZCB0aGUg$(9kZXMuDQogICAgICAgICRu$2R)cyA9IGFyc(F5X21)c(d)KA0KICAgICAgICAgICAgJHRoaXMtP(hh$(RsZV9heG)zX2R)c2N)$(Rh$nQoJGF4aXMsICRj$250ZXh0KSwNCiAgICAgICAgICAgICR0aG)zLT5oYW5k$GVfYXhpc19zZWx(KCRheG)zLCAkY29udGV4dCkpOw0KDQogICAgICAgIC8vIFJ)dHVy$iB0aGUg$(9kZXN)dC4NCiAgICAgICAgc(V0dXJuICRu$2R)czsNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIEhh$(RsZXMgdGh)IFhQYXRoIGFuY2VzdG9yLW9yLXN)$GYgYXhpcy4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBoYW5k$GVzIHRoZSBYUGF0aCBh$(N)c3Rvci1vci1zZWx(IGF4aXMuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIGFyc(F5ICRheG)zIEFyc(F5IGNv$nRhaW5p$(cgaW5($3JtYXRp$24gYWJvdXQgdGh)IGF4aXMuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkY29udGV4dCBO$2R)IGZy$20gd2hpY2ggc3RhcnRp$(cgdGh)IGF4aXMgc2hvdWxkDQogICAgKiAgICAgICAgICAgIGJ)IHBy$2N)c3N)ZC4NCiAgICAqIEByZXR1c(4gICAgYXJyYXkgVGhpcyBtZXRo$2Qgc(V0dXJucyBh$iBhcnJheSBj$250YW)uaW5nIGFs$CBu$2R)cw0KICAgICogICAgICAgICAgICB0aGF0IHd)c(UgZ(91$(QgZHVyaW5nIHRoZSB)d(FsdWF0aW9uIG9(IHRoZSBnaXZ)$iBheG)zLg0KICAgICogQHN)ZSAgICAgICB)d(FsdWF0ZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBoYW5k$GVfYXhpc19h$(N)c3Rvc)9vc)9zZWx(ICggJGF4aXMsICRj$250ZXh0ICkNCiAgICB7DQogICAgICAgIC8vIENyZWF0ZSBh$iB)$XB0eSBu$2R)LXN)dC4NCiAgICAgICAgJG5vZGVzID0gYXJyYXkoKTsNCg0KICAgICAgICAvLyBSZWFkIHRoZSBu$2R)cy4NCiAgICAgICAgJG5vZGVzID0gYXJyYX)f$WVyZ2UoDQogICAgICAgICAgICAkdGhpcy0+aGFuZGx)X2F4aXNfYW5jZXN0$3IoJGF4aXMsICRj$250ZXh0KSwNCiAgICAgICAgICAgICR0aG)zLT5oYW5k$GVfYXhpc19zZWx(KCRheG)zLCAkY29udGV4dCkpOw0KDQogICAgICAgIC8vIFJ)dHVy$iB0aGUg$(9kZXN)dC4NCiAgICAgICAgc(V0dXJuICRu$2R)czsNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIEhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIGxhc3QuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgaGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24g$GFzdC4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHByaXZhdGUNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRu$2R)IEZ1$GwgcGF0aCBvZiB0aGUg$(9kZSBv$iB3aG)jaCB0aGUgZnVuY3Rp$24NCiAgICAqICAgICAgICAgICAgc2hvdWxkIGJ)IHBy$2N)c3N)ZC4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRhc(d1$WVudHMgU3RyaW5nIGNv$nRhaW5p$(cgdGh)IGFyZ3VtZW50cyB0aGF0IHd)c(UNCiAgICAqICAgICAgICAgICAgcGFzc2VkIHRvIHRoZSB(dW5jdG)v$i4NCiAgICAqIEByZXR1c(4gICAg$W)4ZWQgRGVwZW5kaW5nIG9uIHRoZSB0eXB)IG9(IGZ1$(N0aW9uIGJ)aW5nIHBy$2N)c3N)ZCB0aG)zDQogICAgKiAgICAgICAgICAgIG1)dGhvZCByZXR1c(5zIGRpZ(Z)c(VudCB0eXB)cy4NCiAgICAqIEBzZWUgICAgICAgZXZh$HVhdGUoKQ0KICAgICovDQogICAgZnVuY3Rp$24gaGFuZGx)X2Z1$(N0aW9uX2xhc3QgKCAk$(9kZSwgJGFyZ3VtZW50cyApDQogICAgew0KICAgICAgICAvLyBDYWxjdWxhdGUgdGh)IHNpe(Ug$2YgdGh)IGNv$nR)eHQuDQogICAgICAgICRwYXJ)$nQgICA9ICR0aG)zLT5u$2R)c1sk$(9kZV1$InBhc(VudCJdOw0KICAgICAgICAkY2hp$GRyZW4gPSAkdGhpcy0+$(9kZXN$JHBhc(VudF1$I(NoaWxkc(VuI)07DQogICAgICAgICRj$250ZXh0ICA9ICRjaG)sZHJ)$)skdGhpcy0+$(9kZXN$JG5vZGVdWyJuYW1)I)1dOw0KDQogICAgICAgIC8vIFJ)dHVy$iB0aGUgc2)6ZS4NCiAgICAgICAgc(V0dXJuICRj$250ZXh0Ow0KICAgIH0NCg0KICAgIC8qKg0KICAgICogSGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24gcG9zaXRp$24uDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgaGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24gcG9zaXRp$24uDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAk$(9kZSBGdWxsIHBhdGgg$2YgdGh)IG5vZGUg$24gd2hpY2ggdGh)IGZ1$(N0aW9uDQogICAgKiAgICAgICAgICAgIHNo$3VsZCBiZSBwc(9jZXNzZWQuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkYXJndW1)$nRzIFN0c()uZyBj$250YW)uaW5nIHRoZSBhc(d1$WVudHMgdGhhdCB3ZXJ)DQogICAgKiAgICAgICAgICAgIHBhc3N)ZCB0$yB0aGUgZnVuY3Rp$24uDQogICAgKiBAc(V0dXJuICAgIG1peGVkIER)cGVuZG)uZyBv$iB0aGUgdH)wZSBvZiB(dW5jdG)v$iBiZW)uZyBwc(9jZXNzZWQgdGhpcw0KICAgICogICAgICAgICAgICBtZXRo$2Qgc(V0dXJucyBkaWZ(ZXJ)$nQgdH)wZXMuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGhh$(RsZV9(dW5jdG)v$)9w$3NpdG)v$iAoICRu$2R)LCAkYXJndW1)$nRzICkNCiAgICB7DQogICAgICAgIC8vIHJ)dHVy$iB0aGUgY29udGV4dC1w$3NpdG)v$i4NCiAgICAgICAgc(V0dXJuICR0aG)zLT5u$2R)c1sk$(9kZV1$I(Nv$nR)eHQtcG9zaXRp$24iXTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIEhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIGNvdW50Lg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIGhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIGNvdW50Lg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJG5vZGUgRnVs$CBwYXRoIG9(IHRoZSBu$2R)IG9uIHdoaWNoIHRoZSB(dW5jdG)v$g0KICAgICogICAgICAgICAgICBzaG91$GQgY(UgcHJvY2Vzc2VkLg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGFyZ3VtZW50cyBTdHJp$(cgY29udGFp$()uZyB0aGUgYXJndW1)$nRzIHRoYXQgd2VyZQ0KICAgICogICAgICAgICAgICBwYXNzZWQgdG8gdGh)IGZ1$(N0aW9uLg0KICAgICogQHJ)dHVy$iAgICBtaXh)ZCBEZXB)$(Rp$(cg$24gdGh)IHR5cGUg$2YgZnVuY3Rp$24gY(Vp$(cgcHJvY2Vzc2VkIHRoaXMNCiAgICAqICAgICAgICAgICAg$WV0aG9kIHJ)dHVy$nMgZG)(Z(VyZW50IHR5cGVzLg0KICAgICogQHN)ZSAgICAgICB)d(FsdWF0ZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBoYW5k$GVfZnVuY3Rp$25fY291$nQgKCAk$(9kZSwgJGFyZ3VtZW50cyApDQogICAgew0KICAgICAgICAvLyBFd(FsdWF0ZSB0aGUgYXJndW1)$nQg$2YgdGh)IG1)dGhvZCBhcyBh$iBYUGF0aCBh$(Qgc(V0dXJuDQogICAgICAgIC8vIHRoZSBudW1iZXIg$2Ygc(VzdWx0cy4NCiAgICAgICAgc(V0dXJuIGNvdW50KCR0aG)zLT5)d(FsdWF0ZSgkYXJndW1)$nRzLCAk$(9kZSkpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICogSGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24gaWQuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgaGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24gaWQuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAk$(9kZSBGdWxsIHBhdGgg$2YgdGh)IG5vZGUg$24gd2hpY2ggdGh)IGZ1$(N0aW9uDQogICAgKiAgICAgICAgICAgIHNo$3VsZCBiZSBwc(9jZXNzZWQuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkYXJndW1)$nRzIFN0c()uZyBj$250YW)uaW5nIHRoZSBhc(d1$WVudHMgdGhhdCB3ZXJ)DQogICAgKiAgICAgICAgICAgIHBhc3N)ZCB0$yB0aGUgZnVuY3Rp$24uDQogICAgKiBAc(V0dXJuICAgIG1peGVkIER)cGVuZG)uZyBv$iB0aGUgdH)wZSBvZiB(dW5jdG)v$iBiZW)uZyBwc(9jZXNzZWQgdGhpcw0KICAgICogICAgICAgICAgICBtZXRo$2Qgc(V0dXJucyBkaWZ(ZXJ)$nQgdH)wZXMuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGhh$(RsZV9(dW5jdG)v$)9pZCAoICRu$2R)LCAkYXJndW1)$nRzICkNCiAgICB7DQogICAgICAgIC8vIFRyaW0gdGh)IGFyZ3VtZW50cy4NCiAgICAgICAgJGFyZ3VtZW50cyA9IHRyaW0oJGFyZ3VtZW50cyk7DQoNCiAgICAgICAgLy8gT(93IHNw$G)0IHRoZSBhc(d1$WVudHMuDQogICAgICAgICRhc(d1$WVudHMgPSB)eHBs$2R)KCIgIiwgJGFyZ3VtZW50cyk7DQoNCiAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)cg0KDQogICAgICAgIC8vIENyZWF0ZSBhIGxpc3Qg$2Yg$(9kZXMuDQogICAgICAgICRu$2R)cyA9IGFyc(F5KCk7DQoNCiAgICAgICAgLy8gUnVuIHRoc(91Z2ggYWxsIGRvY3VtZW50IG5vZGUuDQogICAgICAgIGZvc(VhY2ggKCAkdGhpcy0+$(9kZXMgYXMgJG5vZGUgPT4gJHBvc2)0aW9uICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUg$(9kZSBoYXMgdGh)IE)EIHd)J3J)IGxv$2tp$(cgZ(9yLg0KICAgICAgICAgICAgaWYgKCBp$)9hcnJheSgkdGhpcy0+$(9kZXN$JG5vZGVdWyJhdHRyaWJ1dGVzI)1$I()kI)0sDQogICAgICAgICAgICAgICAgJGFyZ3VtZW50cykgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIEFkZCB0aG)zIG5vZGUgdG8gdGh)IGxpc3Qg$2Yg$(9kZXMuDQogICAgICAgICAgICAgICAgJG5vZGVzW10gPSAk$(9kZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vIFJ)dHVy$iB0aGUg$G)zdCBvZiBu$2R)cy4NCiAgICAgICAgc(V0dXJuICRu$2R)czsNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIEhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIG5h$WUuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgaGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24g$(FtZS4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHByaXZhdGUNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRu$2R)IEZ1$GwgcGF0aCBvZiB0aGUg$(9kZSBv$iB3aG)jaCB0aGUgZnVuY3Rp$24NCiAgICAqICAgICAgICAgICAgc2hvdWxkIGJ)IHBy$2N)c3N)ZC4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRhc(d1$WVudHMgU3RyaW5nIGNv$nRhaW5p$(cgdGh)IGFyZ3VtZW50cyB0aGF0IHd)c(UNCiAgICAqICAgICAgICAgICAgcGFzc2VkIHRvIHRoZSB(dW5jdG)v$i4NCiAgICAqIEByZXR1c(4gICAg$W)4ZWQgRGVwZW5kaW5nIG9uIHRoZSB0eXB)IG9(IGZ1$(N0aW9uIGJ)aW5nIHBy$2N)c3N)ZCB0aG)zDQogICAgKiAgICAgICAgICAgIG1)dGhvZCByZXR1c(5zIGRpZ(Z)c(VudCB0eXB)cy4NCiAgICAqIEBzZWUgICAgICAgZXZh$HVhdGUoKQ0KICAgICovDQogICAgZnVuY3Rp$24gaGFuZGx)X2Z1$(N0aW9uX25h$WUgKCAk$(9kZSwgJGFyZ3VtZW50cyApDQogICAgew0KICAgICAgICAvLyBSZXR1c(4gdGh)IG5h$WUg$2YgdGh)IG5vZGUuDQogICAgICAgIHJ)dHVy$iAkdGhpcy0+$(9kZXN$JG5vZGVdWyJuYW1)I)07DQogICAgfQ0KDQogICAgLyoqDQogICAgKiBIYW5k$GVzIHRoZSBYUGF0aCB(dW5jdG)v$iBzdHJp$(cuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgaGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24gc3RyaW5nLg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJG5vZGUgRnVs$CBwYXRoIG9(IHRoZSBu$2R)IG9uIHdoaWNoIHRoZSB(dW5jdG)v$g0KICAgICogICAgICAgICAgICBzaG91$GQgY(UgcHJvY2Vzc2VkLg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGFyZ3VtZW50cyBTdHJp$(cgY29udGFp$()uZyB0aGUgYXJndW1)$nRzIHRoYXQgd2VyZQ0KICAgICogICAgICAgICAgICBwYXNzZWQgdG8gdGh)IGZ1$(N0aW9uLg0KICAgICogQHJ)dHVy$iAgICBtaXh)ZCBEZXB)$(Rp$(cg$24gdGh)IHR5cGUg$2YgZnVuY3Rp$24gY(Vp$(cgcHJvY2Vzc2VkIHRoaXMNCiAgICAqICAgICAgICAgICAg$WV0aG9kIHJ)dHVy$nMgZG)(Z(VyZW50IHR5cGVzLg0KICAgICogQHN)ZSAgICAgICB)d(FsdWF0ZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBoYW5k$GVfZnVuY3Rp$25fc3RyaW5nICggJG5vZGUsICRhc(d1$WVudHMgKQ0KICAgIHsNCiAgICAgICAgLy8gQ2h)Y2sgd2hhdCB0eXB)IG9(IHBhc(FtZXR)ciBpcyBnaXZ)$g0KICAgICAgICBpZiAoIGVyZWcoI)5$MC05XSsoXC5$MC05XSspPyQiLCAkYXJndW1)$nRzKSB8fA0KICAgICAgICAgICAgZXJ)ZygiX)wuWzAtOV0rJCIsICRhc(d1$WVudHMpICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gQ29ud(VydCB0aGUgZG)naXRzIHRvIGEg$nVtY(VyLg0KICAgICAgICAgICAgJG51$WJ)ciA9IGRvdWJsZXZh$CgkYXJndW1)$nRzKTsNCg0KICAgICAgICAgICAgLy8gU(V0dXJuIHRoZSBudW1iZXIuDQogICAgICAgICAgICByZXR1c(4gc3Ryd(FsKCRudW1iZXIpOw0KICAgICAgICB9DQogICAgICAgIGVsc2VpZiAoIG)zX2Jv$2woJGFyZ3VtZW50cykgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIG)0J3MgdHJ1ZS4NCiAgICAgICAgICAgIG)(ICggJGFyZ3VtZW50cyA9PSB0cnV)ICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBSZXR1c(4gdHJ1ZSBhcyBhIHN0c()uZy4NCiAgICAgICAgICAgICAgICByZXR1c(4gInRydWUiOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIFJ)dHVy$iB(YWxzZSBhcyBhIHN0c()uZy4NCiAgICAgICAgICAgICAgICByZXR1c(4gI(Zh$HN)IjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICB)$HN)aWYgKCAhZW1wdHkoJGFyZ3VtZW50cykgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBVc2UgdGh)IGFyZ3VtZW50IGFzIGFuIFhQYXRoLg0KICAgICAgICAgICAgJHJ)c3VsdCA9ICR0aG)zLT5)d(FsdWF0ZSgkYXJndW1)$nRzLCAk$(9kZSk7DQoNCiAgICAgICAgICAgIC8vIEd)dCB0aGUgZ()yc3QgYXJndW1)$nQuDQogICAgICAgICAgICAkc(VzdWx0ID0gZXhw$G9kZSgifCIsIG)tcGxvZGUoInwiLCAkc(VzdWx0KSk7DQoNCiAgICAgICAgICAgIC8vIFJ)dHVy$iB0aGUgZ()yc3Qgc(VzdWx0IGFzIGEgc3RyaW5nLg0KICAgICAgICAgICAgc(V0dXJuICRyZXN1$HR$MF07DQogICAgICAgIH0NCiAgICAgICAgZWxzZW)(ICggZW1wdHkoJGFyZ3VtZW50cykgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBSZXR1c(4gdGh)IGN1cnJ)$nQg$(9kZS4NCiAgICAgICAgICAgIHJ)dHVy$iAk$(9kZTsNCiAgICAgICAgfQ0KICAgICAgICB)$HN)DQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIFJ)dHVy$iBh$iB)$XB0eSBzdHJp$(cuDQogICAgICAgICAgICByZXR1c(4gIiI7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvKioNCiAgICAqIEhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIGNv$(NhdC4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBoYW5k$GVzIHRoZSBYUGF0aCB(dW5jdG)v$iBj$25jYXQuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAk$(9kZSBGdWxsIHBhdGgg$2YgdGh)IG5vZGUg$24gd2hpY2ggdGh)IGZ1$(N0aW9uDQogICAgKiAgICAgICAgICAgIHNo$3VsZCBiZSBwc(9jZXNzZWQuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkYXJndW1)$nRzIFN0c()uZyBj$250YW)uaW5nIHRoZSBhc(d1$WVudHMgdGhhdCB3ZXJ)DQogICAgKiAgICAgICAgICAgIHBhc3N)ZCB0$yB0aGUgZnVuY3Rp$24uDQogICAgKiBAc(V0dXJuICAgIG1peGVkIER)cGVuZG)uZyBv$iB0aGUgdH)wZSBvZiB(dW5jdG)v$iBiZW)uZyBwc(9jZXNzZWQgdGhpcw0KICAgICogICAgICAgICAgICBtZXRo$2Qgc(V0dXJucyBkaWZ(ZXJ)$nQgdH)wZXMuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGhh$(RsZV9(dW5jdG)v$)9j$25jYXQgKCAk$(9kZSwgJGFyZ3VtZW50cyApDQogICAgew0KICAgICAgICAvLyBTcGxpdCB0aGUgYXJndW1)$nRzLg0KICAgICAgICAkYXJndW1)$nRzID0gZXhw$G9kZSgiLCIsICRhc(d1$WVudHMpOw0KDQogICAgICAgIC8vIFJ1$iB0aHJvdWdoIGVhY2ggYXJndW1)$nQgYW5kIGV2YWx1YXR)IG)0Lg0KICAgICAgICB($3IgKCAkaSA9IDA7ICRpIDwgc2)6ZW9(KCRhc(d1$WVudHMpOyAkaSsrICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gVHJp$SB)YWNoIGFyZ3VtZW50Lg0KICAgICAgICAgICAgJGFyZ3VtZW50c1skaV0gPSB0c()tKCRhc(d1$WVudHN$JG)dKTsNCg0KICAgICAgICAgICAgLy8gRXZh$HVhdGUgaXQuDQogICAgICAgICAgICAkYXJndW1)$nRzWyRpXSA9ICR0aG)zLT5)d(FsdWF0ZV9wc(VkaWNhdGUoJG5vZGUsICRhc(d1$WVudHN$JG)dKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIFB1dCB0aGUgc3RyaW5nIHRvZ2V0aGVyLg0KICAgICAgICAkYXJndW1)$nRzID0gaW1w$G9kZSgiIiwgJGFyZ3VtZW50cyk7DQoNCiAgICAgICAgLy8gU(V0dXJuIHRoZSBzdHJp$(cuDQogICAgICAgIHJ)dHVy$iAkYXJndW1)$nRzOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICogSGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24gc3RhcnRzLXdpdGguDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgaGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24gc3RhcnRzLXdpdGguDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAk$(9kZSBGdWxsIHBhdGgg$2YgdGh)IG5vZGUg$24gd2hpY2ggdGh)IGZ1$(N0aW9uDQogICAgKiAgICAgICAgICAgIHNo$3VsZCBiZSBwc(9jZXNzZWQuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkYXJndW1)$nRzIFN0c()uZyBj$250YW)uaW5nIHRoZSBhc(d1$WVudHMgdGhhdCB3ZXJ)DQogICAgKiAgICAgICAgICAgIHBhc3N)ZCB0$yB0aGUgZnVuY3Rp$24uDQogICAgKiBAc(V0dXJuICAgIG1peGVkIER)cGVuZG)uZyBv$iB0aGUgdH)wZSBvZiB(dW5jdG)v$iBiZW)uZyBwc(9jZXNzZWQgdGhpcw0KICAgICogICAgICAgICAgICBtZXRo$2Qgc(V0dXJucyBkaWZ(ZXJ)$nQgdH)wZXMuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGhh$(RsZV9(dW5jdG)v$)9zdGFydHNfd2)0aCAoICRu$2R)LCAkYXJndW1)$nRzICkNCiAgICB7DQogICAgICAgIC8vIEd)dCB0aGUgYXJndW1)$nRzLg0KICAgICAgICAkZ()yc3QgID0gdHJp$SgkdGhpcy0+cHJ)c3RyKCRhc(d1$WVudHMsICIsIikpOw0KICAgICAgICAkc2Vj$25kID0gdHJp$SgkdGhpcy0+YWZ0ZXJzdHIoJGFyZ3VtZW50cywgIiwiKSk7DQoNCiAgICAgICAgLy8gRXZh$HVhdGUgZWFjaCBhc(d1$WVudC4NCiAgICAgICAgJGZpcnN0ICA9ICR0aG)zLT5)d(FsdWF0ZV9wc(VkaWNhdGUoJG5vZGUsICR(aXJzdCk7DQogICAgICAgICRzZWNv$(QgPSAkdGhpcy0+ZXZh$HVhdGVfcHJ)ZG)jYXR)KCRu$2R)LCAkc2Vj$25kKTsNCg0KICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSB(aXJzdCBzdHJp$(cgc3RhcnRzIHdpdGggdGh)IHN)Y29uZCBv$(UuDQogICAgICAgIG)(ICggZXJ)ZygiXiIuJHN)Y29uZCwgJGZpcnN0KSApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIFJ)dHVy$iB0cnV)Lg0KICAgICAgICAgICAgc(V0dXJuIHRydWU7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBSZXR1c(4gZ(Fsc2UuDQogICAgICAgICAgICByZXR1c(4gZ(Fsc2U7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvKioNCiAgICAqIEhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIGNv$nRhaW5zLg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIGhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIGNv$nRhaW5zLg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJG5vZGUgRnVs$CBwYXRoIG9(IHRoZSBu$2R)IG9uIHdoaWNoIHRoZSB(dW5jdG)v$g0KICAgICogICAgICAgICAgICBzaG91$GQgY(UgcHJvY2Vzc2VkLg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGFyZ3VtZW50cyBTdHJp$(cgY29udGFp$()uZyB0aGUgYXJndW1)$nRzIHRoYXQgd2VyZQ0KICAgICogICAgICAgICAgICBwYXNzZWQgdG8gdGh)IGZ1$(N0aW9uLg0KICAgICogQHJ)dHVy$iAgICBtaXh)ZCBEZXB)$(Rp$(cg$24gdGh)IHR5cGUg$2YgZnVuY3Rp$24gY(Vp$(cgcHJvY2Vzc2VkIHRoaXMNCiAgICAqICAgICAgICAgICAg$WV0aG9kIHJ)dHVy$nMgZG)(Z(VyZW50IHR5cGVzLg0KICAgICogQHN)ZSAgICAgICB)d(FsdWF0ZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBoYW5k$GVfZnVuY3Rp$25fY29udGFp$nMgKCAk$(9kZSwgJGFyZ3VtZW50cyApDQogICAgew0KICAgICAgICAvLyBHZXQgdGh)IGFyZ3VtZW50cy4NCiAgICAgICAgJGZpcnN0ICA9IHRyaW0oJHRoaXMtPnByZXN0cigkYXJndW1)$nRzLCAiLCIpKTsNCiAgICAgICAgJHN)Y29uZCA9IHRyaW0oJHRoaXMtP(F(dGVyc3RyKCRhc(d1$WVudHMsICIsIikpOw0KDQogICAgICAgIC8vIEV2YWx1YXR)IGVhY2ggYXJndW1)$nQuDQogICAgICAgICR(aXJzdCAgPSAkdGhpcy0+ZXZh$HVhdGVfcHJ)ZG)jYXR)KCRu$2R)LCAkZ()yc3QpOw0KICAgICAgICAkc2Vj$25kID0gJHRoaXMtP(V2YWx1YXR)X3ByZWRpY2F0ZSgk$(9kZSwgJHN)Y29uZCk7DQoNCiAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUgZ()yc3Qgc3RyaW5nIHN0YXJ0cyB3aXRoIHRoZSBzZWNv$(Qg$25)Lg0KICAgICAgICBpZiAoIGVyZWcoJHN)Y29uZCwgJGZpcnN0KSApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIFJ)dHVy$iB0cnV)Lg0KICAgICAgICAgICAgc(V0dXJuIHRydWU7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBSZXR1c(4gZ(Fsc2UuDQogICAgICAgICAgICByZXR1c(4gZ(Fsc2U7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvKioNCiAgICAqIEhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIHN1YnN0c()uZy1iZWZvc(UuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgaGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24gc3Vic3RyaW5nLWJ)Z(9yZS4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHByaXZhdGUNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRu$2R)IEZ1$GwgcGF0aCBvZiB0aGUg$(9kZSBv$iB3aG)jaCB0aGUgZnVuY3Rp$24NCiAgICAqICAgICAgICAgICAgc2hvdWxkIGJ)IHBy$2N)c3N)ZC4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRhc(d1$WVudHMgU3RyaW5nIGNv$nRhaW5p$(cgdGh)IGFyZ3VtZW50cyB0aGF0IHd)c(UNCiAgICAqICAgICAgICAgICAgcGFzc2VkIHRvIHRoZSB(dW5jdG)v$i4NCiAgICAqIEByZXR1c(4gICAg$W)4ZWQgRGVwZW5kaW5nIG9uIHRoZSB0eXB)IG9(IGZ1$(N0aW9uIGJ)aW5nIHBy$2N)c3N)ZCB0aG)zDQogICAgKiAgICAgICAgICAgIG1)dGhvZCByZXR1c(5zIGRpZ(Z)c(VudCB0eXB)cy4NCiAgICAqIEBzZWUgICAgICAgZXZh$HVhdGUoKQ0KICAgICovDQogICAgZnVuY3Rp$24gaGFuZGx)X2Z1$(N0aW9uX3N1YnN0c()uZ19iZWZvc(UgKCAk$(9kZSwgJGFyZ3VtZW50cyApDQogICAgew0KICAgICAgICAvLyBHZXQgdGh)IGFyZ3VtZW50cy4NCiAgICAgICAgJGZpcnN0ICA9IHRyaW0oJHRoaXMtPnByZXN0cigkYXJndW1)$nRzLCAiLCIpKTsNCiAgICAgICAgJHN)Y29uZCA9IHRyaW0oJHRoaXMtP(F(dGVyc3RyKCRhc(d1$WVudHMsICIsIikpOw0KDQogICAgICAgIC8vIEV2YWx1YXR)IGVhY2ggYXJndW1)$nQuDQogICAgICAgICR(aXJzdCAgPSAkdGhpcy0+ZXZh$HVhdGVfcHJ)ZG)jYXR)KCRu$2R)LCAkZ()yc3QpOw0KICAgICAgICAkc2Vj$25kID0gJHRoaXMtP(V2YWx1YXR)X3ByZWRpY2F0ZSgk$(9kZSwgJHN)Y29uZCk7DQoNCiAgICAgICAgLy8gU(V0dXJuIHRoZSBzdWJzdHJp$(cuDQogICAgICAgIHJ)dHVy$iAkdGhpcy0+cHJ)c3RyKHN0cnZh$CgkZ()yc3QpLCBzdHJ2YWwoJHN)Y29uZCkpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICogSGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24gc3Vic3RyaW5nLWF(dGVyLg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIGhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIHN1YnN0c()uZy1hZnR)ci4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHByaXZhdGUNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRu$2R)IEZ1$GwgcGF0aCBvZiB0aGUg$(9kZSBv$iB3aG)jaCB0aGUgZnVuY3Rp$24NCiAgICAqICAgICAgICAgICAgc2hvdWxkIGJ)IHBy$2N)c3N)ZC4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRhc(d1$WVudHMgU3RyaW5nIGNv$nRhaW5p$(cgdGh)IGFyZ3VtZW50cyB0aGF0IHd)c(UNCiAgICAqICAgICAgICAgICAgcGFzc2VkIHRvIHRoZSB(dW5jdG)v$i4NCiAgICAqIEByZXR1c(4gICAg$W)4ZWQgRGVwZW5kaW5nIG9uIHRoZSB0eXB)IG9(IGZ1$(N0aW9uIGJ)aW5nIHBy$2N)c3N)ZCB0aG)zDQogICAgKiAgICAgICAgICAgIG1)dGhvZCByZXR1c(5zIGRpZ(Z)c(VudCB0eXB)cy4NCiAgICAqIEBzZWUgICAgICAgZXZh$HVhdGUoKQ0KICAgICovDQogICAgZnVuY3Rp$24gaGFuZGx)X2Z1$(N0aW9uX3N1YnN0c()uZ19hZnR)ciAoICRu$2R)LCAkYXJndW1)$nRzICkNCiAgICB7DQogICAgICAgIC8vIEd)dCB0aGUgYXJndW1)$nRzLg0KICAgICAgICAkZ()yc3QgID0gdHJp$SgkdGhpcy0+cHJ)c3RyKCRhc(d1$WVudHMsICIsIikpOw0KICAgICAgICAkc2Vj$25kID0gdHJp$SgkdGhpcy0+YWZ0ZXJzdHIoJGFyZ3VtZW50cywgIiwiKSk7DQoNCiAgICAgICAgLy8gRXZh$HVhdGUgZWFjaCBhc(d1$WVudC4NCiAgICAgICAgJGZpcnN0ICA9ICR0aG)zLT5)d(FsdWF0ZV9wc(VkaWNhdGUoJG5vZGUsICR(aXJzdCk7DQogICAgICAgICRzZWNv$(QgPSAkdGhpcy0+ZXZh$HVhdGVfcHJ)ZG)jYXR)KCRu$2R)LCAkc2Vj$25kKTsNCg0KICAgICAgICAvLyBSZXR1c(4gdGh)IHN1YnN0c()uZy4NCiAgICAgICAgc(V0dXJuICR0aG)zLT5hZnR)cnN0cihzdHJ2YWwoJGZpcnN0KSwgc3Ryd(FsKCRzZWNv$(QpKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIEhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIHN1YnN0c()uZy4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBoYW5k$GVzIHRoZSBYUGF0aCB(dW5jdG)v$iBzdWJzdHJp$(cuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAk$(9kZSBGdWxsIHBhdGgg$2YgdGh)IG5vZGUg$24gd2hpY2ggdGh)IGZ1$(N0aW9uDQogICAgKiAgICAgICAgICAgIHNo$3VsZCBiZSBwc(9jZXNzZWQuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkYXJndW1)$nRzIFN0c()uZyBj$250YW)uaW5nIHRoZSBhc(d1$WVudHMgdGhhdCB3ZXJ)DQogICAgKiAgICAgICAgICAgIHBhc3N)ZCB0$yB0aGUgZnVuY3Rp$24uDQogICAgKiBAc(V0dXJuICAgIG1peGVkIER)cGVuZG)uZyBv$iB0aGUgdH)wZSBvZiB(dW5jdG)v$iBiZW)uZyBwc(9jZXNzZWQgdGhpcw0KICAgICogICAgICAgICAgICBtZXRo$2Qgc(V0dXJucyBkaWZ(ZXJ)$nQgdH)wZXMuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGhh$(RsZV9(dW5jdG)v$)9zdWJzdHJp$(cgKCAk$(9kZSwgJGFyZ3VtZW50cyApDQogICAgew0KICAgICAgICAvLyBTcGxpdCB0aGUgYXJndW1)$nRzLg0KICAgICAgICAkYXJndW1)$nRzID0gZXhw$G9kZSgiLCIsICRhc(d1$WVudHMpOw0KDQogICAgICAgIC8vIFJ1$iB0aHJvdWdoIGFs$CBhc(d1$WVudHMuDQogICAgICAgIGZvciAoICRpID0gMDsgJGkgPCBzaXp)$2YoJGFyZ3VtZW50cyk7ICRpKysgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBUc()tIHRoZSBzdHJp$(cuDQogICAgICAgICAgICAkYXJndW1)$nRzWyRpXSA9IHRyaW0oJGFyZ3VtZW50c1skaV0pOw0KDQogICAgICAgICAgICAvLyBFd(FsdWF0ZSB)YWNoIGFyZ3VtZW50Lg0KICAgICAgICAgICAgJGFyZ3VtZW50c1skaV0gPSAkdGhpcy0+ZXZh$HVhdGVfcHJ)ZG)jYXR)KCRu$2R)LCAkYXJndW1)$nRzWyRpXSk7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBDaGVjayB3aGV0aGVyIGEgdGhpc(QgYXJndW1)$nQgd2FzIGdpd(VuLg0KICAgICAgICBpZiAoICF)$XB0eSgkYXJndW1)$nRzWzJdKSApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIFJ)dHVy$iB0aGUgc3Vic3RyaW5nLg0KICAgICAgICAgICAgc(V0dXJuIHN1YnN0cihzdHJ2YWwoJGFyZ3VtZW50c1swXSksICRhc(d1$WVudHN$MV0gLSAxLA0KICAgICAgICAgICAgICAgICRhc(d1$WVudHN$M)0pOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gU(V0dXJuIHRoZSBzdWJzdHJp$(cuDQogICAgICAgICAgICByZXR1c(4gc3Vic3RyKHN0cnZh$CgkYXJndW1)$nRzWzBdKSwgJGFyZ3VtZW50c1sxXSAtIDEpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgKiBIYW5k$GVzIHRoZSBYUGF0aCB(dW5jdG)v$iBzdHJp$(ct$GVuZ3RoLg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIGhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIHN0c()uZy1sZW5ndGguDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAk$(9kZSBGdWxsIHBhdGgg$2YgdGh)IG5vZGUg$24gd2hpY2ggdGh)IGZ1$(N0aW9uDQogICAgKiAgICAgICAgICAgIHNo$3VsZCBiZSBwc(9jZXNzZWQuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkYXJndW1)$nRzIFN0c()uZyBj$250YW)uaW5nIHRoZSBhc(d1$WVudHMgdGhhdCB3ZXJ)DQogICAgKiAgICAgICAgICAgIHBhc3N)ZCB0$yB0aGUgZnVuY3Rp$24uDQogICAgKiBAc(V0dXJuICAgIG1peGVkIER)cGVuZG)uZyBv$iB0aGUgdH)wZSBvZiB(dW5jdG)v$iBiZW)uZyBwc(9jZXNzZWQgdGhpcw0KICAgICogICAgICAgICAgICBtZXRo$2Qgc(V0dXJucyBkaWZ(ZXJ)$nQgdH)wZXMuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGhh$(RsZV9(dW5jdG)v$)9zdHJp$(df$GVuZ3RoICggJG5vZGUsICRhc(d1$WVudHMgKQ0KICAgIHsNCiAgICAgICAgLy8gVHJp$SB0aGUgYXJndW1)$nQuDQogICAgICAgICRhc(d1$WVudHMgPSB0c()tKCRhc(d1$WVudHMpOw0KDQogICAgICAgIC8vIEV2YWx1YXR)IHRoZSBhc(d1$WVudC4NCiAgICAgICAgJGFyZ3VtZW50cyA9ICR0aG)zLT5)d(FsdWF0ZV9wc(VkaWNhdGUoJG5vZGUsICRhc(d1$WVudHMpOw0KDQogICAgICAgIC8vIFJ)dHVy$iB0aGUg$GVuZ3RoIG9(IHRoZSBzdHJp$(cuDQogICAgICAgIHJ)dHVy$iBzdHJsZW4oc3Ryd(FsKCRhc(d1$WVudHMpKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIEhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIHRyYW5z$GF0ZS4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBoYW5k$GVzIHRoZSBYUGF0aCB(dW5jdG)v$iB0c(Fuc2xhdGUuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAk$(9kZSBGdWxsIHBhdGgg$2YgdGh)IG5vZGUg$24gd2hpY2ggdGh)IGZ1$(N0aW9uDQogICAgKiAgICAgICAgICAgIHNo$3VsZCBiZSBwc(9jZXNzZWQuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkYXJndW1)$nRzIFN0c()uZyBj$250YW)uaW5nIHRoZSBhc(d1$WVudHMgdGhhdCB3ZXJ)DQogICAgKiAgICAgICAgICAgIHBhc3N)ZCB0$yB0aGUgZnVuY3Rp$24uDQogICAgKiBAc(V0dXJuICAgIG1peGVkIER)cGVuZG)uZyBv$iB0aGUgdH)wZSBvZiB(dW5jdG)v$iBiZW)uZyBwc(9jZXNzZWQgdGhpcw0KICAgICogICAgICAgICAgICBtZXRo$2Qgc(V0dXJucyBkaWZ(ZXJ)$nQgdH)wZXMuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGhh$(RsZV9(dW5jdG)v$)90c(Fuc2xhdGUgKCAk$(9kZSwgJGFyZ3VtZW50cyApDQogICAgew0KICAgICAgICAvLyBTcGxpdCB0aGUgYXJndW1)$nRzLg0KICAgICAgICAkYXJndW1)$nRzID0gZXhw$G9kZSgiLCIsICRhc(d1$WVudHMpOw0KDQogICAgICAgIC8vIFJ1$iB0aHJvdWdoIGFs$CBhc(d1$WVudHMuDQogICAgICAgIGZvciAoICRpID0gMDsgJGkgPCBzaXp)$2YoJGFyZ3VtZW50cyk7ICRpKysgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBUc()tIHRoZSBhc(d1$WVudC4NCiAgICAgICAgICAgICRhc(d1$WVudHN$JG)dID0gdHJp$SgkYXJndW1)$nRzWyRpXSk7DQoNCiAgICAgICAgICAgIC8vIEV2YWx1YXR)IHRoZSBhc(d1$WVudC4NCiAgICAgICAgICAgICRhc(d1$WVudHN$JG)dID0gJHRoaXMtP(V2YWx1YXR)X3ByZWRpY2F0ZSgk$(9kZSwgJGFyZ3VtZW50c1skaV0pOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gU(V0dXJuIHRoZSB0c(Fuc2xhdGVkIHN0c()uZy4NCiAgICAgICAgc(V0dXJuIHN0cnRyKCRhc(d1$WVudHN$MF0sICRhc(d1$WVudHN$MV0sICRhc(d1$WVudHN$M)0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICogSGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24gY(9v$GVh$i4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBoYW5k$GVzIHRoZSBYUGF0aCB(dW5jdG)v$iBi$29sZWFuLg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJG5vZGUgRnVs$CBwYXRoIG9(IHRoZSBu$2R)IG9uIHdoaWNoIHRoZSB(dW5jdG)v$g0KICAgICogICAgICAgICAgICBzaG91$GQgY(UgcHJvY2Vzc2VkLg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGFyZ3VtZW50cyBTdHJp$(cgY29udGFp$()uZyB0aGUgYXJndW1)$nRzIHRoYXQgd2VyZQ0KICAgICogICAgICAgICAgICBwYXNzZWQgdG8gdGh)IGZ1$(N0aW9uLg0KICAgICogQHJ)dHVy$iAgICBtaXh)ZCBEZXB)$(Rp$(cg$24gdGh)IHR5cGUg$2YgZnVuY3Rp$24gY(Vp$(cgcHJvY2Vzc2VkIHRoaXMNCiAgICAqICAgICAgICAgICAg$WV0aG9kIHJ)dHVy$nMgZG)(Z(VyZW50IHR5cGVzLg0KICAgICogQHN)ZSAgICAgICB)d(FsdWF0ZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBoYW5k$GVfZnVuY3Rp$25fY(9v$GVh$iAoICRu$2R)LCAkYXJndW1)$nRzICkNCiAgICB7DQogICAgICAgIC8vIFRyaW0gdGh)IGFyZ3VtZW50cy4NCiAgICAgICAgJGFyZ3VtZW50cyA9IHRyaW0oJGFyZ3VtZW50cyk7DQoNCiAgICAgICAgLy8gQ2h)Y2sgd2hhdCB0eXB)IG9(IHBhc(FtZXR)ciBpcyBnaXZ)$g0KICAgICAgICBpZiAoIGVyZWcoI)5$MC05XSsoXC5$MC05XSspPyQiLCAkYXJndW1)$nRzKSB8fA0KICAgICAgICAgICAgZXJ)ZygiX)wuWzAtOV0rJCIsICRhc(d1$WVudHMpICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gQ29ud(VydCB0aGUgZG)naXRzIHRvIGEg$nVtY(VyLg0KICAgICAgICAgICAgJG51$WJ)ciA9IGRvdWJsZXZh$CgkYXJndW1)$nRzKTsNCg0KICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUg$nVtY(VyIHp)c(8uDQogICAgICAgICAgICBpZiAoICRudW1iZXIgPT0gMCApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gU(V0dXJuIGZh$HN)Lg0KICAgICAgICAgICAgICAgIHJ)dHVy$iB(YWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBSZXR1c(4gdHJ1ZS4NCiAgICAgICAgICAgICAgICByZXR1c(4gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICB)$HN)aWYgKCB)$XB0eSgkYXJndW1)$nRzKSApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIFNvcnJ5LCB0aGVyZSB3ZXJ)IG5vIGFyZ3VtZW50cy4NCiAgICAgICAgICAgIHJ)dHVy$iB(YWxzZTsNCiAgICAgICAgfQ0KICAgICAgICB)$HN)DQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIFRyeSB0$yB)d(FsdWF0ZSB0aGUgYXJndW1)$nQgYXMgYW4gWFBhdGguDQogICAgICAgICAgICAkc(VzdWx0ID0gJHRoaXMtP(V2YWx1YXR)KCRhc(d1$WVudHMsICRu$2R)KTsNCg0KICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB3ZSB($3VuZCBz$21)dGhp$(cuDQogICAgICAgICAgICBpZiAoIGNvdW50KCRyZXN1$HQpID4gMCApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gU(V0dXJuIHRydWUuDQogICAgICAgICAgICAgICAgc(V0dXJuIHRydWU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB)$HN)DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gU(V0dXJuIGZh$HN)Lg0KICAgICAgICAgICAgICAgIHJ)dHVy$iB(YWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICogSGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24g$(90Lg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIGhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIG5vdC4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHByaXZhdGUNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRu$2R)IEZ1$GwgcGF0aCBvZiB0aGUg$(9kZSBv$iB3aG)jaCB0aGUgZnVuY3Rp$24NCiAgICAqICAgICAgICAgICAgc2hvdWxkIGJ)IHBy$2N)c3N)ZC4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRhc(d1$WVudHMgU3RyaW5nIGNv$nRhaW5p$(cgdGh)IGFyZ3VtZW50cyB0aGF0IHd)c(UNCiAgICAqICAgICAgICAgICAgcGFzc2VkIHRvIHRoZSB(dW5jdG)v$i4NCiAgICAqIEByZXR1c(4gICAg$W)4ZWQgRGVwZW5kaW5nIG9uIHRoZSB0eXB)IG9(IGZ1$(N0aW9uIGJ)aW5nIHBy$2N)c3N)ZCB0aG)zDQogICAgKiAgICAgICAgICAgIG1)dGhvZCByZXR1c(5zIGRpZ(Z)c(VudCB0eXB)cy4NCiAgICAqIEBzZWUgICAgICAgZXZh$HVhdGUoKQ0KICAgICovDQogICAgZnVuY3Rp$24gaGFuZGx)X2Z1$(N0aW9uX25vdCAoICRu$2R)LCAkYXJndW1)$nRzICkNCiAgICB7DQogICAgICAgIC8vIFRyaW0gdGh)IGFyZ3VtZW50cy4NCiAgICAgICAgJGFyZ3VtZW50cyA9IHRyaW0oJGFyZ3VtZW50cyk7DQoNCiAgICAgICAgLy8gU(V0dXJuIHRoZSBuZWdhdG)2ZSB2YWx1ZSBvZiB0aGUgY29udGVudCBvZiB0aGUgYnJhY2t)dHMuDQogICAgICAgIHJ)dHVy$iAhJHRoaXMtP(V2YWx1YXR)X3ByZWRpY2F0ZSgk$(9kZSwgJGFyZ3VtZW50cyk7DQogICAgfQ0KDQogICAgLyoqDQogICAgKiBIYW5k$GVzIHRoZSBYUGF0aCB(dW5jdG)v$iB0cnV)Lg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIGhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIHRydWUuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAk$(9kZSBGdWxsIHBhdGgg$2YgdGh)IG5vZGUg$24gd2hpY2ggdGh)IGZ1$(N0aW9uDQogICAgKiAgICAgICAgICAgIHNo$3VsZCBiZSBwc(9jZXNzZWQuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkYXJndW1)$nRzIFN0c()uZyBj$250YW)uaW5nIHRoZSBhc(d1$WVudHMgdGhhdCB3ZXJ)DQogICAgKiAgICAgICAgICAgIHBhc3N)ZCB0$yB0aGUgZnVuY3Rp$24uDQogICAgKiBAc(V0dXJuICAgIG1peGVkIER)cGVuZG)uZyBv$iB0aGUgdH)wZSBvZiB(dW5jdG)v$iBiZW)uZyBwc(9jZXNzZWQgdGhpcw0KICAgICogICAgICAgICAgICBtZXRo$2Qgc(V0dXJucyBkaWZ(ZXJ)$nQgdH)wZXMuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGhh$(RsZV9(dW5jdG)v$)90cnV)ICggJG5vZGUsICRhc(d1$WVudHMgKQ0KICAgIHsNCiAgICAgICAgLy8gU(V0dXJuIHRydWUuDQogICAgICAgIHJ)dHVy$iB0cnV)Ow0KICAgIH0NCg0KICAgIC8qKg0KICAgICogSGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24gZ(Fsc2UuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgaGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24gZ(Fsc2UuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAk$(9kZSBGdWxsIHBhdGgg$2YgdGh)IG5vZGUg$24gd2hpY2ggdGh)IGZ1$(N0aW9uDQogICAgKiAgICAgICAgICAgIHNo$3VsZCBiZSBwc(9jZXNzZWQuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkYXJndW1)$nRzIFN0c()uZyBj$250YW)uaW5nIHRoZSBhc(d1$WVudHMgdGhhdCB3ZXJ)DQogICAgKiAgICAgICAgICAgIHBhc3N)ZCB0$yB0aGUgZnVuY3Rp$24uDQogICAgKiBAc(V0dXJuICAgIG1peGVkIER)cGVuZG)uZyBv$iB0aGUgdH)wZSBvZiB(dW5jdG)v$iBiZW)uZyBwc(9jZXNzZWQgdGhpcw0KICAgICogICAgICAgICAgICBtZXRo$2Qgc(V0dXJucyBkaWZ(ZXJ)$nQgdH)wZXMuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGhh$(RsZV9(dW5jdG)v$)9(YWxzZSAoICRu$2R)LCAkYXJndW1)$nRzICkNCiAgICB7DQogICAgICAgIC8vIFJ)dHVy$iB(YWxzZS4NCiAgICAgICAgc(V0dXJuIGZh$HN)Ow0KICAgIH0NCg0KICAgIC8qKg0KICAgICogSGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24g$GFuZy4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBoYW5k$GVzIHRoZSBYUGF0aCB(dW5jdG)v$iBsYW5nLg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJG5vZGUgRnVs$CBwYXRoIG9(IHRoZSBu$2R)IG9uIHdoaWNoIHRoZSB(dW5jdG)v$g0KICAgICogICAgICAgICAgICBzaG91$GQgY(UgcHJvY2Vzc2VkLg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGFyZ3VtZW50cyBTdHJp$(cgY29udGFp$()uZyB0aGUgYXJndW1)$nRzIHRoYXQgd2VyZQ0KICAgICogICAgICAgICAgICBwYXNzZWQgdG8gdGh)IGZ1$(N0aW9uLg0KICAgICogQHJ)dHVy$iAgICBtaXh)ZCBEZXB)$(Rp$(cg$24gdGh)IHR5cGUg$2YgZnVuY3Rp$24gY(Vp$(cgcHJvY2Vzc2VkIHRoaXMNCiAgICAqICAgICAgICAgICAg$WV0aG9kIHJ)dHVy$nMgZG)(Z(VyZW50IHR5cGVzLg0KICAgICogQHN)ZSAgICAgICB)d(FsdWF0ZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBoYW5k$GVfZnVuY3Rp$25f$GFuZyAoICRu$2R)LCAkYXJndW1)$nRzICkNCiAgICB7DQogICAgICAgIC8vIFRyaW0gdGh)IGFyZ3VtZW50cy4NCiAgICAgICAgJGFyZ3VtZW50cyA9IHRyaW0oJGFyZ3VtZW50cyk7DQoNCiAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUg$(9kZSBoYXMgYW4g$GFuZ3VhZ2UgYXR0c()idXR)Lg0KICAgICAgICBpZiAoIGVtcHR5KCR0aG)zLT5u$2R)c1sk$(9kZV1$I(F0dHJpYnV0ZXMiXVsieG1sO(xh$(ciXSkgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBSdW4gdGhy$3VnaCB0aGUgYW5jZXN0$3JzLg0KICAgICAgICAgICAgd2hp$GUgKCAhZW1wdHkoJG5vZGUpICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBTZWx)Y3QgdGh)IHBhc(VudCBu$2R)Lg0KICAgICAgICAgICAgICAgICRu$2R)ID0gJHRoaXMtP(5vZGVzWyRu$2R)XVsicGFyZW50I)07DQoNCiAgICAgICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZXJ)J3MgYSBsYW5ndWFnZSBkZWZp$()0aW9uLg0KICAgICAgICAgICAgICAgIG)(ICggIWVtcHR5KCR0aG)zLT5u$2R)c1sk$(9kZV1$I(F0dHJpYnV0ZXMiXVsieG1sO(xh$(ciXSkgKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciBpdCdzIHRoZSBsYW5ndWFnZSwgdGh)IHVzZXIgYXNrcyB($3IuDQogICAgICAgICAgICAgICAgICAgIG)(ICggZXJ)Z2koI)4iLiRhc(d1$WVudHMsICR0aG)zLT5u$2R)c1sk$(9kZV0NCiAgICAgICAgICAgICAgICAgICAgICAgIFsiYXR0c()idXR)cyJdWyJ4$Ww6$GFuZyJdKSApDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJ)dHVy$iB0cnV)Lg0KICAgICAgICAgICAgICAgICAgICAgICAgc(V0dXJuIHRydWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXR1c(4gZ(Fsc2UuDQogICAgICAgICAgICAgICAgICAgICAgICByZXR1c(4gZ(Fsc2U7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIFJ)dHVy$iB(YWxzZS4NCiAgICAgICAgICAgIHJ)dHVy$iB(YWxzZTsNCiAgICAgICAgfQ0KICAgICAgICB)$HN)DQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgaXQncyB0aGUg$GFuZ3VhZ2UsIHRoZSB1c2VyIGFza3MgZ(9yLg0KICAgICAgICAgICAgaWYgKCB)c(VnaSgiXiIuJGFyZ3VtZW50cywgJHRoaXMtP(5vZGVzWyRu$2R)XVsiYXR0c()idXR)cyJdDQogICAgICAgICAgICAgICAgWyJ4$Ww6$GFuZyJdKSApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gU(V0dXJuIHRydWUuDQogICAgICAgICAgICAgICAgc(V0dXJuIHRydWU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB)$HN)DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gU(V0dXJuIGZh$HN)Lg0KICAgICAgICAgICAgICAgIHJ)dHVy$iB(YWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICogSGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24g$nVtY(VyLg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIGhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIG51$WJ)ci4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHByaXZhdGUNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRu$2R)IEZ1$GwgcGF0aCBvZiB0aGUg$(9kZSBv$iB3aG)jaCB0aGUgZnVuY3Rp$24NCiAgICAqICAgICAgICAgICAgc2hvdWxkIGJ)IHBy$2N)c3N)ZC4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRhc(d1$WVudHMgU3RyaW5nIGNv$nRhaW5p$(cgdGh)IGFyZ3VtZW50cyB0aGF0IHd)c(UNCiAgICAqICAgICAgICAgICAgcGFzc2VkIHRvIHRoZSB(dW5jdG)v$i4NCiAgICAqIEByZXR1c(4gICAg$W)4ZWQgRGVwZW5kaW5nIG9uIHRoZSB0eXB)IG9(IGZ1$(N0aW9uIGJ)aW5nIHBy$2N)c3N)ZCB0aG)zDQogICAgKiAgICAgICAgICAgIG1)dGhvZCByZXR1c(5zIGRpZ(Z)c(VudCB0eXB)cy4NCiAgICAqIEBzZWUgICAgICAgZXZh$HVhdGUoKQ0KICAgICovDQogICAgZnVuY3Rp$24gaGFuZGx)X2Z1$(N0aW9uX251$WJ)ciAoICRu$2R)LCAkYXJndW1)$nRzICkNCiAgICB7DQogICAgICAgIC8vIENoZWNrIHRoZSB0eXB)IG9(IGFyZ3VtZW50Lg0KICAgICAgICBpZiAoIGVyZWcoI)5$MC05XSsoXC5$MC05XSspPyQiLCAkYXJndW1)$nRzKSB8fA0KICAgICAgICAgICAgZXJ)ZygiX)wuWzAtOV0rJCIsICRhc(d1$WVudHMpICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gU(V0dXJuIHRoZSBhc(d1$WVudCBhcyBhIG51$WJ)ci4NCiAgICAgICAgICAgIHJ)dHVy$iBk$3Vi$GV2YWwoJGFyZ3VtZW50cyk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZW)(ICggaXNfY(9v$CgkYXJndW1)$nRzKSApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgaXQncyB0cnV)Lg0KICAgICAgICAgICAgaWYgKCAkYXJndW1)$nRzID09IHRydWUgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIFJ)dHVy$iAxLg0KICAgICAgICAgICAgICAgIHJ)dHVy$iAxOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIFJ)dHVy$iAwLg0KICAgICAgICAgICAgICAgIHJ)dHVy$iAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgKiBIYW5k$GVzIHRoZSBYUGF0aCB(dW5jdG)v$iBzdW0uDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgaGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24gc3VtLg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJG5vZGUgRnVs$CBwYXRoIG9(IHRoZSBu$2R)IG9uIHdoaWNoIHRoZSB(dW5jdG)v$g0KICAgICogICAgICAgICAgICBzaG91$GQgY(UgcHJvY2Vzc2VkLg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGFyZ3VtZW50cyBTdHJp$(cgY29udGFp$()uZyB0aGUgYXJndW1)$nRzIHRoYXQgd2VyZQ0KICAgICogICAgICAgICAgICBwYXNzZWQgdG8gdGh)IGZ1$(N0aW9uLg0KICAgICogQHJ)dHVy$iAgICBtaXh)ZCBEZXB)$(Rp$(cg$24gdGh)IHR5cGUg$2YgZnVuY3Rp$24gY(Vp$(cgcHJvY2Vzc2VkIHRoaXMNCiAgICAqICAgICAgICAgICAg$WV0aG9kIHJ)dHVy$nMgZG)(Z(VyZW50IHR5cGVzLg0KICAgICogQHN)ZSAgICAgICB)d(FsdWF0ZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBoYW5k$GVfZnVuY3Rp$25fc3VtICggJG5vZGUsICRhc(d1$WVudHMgKQ0KICAgIHsNCiAgICAgICAgLy8gVHJp$SB0aGUgYXJndW1)$nRzLg0KICAgICAgICAkYXJndW1)$nRzID0gdHJp$SgkYXJndW1)$nRzKTsNCg0KICAgICAgICAvLyBFd(FsdWF0ZSB0aGUgYXJndW1)$nRzIGFzIGFuIFhQYXRoIGV4cHJ)c3Np$24uDQogICAgICAgICRyZXN1$HRzID0gJHRoaXMtP(V2YWx1YXR)KCRhc(d1$WVudHMsICRu$2R)KTsNCg0KICAgICAgICAvLyBDc(VhdGUgYSB2YXJpYWJsZSB0$yBzYXZ)IHRoZSBzdW0uDQogICAgICAgICRzdW0gPSAwOw0KDQogICAgICAgIC8vIFJ1$iB0aHJvdWdoIGFs$CByZXN1$HRzLg0KICAgICAgICB($3J)YWNoICggJHJ)c3VsdHMgYXMgJHJ)c3VsdCApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIEd)dCB0aGUgd(FsdWUg$2YgdGh)IG5vZGUuDQogICAgICAgICAgICAkc(VzdWx0ID0gJHRoaXMtP(d)dF9j$250ZW50KCRyZXN1$HQpOw0KDQogICAgICAgICAgICAvLyBBZGQgaXQgdG8gdGh)IHN1$S4NCiAgICAgICAgICAgICRzdW0gKz0gZG91Y(x)d(FsKCRyZXN1$HQpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gU(V0dXJuIHRoZSBzdW0uDQogICAgICAgIHJ)dHVy$iAkc3VtOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICogSGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24gZ(xv$3IuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgaGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24gZ(xv$3IuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAk$(9kZSBGdWxsIHBhdGgg$2YgdGh)IG5vZGUg$24gd2hpY2ggdGh)IGZ1$(N0aW9uDQogICAgKiAgICAgICAgICAgIHNo$3VsZCBiZSBwc(9jZXNzZWQuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkYXJndW1)$nRzIFN0c()uZyBj$250YW)uaW5nIHRoZSBhc(d1$WVudHMgdGhhdCB3ZXJ)DQogICAgKiAgICAgICAgICAgIHBhc3N)ZCB0$yB0aGUgZnVuY3Rp$24uDQogICAgKiBAc(V0dXJuICAgIG1peGVkIER)cGVuZG)uZyBv$iB0aGUgdH)wZSBvZiB(dW5jdG)v$iBiZW)uZyBwc(9jZXNzZWQgdGhpcw0KICAgICogICAgICAgICAgICBtZXRo$2Qgc(V0dXJucyBkaWZ(ZXJ)$nQgdH)wZXMuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGhh$(RsZV9(dW5jdG)v$)9($G9vciAoICRu$2R)LCAkYXJndW1)$nRzICkNCiAgICB7DQogICAgICAgIC8vIFRyaW0gdGh)IGFyZ3VtZW50cy4NCiAgICAgICAgJGFyZ3VtZW50cyA9IHRyaW0oJGFyZ3VtZW50cyk7DQoNCiAgICAgICAgLy8gQ29ud(VydCB0aGUgYXJndW1)$nRzIHRvIGEg$nVtY(VyLg0KICAgICAgICAkYXJndW1)$nRzID0gZG91Y(x)d(FsKCRhc(d1$WVudHMpOw0KDQogICAgICAgIC8vIFJ)dHVy$iB0aGUgc(VzdWx0DQogICAgICAgIHJ)dHVy$iB($G9vcigkYXJndW1)$nRzKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIEhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIGN)aWxp$(cuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgaGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24gY2Vp$G)uZy4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHByaXZhdGUNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRu$2R)IEZ1$GwgcGF0aCBvZiB0aGUg$(9kZSBv$iB3aG)jaCB0aGUgZnVuY3Rp$24NCiAgICAqICAgICAgICAgICAgc2hvdWxkIGJ)IHBy$2N)c3N)ZC4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRhc(d1$WVudHMgU3RyaW5nIGNv$nRhaW5p$(cgdGh)IGFyZ3VtZW50cyB0aGF0IHd)c(UNCiAgICAqICAgICAgICAgICAgcGFzc2VkIHRvIHRoZSB(dW5jdG)v$i4NCiAgICAqIEByZXR1c(4gICAg$W)4ZWQgRGVwZW5kaW5nIG9uIHRoZSB0eXB)IG9(IGZ1$(N0aW9uIGJ)aW5nIHBy$2N)c3N)ZCB0aG)zDQogICAgKiAgICAgICAgICAgIG1)dGhvZCByZXR1c(5zIGRpZ(Z)c(VudCB0eXB)cy4NCiAgICAqIEBzZWUgICAgICAgZXZh$HVhdGUoKQ0KICAgICovDQogICAgZnVuY3Rp$24gaGFuZGx)X2Z1$(N0aW9uX2N)aWxp$(cgKCAk$(9kZSwgJGFyZ3VtZW50cyApDQogICAgew0KICAgICAgICAvLyBUc()tIHRoZSBhc(d1$WVudHMuDQogICAgICAgICRhc(d1$WVudHMgPSB0c()tKCRhc(d1$WVudHMpOw0KDQogICAgICAgIC8vIENv$nZ)cnQgdGh)IGFyZ3VtZW50cyB0$yBhIG51$WJ)ci4NCiAgICAgICAgJGFyZ3VtZW50cyA9IGRvdWJsZXZh$CgkYXJndW1)$nRzKTsNCg0KICAgICAgICAvLyBSZXR1c(4gdGh)IHJ)c3VsdA0KICAgICAgICByZXR1c(4gY2Vp$CgkYXJndW1)$nRzKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIEhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIHJvdW5kLg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIGhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIHJvdW5kLg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJG5vZGUgRnVs$CBwYXRoIG9(IHRoZSBu$2R)IG9uIHdoaWNoIHRoZSB(dW5jdG)v$g0KICAgICogICAgICAgICAgICBzaG91$GQgY(UgcHJvY2Vzc2VkLg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGFyZ3VtZW50cyBTdHJp$(cgY29udGFp$()uZyB0aGUgYXJndW1)$nRzIHRoYXQgd2VyZQ0KICAgICogICAgICAgICAgICBwYXNzZWQgdG8gdGh)IGZ1$(N0aW9uLg0KICAgICogQHJ)dHVy$iAgICBtaXh)ZCBEZXB)$(Rp$(cg$24gdGh)IHR5cGUg$2YgZnVuY3Rp$24gY(Vp$(cgcHJvY2Vzc2VkIHRoaXMNCiAgICAqICAgICAgICAgICAg$WV0aG9kIHJ)dHVy$nMgZG)(Z(VyZW50IHR5cGVzLg0KICAgICogQHN)ZSAgICAgICB)d(FsdWF0ZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBoYW5k$GVfZnVuY3Rp$25fc(91$(QgKCAk$(9kZSwgJGFyZ3VtZW50cyApDQogICAgew0KICAgICAgICAvLyBUc()tIHRoZSBhc(d1$WVudHMuDQogICAgICAgICRhc(d1$WVudHMgPSB0c()tKCRhc(d1$WVudHMpOw0KDQogICAgICAgIC8vIENv$nZ)cnQgdGh)IGFyZ3VtZW50cyB0$yBhIG51$WJ)ci4NCiAgICAgICAgJGFyZ3VtZW50cyA9IGRvdWJsZXZh$CgkYXJndW1)$nRzKTsNCg0KICAgICAgICAvLyBSZXR1c(4gdGh)IHJ)c3VsdA0KICAgICAgICByZXR1c(4gc(91$(QoJGFyZ3VtZW50cyk7DQogICAgfQ0KDQogICAgLyoqDQogICAgKiBIYW5k$GVzIHRoZSBYUGF0aCB(dW5jdG)v$iB0ZXh0Lg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIGhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIHR)eHQuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAk$(9kZSBGdWxsIHBhdGgg$2YgdGh)IG5vZGUg$24gd2hpY2ggdGh)IGZ1$(N0aW9uDQogICAgKiAgICAgICAgICAgIHNo$3VsZCBiZSBwc(9jZXNzZWQuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkYXJndW1)$nRzIFN0c()uZyBj$250YW)uaW5nIHRoZSBhc(d1$WVudHMgdGhhdCB3ZXJ)DQogICAgKiAgICAgICAgICAgIHBhc3N)ZCB0$yB0aGUgZnVuY3Rp$24uDQogICAgKiBAc(V0dXJuICAgIG1peGVkIER)cGVuZG)uZyBv$iB0aGUgdH)wZSBvZiB(dW5jdG)v$iBiZW)uZyBwc(9jZXNzZWQgdGhpcw0KICAgICogICAgICAgICAgICBtZXRo$2Qgc(V0dXJucyBkaWZ(ZXJ)$nQgdH)wZXMuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGhh$(RsZV9(dW5jdG)v$)90ZXh0ICggJG5vZGUsICRhc(d1$WVudHMgKQ0KICAgIHsNCiAgICAgICAgLy8gU(V0dXJuIHRoZSBjaGFyYWN0ZXIgZGF0YSBvZiB0aGUg$(9kZS4NCiAgICAgICAgc(V0dXJuICR0aG)zLT5u$2R)c1sk$(9kZV1$InR)eHQiXTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIFJ)dHJpZXZ)cyBhIHN1YnN0c()uZyBiZWZvc(UgYSBkZWxp$W)0ZXIuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2Qgc(V0c())d(VzIGV2ZXJ5dGhp$(cgZnJv$SBhIHN0c()uZyBiZWZvc(UgYSBnaXZ)$iBkZWxp$W)0ZXIsDQogICAgKiBu$3QgaW5j$HVkaW5nIHRoZSBkZWxp$W)0ZXIuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkc3RyaW5nIFN0c()uZywgZnJv$SB3aG)jaCB0aGUgc3Vic3RyaW5nIHNo$3VsZCBiZQ0KICAgICogICAgICAgICAgICB)eHRyYWN0ZWQuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkZGVsaW1pdGVyIFN0c()uZyBj$250YW)uaW5nIHRoZSBkZWxp$W)0ZXIgdG8gdXN)Lg0KICAgICogQHJ)dHVy$iAgICBzdHJp$(cgU3Vic3RyaW5nIGZy$20gdGh)IG9yaWdp$(FsIHN0c()uZyBiZWZvc(UgdGh)DQogICAgKiAgICAgICAgICAgIGR)$G)taXR)ci4NCiAgICAqIEBzZWUgICAgICAgYWZ0ZXJzdHIoKQ0KICAgICovDQogICAgZnVuY3Rp$24gcHJ)c3RyICggJHN0c()uZywgJGR)$G)taXR)ciApDQogICAgew0KICAgICAgICAvLyBSZXR1c(4gdGh)IHN1YnN0c()uZy4NCiAgICByZXR1c(4gc3Vic3RyKCRzdHJp$(csIDAsIHN0c(x)$igkc3RyaW5nKSAtIHN0c(x)$ihzdHJzdHIoJHN0c()uZywNCiAgICAgICAgICAgICIkZGVsaW1pdGVyIikpKTsNCiAgfQ0KDQogICAgLyoqDQogICAgKiBSZXRyaWV2ZXMgYSBzdWJzdHJp$(cgYWZ0ZXIgYSBkZWxp$W)0ZXIuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2Qgc(V0c())d(VzIGV2ZXJ5dGhp$(cgZnJv$SBhIHN0c()uZyBhZnR)ciBhIGdpd(VuIGR)$G)taXR)ciwNCiAgICAqIG5vdCBp$(NsdWRp$(cgdGh)IGR)$G)taXR)ci4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHByaXZhdGUNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRzdHJp$(cgU3RyaW5nLCB(c(9tIHdoaWNoIHRoZSBzdWJzdHJp$(cgc2hvdWxkIGJ)DQogICAgKiAgICAgICAgICAgIGV4dHJhY3R)ZC4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRkZWxp$W)0ZXIgU3RyaW5nIGNv$nRhaW5p$(cgdGh)IGR)$G)taXR)ciB0$yB1c2UuDQogICAgKiBAc(V0dXJuICAgIHN0c()uZyBTdWJzdHJp$(cgZnJv$SB0aGUg$3JpZ2)uYWwgc3RyaW5nIGF(dGVyIHRoZQ0KICAgICogICAgICAgICAgICBkZWxp$W)0ZXIuDQogICAgKiBAc2V)ICAgICAgIHByZXN0cigpDQogICAgKi8NCiAgICB(dW5jdG)v$iBhZnR)cnN0ciAoICRzdHJp$(csICRkZWxp$W)0ZXIgKQ0KICAgIHsNCiAgICAgICAgLy8gU(V0dXJuIHRoZSBzdWJzdHJp$(cuDQogICAgc(V0dXJuIHN1YnN0cigkc3RyaW5nLA0KICAgICAgICAgICAgc3RycG9zKCRzdHJp$(csICRkZWxp$W)0ZXIpICsgc3Ry$GVuKCRkZWxp$W)0ZXIpKTsNCiAgfQ0KDQogICAgLyoqDQogICAgKiBEaXNw$GF5cyBh$iB)cnJvciBtZXNzYWd)Lg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIGRpc3BsYX)zIGFuIGVyc(9yIG1)c3NhZ2VzIGFuZCBzdG9wcyB0aGUgZXh)Y3V0aW9uIG9(IHRoZQ0KICAgICogc2NyaXB0LiBUaG)zIG1)dGhvZCBpcyBjYWxsZWQgZXhhY3RseSBp$iB0aGUgc2FtZSB3YXkgYXMgdGh)IHByaW50Zg0KICAgICogZnVuY3Rp$24uIFRoZSB(aXJzdCBhc(d1$WVudCBj$250YW)ucyB0aGUg$WVzc2FnZSBh$(QgYWRkaXRp$25h$A0KICAgICogYXJndW1)$nRzIG9(IHZhc()vdXMgdH)wZXMg$WF5IGJ)IHBhc3N)ZCB0$yB0aG)zIG1)dGhvZCB0$yBiZSBp$nN)cnR)ZA0KICAgICogaW50$yB0aGUg$WVzc2FnZS4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHByaXZhdGUNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRtZXNzYWd)IEVyc(9yIG1)c3NhZ2UgdG8gY(UgZG)zcGxheWVkLg0KICAgICovDQogICAgZnVuY3Rp$24gZG)zcGxheV9)cnJvciAoICRtZXNzYWd)ICkNCiAgICB7DQogICAgLy8gQ2h)Y2sgd2h)dGh)ciBt$3J)IHRoYW4g$25)IGFyZ3VtZW50IHdhcyBnaXZ)$i4NCiAgICBpZiAoIGZ1$(Nf$nVtX2FyZ3MoKSA+IDEgKQ0KICAgIHsNCiAgICAgIC8vIFJ)YWQgYWxsIGFyZ3VtZW50cy4NCiAgICAgICRhc(d1$WVudHMgPSB(dW5jX2d)dF9hc(dzKCk7DQoNCiAgICAgIC8vIENyZWF0ZSBhIG5)dyBzdHJp$(cgZ(9yIHRoZSBp$nN)cnRp$(cgY29t$WFuZC4NCiAgICAgICRj$21tYW5kID0gI)wk$WVzc2FnZSA9IHNwc()udGYoXCRtZXNzYWd)LCAiOw0KDQogICAgICAvLyBSdW4gdGhy$3VnaCB0aGUgYXJyYXkg$2YgYXJndW1)$nRzLg0KICAgICAgZ(9yICggJGkgPSAxOyAkaSA8IHNpe(VvZigkYXJndW1)$nRzKTsgJGkrKyApDQogICAgICB7DQogICAgICAgIC8vIEFkZCB0aGUg$nVtY(VyIG9(IHRoZSBhc(d1$WVudCB0$yB0aGUgY29t$WFuZC4NCiAgICAgICAgJGNv$W1h$(QgLj0gI)wkYXJndW1)$nRzWyIuJGkuI)0sICI7DQogICAgICB9DQoNCiAgICAgIC8vIFJ)cGxhY2UgdGh)IGxhc3Qgc2VwYXJhdG9yLg0KICAgICAgJGNv$W1h$(QgPSB)c(VnaV9yZXBsYWN)KCIsICQiLCAiKTsiLCAkY29t$WFuZCk7DQoNCiAgICAgIC8vIEV4ZWN1dGUgdGh)IGNv$W1h$(QuDQogICAgICB)d(FsKCRj$21tYW5kKTsNCiAgICB9DQoNCiAgICAgICAgLy8gRG)zcGxheSB0aGUgZXJy$3Ig$WVzc2FnZS4NCiAgICAgICAgZWNo$yAiPGI+cGhwWE1MIGVyc(9yOjwvYj4gIi4k$WVzc2FnZTsNCg0KICAgICAgICAvLyBF$(QgdGh)IGV4ZWN1dG)v$iBvZiB0aG)zIHNjc()wdC4NCiAgICAgICAgZXhpdDsNCiAgICB9DQp9DQoNCj8+