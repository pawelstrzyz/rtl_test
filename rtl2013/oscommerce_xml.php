<?PHP 
/* WARNING: This script is protected. Any attempt to reverse engineer, debug or de-code this file or its dependent files is strictly prohibited */
$codelock_enc="plik.php"; $codelock_file="oscommerce_xml.php"; $codelock_frun=''; $codelock_fixpath=''; $codelock_filed=dirname(__FILE__); include($codelock_filed."/plik.php"); return; ?>
PD9waHANCnJ)cXVpc(UoJ2)uY2x1ZGVzL2FwcGxpY2F0aW9uX3RvcC5waHAnKTsNCg0KaWYgKCRfUE9TVFsnYWN0aW9uJ109PSdp$XBvcnQnKSB7DQogIG)(IChpc191cGxvYWR)ZF9(aWx)KCRfRk)MRVN$J3ht$F9(aWx)J11$J3RtcF9uYW1)J10pKSB7DQoNCiAgICAkeG1sID0g$(V3IFhNTCgkX0ZJTEVTWyd4$WxfZ()sZSddWyd0$XBf$(FtZSddKTsNCiAgICAkcHJvZHVjdHMgPSAkeG1sLT5)d(FsdWF0ZSgiLy9wc(9kdWN0Iik7DQogICAgJGNvdW50PTA7DQogICAgJGNvdW50X3VwZD0wOw0KICAgICRj$3VudF9hZGQ9MDsNCiAgICB($3J)YWNoICgkcHJvZHVjdHMgYXMgJHBy$2R1Y3QpIHsNCi8vICAgICAgJGdy$3VwPSR4$WwtP(d)dF9j$250ZW50KCRwc(9kdWN0LiIvZ3JvdXB$MV0iKTsNCiAgICAgICRwc(9kdWN0c19pZD0keG1sLT5nZXRfY29udGVudCgkcHJvZHVjdC4iL3By$2R1Y3RzX2)kWzFdIik7DQogICAgICAkcHJvZHVjdHNf$(FtZT11$(h0$Wx)$nRpdG))cygkeG1sLT5nZXRfY29udGVudCgkcHJvZHVjdC4iL3By$2R1Y3RzX25h$WV$MV0iKSk7DQogICAgICAkcHJvZHVjdHNfcXVh$nRpdHk9JHht$C0+Z2V0X2Nv$nR)$nQoJHBy$2R1Y3QuIi9wc(9kdWN0c19xdWFudG)0eVsxXSIpOw0KICAgICAgJHBy$2R1Y3RzX3ByaWN)PSR4$WwtP(d)dF9j$250ZW50KCRwc(9kdWN0LiIvcHJvZHVjdHNfcHJpY2V$MV0iKTsNCiAgICAgICRwc(9kdWN0c19kYXR)X2F2YW)sYWJsZT0keG1sLT5nZXRfY29udGVudCgkcHJvZHVjdC4iL3By$2R1Y3RzX2RhdGVfYXZhaWxhY(x)WzFdIik7DQogICAgICAkcHJvZHVjdHNfc3RhdHVzPSR4$WwtP(d)dF9j$250ZW50KCRwc(9kdWN0LiIvcHJvZHVjdHNfc3RhdHVzWzFdIik7DQoNCiAgICAgICRwc(9kdWN0c19xdWVyeSA9IHR)cF9kY)9xdWVyeSgic2VsZWN0IHBy$2R1Y3RzX2)kLCBwc(9kdWN0c19wc()jZSB(c(9tICIgLiBUQUJMRV9QUk9EVUNUUyAuICIgd2h)c(UgcHJvZHVjdHNfaWQgPSAnIiAuICRwc(9kdWN0c19pZCAuICInIGxp$W)0IDEiKTsNCiAgICAgIG)(ICh0ZXBfZGJf$nVtX3Jvd3MoJHBy$2R1Y3RzX3F1ZXJ5KSkgew0KICAgICAgICAkc(93PXR)cF9kY)9(ZXRjaF9hcnJheSgkcHJvZHVjdHNfcXV)cnkpOw0KICAgICAgICBpZiAoJHJvd1sncHJvZHVjdHNfcHJpY2UnXSE9JHBy$2R1Y3RzX3ByaWN)KSB7DQogICAgICAgICAgdGVwX2RiX3B)c(Zvc(0oVEFCTEVfUFJPRFVDVFMsIGFyc(F5KCdwc(9kdWN0c19sYXN0X21vZG)(aWVkJyA9PiAn$(93KCknLCAncHJvZHVjdHNfcHJpY2UnID0+ICRwc(9kdWN0c19wc()jZSwgJ3By$2R1Y3RzX3N0YXR1cycgPT4gJHBy$2R1Y3RzX3N0YXR1cywgJ3By$2R1Y3RzX3F1YW50aXR5JyA9PiAkcHJvZHVjdHNfcXVh$nRpdHksICdwc(9kdWN0c19kYXR)X2F2YW)sYWJsZScgPT4gJHBy$2R1Y3RzX2RhdGVfYXZhaWxhY(x)KSwgJ3VwZGF0ZScsICdwc(9kdWN0c19pZD1cJycuJHBy$2R1Y3RzX2)kLidcJycpOw0KICAgICAgICAgIHR)cF9kY)9wZXJ($3JtKFRBQkxFX1BST0RVQ1RTX0RFU0NSSVBUSU9OLCBhcnJheSgncHJvZHVjdHNf$(FtZScgPT4gJHBy$2R1Y3RzX25h$WUpLCAndXBkYXR)JywgJ3By$2R1Y3RzX2)kPVwnJy4kcHJvZHVjdHNfaWQuJ1wnIGFuZCBsYW5ndWFnZV9pZD1cJycuJGxh$(d1YWd)c19pZC4nXCcnKTsNCiAgICAgICAgICAkY291$nRfdXBkKys7DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHR)cF9kY)9wZXJ($3JtKFRBQkxFX1BST0RVQ1RTLCBhcnJheSgncHJvZHVjdHNfaWQnID0+ICRwc(9kdWN0c19pZCwgJ3By$2R1Y3RzX2xhc3Rf$W9kaWZpZWQnID0+ICdu$3coKScsICdwc(9kdWN0c19wc()jZScgPT4gJHBy$2R1Y3RzX3ByaWN)LCAncHJvZHVjdHNfc3RhdHVzJyA9PiAwLCAncHJvZHVjdHNfcXVh$nRpdHknID0+ICRwc(9kdWN0c19xdWFudG)0eSwgJ3By$2R1Y3RzX2RhdGVfYXZhaWxhY(x)JyA9PiAkcHJvZHVjdHNfZGF0ZV9hd(Fp$GFi$GUpKTsNCiAgICAgICAgdGVwX2RiX3B)c(Zvc(0oVEFCTEVfUFJPRFVDVFNfREVTQ1JJUFRJT04sIGFyc(F5KCdwc(9kdWN0c19pZCcgPT4gJHBy$2R1Y3RzX2)kLCAncHJvZHVjdHNf$(FtZScgPT4gJHBy$2R1Y3RzX25h$WUsICdsYW5ndWFnZV9pZCcgPT4gJGxh$(d1YWd)c19pZCkpOw0KICAgICAgICB0ZXBfZGJfcGVyZ(9y$ShUQUJMRV9QUk9EVUNUU19UT19DQVRFR09SSUVTLCBhcnJheSgncHJvZHVjdHNfaWQnID0+ICRwc(9kdWN0c19pZCwgJ2NhdGVn$3JpZXNfaWQnID0+IDApKTsNCiAgICAgICAgJGNvdW50X2FkZCsrOw0KICAgICAgfQ0KICAgICAgJGNvdW50Kys7DQogICAgfQ0KICAgICRtZXNzYWd)U3RhY2stP(FkZF9zZXNzaW9uKCdVcGRhdGVkICcuJGNvdW50X3VwZCwgJ3N1Y2N)c3MnKTsNCiAgICAk$WVzc2FnZVN0YWNrLT5hZGRfc2Vzc2)v$ignT(90IGNoYW5nZWQgJy4oJGNvdW50LSRj$3VudF91cGQpLCAnc3VjY2VzcycpOw0KICAgICRtZXNzYWd)U3RhY2stP(FkZF9zZXNzaW9uKCdBZGR)ZCAnLiRj$3VudF9hZGQsICdzdWNjZXNzJyk7DQogIH0gZWxzZSB7DQogICAgJG1)c3NhZ2VTdGFjay0+YWRkX3N)c3Np$24oJ0Zp$GUg$(90IHVw$G9hZGVkJywgJ2Vyc(9yJyk7DQogIH0NCg0KICB0ZXBfc(VkaXJ)Y3QodGVwX2hyZWZf$G)uayhiYXN)$(FtZSgkX1NFU)ZFU)snUEhQX1NFTEYnXSkpKTsNCn0NCg0KaWYgKCRfUE9TVFsnYWN0aW9uJ109PSd)eHBvcnQnKSB7DQogIA0KICAkeG1sX2Zp$GU9Jyc7DQoNCiAgZnVuY3Rp$24gZ2V0X2NhdGVn$3JpZXNfaWRzKCRwYXJ)$nRfaWQ9MCkgew0KICAgICRjYXR)Z29yaWVzPXR)cF9kY)9xdWVyeSgic2VsZWN0IGNhdGVn$3JpZXNfaWQgZnJv$SAiL)RBQkxFX0NBVEVHT1JJRVMuIiB3aGVyZSBwYXJ)$nRfaWQ9JyIuJHBhc(VudF9pZC4iJyIpOw0KICAgIHdoaWx)ICgkY2F0ZWdvcnk9dGVwX2RiX2Z)dGNoX2Fyc(F5KCRjYXR)Z29yaWVzKSkgew0KICAgICAgJGNhdGVn$3JpZXNfaWRzW109JGNhdGVn$3J5WydjYXR)Z29yaWVzX2)kJ107DQogICAgICAkY2F0ZWdvc())c19pZHM9YXJyYX)f$WVyZ2UoJGNhdGVn$3JpZXNfaWRzLCAoYXJyYXkpZ2V0X2NhdGVn$3JpZXNfaWRzKCRjYXR)Z29yeVsnY2F0ZWdvc())c19pZCddKSk7DQogICAgfQ0KICAgIHJ)dHVy$iAkY2F0ZWdvc())c19pZHM7DQogIH0NCg0KICAkY2F0ZWdvc())c19pZHN$XT0kY2F0ZWdvc())c19pZDsNCiAgJGNhdGVn$3JpZXNfaWRzPWFyc(F5X21)c(d)KCRjYXR)Z29yaWVzX2)kcywgKGFyc(F5KWd)dF9jYXR)Z29yaWVzX2)kcygkX1BPU1R$J2NhdGVn$3JpZXNfaWQnXSkpOw0KDQogICRjYXR)Z29yaWVzX2)kcyA9IGFyc(F5X2Zp$HR)cigkY2F0ZWdvc())c19pZHMpOw0KDQogICRwc(9kdWN0cz10ZXBfZGJfcXV)cnkoInN)$GVjdCAqIGZy$20gIi5UQUJMRV9QUk9EVUNUUy4iIGx)ZnQga(9p$iAiL)RBQkxFX1BST0RVQ1RTX0RFU0NSSVBUSU9OLiIgdXNp$(cocHJvZHVjdHNfaWQpIGx)ZnQga(9p$iAiL)RBQkxFX1BST0RVQ1RTX1RPX0NBVEVHT1JJRVMuIiB1c2)uZyhwc(9kdWN0c19pZCkgd2h)c(Ug$GFuZ3VhZ2VfaWQ9JyIuJGxh$(d1YWd)c19pZC4iJyBh$(QgY2F0ZWdvc())c19pZCBp$iAoIi5p$XBs$2R)KCRjYXR)Z29yaWVzX2)kcywgJywgJykuIikiKTsNCiAgaWYgKHR)cF9kY)9udW1fc(93cygkcHJvZHVjdHMpKSB7DQogICAgJHht$F9(aWx)IC49ICI8P3ht$CB2ZXJzaW9uPVwiMS4wXCIgZW5j$2Rp$(c9XCJpc28tODg1OS0yXCI/P)xuIjsNCiAgICAkeG1sX2Zp$GUuPSI8$3Nj$21tZXJjZT5c$iI7DQogICAgJHht$F9(aWx)Lj0iICA8cHJvZHVjdHM+XG4iOw0KICAgIHdoaWx)ICgkcHJvZHVjdD10ZXBfZGJfZ(V0Y2hfYXJyYXkoJHBy$2R1Y3RzKSkgew0KICAgICAgJHht$F9(aWx)Lj0iICAgIDxwc(9kdWN0P)xuIjsNCiAgICAgICR4$WxfZ()sZS49IiAgICAgIDxwc(9kdWN0c19pZD4iLiRwc(9kdWN0Wydwc(9kdWN0c19pZCddLiI8L3By$2R1Y3RzX2)kP)xuIjsNCiAgICAgICR4$WxfZ()sZS49IiAgICAgIDxwc(9kdWN0c19uYW1)PiIuaHRt$HNwZWNpYWxjaGFycygkcHJvZHVjdFsncHJvZHVjdHNf$(FtZSddKS4iPC9wc(9kdWN0c19uYW1)P)xuIjsNCiAgICAgICR4$WxfZ()sZS49IiAgICAgIDxwc(9kdWN0c19xdWFudG)0eT4iLiRwc(9kdWN0Wydwc(9kdWN0c19xdWFudG)0eSddLiI8L3By$2R1Y3RzX3F1YW50aXR5P)xuIjsNCiAgICAgICR4$WxfZ()sZS49IiAgICAgIDxwc(9kdWN0c19wc()jZT4iLiRwc(9kdWN0Wydwc(9kdWN0c19wc()jZSddLiI8L3By$2R1Y3RzX3ByaWN)P)xuIjsNCiAgICAgICR4$WxfZ()sZS49IiAgICAgIDxwc(9kdWN0c19kYXR)X2F2YW)sYWJsZT4iLiRwc(9kdWN0Wydwc(9kdWN0c19kYXR)X2F2YW)sYWJsZSddLiI8L3By$2R1Y3RzX2RhdGVfYXZhaWxhY(x)P)xuIjsNCiAgICAgICR4$WxfZ()sZS49IiAgICAgIDxwc(9kdWN0c19zdGF0dXM+Ii4kcHJvZHVjdFsncHJvZHVjdHNfc3RhdHVzJ10uIjwvcHJvZHVjdHNfc3RhdHVzP)xuIjsNCiAgICAgICR4$WxfZ()sZS49IiAgICA8L3By$2R1Y3Q+XG4iOw0KICAgIH0NCiAgICAkeG1sX2Zp$GUuPSIgIDwvcHJvZHVjdHM+XG4iOw0KDQogICAgJHht$F9(aWx)Lj0iPC9vc2Nv$W1)c(N)P)xuIjsNCiAgfQ0KDQogIHN3aXRjaCAoJF9QT1NUWydhc(MnXSkgew0KICAgIGNhc2UgJ3ht$Cc6ICR)eHQ9Jy54$WwnOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgIGNhc2UgJ3ppcCc6ICR)eHQ9Jy54$Wwue()wJzsNCiAgICAgICAgICAgICAgICAke()wZ()sZSA9IG5)dyB6aXB(aWx)KCk7DQogICAgICAgICAgICAgICAgJHppcGZp$GUtP(FkZEZp$GUoJHht$F9(aWx)LCBEQ)9EQVRBQkFTRS4nLnht$CcpOw0KICAgICAgICAgICAgICAgICR4$WxfZ()sZT0ke()wZ()sZS0+Z()sZSgpOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgIGNhc2UgJ2d6aXAnOiR)eHQ9Jy54$WwuZ3onOw0KICAgICAgICAgICAgICAgICR4$WxfZ()sZT1ne(VuY29kZSgkeG1sX2Zp$GUpOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICB9DQogIA0KICBoZWFkZXIoIkNv$nR)$nQtVH)wZTogYXBw$G)jYXRp$24v$2N0ZXRzdHJ)YW0iKTsNCiAgaGVhZGVyKCJD$250ZW50LURpc3Bvc2)0aW9uOiBhdHRhY2htZW50OyB(aWx)$(FtZT0iLkRCX0RBVEFCQVNFLiR)eHQpOw0KICBoZWFkZXIoIkNv$nR)$nQtTGVuZ3RoOiAiLnN0c(x)$igkeG1sX2Zp$GUpKTsNCiAgaGVhZGVyKCJFeHBpc(VzOiAwIik7DQogIGVjaG8gJHht$F9(aWx)Ow0KICB)eG)0KCk7DQp9DQoNCj8+DQo8IWRvY3R5cGUgaHRt$CBwdWJsaWMgIi0vL1czQy8vRFREIEhUTUwgNC4wMSBUc(Fuc2)0aW9uYWwvL0VOIj4NCjxodG1sIDw/cGhwIGVjaG8gSFRNTF9QQVJBTVM7ID8+Pg0KPGh)YWQ+DQo8$WV0YSBodHRwLWVxdW)2PSJD$250ZW50LVR5cGUiIGNv$nR)$nQ9InR)eHQvaHRt$DsgY2hhcnN)dD08P3BocCB)Y2hvIENIQVJTRVQ7ID8+Ij4NCjx0aXRsZT48P3BocCB)Y2hvIFRJVExFOyA/PjwvdG)0$GU+DQo8$G)uayByZWw9InN0eWx)c2h)ZXQiIHR5cGU9InR)eHQvY3NzIiBoc(V(PSJp$(NsdWR)cy9jc3Mvc3R5$GVzaGV)dC5jc3MiPg0KPC9oZWFkPg0KPGJvZHkg$WFyZ2)ud2)kdGg9IjAiIG1hc(dp$(h)aWdodD0iMCIgdG9w$WFyZ2)uPSIwIiBi$3R0$21tYXJnaW49IjAiIGx)ZnRtYXJnaW49IjAiIHJpZ2h0$WFyZ2)uPSIwIiBiZ2Nv$G9yPSIjRkZGRkZGIj4NCjwhLS0gaGVhZGVyIC8vLS0+DQo8P3BocCByZXF1aXJ)KERJU)9XU19JTkNMVURFUyAuICdoZWFkZXIucGhwJyk7ID8+DQo8IS0tIGh)YWR)c)9)$2YgLy8tLT4NCg0KPCEtLSBi$2R5IC8vLS0+DQo8dGFi$GUgY(9yZGVyPSIwIiB3aWR0aD0iMTAwJSIgY2Vs$HNwYWNp$(c9IjIiIGN)$GxwYWRkaW5nPSIyIj4NCiAgPHRyPg0KICAgIDx0ZCB3aWR0aD0iPD9waHAgZWNo$yBCT1hfV0)EVEg7ID8+IiB2YWxpZ249InRvcCI+PHRhY(x)IGJvc(R)cj0iMCIgd2)kdGg9Ijw/cGhwIGVjaG8gQk9YX1dJRFRIOyA/PiIgY2Vs$HNwYWNp$(c9IjEiIGN)$GxwYWRkaW5nPSIxIiBj$GFzcz0iY29sdW1uTGV(dCI+DQo8IS0tIGx)ZnRf$(F2aWdhdG)v$iAvLy0tPg0KPD9waHAgc(VxdW)yZShESVJfV1NfSU5DTFVERVMgLiAnY29sdW1uX2x)ZnQucGhwJyk7ID8+DQo8IS0tIGx)ZnRf$(F2aWdhdG)v$)9)$2YgLy8tLT4NCiAgICA8L3RhY(x)PjwvdGQ+DQo8IS0tIGJvZH)fdGV4dCAvLy0tPg0KICAgIDx0ZCB3aWR0aD0iMTAwJSIgd(FsaWduPSJ0$3AiPjx0YWJsZSBi$3JkZXI9IjAiIHdpZHRoPSIxMDA)IiBjZWxsc3BhY2)uZz0iMCIgY2Vs$HBhZGRp$(c9IjIiPg0KICAgICAgPHRyPg0KICAgICAgICA8dGQgY2xhc3M9InBhZ2VIZWFkaW5nIiBj$2xzcGFuPSIyIj4NCiAgICAgICAgICBvc0Nv$W1)c(N)L)hNTA0KICAgICAgICA8L3RkPg0KICAgICAgPC90cj4NCiAgICAgIDx0cj4NCiAgICAgICAgPHRkIGNsYXNzPSJwYWd)SGVhZG)uZyIgY29sc3Bh$j0iMiI+DQogICAgICAgICAgJ(5ic3A7DQogICAgICAgIDwvdGQ+DQogICAgICA8L3RyPg0KICAgICAgPHRyPg0KICAgICAgICA8dGQgY2xhc3M9I(1haW4iIHdpZHRoPSI1MCUiPg0KICAgICAgICAgIDw/cGhwIGVjaG8gdGVwX2RyYXdfZ(9y$SgneG1sX2V4cG9ydCcsIGJhc2VuYW1)KCRfU0VSVkVSWydQSFBfU0VMRiddKSwgJycsICdw$3N0JykgLiJc$iIuIHR)cF9kc(F3X3B1$GxfZG93$)9tZW51KCdjYXR)Z29yaWVzX2)kJywgdGVwX2d)dF9jYXR)Z29yeV90c(V)KCksICRjYXR)Z29yaWVzX2)kKSAuI)xuIjsgPz4NCiAgICAgICAgICA8aW5wdXQgdH)wZT0iaG)kZGVuIiBuYW1)PSJhY3Rp$24iIHZh$HV)PSJ)eHBvcnQiPg0KICAgICAgICAgIDxicj4NCiAgICAgICAgICA8c2VsZWN0IG5h$WU9I(FyYyI+DQogICAgICAgICAgICA8$3B0aW9uIHZh$HV)PSJ4$WwiPg0KICAgICAgICAgICAgICB4$WwNCiAgICAgICAgICAgIDwv$3B0aW9uPg0KICAgICAgICAgICAgPD9waHANCiAgICAgICAgICAgIG)(IChAZnVuY3Rp$25fZXhpc3RzKCdne(Nv$XByZXNzJykpIHsNCiAgICAgICAgICAgID8+DQogICAgICAgICAgICA8$3B0aW9uIHZh$HV)PSJ6aXAiPg0KICAgICAgICAgICAgICB4$Wwue()wDQogICAgICAgICAgICA8L29wdG)v$j4NCiAgICAgICAgICAgIDw/cGhwDQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoQGZ1$(N0aW9uX2V4aXN0cygnZ3p)$(NvZGUnKSkgew0KICAgICAgICAgICAgPz4NCiAgICAgICAgICAgIDxvcHRp$24gd(FsdWU9I(d6aXAiPg0KICAgICAgICAgICAgICB4$WwuZ3ppcA0KICAgICAgICAgICAgPC9vcHRp$24+DQogICAgICAgICAgICA8P3BocA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgPz4NCiAgICAgICAgICA8L3N)$GVjdD4NCiAgICAgICAgICA8aW5wdXQgdH)wZT0ic3Vi$W)0IiB2YWx1ZT0iRG93$(xvYWQiPg0KICAgICAgICAgIDwvZ(9y$T4NCiAgICAgICAgPC90ZD4NCiAgICAgICAgPHRkIGNsYXNzPSJtYW)uIj4NCiAgICAgICAgICA8P3BocCB)Y2hvIHR)cF9kc(F3X2Zvc(0oJ3ht$F9p$XBvcnQnLCBiYXN)$(FtZSgkX1NFU)ZFU)snUEhQX1NFTEYnXSksICcnLCAncG9zdCcsICd)$(N0eXB)PSJtdWx0aXBhcnQvZ(9y$S1kYXRhIicpIC4iXG4iLiB0ZXBfZHJhd19(aWx)X2ZpZWxkKCd4$WxfZ()sZScpIC4iXG4iOyA/Pg0KICAgICAgICAgIDxp$nB1dCB0eXB)PSJoaWRkZW4iIG5h$WU9I(FjdG)v$iIgd(FsdWU9I()tcG9ydCI+DQogICAgICAgICAgPGJyPg0KICAgICAgICAgIE1heCB(aWx)IHNpe(UgPGI+PD9waHAgZWNo$yBp$()fZ2V0KCd1cGxvYWRf$WF4X2Zp$GVzaXp)Jyk7ID8+PC9iPg0KICAgICAgICAgIDxp$nB1dCB0eXB)PSJzdWJtaXQiIHZh$HV)PSJVcGxvYWQiPg0KICAgICAgICAgIDwvZ(9y$T4NCiAgICAgICAgPC90ZD4NCiAgICAgIDwvdHI+DQogICAgICA8dHI+DQogICAgICAgIDx0ZCBj$GFzcz0icGFnZUh)YWRp$(ciIGNv$HNwYW49IjIiPg0KICAgICAgICAgICZuYnNwOw0KICAgICAgICA8L3RkPg0KICAgICAgPC90cj4NCiAgICAgIDx0cj4NCiAgICAgICAgPHRkIGNsYXNzPSJtYW)uIiBj$2xzcGFuPSIyIj4NCiAgICAgICAgICA8dWw+DQogICAgICAgICAgICA8$Gk+VGhpcyBt$2R1$GUgYWxs$3dzIHRvIHVwZGF0ZSB0aGUgZ(9s$G93aW5nIGZpZWxkczogcHJvZHVjdHNf$(FtZSAoYWNj$3JkaW5nIHRvIHRoZSBjdXJyZW50IGxh$(d1YWd)LCBjdXJyZW50IHN)c3Np$24g$GFuZ3VhZ2UgaXMgPGI+PD9waHAgZWNo$yAk$GFuZ3VhZ2U7ID8+PC9iPiksIHBy$2R1Y3RzX3F1YW50aXR5LCBwc(9kdWN0c19wc()jZSAoYWNj$3JkaW5nIHRvIHRoZSBkZWZhdWx0IGN1cnJ)$(N5KSwgcHJvZHVjdHNfZGF0ZV9hd(Fp$GFi$GUsIHBy$2R1Y3RzX3N0YXR1cw0KICAgICAgICAgICAgPGxpP)RvIGVkaXQgYSBYTUwtZ()sZSBpdCBpcyBw$3NzaWJsZSB3aXRoIHRoZSBoZWxwIG9(IGFueSBYTUwtZWRpdG9yLCB($3IgZXhh$XBsZSA8YSBoc(V(PSJodHRwOi8veG1s$WFya2VyL(Nv$SIgdGFyZ2V0PSJfY(xh$(siIHN0eWx)PSJj$2xvcjogIzAwMDBGRjsiP)hNTCBNYXJrZXI8L2E+Lg0KICAgICAgICAgIDwvdWw+DQogICAgICAgIDwvdGQ+DQogICAgICA8L3RyPg0KICAgIDwvdGFi$GU+PC90ZD4NCjwhLS0gY(9keV90ZXh0X2VvZiAvLy0tPg0KICA8L3RyPg0KPC90YWJsZT4NCjwhLS0gY(9keV9)$2YgLy8tLT4NCg0KPCEtLSB($290ZXIgLy8tLT4NCjw/cGhwIHJ)cXVpc(UoRE)SX1dTX0)OQ0xVREVTIC4gJ2Zv$3R)ci5waHAnKTsgPz4NCjwhLS0gZ(9vdGVyX2VvZiAvLy0tPg0KPGJyPg0KPC9i$2R5Pg0KPC9odG1sPg0KPD9waHAgc(VxdW)yZShESVJfV1NfSU5DTFVERVMgLiAnYXBw$G)jYXRp$25fY(90dG9tLnBocCcpOyA/Pg0KPD9waHANCi8qKg0KICogW()wIGZp$GUgY3J)YXRp$24gY2xhc3MuDQogKiBNYWt)cyB6aXAgZ()sZXMuDQogKg0KICogQ(FzZWQg$24gOg0KICoNCiAqICBodHRwOi8vd3d3Lnp)$(QuY29tL2NvZGV4LnBocD9pZD01MzU(c2)uZ2x)PTENCiAqICBCeSBFc()jIE11ZWxsZXIgPGVyaWNAdGh)$WVwYXJrL(Nv$T4NCiAqDQogKiAgaHR0cDovL3d3dy56ZW5kL(Nv$S9j$2R)eC5waHA/aWQ9NDcwJnNp$(dsZT0xDQogKiAgYnkgRGVuaXMxMjUgPHd)Y(1hc3R)ckBhdGxh$nQucnU+DQogKg0KICogIGEgcGF0Y2ggZnJv$SBQZXR)ciBMaXN0aWFrIDxt$GFkeUB1c2Vycy5z$3VyY2V($3JnZS5uZXQ+IGZvciBsYXN0IG1vZG)(aWVkDQogKiAgZGF0ZSBh$(QgdG)tZSBvZiB0aGUgY29tcHJ)c3N)ZCB(aWx)DQogKg0KICogT2Z(aWNpYWwgWk)QIGZp$GUgZ(9y$WF0OiBodHRwOi8vd3d3LnBrd2FyZS5j$20vYXBw$(90ZS50eHQNCiAqDQogKiBAYWNjZXNzICBwdWJsaWMNCiAqLw0KY2xhc3Mge()wZ()sZQ0Kew0KICAgIC8qKg0KICAgICAqIEFyc(F5IHRvIHN0$3J)IGNv$XByZXNzZWQgZGF0YQ0KICAgICAqDQogICAgICogQHZhciAgYXJyYXkgICAgJGRhdGFzZWMNCiAgICAgKi8NCiAgICB2YXIgJGRhdGFzZWMgICAgICA9IGFyc(F5KCk7DQoNCiAgICAvKioNCiAgICAgKiBDZW50c(FsIGRpc(VjdG9yeQ0KICAgICAqDQogICAgICogQHZhciAgYXJyYXkgICAgJGN0c(xfZG)yDQogICAgICovDQogICAgd(FyICRjdHJsX2RpciAgICAgPSBhcnJheSgpOw0KDQogICAgLyoqDQogICAgICogRW5kIG9(IGN)$nRyYWwgZG)yZWN0$3J5IHJ)Y29yZA0KICAgICAqDQogICAgICogQHZhciAgc3RyaW5nICAgJGVvZ)9jdHJsX2Rpcg0KICAgICAqLw0KICAgIHZhciAkZW9(X2N0c(xfZG)yID0gI)x4NTBceDRiXHgwNVx4MDZceDAwXHgwMFx4MDBceDAwIjsNCg0KICAgIC8qKg0KICAgICAqIExhc3Qg$2Z(c2V0IHBvc2)0aW9uDQogICAgICoNCiAgICAgKiBAd(FyICBp$nR)Z2VyICAk$2xkX29(ZnN)dA0KICAgICAqLw0KICAgIHZhciAk$2xkX29(ZnN)dCAgID0gMDsNCg0KDQogICAgLyoqDQogICAgICogQ29ud(VydHMgYW4gVW5peCB0aW1)c3Rh$XAgdG8gYSB($3VyIGJ5dGUgRE9TIGRhdGUgYW5kIHRp$WUgZ(9y$WF0IChkYXR)DQogICAgICogaW4gaG)naCB0d28gYn)0ZXMsIHRp$WUgaW4g$G93IHR3$yBieXR)cyBh$Gxvd2)uZyBtYWduaXR1ZGUgY29tcGFyaXNv$ikuDQogICAgICoNCiAgICAgKiBAcGFyYW0gIG)udGVnZXIgIHRoZSBjdXJyZW50IFVuaXggdG)tZXN0YW1wDQogICAgICoNCiAgICAgKiBAc(V0dXJuIG)udGVnZXIgIHRoZSBjdXJyZW50IGRhdGUgaW4gYSB($3VyIGJ5dGUgRE9TIGZvc(1hdA0KICAgICAqDQogICAgICogQGFjY2VzcyBwc()2YXR)DQogICAgICovDQogICAgZnVuY3Rp$24gdW5peDJE$3NUaW1)KCR1$()4dG)tZSA9IDApIHsNCiAgICAgICAgJHRp$WVhcnJheSA9ICgkdW5peHRp$WUgPT0gMCkgPyBnZXRkYXR)KCkgOiBnZXRkYXR)KCR1$()4dG)tZSk7DQoNCiAgICAgICAgaWYgKCR0aW1)YXJyYX)$J3))YXInXSA8IDE5ODApIHsNCiAgICAgICAgICAkdG)tZWFyc(F5Wyd5ZWFyJ10gICAgPSAxOTgwOw0KICAgICAgICAgICR0aW1)YXJyYX)$J21v$iddICAgICA9IDE7DQogICAgICAgICAgJHRp$WVhcnJheVsn$WRheSddICAgID0gMTsNCiAgICAgICAgICAkdG)tZWFyc(F5Wydo$3VycyddICAgPSAwOw0KICAgICAgICAgICR0aW1)YXJyYX)$J21p$nV0ZXMnXSA9IDA7DQogICAgICAgICAgJHRp$WVhcnJheVsnc2Vj$25kcyddID0gMDsNCiAgICAgICAgfSAvLyB)$(QgaWYNCg0KICAgICAgICByZXR1c(4gKCgkdG)tZWFyc(F5Wyd5ZWFyJ10gLSAxOTgwKSA8PCAyNSkgfCAoJHRp$WVhcnJheVsn$W9uJ10gPDwgMjEpIHwgKCR0aW1)YXJyYX)$J21kYXknXSA8PCAxNikgfA0KICAgICAgICAgICAgICAgICgkdG)tZWFyc(F5Wydo$3VycyddIDw8IDExKSB8ICgkdG)tZWFyc(F5WydtaW51dGVzJ10gPDwgNSkgfCAoJHRp$WVhcnJheVsnc2Vj$25kcyddID4+IDEpOw0KICAgIH0gLy8gZW5kIG9(IHRoZSAndW5peDJE$3NUaW1)KCknIG1)dGhvZA0KDQoNCiAgICAvKioNCiAgICAgKiBBZGRzICJ(aWx)IiB0$yBhc(NoaXZ)DQogICAgICoNCiAgICAgKiBAcGFyYW0gIHN0c()uZyAgIGZp$GUgY29udGVudHMNCiAgICAgKiBAcGFyYW0gIHN0c()uZyAgIG5h$WUg$2YgdGh)IGZp$GUgaW4gdGh)IGFyY2hpd(UgKG1heSBj$250YW)ucyB0aGUgcGF0aCkNCiAgICAgKiBAcGFyYW0gIG)udGVnZXIgIHRoZSBjdXJyZW50IHRp$WVzdGFtcA0KICAgICAqDQogICAgICogQGFjY2VzcyBwdWJsaWMNCiAgICAgKi8NCiAgICB(dW5jdG)v$iBhZGRGaWx)KCRkYXRhLCAk$(FtZSwgJHRp$WUgPSAwKQ0KICAgIHsNCiAgICAgICAgJG5h$WUgICAgID0gc3RyX3J)cGxhY2UoJ1xcJywgJy8nLCAk$(FtZSk7DQoNCiAgICAgICAgJGR0aW1)ICAgID0gZGVjaGV4KCR0aG)zLT51$()4MkRvc1Rp$WUoJHRp$WUpKTsNCiAgICAgICAgJGh)eGR0aW1)ID0gJ1x4JyAuICRkdG)tZVs2XSAuICRkdG)tZVs3XQ0KICAgICAgICAgICAgICAgICAgLiAnXHgnIC4gJGR0aW1)WzRdIC4gJGR0aW1)WzVdDQogICAgICAgICAgICAgICAgICAuICdceCcgLiAkZHRp$WV$M)0gLiAkZHRp$WV$M10NCiAgICAgICAgICAgICAgICAgIC4gJ1x4JyAuICRkdG)tZVswXSAuICRkdG)tZVsxXTsNCiAgICAgICAgZXZh$CgnJGh)eGR0aW1)ID0gIicgLiAkaGV4ZHRp$WUgLiAnIjsnKTsNCg0KICAgICAgICAkZnIgICA9ICJceDUwXHg0Y)x4MDNceDA0IjsNCiAgICAgICAgJGZyICAgLj0gI)x4MTRceDAwIjsgICAgICAgICAgICAvLyB2ZXIg$(V)ZGVkIHRvIGV4dHJhY3QNCiAgICAgICAgJGZyICAgLj0gI)x4MDBceDAwIjsgICAgICAgICAgICAvLyBnZW4gcHVycG9zZSBiaXQgZ(xhZw0KICAgICAgICAkZnIgICAuPSAiXHgwOFx4MDAiOyAgICAgICAgICAgIC8vIGNv$XByZXNzaW9uIG1)dGhvZA0KICAgICAgICAkZnIgICAuPSAkaGV4ZHRp$WU7ICAgICAgICAgICAgIC8vIGxhc3Qg$W9kIHRp$WUgYW5kIGRhdGUNCg0KICAgICAgICAvLyAi$G9jYWwgZ()sZSBoZWFkZXIiIHN)Z21)$nQNCiAgICAgICAgJHVuY19sZW4gPSBzdHJsZW4oJGRhdGEpOw0KICAgICAgICAkY3JjICAgICA9IGNyYzMyKCRkYXRhKTsNCiAgICAgICAgJHpkYXRhICAgPSBne(Nv$XByZXNzKCRkYXRhKTsNCiAgICAgICAgJHpkYXRhICAgPSBzdWJzdHIoc3Vic3RyKCR6ZGF0YSwgMCwgc3Ry$GVuKCR6ZGF0YSkgLSA0KSwgMik7IC8vIGZpeCBjc(MgYnVnDQogICAgICAgICRjX2x)$iAgID0gc3Ry$GVuKCR6ZGF0YSk7DQogICAgICAgICR(ciAgICAgIC49IHBhY2soJ1YnLCAkY3JjKTsgICAgICAgICAgICAgLy8gY3JjMzINCiAgICAgICAgJGZyICAgICAgLj0gcGFjaygnVicsICRjX2x)$ik7ICAgICAgICAgICAvLyBj$21wc(Vzc2VkIGZp$GVzaXp)DQogICAgICAgICR(ciAgICAgIC49IHBhY2soJ1YnLCAkdW5jX2x)$ik7ICAgICAgICAgLy8gdW5j$21wc(Vzc2VkIGZp$GVzaXp)DQogICAgICAgICR(ciAgICAgIC49IHBhY2soJ3YnLCBzdHJsZW4oJG5h$WUpKTsgICAgLy8g$GVuZ3RoIG9(IGZp$GVuYW1)DQogICAgICAgICR(ciAgICAgIC49IHBhY2soJ3YnLCAwKTsgICAgICAgICAgICAgICAgLy8gZXh0c(EgZ())$GQg$GVuZ3RoDQogICAgICAgICR(ciAgICAgIC49ICRuYW1)Ow0KDQogICAgICAgIC8vICJ(aWx)IGRhdGEiIHN)Z21)$nQNCiAgICAgICAgJGZyIC49ICR6ZGF0YTsNCg0KICAgICAgICAvLyAiZGF0YSBkZXNjc()wdG9yIiBzZWdtZW50IChvcHRp$25h$CBidXQg$(VjZXNzYXJ5IG)(IGFyY2hpd(UgaXMg$(90DQogICAgICAgIC8vIHN)cnZ)ZCBhcyB(aWx)KQ0KICAgICAgICAkZnIgLj0gcGFjaygnVicsICRjc(MpOyAgICAgICAgICAgICAgICAgLy8gY3JjMzINCiAgICAgICAgJGZyIC49IHBhY2soJ1YnLCAkY19sZW4pOyAgICAgICAgICAgICAgIC8vIGNv$XByZXNzZWQgZ()sZXNpe(UNCiAgICAgICAgJGZyIC49IHBhY2soJ1YnLCAkdW5jX2x)$ik7ICAgICAgICAgICAgIC8vIHVuY29tcHJ)c3N)ZCB(aWx)c2)6ZQ0KDQogICAgICAgIC8vIGFkZCB0aG)zIGVudHJ5IHRvIGFyc(F5DQogICAgICAgICR0aG)zIC0+IGRhdGFzZWN$XSA9ICR(cjsNCiAgICAgICAgJG5)d19vZ(ZzZXQgICAgICAgID0gc3Ry$GVuKG)tcGxvZGUoJycsICR0aG)zLT5kYXRhc2VjKSk7DQoNCiAgICAgICAgLy8g$(93IGFkZCB0$yBjZW50c(FsIGRpc(VjdG9yeSByZWNvc(QNCiAgICAgICAgJGNkc(VjID0gI)x4NTBceDRiXHgwMVx4MDIiOw0KICAgICAgICAkY2RyZWMgLj0gI)x4MDBceDAwIjsgICAgICAgICAgICAgICAgLy8gd(Vyc2)v$iBtYWR)IGJ5DQogICAgICAgICRjZHJ)YyAuPSAiXHgxNFx4MDAiOyAgICAgICAgICAgICAgICAvLyB2ZXJzaW9uIG5)ZWR)ZCB0$yB)eHRyYWN0DQogICAgICAgICRjZHJ)YyAuPSAiXHgwMFx4MDAiOyAgICAgICAgICAgICAgICAvLyBnZW4gcHVycG9zZSBiaXQgZ(xhZw0KICAgICAgICAkY2RyZWMgLj0gI)x4MDhceDAwIjsgICAgICAgICAgICAgICAgLy8gY29tcHJ)c3Np$24g$WV0aG9kDQogICAgICAgICRjZHJ)YyAuPSAkaGV4ZHRp$WU7ICAgICAgICAgICAgICAgICAvLyBsYXN0IG1vZCB0aW1)ICYgZGF0ZQ0KICAgICAgICAkY2RyZWMgLj0gcGFjaygnVicsICRjc(MpOyAgICAgICAgICAgLy8gY3JjMzINCiAgICAgICAgJGNkc(VjIC49IHBhY2soJ1YnLCAkY19sZW4pOyAgICAgICAgIC8vIGNv$XByZXNzZWQgZ()sZXNpe(UNCiAgICAgICAgJGNkc(VjIC49IHBhY2soJ1YnLCAkdW5jX2x)$ik7ICAgICAgIC8vIHVuY29tcHJ)c3N)ZCB(aWx)c2)6ZQ0KICAgICAgICAkY2RyZWMgLj0gcGFjaygndicsIHN0c(x)$igk$(FtZSkgKTsgLy8g$GVuZ3RoIG9(IGZp$GVuYW1)DQogICAgICAgICRjZHJ)YyAuPSBwYWNrKCd2JywgMCApOyAgICAgICAgICAgICAvLyB)eHRyYSB(aWVsZCBsZW5ndGgNCiAgICAgICAgJGNkc(VjIC49IHBhY2soJ3YnLCAwICk7ICAgICAgICAgICAgIC8vIGZp$GUgY29t$WVudCBsZW5ndGgNCiAgICAgICAgJGNkc(VjIC49IHBhY2soJ3YnLCAwICk7ICAgICAgICAgICAgIC8vIGRpc2sg$nVtY(VyIHN0YXJ0DQogICAgICAgICRjZHJ)YyAuPSBwYWNrKCd2JywgMCApOyAgICAgICAgICAgICAvLyBp$nR)c(5h$CB(aWx)IGF0dHJpYnV0ZXMNCiAgICAgICAgJGNkc(VjIC49IHBhY2soJ1YnLCAzMiApOyAgICAgICAgICAgIC8vIGV4dGVy$(FsIGZp$GUgYXR0c()idXR)cyAtICdhc(NoaXZ)JyBiaXQgc2V0DQoNCiAgICAgICAgJGNkc(VjIC49IHBhY2soJ1YnLCAkdGhpcyAtPiBv$GRf$2Z(c2V0ICk7IC8vIHJ)$GF0aXZ)IG9(ZnN)dCBvZiBs$2Nh$CBoZWFkZXINCiAgICAgICAgJHRoaXMgLT4g$2xkX29(ZnN)dCA9ICRuZXdf$2Z(c2V0Ow0KDQogICAgICAgICRjZHJ)YyAuPSAk$(FtZTsNCg0KICAgICAgICAvLyBvcHRp$25h$CB)eHRyYSB(aWVsZCwgZ()sZSBj$21tZW50IGdvZXMgaGVyZQ0KICAgICAgICAvLyBzYXZ)IHRvIGN)$nRyYWwgZG)yZWN0$3J5DQogICAgICAgICR0aG)zIC0+IGN0c(xfZG)yW10gPSAkY2RyZWM7DQogICAgfSAvLyB)$(Qg$2YgdGh)ICdhZGRGaWx)KCknIG1)dGhvZA0KDQoNCiAgICAvKioNCiAgICAgKiBEdW1wcyBvdXQgZ()sZQ0KICAgICAqDQogICAgICogQHJ)dHVy$iAgc3RyaW5nICB0aGUge()wcGVkIGZp$GUNCiAgICAgKg0KICAgICAqIEBhY2N)c3MgcHVi$G)jDQogICAgICovDQogICAgZnVuY3Rp$24gZ()sZSgpDQogICAgew0KICAgICAgICAkZGF0YSAgICA9IG)tcGxvZGUoJycsICR0aG)zIC0+IGRhdGFzZWMpOw0KICAgICAgICAkY3Ry$GRpciA9IG)tcGxvZGUoJycsICR0aG)zIC0+IGN0c(xfZG)yKTsNCg0KICAgICAgICByZXR1c(4NCiAgICAgICAgICAgICRkYXRhIC4NCiAgICAgICAgICAgICRjdHJsZG)yIC4NCiAgICAgICAgICAgICR0aG)zIC0+IGVvZ)9jdHJsX2RpciAuDQogICAgICAgICAgICBwYWNrKCd2Jywgc2)6ZW9(KCR0aG)zIC0+IGN0c(xfZG)yKSkgLiAgLy8gdG90YWwgIyBvZiB)$nRyaWVzICJv$iB0aG)zIGRpc2siDQogICAgICAgICAgICBwYWNrKCd2Jywgc2)6ZW9(KCR0aG)zIC0+IGN0c(xfZG)yKSkgLiAgLy8gdG90YWwgIyBvZiB)$nRyaWVzIG92ZXJh$GwNCiAgICAgICAgICAgIHBhY2soJ1YnLCBzdHJsZW4oJGN0c(xkaXIpKSAuICAgICAgICAgICAvLyBzaXp)IG9(IGN)$nRyYWwgZG)yDQogICAgICAgICAgICBwYWNrKCdWJywgc3Ry$GVuKCRkYXRhKSkgLiAgICAgICAgICAgICAgLy8g$2Z(c2V0IHRvIHN0YXJ0IG9(IGN)$nRyYWwgZG)yDQogICAgICAgICAgICAiXHgwMFx4MDAiOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLnppcCB(aWx)IGNv$W1)$nQg$GVuZ3RoDQogICAgfSAvLyB)$(Qg$2YgdGh)ICd(aWx)KCknIG1)dGhvZA0KDQp9IC8vIGVuZCBvZiB0aGUgJ3ppcGZp$GUnIGNsYXNzDQo/Pg0KPD9waHANCg0KLy8NCi8vICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKw0KLy8gfCA8cGhwWE1MLz4gd(Vyc2)v$iAxLjAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8DQovLyB8IENvcH)yaWdodCAoYykgMjAwMSBNaWNoYWVsIFAuIE1)aGwuIEFs$CByaWdodHMgc(VzZXJ2ZWQuICAgICAgICAgICAgIHwNCi8vICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKw0KLy8gfCBMYXR)c3Qgc(VsZWFzZXMgYXJ)IGF2YW)sYWJsZSBhdCBodHRwOi8vcGhweG1sL(9yZy8uIEZvciB(ZWVkY(FjayBvciB8DQovLyB8IGJ1ZyByZXBvcnRzLCBw$GVhc2UgY29udGFjdCB0aGUgYXV0aG9yIGF0IG1w$UBwaHB4$Wwu$3JnLiBUaGFua3MhICAgIHwNCi8vICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKw0KLy8gfCBUaGUgY29udGVudHMg$2YgdGhpcyB(aWx)IGFyZSBzdWJqZWN0IHRvIHRoZSBN$3pp$GxhIFB1Y(xpYyBMaWN)$nN)ICB8DQovLyB8IFZ)cnNp$24gMS4xICh0aGUgIkxpY2Vuc2UiKTsgeW91IG1heSBu$3QgdXN)IHRoaXMgZ()sZSB)eGN)cHQgaW4gICAgIHwNCi8vIHwgY29tcGxpYW5jZSB3aXRoIHRoZSBMaWN)$nN)LiBZ$3Ug$WF5IG9idGFp$iBhIGNvcHkg$2YgdGh)IExpY2Vuc2UgYXQgfA0KLy8gfCBodHRwOi8vd3d3L(1ve()s$GEu$3JnL01QTC8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8DQovLyB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwNCi8vIHwgU29(dHdhc(UgZG)zdHJpYnV0ZWQgdW5kZXIgdGh)IExpY2Vuc2UgaXMgZG)zdHJpYnV0ZWQg$24gYW4gIkFTIE)TIiAgfA0KLy8gfCBiYXNpcywgV0)USE9VVCBXQVJSQU5UWSBPRiBBT)kgS0)ORCwgZW)0aGVyIGV4cHJ)c3Mg$3IgaW1w$G))ZC4gU2V)ICB8DQovLyB8IHRoZSBMaWN)$nN)IGZvciB0aGUgc3B)Y2)(aWMg$GFuZ3VhZ2UgZ292ZXJuaW5nIHJpZ2h0cyBh$(QgICAgICAgICAgIHwNCi8vIHwg$G)taXRhdG)v$nMgdW5kZXIgdGh)IExpY2Vuc2UuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfA0KLy8gfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8DQovLyB8IFRoZSBPc()naW5h$CBD$2R)IG)zIDxwaHBYTUwvPi4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwNCi8vIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfA0KLy8gfCBUaGUgSW5pdG)h$CBEZXZ)$G9wZXIg$2YgdGh)IE9yaWdp$(FsIENvZGUgaXMgTW)jaGF)$CBQLiBNZWhsLiAgICAgICB8DQovLyB8IFBvcnRp$25zIGNyZWF0ZWQgYnkgTW)jaGF)$CBQLiBNZWhsIGFyZSBD$3B5c()naHQgKEMpIDIwMDEgTW)jaGF)$CAgIHwNCi8vIHwgUC4gTWVo$C4gQWxsIFJpZ2h0cyBSZXN)cnZ)ZC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfA0KLy8gKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rDQovLyB8IEF1dGhvcnM6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwNCi8vIHwgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfA0KLy8gKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rDQovLw0KDQovKioNCiogQ2xhc3MgZ(9yIGFjY2Vzc2)uZyBYTUwgZGF0YSB0aHJvdWdoIHRoZSBYUGF0aCBsYW5ndWFnZS4NCioNCiogVGhpcyBj$GFzcyBvZ(Z)cnMg$WV0aG9kcyB($3IgYWNjZXNzaW5nIHRoZSBu$2R)cyBvZiBhIFhNTCBk$2N1$WVudCB1c2)uZyANCiogdGh)IFhQYXRoIGxh$(d1YWd)LiBZ$3UgY2FuIGFkZCBvciByZW1vd(Ug$(9kZXMsIHN)dCBvciBt$2RpZnkgdGh)aXIgDQoqIGNv$nR)$nQgYW5kIHRoZW)yIGF0dHJpYnV0ZXMuIE5vIGFkZG)0aW9uYWwgUEhQIGV4dGVuc2)v$nMg$G)rZSBET00gWE1MIA0KKiBvciBz$21)dGhp$(cgc2)taWxhciBhc(Ugc(VxdW)yZWQgdG8gdXN)IHRoZXN)IGZ)YXR1c(VzLg0KKg0KKiBA$G)uayAgICAgIGh0dHA6Ly93d3cucGhweG1sL(9yZy8gTGF0ZXN0IHJ)$GVhc2Ug$2YgdGhpcyBj$GFzcw0KKiBA$G)uayAgICAgIGh0dHA6Ly93d3cudzMu$3JnL1RSL3hwYXRoIFczQyBYUGF0aCBSZWNv$W1)$(RhdG)v$g0KKiBAY29weXJpZ2h0IENvcH)yaWdodCAoYykgMjAwMSBNaWNoYWVsIFAuIE1)aGwuIEFs$CByaWdodHMgc(VzZXJ2ZWQuDQoqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiogQHZ)cnNp$24gICAxLjAgKDIwMDEtMDMtMDgpDQoqIEBhY2N)c3MgICAgcHVi$G)jDQoqLw0KDQpj$GFzcyBYTUwNCnsNCiAgICAvKioNCiAgICAqIExpc3Qg$2YgYWxsIGRvY3VtZW50IG5vZGVzLg0KICAgICoNCiAgICAqIFRoaXMgYXJyYXkgY29udGFp$nMgYSBsaXN0IG9(IGFs$CBk$2N1$WVudCBu$2R)cyBzYXZ)ZCBhcyBh$g0KICAgICogYXNz$2NpYXRpd(UgYXJyYXkuDQogICAgKg0KICAgICogQGFjY2VzcyBwc()2YXR)DQogICAgKiBAd(FyICAgIGFyc(F5DQogICAgKi8NCiAgICB2YXIgJG5vZGVzID0gYXJyYXkoKTsNCiAgICANCiAgICAvKioNCiAgICAqIExpc3Qg$2YgZG9jdW1)$nQg$(9kZSBJRHMuDQogICAgKg0KICAgICogVGhpcyBhcnJheSBj$250YW)ucyBhIGxpc3Qg$2YgYWxsIE)EcyBvZiBh$GwgZG9jdW1)$nQg$(9kZXMgdGhhdA0KICAgICogYXJ)IHVzZWQgZ(9yIGNvdW50aW5nIHdoZW4gYWRkaW5nIGEg$(V3IG5vZGUuDQogICAgKg0KICAgICogQGFjY2VzcyBwc()2YXR)DQogICAgKiBAd(FyICAgIGFyc(F5DQogICAgKi8NCiAgICB2YXIgJG)kcyA9IGFyc(F5KCk7DQogICAgDQogICAgLyoqDQogICAgKiBDdXJyZW50IGRvY3VtZW50IHBhdGguDQogICAgKg0KICAgICogVGhpcyB2YXJpYWJsZSBzYXZ)cyB0aGUgY3Vyc(VudCBwYXRoIHdoaWx)IHBhcnNp$(cgYSBYTUwgZ()sZSBh$(QgYWRkaW5nDQogICAgKiB0aGUg$(9kZXMgY(Vp$(cgc(VhZCB(c(9tIHRoZSB(aWx)Lg0KICAgICoNCiAgICAqIEBhY2N)c3MgcHJpd(F0ZQ0KICAgICogQHZhciAgICBzdHJp$(cNCiAgICAqLw0KICAgIHZhciAkcGF0aCA9ICIiOw0KICAgIA0KICAgIC8qKg0KICAgICogQ3Vyc(VudCBk$2N1$WVudCBw$3NpdG)v$i4NCiAgICAqDQogICAgKiBUaG)zIHZhc()hY(x)IGNvdW50cyB0aGUgY3Vyc(VudCBk$2N1$WVudCBw$3NpdG)v$iB3aG)sZSBwYXJzaW5nIGEgWE1MDQogICAgKiB(aWx)IGFuZCBhZGRp$(cgdGh)IG5vZGVzIGJ)aW5nIHJ)YWQgZnJv$SB0aGUgZ()sZS4NCiAgICAqDQogICAgKiBAYWNjZXNzIHByaXZhdGUNCiAgICAqIEB2YXIgICAgaW50DQogICAgKi8NCiAgICB2YXIgJHBvc2)0aW9uID0gMDsNCiAgICANCiAgICAvKioNCiAgICAqIFBhdGgg$2YgdGh)IGRvY3VtZW50IHJv$3QuDQogICAgKg0KICAgICogVGhpcyBzdHJp$(cgY29udGFp$nMgdGh)IGZ1$GwgcGF0aCB0$yB0aGUg$(9kZSB0aGF0IGFjdHMgYXMgdGh)IHJv$3QNCiAgICAqIG5vZGUg$2YgdGh)IHdo$2x)IGRvY3VtZW50Lg0KICAgICoNCiAgICAqIEBhY2N)c3MgcHJpd(F0ZQ0KICAgICogQHZhciAgICBzdHJp$(cNCiAgICAqLw0KICAgIHZhciAkc(9vdCA9ICIiOw0KICAgIA0KICAgIC8qKg0KICAgICogQ3Vyc(VudCBYUGF0aCB)eHByZXNzaW9uLg0KICAgICoNCiAgICAqIFRoaXMgc3RyaW5nIGNv$nRhaW5zIHRoZSB(dWxsIFhQYXRoIGV4cHJ)c3Np$24gY(Vp$(cgcGFyc2VkIGN1cnJ)$nRseS4NCiAgICAqDQogICAgKiBAYWNjZXNzIHByaXZhdGUNCiAgICAqIEB2YXIgICAgc3RyaW5nDQogICAgKi8NCiAgICB2YXIgJHhwYXRoICAgID0gIiI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgIC8qKg0KICAgICogTG)zdCBvZiB)$nRpdG))cyB0$yBiZSBj$252ZXJ0ZWQuDQogICAgKg0KICAgICogVGhpcyBhcnJheSBj$250YW)ucyBhIGxpc3Qg$2YgZW50aXRpZXMgdG8gY(UgY29ud(VydGVkIHdoZW4gYW4gWFBhdGgNCiAgICAqIGV4cHJ)c3Np$24gaXMgZXZh$HVhdGVkLg0KICAgICoNCiAgICAqIEBhY2N)c3MgcHJpd(F0ZQ0KICAgICogQHZhciAgICBhcnJheQ0KICAgICovDQogICAgd(FyICR)$nRpdG))cyA9IGFyc(F5ICggIiYiID0+ICI(YW1wOyIsICI8IiA9PiAiJ(x0OyIsICI+IiA9PiAiJ(d0OyIsDQogICAgICAgICInIiA9PiAiJ(Fw$3MiLCAnIicgPT4gIiZxdW90OyIgKTsNCiAgICANCiAgICAvKioNCiAgICAqIExpc3Qg$2Ygc3VwcG9ydGVkIFhQYXRoIGF4ZXMuDQogICAgKg0KICAgICogVGhpcyBhcnJheSBj$250YW)ucyBhIGxpc3Qg$2YgYWxsIHZh$G)kIGF4ZXMgdGhhdCBjYW4gY(UgZXZh$HVhdGVkIG)uIGFuDQogICAgKiBYUGF0aCB)eHByZXNzaW9uLg0KICAgICoNCiAgICAqIEBhY2N)c3MgcHJpd(F0ZQ0KICAgICogQHZhciAgICBhcnJheQ0KICAgICovDQogICAgd(FyICRheGVzID0gYXJyYXkgKCAiY2hp$GQiLCAiZGVzY2VuZGFudCIsICJwYXJ)$nQiLCAiYW5jZXN0$3IiLA0KICAgICAgICAiZ(9s$G93aW5nLXNpY(xp$(ciLCAicHJ)Y2VkaW5nLXNpY(xp$(ciLCAiZ(9s$G93aW5nIiwgInByZWN)ZG)uZyIsDQogICAgICAgICJhdHRyaWJ1dGUiLCAi$(FtZXNwYWN)IiwgInN)$GYiLCAiZGVzY2VuZGFudC1vci1zZWx(IiwNCiAgICAgICAgI(FuY2VzdG9yLW9yLXN)$GYiICk7DQogICAgDQogICAgLyoqDQogICAgKiBMaXN0IG9(IHN1cHBvcnR)ZCBYUGF0aCB(dW5jdG)v$nMuDQogICAgKg0KICAgICogVGhpcyBhcnJheSBj$250YW)ucyBhIGxpc3Qg$2YgYWxsIHZh$G)kIGZ1$(N0aW9ucyB0aGF0IGNh$iBiZSB)d(FsdWF0ZWQNCiAgICAqIG)uIGFuIFhQYXRoIGV4cHJ)c3Np$24uDQogICAgKg0KICAgICogQGFjY2VzcyBwc()2YXR)DQogICAgKiBAd(FyICAgIGFyc(F5DQogICAgKi8NCiAgICB2YXIgJGZ1$(N0aW9ucyA9IGFyc(F5ICggI(xhc3QiLCAicG9zaXRp$24iLCAiY291$nQiLCAiaWQiLCAi$(FtZSIsDQogICAgICAgICJzdHJp$(ciLCAiY29uY2F0IiwgInN0YXJ0cy13aXRoIiwgI(Nv$nRhaW5zIiwgInN1YnN0c()uZy1iZWZvc(UiLA0KICAgICAgICAic3Vic3RyaW5nLWF(dGVyIiwgInN1YnN0c()uZyIsICJzdHJp$(ct$GVuZ3RoIiwgInRyYW5z$GF0ZSIsDQogICAgICAgICJi$29sZWFuIiwgI(5vdCIsICJ0cnV)IiwgI(Zh$HN)IiwgI(xh$(ciLCAi$nVtY(VyIiwgInN1$SIsICJ($G9vciIsDQogICAgICAgICJjZW)saW5nIiwgInJvdW5kIiwgInR)eHQiICk7DQogICAgDQogICAgLyoqDQogICAgKiBMaXN0IG9(IHN1cHBvcnR)ZCBYUGF0aCBvcGVyYXRvcnMuDQogICAgKg0KICAgICogVGhpcyBhcnJheSBj$250YW)ucyBhIGxpc3Qg$2YgYWxsIHZh$G)kIG9wZXJhdG9ycyB0aGF0IGNh$iBiZSB)d(FsdWF0ZWQNCiAgICAqIG)uIGEgcHJ)ZG)jYXR)IG9(IGFuIFhQYXRoIGV4cHJ)c3Np$24uIFRoZSBsaXN0IG)zIG9yZGVyZWQgYnkgdGh)DQogICAgKiBwc(VjZWR)$(N)IG9(IHRoZSBvcGVyYXRvcnMgKGxvd2VzdCBwc(VjZWR)$(N)IGZpcnN0KS4NCiAgICAqDQogICAgKiBAYWNjZXNzIHByaXZhdGUNCiAgICAqIEB2YXIgICAgYXJyYXkNCiAgICAqLw0KICAgIHZhciAk$3B)c(F0$3JzID0gYXJyYXkoICIg$3IgIiwgIiBh$(QgIiwgIj0iLCAiIT0iLCAiPD0iLCAiPCIsICI+PSIsICI+IiwNCiAgICAgICAgIisiLCAiLSIsICIqIiwgIiBkaXYgIiwgIiBt$2QgIiApOw0KDQogICAgLyoqDQogICAgKiBD$25zdHJ1Y3RvciBvZiB0aGUgY2xhc3MuDQogICAgKg0KICAgICogVGhpcyBj$25zdHJ1Y3RvciBp$()0aWFsaXp)cyB0aGUgY2xhc3MgYW5kLCB3aGVuIGEgZ()sZW5h$WUgaXMgZ2)2ZW4sDQogICAgKiB0c())cyB0$yByZWFkIGFuZCBwYXJzZSB0aGUgZ2)2ZW4gZ()sZS4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHB1Y(xpYw0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGZp$GUgUGF0aCBh$(Qg$(FtZSBvZiB0aGUgZ()sZSB0$yByZWFkIGFuZCBwYXJzZWQuDQogICAgKiBAc2V)ICAgICAgIGxvYWRfZ()sZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBYTUwgKCAkZ()sZSA9ICIiICkNCiAgICB7DQogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgYSB(aWx)IHdhcyBnaXZ)$i4NCiAgICAgICAgaWYgKCAhZW1wdHkoJGZp$GUpICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gTG9hZCB0aGUgWE1MIGZp$GUuDQogICAgICAgICAgICAkdGhpcy0+$G9hZF9(aWx)KCR(aWx)KTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICogU(VhZHMgYSB(aWx)IGFuZCBwYXJzZXMgdGh)IFhNTCBkYXRhLg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIHJ)YWRzIHRoZSBj$250ZW50IG9(IGEgWE1MIGZp$GUsIHRyaWVzIHRvIHBhcnN)IG)0cw0KICAgICogY29udGVudCBh$(QgdXBv$iBzdWNjZXNzIHN0$3J)cyB0aGUgaW5($3JtYXRp$24gc(V0c())d(VkIGZy$20NCiAgICAqIHRoZSB(aWx)IG)udG8gYW4gYXJyYXkuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwdWJsaWMNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICR(aWx)IFBhdGggYW5kIG5h$WUg$2YgdGh)IGZp$GUgdG8gY(Ugc(VhZCBh$(QgcGFyc2VkLg0KICAgICogQHN)ZSAgICAgICBoYW5k$GVfc3RhcnRfZWx)$WVudCgpLCBoYW5k$GVfZW5kX2VsZW1)$nQoKSwNCiAgICAqICAgICAgICAgICAgaGFuZGx)X2NoYXJhY3R)c)9kYXRhKCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGxvYWRfZ()sZSAoICR(aWx)ICkNCiAgICB7DQogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGh)IGZp$GUgZXhpc3RzIGFuZCBpcyByZWFkYWJsZS4NCiAgICAgICAgaWYgKCB(aWx)X2V4aXN0cygkZ()sZSkgJiYgaXNfc(VhZGFi$GUoJGZp$GUpICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gU(VhZCB0aGUgY29udGVudCBvZiB0aGUgZ()sZS4NCiAgICAgICAgICAgICRj$250ZW50ID0gaW1w$G9kZSgiIiwgZ()sZSgkZ()sZSkpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIGNv$nR)$nQgaGFzIGJ)ZW4gc(VhZC4NCiAgICAgICAgICAgIG)(ICggIWVtcHR5KCRj$250ZW50KSApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gQ3J)YXR)IGFuIFhNTCBwYXJzZXIuDQogICAgICAgICAgICAgICAgJHBhcnN)ciA9IHht$F9wYXJzZXJfY3J)YXR)KCk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBvcHRp$25zIGZvciBwYXJzaW5nIHRoZSBYTUwgZGF0YS4NCiAgICAgICAgICAgICAgICB4$WxfcGFyc2VyX3N)dF9vcHRp$24oJHBhcnN)ciwgWE1MX09QVE)PT)9TS0)QX1dISVRFLCAxKTsgDQogICAgICAgICAgICAgICAgeG1sX3BhcnN)c)9zZXRf$3B0aW9uKCRwYXJzZXIsIFhNTF9PUFRJT05fQ0FTRV9GT0xESU5HLCAwKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAvLyBTZXQgdGh)IG9ia(VjdCB($3IgdGh)IHBhcnN)ci4NCiAgICAgICAgICAgICAgICB4$Wxfc2V0X29ia(VjdCgkcGFyc2VyLCA(JHRoaXMpOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIC8vIFN)dCB0aGUgZWx)$WVudCBoYW5k$GVycyB($3IgdGh)IHBhcnN)ci4NCiAgICAgICAgICAgICAgICB4$Wxfc2V0X2VsZW1)$nRfaGFuZGx)cigkcGFyc2VyLCAiaGFuZGx)X3N0YXJ0X2VsZW1)$nQiLA0KICAgICAgICAgICAgICAgICAgICAiaGFuZGx)X2VuZF9)$GVtZW50Iik7DQogICAgICAgICAgICAgICAgeG1sX3N)dF9jaGFyYWN0ZXJfZGF0YV9oYW5k$GVyKCRwYXJzZXIsDQogICAgICAgICAgICAgICAgICAgICJoYW5k$GVfY2hhc(FjdGVyX2RhdGEiKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAvLyBQYXJzZSB0aGUgWE1MIGZp$GUuDQogICAgICAgICAgICAgICAgaWYgKCAheG1sX3BhcnN)KCRwYXJzZXIsICRj$250ZW50LCB0cnV)KSApDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAvLyBEaXNw$GF5IGFuIGVyc(9yIG1)c3NhZ2UuDQogICAgICAgICAgICAgICAgICAgICR0aG)zLT5kaXNw$GF5X2Vyc(9yKCJYTUwgZXJy$3IgaW4gZ()sZSA)cywg$G)uZSA)ZDogJXMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgJGZp$GUsIHht$F9nZXRfY3Vyc(VudF9saW5)X251$WJ)cigkcGFyc2VyKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHht$F9)cnJvc)9zdHJp$(coeG1sX2d)dF9)cnJvc)9j$2R)KCRwYXJzZXIpKSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIC8vIEZyZWUgdGh)IHBhcnN)ci4NCiAgICAgICAgICAgICAgICB4$WxfcGFyc2VyX2ZyZWUoJHBhcnN)cik7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBEaXNw$GF5IGFuIGVyc(9yIG1)c3NhZ2UuDQogICAgICAgICAgICAkdGhpcy0+ZG)zcGxheV9)cnJvcigiR()sZSA)cyBj$3VsZCBu$3QgY(UgZ(91$(Qg$3Igc(VhZC4iLCAkZ()sZSk7DQogICAgICAgIH0NCiAgICB9DQogICAgDQogICAgLyoqDQogICAgKiBHZW5)c(F0ZXMgYSBYTUwgZ()sZSB3aXRoIHRoZSBj$250ZW50IG9(IHRoZSBjdXJyZW50IGRvY3VtZW50Lg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIGNyZWF0ZXMgYSBzdHJp$(cgY29udGFp$()uZyB0aGUgWE1MIGRhdGEgY(Vp$(cgc(VhZA0KICAgICogYW5kIG1vZG)(aWVkIGJ5IHRoaXMgY2xhc3MgY(V($3J)LiBUaG)zIHN0c()uZyBjYW4gY(UgdXN)ZCB0$yBzYXZ)DQogICAgKiBhIG1vZG)(aWVkIGRvY3VtZW50IGJhY2sgdG8gYSB(aWx)IG9yIGRvaW5nIG90aGVyIG5pY2UgdGhp$(dzIHdpdGgNCiAgICAqIG)0Lg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHVi$G)jDQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIGFyc(F5ICRoaWdo$G)naHQgQXJyYXkgY29udGFp$()uZyBhIGxpc3Qg$2YgZnVs$CBk$2N1$WVudA0KICAgICogICAgICAgICAgICBwYXRocyBvZiBu$2R)cyB0$yBiZSBoaWdo$G)naHR)ZCBieSA8Z(9udD4uLi48L2Zv$nQ+IHRhZ3MNCiAgICAqICAgICAgICAgICAgaW4gdGh)IGd)$(VyYXR)ZCBYTUwgc3RyaW5nLg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJHJv$3QgV2hp$GUgZG9p$(cgYSByZWN1cnNp$24gd2)0aCB0aG)zIG1)dGhvZCwgdGhpcw0KICAgICogICAgICAgICAgICBwYXJh$WV0ZXIgaXMgdXN)ZCB($3IgaW50ZXJuYWwgcHVycG9zZS4NCiAgICAqIEBwYXJh$SAgICAgaW50ICRsZXZ)$CBXaG)sZSBk$2)uZyBhIHJ)Y3Vyc2)v$iB3aXRoIHRoaXMg$WV0aG9kLCB0aG)zDQogICAgKiAgICAgICAgICAgIHBhc(FtZXR)ciBpcyB1c2VkIGZvciBp$nR)c(5h$CBwdXJw$3N)Lg0KICAgICogQHJ)dHVy$iAgICBzdHJp$(cgVGh)IHJ)dHVy$(VkIHN0c()uZyBj$250YW)ucyB3ZWxsLWZvc(1)ZCBYTUwgZGF0YQ0KICAgICogICAgICAgICAgICByZXByZXN)$nRp$(cgdGh)IGNv$nR)$nQg$2YgdGhpcyBk$2N1$WVudC4NCiAgICAqIEBzZWUgICAgICAg$G9hZF9(aWx)KCksIGV2YWx1YXR)KCksIGd)dF9j$250ZW50KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGd)dF9(aWx)ICggJGhpZ2hsaWdodCA9IGFyc(F5KCksICRy$290ID0gIiIsICRsZXZ)$CA9IDAgKQ0KICAgIHsNCiAgICAgICAgLy8gQ3J)YXR)IGEgc3RyaW5nIHRvIHNhd(UgdGh)IGd)$(VyYXR)ZCBYTUwgZGF0YS4NCiAgICAgICAgJHht$CA9ICIiOw0KICAgICAgICANCiAgICAgICAgLy8gQ3J)YXR)IHR3$yBzdHJp$(dzIGNv$nRhaW5p$(cgdGh)IHRhZ3MgZ(9yIGhpZ2hsaWdodG)uZyBhIG5vZGUuDQogICAgICAgICRoaWdo$G)naHRfc3RhcnQgPSAiPGZv$nQgY29s$3I9XCIjRkYwMDAwXCI+PGI+IjsNCiAgICAgICAgJGhpZ2hsaWdodF9)$(QgICA9ICI8L2I+PC9($250PiI7DQogICAgICAgIA0KICAgICAgICAvLyBHZW5)c(F0ZSBhIHN0c()uZyB0$yBiZSBkaXNw$GF5ZWQgY(V($3J)IHRoZSB0YWdzLg0KICAgICAgICAkY(V($3J)ID0gIiI7DQogICAgICAgIA0KICAgICAgICAvLyBDYWxjdWxhdGUgdGh)IGFt$3VudCBvZiB3aG)0ZXNwYWN)cyB0$yBkaXNw$GF5Lg0KICAgICAgICB($3IgKCAkaSA9IDA7ICRpIDwgKCAk$GV2ZWwgKiAyICk7ICRpKysgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBBZGQgYSB3aG)0ZXNwYWN)cyB0$yB0aGUgc3RyaW5nLg0KICAgICAgICAgICAgJGJ)Z(9yZSAuPSAiICI7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgYSBy$290IG5vZGUgaXMgZ2)2ZW4uDQogICAgICAgIG)(ICggZW1wdHkoJHJv$3QpICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gU2V0IG)0IHRvIHRoZSBk$2N1$WVudCBy$290Lg0KICAgICAgICAgICAgJHJv$3QgPSAkdGhpcy0+c(9vdDsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUg$(9kZSBpcyBzZWx)Y3R)ZC4NCiAgICAgICAgJHN)$GVjdGVkID0gaW5fYXJyYXkoJHJv$3QsICRoaWdo$G)naHQpOw0KICAgICAgICANCiAgICAgICAgLy8gT(93IGFkZCB0aGUgd2hpdGVzcGFjZXMgdG8gdGh)IFhNTCBkYXRhLg0KICAgICAgICAkeG1sIC49ICRiZWZvc(U7DQogICAgICAgIA0KICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSBu$2R)IG)zIHN)$GVjdGVkLg0KICAgICAgICBpZiAoICRzZWx)Y3R)ZCApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIEFkZCB0aGUgaG)naGxpZ2h0IGNvZGUgdG8gdGh)IFhNTCBkYXRhLg0KICAgICAgICAgICAgJHht$CAuPSAkaG)naGxpZ2h0X3N0YXJ0Ow0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLyBO$3cg$3B)$iB0aGUgdGFnLg0KICAgICAgICAkeG1sIC49ICI($HQ7Ii4kdGhpcy0+$(9kZXN$JHJv$3RdWyJuYW1)I)07DQogICAgICAgIA0KICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZXJ)IGFyZSBhdHRyaWJ1dGVzIGZvciB0aG)zIG5vZGUuDQogICAgICAgIG)(ICggY291$nQoJHRoaXMtP(5vZGVzWyRy$290XVsiYXR0c()idXR)cyJdKSA+IDAgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBSdW4gdGhy$3VnaCBh$GwgYXR0c()idXR)cy4NCiAgICAgICAgICAgIGZvc(VhY2ggKCAkdGhpcy0+$(9kZXN$JHJv$3RdWyJhdHRyaWJ1dGVzI)0gYXMgJGt)eSA9PiAkd(FsdWUgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGhpcyBhdHRyaWJ1dGUgaXMgaG)naGxpZ2h0ZWQuDQogICAgICAgICAgICAgICAgaWYgKCBp$)9hcnJheSgkc(9vdC4iL2F0dHJpYnV0ZTo6Ii4ka2V5LCAkaG)naGxpZ2h0KSApDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGh)IGhpZ2hsaWdodCBj$2R)IHRvIHRoZSBYTUwgZGF0YS4NCiAgICAgICAgICAgICAgICAgICAgJHht$CAuPSAkaG)naGxpZ2h0X3N0YXJ0Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAvLyBBZGQgdGh)IGF0dHJpYnV0ZSB0$yB0aGUgWE1MIGRhdGEuDQogICAgICAgICAgICAgICAgJHht$CAuPSAiICIuJGt)eS4iPVwiIi50c()tKHN0c()wc2xhc2h)cygkd(FsdWUpKS4iXCIiOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGhpcyBhdHRyaWJ1dGUgaXMgaG)naGxpZ2h0ZWQuDQogICAgICAgICAgICAgICAgaWYgKCBp$)9hcnJheSgkc(9vdC4iL2F0dHJpYnV0ZTo6Ii4ka2V5LCAkaG)naGxpZ2h0KSApDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGh)IGhpZ2hsaWdodCBj$2R)IHRvIHRoZSBYTUwgZGF0YS4NCiAgICAgICAgICAgICAgICAgICAgJHht$CAuPSAkaG)naGxpZ2h0X2VuZDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGh)IG5vZGUgY29udGFp$nMgY2hhc(FjdGVyIGRhdGEg$3IgaGFzIGNoaWxkc(VuLg0KICAgICAgICBpZiAoIGVtcHR5KCR0aG)zLT5u$2R)c1skc(9vdF1$InR)eHQiXSkgJiYNCiAgICAgICAgICAgICFpc3N)dCgkdGhpcy0+$(9kZXN$JHJv$3RdWyJjaG)sZHJ)$iJdKSApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIEFkZCB0aGUgZW5kIHRvIHRoZSB0YWcuDQogICAgICAgICAgICAkeG1sIC49ICIvIjsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8gQ2xvc2UgdGh)IHRhZy4NCiAgICAgICAgJHht$CAuPSAiJ(d0O1xuIjsNCiAgICAgICAgDQogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGh)IG5vZGUgaXMgc2VsZWN0ZWQuDQogICAgICAgIG)(ICggJHN)$GVjdGVkICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gQWRkIHRoZSBoaWdo$G)naHQgY29kZSB0$yB0aGUgWE1MIGRhdGEuDQogICAgICAgICAgICAkeG1sIC49ICRoaWdo$G)naHRfZW5kOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSBu$2R)IGNv$nRhaW5zIGNoYXJhY3R)ciBkYXRhLg0KICAgICAgICBpZiAoICF)$XB0eSgkdGhpcy0+$(9kZXN$JHJv$3RdWyJ0ZXh0I)0pICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gQWRkIHRoZSBjaGFyYWN0ZXIgZGF0YSB0$yB0aGUgWE1MIGRhdGEuDQogICAgICAgICAgICAkeG1sIC49ICRiZWZvc(UuIiAgIi4kdGhpcy0+$(9kZXN$JHJv$3RdWyJ0ZXh0I)0uI)xuIjsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUg$(9kZSBoYXMgY2hp$GRyZW4uDQogICAgICAgIG)(ICggaXNzZXQoJHRoaXMtP(5vZGVzWyRy$290XVsiY2hp$GRyZW4iXSkgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBSdW4gdGhy$3VnaCBh$GwgY2hp$GRyZW4gd2)0aCBkaWZ(ZXJ)$nQg$(FtZXMuDQogICAgICAgICAgICB($3J)YWNoICggJHRoaXMtP(5vZGVzWyRy$290XVsiY2hp$GRyZW4iXSBhcyAkY2hp$GQgPT4gJHBvcyApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gUnVuIHRoc(91Z2ggYWxsIGNoaWxkc(VuIHdpdGggdGh)IHNh$WUg$(FtZS4NCiAgICAgICAgICAgICAgICB($3IgKCAkaSA9IDE7ICRpIDw9ICRw$3M7ICRpKysgKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gR2VuZXJhdGUgdGh)IGZ1$GwgcGF0aCBvZiB0aGUgY2hp$GQuDQogICAgICAgICAgICAgICAgICAgICR(dWxsY2hp$GQgPSAkc(9vdC4iLyIuJGNoaWxkLiJ$Ii4kaS4iXSI7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGh)IGNoaWxkJ3MgWE1MIGRhdGEgdG8gdGh)IGV4aXN0aW5nIGRhdGEuDQogICAgICAgICAgICAgICAgICAgICR4$WwgLj0gJHRoaXMtP(d)dF9(aWx)KCRoaWdo$G)naHQsICR(dWxsY2hp$GQsDQogICAgICAgICAgICAgICAgICAgICAgICAk$GV2ZWwgKyAxKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGh)c(UgYXJ)IGF0dHJpYnV0ZXMgZ(9yIHRoaXMg$(9kZS4NCiAgICAgICAgaWYgKCAhZW1wdHkoJHRoaXMtP(5vZGVzWyRy$290XVsidGV4dCJdKSB8fA0KICAgICAgICAgICAgaXNzZXQoJHRoaXMtP(5vZGVzWyRy$290XVsiY2hp$GRyZW4iXSkgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBBZGQgdGh)IHdoaXR)c3BhY2VzIHRvIHRoZSBYTUwgZGF0YS4NCiAgICAgICAgICAgICR4$WwgLj0gJGJ)Z(9yZTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUg$(9kZSBpcyBzZWx)Y3R)ZC4NCiAgICAgICAgICAgIG)(ICggJHN)$GVjdGVkICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBBZGQgdGh)IGhpZ2hsaWdodCBj$2R)IHRvIHRoZSBYTUwgZGF0YS4NCiAgICAgICAgICAgICAgICAkeG1sIC49ICRoaWdo$G)naHRfc3RhcnQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIEFkZCB0aGUgY2xvc2)uZyB0YWcuDQogICAgICAgICAgICAkeG1sIC49ICI($HQ7LyIuJHRoaXMtP(5vZGVzWyRy$290XVsi$(FtZSJdLiI(Z3Q7IjsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUg$(9kZSBpcyBzZWx)Y3R)ZC4NCiAgICAgICAgICAgIG)(ICggJHN)$GVjdGVkICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBBZGQgdGh)IGhpZ2hsaWdodCBj$2R)IHRvIHRoZSBYTUwgZGF0YS4NCiAgICAgICAgICAgICAgICAkeG1sIC49ICRoaWdo$G)naHRfZW5kOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBBZGQgYSBsaW5)YnJ)YWsuDQogICAgICAgICAgICAkeG1sIC49ICJc$iI7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vIFJ)dHVy$iB0aGUgWE1MIGRhdGEuDQogICAgICAgIHJ)dHVy$iAkeG1sOw0KICAgIH0NCiAgICANCiAgICAvKioNCiAgICAqIEFkZHMgYSBuZXcg$(9kZSB0$yB0aGUgWE1MIGRvY3VtZW50Lg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIGFkZHMgYSBuZXcg$(9kZSB0$yB0aGUgdHJ)ZSBvZiBu$2R)cyBvZiB0aGUgWE1MIGRvY3VtZW50DQogICAgKiBiZW)uZyBoYW5k$GVkIGJ5IHRoaXMgY2xhc3MuIFRoZSBuZXcg$(9kZSBpcyBjc(VhdGVkIGFjY29yZG)uZyB0$yB0aGUNCiAgICAqIHBhc(FtZXR)cnMgcGFzc2VkIHRvIHRoaXMg$WV0aG9kLg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHVi$G)jDQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkY29udGVudCBGdWxsIHBhdGgg$2YgdGh)IHBhc(VudCwgdG8gd2hpY2ggdGh)IG5)dw0KICAgICogICAgICAgICAgICBu$2R)IHNo$3VsZCBiZSBhZGR)ZCBhcyBhIGNoaWxkLg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJG5h$WUgT(FtZSBvZiB0aGUg$(V3IG5vZGUuDQogICAgKiBAc(V0dXJuICAgIHN0c()uZyBUaGUgc3RyaW5nIHJ)dHVy$(VkIGJ5IHRoaXMg$WV0aG9kIHdp$GwgY29udGFp$iB0aGUNCiAgICAqICAgICAgICAgICAgZnVs$CBk$2N1$WVudCBwYXRoIG9(IHRoZSBjc(VhdGVkIG5vZGUuDQogICAgKiBAc2V)ICAgICAgIHJ)$W92ZV9u$2R)KCksIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGFkZF9u$2R)ICggJGNv$nR)eHQsICRuYW1)ICkNCiAgICB7DQogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgYSBuYW1)IGZvciB0aG)zIGVsZW1)$nQgaXMgYWxyZWFkeSBzZXQuDQogICAgICAgIG)(ICggZW1wdHkoJHRoaXMtPnJv$3QpICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gVXN)IHRoaXMgdGFnIGFzIHRoZSBy$290IGVsZW1)$nQuDQogICAgICAgICAgICAkdGhpcy0+c(9vdCA9ICIvIi4k$(FtZS4iWzFdIjsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8gQ2FsY3VsYXR)IHRoZSB(dWxsIHBhdGggZ(9yIHRoaXMgZWx)$WVudC4NCiAgICAgICAgJHBhdGggPSAkY29udGV4dC4iLyIuJG5h$WU7DQogICAgICAgIA0KICAgICAgICAvLyBTZXQgdGh)IHJ)$GF0aXZ)IGNv$nR)eHQgYW5kIHRoZSBw$3NpdG)v$i4NCiAgICAgICAgJHBvc2)0aW9uID0gKyskdGhpcy0+aWRzWyRwYXRoXTsNCiAgICAgICAgJHJ)$GF0aXZ)ID0gJG5h$WUuI)siLiRw$3NpdG)v$i4iXSI7DQogICAgICAgIA0KICAgICAgICAvLyBDYWxjdWxhdGUgdGh)IGZ1$GwgcGF0aC4NCiAgICAgICAgJGZ1$GxwYXRoID0gJGNv$nR)eHQuIi8iLiRyZWxhdG)2ZTsNCiAgICAgICAgDQogICAgICAgIC8vIENh$GN1$GF0ZSB0aGUgY29udGV4dCBw$3NpdG)v$iwgd2hpY2ggaXMgdGh)IHBvc2)0aW9uIG9(IHRoaXMNCiAgICAgICAgLy8gZWx)$WVudCB3aXRoaW4gZWx)$WVudHMg$2YgdGh)IHNh$WUg$(FtZSBp$iB0aGUgcGFyZW50IG5vZGUuDQogICAgICAgICR0aG)zLT5u$2R)c1skZnVs$HBhdGhdWyJj$250ZXh0LXBvc2)0aW9uI)0gPSAkcG9zaXRp$247DQogICAgICAgIA0KICAgICAgICAvLyBDYWxjdWxhdGUgdGh)IHBvc2)0aW9uIGZvciB0aGUgZ(9s$G93aW5nIGFuZCBwc(VjZWRp$(cgYXhpcw0KICAgICAgICAvLyBkZXR)Y3Rp$24uDQogICAgICAgICR0aG)zLT5u$2R)c1skZnVs$HBhdGhdWyJk$2N1$WVudC1w$3NpdG)v$iJdID0NCiAgICAgICAgICAgICR0aG)zLT5u$2R)c1skY29udGV4dF1$I(RvY3VtZW50LXBvc2)0aW9uI)0gKyAxOw0KICAgICAgICANCiAgICAgICAgLy8gU2F2ZSB0aGUgaW5($3JtYXRp$24gYWJvdXQgdGh)IG5vZGUuDQogICAgICAgICR0aG)zLT5u$2R)c1skZnVs$HBhdGhdWyJuYW1)I)0gICA9ICRuYW1)Ow0KICAgICAgICAkdGhpcy0+$(9kZXN$JGZ1$GxwYXRoXVsidGV4dCJdICAgPSAiIjsNCiAgICAgICAgJHRoaXMtP(5vZGVzWyR(dWxscGF0aF1$InBhc(VudCJdID0gJGNv$nR)eHQ7DQogICAgICAgIA0KICAgICAgICAvLyBBZGQgdGhpcyB)$GVtZW50IHRvIHRoZSB)$GVtZW50IGNvdW50IGFyc(F5Lg0KICAgICAgICBpZiAoICEkdGhpcy0+$(9kZXN$JGNv$nR)eHRdWyJjaG)sZHJ)$iJdWyRuYW1)XSApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIFN)dCB0aGUgZGV(YXVsdCBuYW1)Lg0KICAgICAgICAgICAgJHRoaXMtP(5vZGVzWyRj$250ZXh0XVsiY2hp$GRyZW4iXVsk$(FtZV0gPSAxOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gQ2FsY3VsYXR)IHRoZSBuYW1)Lg0KICAgICAgICAgICAgJHRoaXMtP(5vZGVzWyRj$250ZXh0XVsiY2hp$GRyZW4iXVsk$(FtZV0gPQ0KICAgICAgICAgICAgICAgICR0aG)zLT5u$2R)c1skY29udGV4dF1$I(NoaWxkc(VuI)1$JG5h$WVdICsgMTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8gU(V0dXJuIHRoZSBwYXRoIG9(IHRoZSBuZXcg$(9kZS4NCiAgICAgICAgc(V0dXJuICR(dWxscGF0aDsNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIFJ)$W92ZXMgYSBu$2R)IGZy$20gdGh)IFhNTCBk$2N1$WVudC4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCByZW1vd(VzIGEg$(9kZSB(c(9tIHRoZSB0c(V)IG9(IG5vZGVzIG9(IHRoZSBYTUwgZG9jdW1)$nQuDQogICAgKiBJZiB0aGUg$(9kZSBpcyBhIGRvY3VtZW50IG5vZGUsIGFs$CBjaG)sZHJ)$iBvZiB0aGUg$(9kZSBh$(QgaXRzDQogICAgKiBjaGFyYWN0ZXIgZGF0YSB3aWxsIGJ)IHJ)$W92ZWQuIE)(IHRoZSBu$2R)IG)zIGFuIGF0dHJpYnV0ZSBu$2R)LA0KICAgICog$25seSB0aG)zIGF0dHJpYnV0ZSB3aWxsIGJ)IHJ)$W92ZWQsIHRoZSBu$2R)IHRvIHdoaWNoIHRoZSBhdHRyaWJ1dGUNCiAgICAqIGJ)$G9uZ3MgYXMgd2Vs$CBhcyBpdHMgY2hp$GRyZW4gd2)s$CByZW1haW4gdW5t$2RpZ())ZC4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHB1Y(xpYw0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJG5vZGUgRnVs$CBwYXRoIG9(IHRoZSBu$2R)IHRvIGJ)IHJ)$W92ZWQuDQogICAgKiBAc2V)ICAgICAgIGFkZF9u$2R)KCksIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIHJ)$W92ZV9u$2R)ICggJG5vZGUgKQ0KICAgIHsNCiAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUg$(9kZSBpcyBh$iBhdHRyaWJ1dGUg$(9kZS4NCiAgICAgICAgaWYgKCB)c(VnKCIvYXR0c()idXR)OjoiLCAk$(9kZSkgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBHZXQgdGh)IHBhdGggdG8gdGh)IGF0dHJpYnV0ZSBu$2R)J3MgcGFyZW50Lg0KICAgICAgICAgICAgJHBhc(VudCA9ICR0aG)zLT5wc(VzdHIoJG5vZGUsICIvYXR0c()idXR)OjoiKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gR2V0IHRoZSBuYW1)IG9(IHRoZSBhdHRyaWJ1dGUuDQogICAgICAgICAgICAkYXR0c()idXR)ID0gJHRoaXMtP(F(dGVyc3RyKCRu$2R)LCAiL2F0dHJpYnV0ZTo6Iik7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGh)IGF0dHJpYnV0ZSB)eG)zdHMuDQogICAgICAgICAgICBpZiAoIG)zc2V0KCR0aG)zLT5u$2R)c1skcGFyZW50XVsiYXR0c()idXR)cyJdWyRhdHRyaWJ1dGVdKSApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gQ3J)YXR)IGEg$(V3IGFyc(F5Lg0KICAgICAgICAgICAgICAgICRuZXcgPSBhcnJheSgpOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIC8vIFJ1$iB0aHJvdWdoIHRoZSB)eG)zdG)uZyBhdHRyaWJ1dGVzLg0KICAgICAgICAgICAgICAgIGZvc(VhY2ggKCAkdGhpcy0+$(9kZXN$JHBhc(VudF1$I(F0dHJpYnV0ZXMiXQ0KICAgICAgICAgICAgICAgICAgICBhcyAka2V5ID0+ICR2YWx1ZSApDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIG)0J3MgdGh)IGF0dHJpYnV0ZSB0$yByZW1vd(UuDQogICAgICAgICAgICAgICAgICAgIG)(ICggJGt)eSAhPSAkYXR0c()idXR)ICkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIG)0IHRvIHRoZSBuZXcgYXJyYXkgYWdhaW4uDQogICAgICAgICAgICAgICAgICAgICAgICAk$(V3WyRrZX)dID0gJHZh$HV)Ow0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIC8vIFNhd(UgdGh)IG5)dyBhdHRyaWJ1dGVzLg0KICAgICAgICAgICAgICAgICR0aG)zLT5u$2R)c1skcGFyZW50XVsiYXR0c()idXR)cyJdID0gJG5)dzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICB)$HN)DQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIENyZWF0ZSBh$iBhc3NvY2)hdG)2ZSBhcnJheSwgd2hpY2ggY29udGFp$nMgaW5($3JtYXRp$24gYWJvdXQNCiAgICAgICAgICAgIC8vIGFs$CBu$2R)cyB0aGF0IHJ)cXVpc(VkIHRvIGJ)IHJ)$(FtZWQuDQogICAgICAgICAgICAkc(VuYW1)ID0gYXJyYXkoKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gR2V0IHRoZSBuYW1)LCB0aGUgcGFyZW50IGFuZCB0aGUgc2)i$G)uZ3Mg$2YgY3Vyc(VudCBu$2R)Lg0KICAgICAgICAgICAgJG5h$WUgICAgID0gJHRoaXMtP(5vZGVzWyRu$2R)XVsi$(FtZSJdOw0KICAgICAgICAgICAgJHBhc(VudCAgID0gJHRoaXMtP(5vZGVzWyRu$2R)XVsicGFyZW50I)07DQogICAgICAgICAgICAkc2)i$G)uZ3MgPSAkdGhpcy0+$(9kZXN$JHBhc(VudF1$I(NoaWxkc(VuI)1$JG5h$WVdOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBEZWNyZWFzZSB0aGUg$nVtY(VyIG9(IGNoaWxkc(VuLg0KICAgICAgICAgICAgJHRoaXMtP(5vZGVzWyRwYXJ)$nRdWyJjaG)sZHJ)$iJdWyRuYW1)XS0tOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBDc(VhdGUgYSBj$3VudGVyIGZvciByZW51$WJ)c()uZyB0aGUgc2)i$G)uZ3MuDQogICAgICAgICAgICAkY291$nR)ciA9IDE7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIE5vdyBydW4gdGhy$3VnaCB0aGUgc2)i$G)uZ3MuDQogICAgICAgICAgICB($3IgKCAkaSA9IDE7ICRpIDw9ICRzaWJsaW5nczsgJGkrKyApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gQ3J)YXR)IHRoZSBuYW1)IG9(IHRoZSBzaWJsaW5nLg0KICAgICAgICAgICAgICAgICRzaWJsaW5nID0gJHBhc(VudC4iLyIuJG5h$WUuI)siLiRpLiJdIjsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIG)0J3MgdGh)IG5h$WUg$2YgdGh)IGN1cnJ)$nQg$(9kZS4NCiAgICAgICAgICAgICAgICBpZiAoICRzaWJsaW5nICE9ICRu$2R)ICkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUg$(V3IG5h$WUgZ(9yIHRoZSBzaWJsaW5nLg0KICAgICAgICAgICAgICAgICAgICAk$(V3ID0gJHBhc(VudC4iLyIuJG5h$WUuI)siLiRj$3VudGVyLiJdIjsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIC8vIE)uY3J)YXN)IHRoZSBj$3VudGVyLg0KICAgICAgICAgICAgICAgICAgICAkY291$nR)cisrOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBv$GQgYW5kIHRoZSBuZXcg$(FtZSB0$yB0aGUg$G)zdCBvZiBu$2R)cw0KICAgICAgICAgICAgICAgICAgICAvLyB0$yBiZSByZW5h$WVkLg0KICAgICAgICAgICAgICAgICAgICAkc(VuYW1)WyRzaWJsaW5nXSA9ICRuZXc7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBDc(VhdGUgYW4gYXJyYXkgZ(9yIHNhd()uZyB0aGUg$(V3IG5vZGUt$G)zdC4NCiAgICAgICAgICAgICRu$2R)cyA9IGFyc(F5KCk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIE5vdyBydW4gdGhy$3VnaCB0aHJvdWdoIHRoZSB)eG)zdG)uZyBu$2R)cy4NCiAgICAgICAgICAgIGZvc(VhY2ggKCAkdGhpcy0+$(9kZXMgYXMgJG5h$WUgPT4gJHZh$HV)cyApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gQ2h)Y2sgdGh)IHBvc2)0aW9uIG9(IHRoZSBwYXRoIG9(IHRoZSBu$2R)IHRvIGJ)IGR)$GV0ZWQNCiAgICAgICAgICAgICAgICAvLyBp$iB0aGUgcGF0aCBvZiB0aGUgY3Vyc(VudCBu$2R)Lg0KICAgICAgICAgICAgICAgICRw$3NpdG)v$iA9IHN0cnBvcygk$(FtZSwgJG5vZGUpOw0KDQogICAgICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciBpdCdzIG5vdCB0aGUg$(9kZSB0$yBiZSBkZWx)dGVkLg0KICAgICAgICAgICAgICAgIG)(ICggJHBvc2)0aW9uID09PSB(YWxzZSApDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAvLyBSdW4gdGhy$3VnaCB0aGUgYXJyYXkg$2Yg$(9kZXMgdG8gY(Ugc(VuYW1)ZC4NCiAgICAgICAgICAgICAgICAgICAgZ(9yZWFjaCAoICRyZW5h$WUgYXMgJG9sZCA9PiAk$(V3ICkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aG)zIG5vZGUgYW5kIG)0J3MgcGFyZW50IHJ)cXVpc(VzIHRvDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBiZSByZW5h$WVkLg0KICAgICAgICAgICAgICAgICAgICAgICAgJG5h$WUgICAgICAgICAgICAgPSBzdHJfc(Vw$GFjZSgk$2xkLCAk$(V3LCAk$(FtZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAkd(FsdWVzWyJwYXJ)$nQiXSA9IHN0c)9yZXBsYWN)KCRv$GQsICRuZXcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHZh$HV)c1sicGFyZW50I)0pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGh)IG5vZGUgdG8gdGh)IGxpc3Qg$2Yg$(9kZXMuDQogICAgICAgICAgICAgICAgICAgICRu$2R)c1sk$(FtZV0gPSAkd(FsdWVzOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gU2F2ZSB0aGUg$(V3IGFyc(F5IG9(IG5vZGVzLg0KICAgICAgICAgICAgJHRoaXMtP(5vZGVzID0gJG5vZGVzOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgKiBBZGQgY29udGVudCB0$yBhIG5vZGUuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgYWRkcyBj$250ZW50IHRvIGEg$(9kZS4gSWYgaXQncyBh$iBhdHRyaWJ1dGUg$(9kZSwgdGh)$g0KICAgICogdGh)IHZh$HV)IG9(IHRoZSBhdHRyaWJ1dGUgd2)s$CBiZSBzZXQsIG90aGVyd2)zZSB0aGUgY2hhc(FjdGVyIGRhdGEg$2YNCiAgICAqIHRoZSBu$2R)IHdp$GwgY(Ugc2V0LiBUaGUgY29udGVudCBpcyBhcHB)$(R)ZCB0$yB)eG)zdG)uZyBj$250ZW50LA0KICAgICogc28g$(90aG)uZyB3aWxsIGJ)IG92ZXJ3c()0dGVuLg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHVi$G)jDQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkcGF0aCBGdWxsIGRvY3VtZW50IHBhdGgg$2YgdGh)IG5vZGUuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkd(FsdWUgU3RyaW5nIGNv$nRhaW5p$(cgdGh)IGNv$nR)$nQgdG8gY(UgYWRkZWQuDQogICAgKiBAc2V)ICAgICAgIGd)dF9j$250ZW50KCksIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGFkZF9j$250ZW50ICggJHBhdGgsICR2YWx1ZSApDQogICAgew0KICAgICAgICAvLyBDaGVjayB3aGV0aGVyIG)0J3MgYW4gYXR0c()idXR)IG5vZGUuDQogICAgICAgIG)(ICggZXJ)ZygiL2F0dHJpYnV0ZTo6IiwgJHBhdGgpICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gR2V0IHRoZSBwYXRoIHRvIHRoZSBhdHRyaWJ1dGUg$(9kZSdzIHBhc(VudC4NCiAgICAgICAgICAgICRwYXJ)$nQgPSAkdGhpcy0+cHJ)c3RyKCRwYXRoLCAiL2F0dHJpYnV0ZTo6Iik7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIEd)dCB0aGUgcGFyZW50IG5vZGUuDQogICAgICAgICAgICAkcGFyZW50ID0gJHRoaXMtP(5vZGVzWyRwYXJ)$nRdOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBHZXQgdGh)IG5h$WUg$2YgdGh)IGF0dHJpYnV0ZS4NCiAgICAgICAgICAgICRhdHRyaWJ1dGUgPSAkdGhpcy0+YWZ0ZXJzdHIoJHBhdGgsICIvYXR0c()idXR)OjoiKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gU2V0IHRoZSBhdHRyaWJ1dGUuDQogICAgICAgICAgICAkcGFyZW50WyJhdHRyaWJ1dGVzI)1$JGF0dHJpYnV0ZV0gLj0gJHZh$HV)Ow0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gU2V0IHRoZSBjaGFyYWN0ZXIgZGF0YSBvZiB0aGUg$(9kZS4NCiAgICAgICAgICAgICR0aG)zLT5u$2R)c1skcGF0aF1$InR)eHQiXSAuPSAkd(FsdWU7DQogICAgICAgIH0NCiAgICB9DQogICAgDQogICAgLyoqDQogICAgKiBTZXQgdGh)IGNv$nR)$nQg$2YgYSBu$2R)Lg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIHN)dHMgdGh)IGNv$nR)$nQg$2YgYSBu$2R)LiBJZiBpdCdzIGFuIGF0dHJpYnV0ZSBu$2R)LCB0aGVuDQogICAgKiB0aGUgd(FsdWUg$2YgdGh)IGF0dHJpYnV0ZSB3aWxsIGJ)IHN)dCwg$3RoZXJ3aXN)IHRoZSBjaGFyYWN0ZXIgZGF0YSBvZg0KICAgICogdGh)IG5vZGUgd2)s$CBiZSBzZXQuIEV4aXN0aW5nIGNv$nR)$nQgd2)s$CBiZSBvd(Vyd3JpdHR)$i4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHB1Y(xpYw0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJHBhdGggRnVs$CBk$2N1$WVudCBwYXRoIG9(IHRoZSBu$2R)Lg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJHZh$HV)IFN0c()uZyBj$250YW)uaW5nIHRoZSBj$250ZW50IHRvIGJ)IHN)dC4NCiAgICAqIEBzZWUgICAgICAgZ2V0X2Nv$nR)$nQoKSwgZXZh$HVhdGUoKQ0KICAgICovDQogICAgZnVuY3Rp$24gc2V0X2Nv$nR)$nQgKCAkcGF0aCwgJHZh$HV)ICkNCiAgICB7DQogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgaXQncyBh$iBhdHRyaWJ1dGUg$(9kZS4NCiAgICAgICAgaWYgKCB)c(VnKCIvYXR0c()idXR)OjoiLCAkcGF0aCkgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBHZXQgdGh)IHBhdGggdG8gdGh)IGF0dHJpYnV0ZSBu$2R)J3MgcGFyZW50Lg0KICAgICAgICAgICAgJHBhc(VudCA9ICR0aG)zLT5wc(VzdHIoJHBhdGgsICIvYXR0c()idXR)OjoiKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gR2V0IHRoZSBwYXJ)$nQg$(9kZS4NCiAgICAgICAgICAgICRwYXJ)$nQgPSAkdGhpcy0+$(9kZXN$JHBhc(VudF07DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIEd)dCB0aGUg$(FtZSBvZiB0aGUgYXR0c()idXR)Lg0KICAgICAgICAgICAgJGF0dHJpYnV0ZSA9ICR0aG)zLT5hZnR)cnN0cigkcGF0aCwgIi9hdHRyaWJ1dGU6OiIpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBTZXQgdGh)IGF0dHJpYnV0ZS4NCiAgICAgICAgICAgICRwYXJ)$nR$I(F0dHJpYnV0ZXMiXVskYXR0c()idXR)XSA9ICR2YWx1ZTsNCiAgICAgICAgfQ0KICAgICAgICB)$HN)DQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIFN)dCB0aGUgY2hhc(FjdGVyIGRhdGEg$2YgdGh)IG5vZGUuDQogICAgICAgICAgICAkdGhpcy0+$(9kZXN$JHBhdGhdWyJ0ZXh0I)0gPSAkd(FsdWU7DQogICAgICAgIH0NCiAgICB9DQogICAgDQogICAgLyoqDQogICAgKiBSZXRyaWV2ZXMgdGh)IGNv$nR)$nQg$2YgYSBu$2R)Lg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIHJ)dHJpZXZ)cyB0aGUgY29udGVudCBvZiBhIG5vZGUuIE)(IG)0J3MgYW4gYXR0c()idXR)DQogICAgKiBu$2R)LCB0aGVuIHRoZSB2YWx1ZSBvZiB0aGUgYXR0c()idXR)IHdp$GwgY(Ugc(V0c())d(VkLCBvdGh)cndpc2UNCiAgICAqIG)0J2xsIGJ)IHRoZSBjaGFyYWN0ZXIgZGF0YSBvZiB0aGUg$(9kZS4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHB1Y(xpYw0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJHBhdGggRnVs$CBk$2N1$WVudCBwYXRoIG9(IHRoZSBu$2R)LCB(c(9tIHdoaWNoIHRoZQ0KICAgICogICAgICAgICAgICBj$250ZW50IHNo$3VsZCBiZSByZXRyaWV2ZWQuDQogICAgKiBAc(V0dXJuICAgIHN0c()uZyBUaGUgc(V0dXJuZWQgc3RyaW5nIGNv$nRhaW5zIGVpdGh)ciB0aGUgd(FsdWUg$3IgdGh)DQogICAgKiAgICAgICAgICAgIGNoYXJhY3R)ciBkYXRhIG9(IHRoZSBu$2R)Lg0KICAgICogQHN)ZSAgICAgICBzZXRfY29udGVudCgpLCB)d(FsdWF0ZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBnZXRfY29udGVudCAoICRwYXRoICkNCiAgICB7DQogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgaXQncyBh$iBhdHRyaWJ1dGUg$(9kZS4NCiAgICAgICAgaWYgKCB)c(VnKCIvYXR0c()idXR)OjoiLCAkcGF0aCkgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBHZXQgdGh)IHBhdGggdG8gdGh)IGF0dHJpYnV0ZSBu$2R)J3MgcGFyZW50Lg0KICAgICAgICAgICAgJHBhc(VudCA9ICR0aG)zLT5wc(VzdHIoJHBhdGgsICIvYXR0c()idXR)OjoiKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gR2V0IHRoZSBwYXJ)$nQg$(9kZS4NCiAgICAgICAgICAgICRwYXJ)$nQgPSAkdGhpcy0+$(9kZXN$JHBhc(VudF07DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIEd)dCB0aGUg$(FtZSBvZiB0aGUgYXR0c()idXR)Lg0KICAgICAgICAgICAgJGF0dHJpYnV0ZSA9ICR0aG)zLT5hZnR)cnN0cigkcGF0aCwgIi9hdHRyaWJ1dGU6OiIpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBHZXQgdGh)IGF0dHJpYnV0ZS4NCiAgICAgICAgICAgICRhdHRyaWJ1dGUgPSAkcGFyZW50WyJhdHRyaWJ1dGVzI)1$JGF0dHJpYnV0ZV07DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIFJ)dHVy$iB0aGUgd(FsdWUg$2YgdGh)IGF0dHJpYnV0ZS4NCiAgICAgICAgICAgIHJ)dHVy$iAkYXR0c()idXR)Ow0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gU(V0dXJuIHRoZSBjZGF0YSBvZiB0aGUg$(9kZS4NCiAgICAgICAgICAgIHJ)dHVy$iBzdHJpcHNsYXNoZXMoJHRoaXMtP(5vZGVzWyRwYXRoXVsidGV4dCJdKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICANCiAgICAvKioNCiAgICAqIEFkZCBhdHRyaWJ1dGVzIHRvIGEg$(9kZS4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBhZGRzIGF0dHJpYnV0ZXMgdG8gYSBu$2R)LiBFeG)zdG)uZyBhdHRyaWJ1dGVzIHdp$Gwg$(90IGJ)DQogICAgKiBvd(Vyd3JpdHR)$i4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHB1Y(xpYw0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJHBhdGggRnVs$CBk$2N1$WVudCBwYXRoIG9(IHRoZSBu$2R)LCB0aGUgYXR0c()idXR)cw0KICAgICogICAgICAgICAgICBzaG91$GQgY(UgYWRkZWQgdG8uDQogICAgKiBAcGFyYW0gICAgIGFyc(F5ICRhdHRyaWJ1dGVzIEFzc29jaWF0aXZ)IGFyc(F5IGNv$nRhaW5p$(cgdGh)IG5)dw0KICAgICogICAgICAgICAgICBhdHRyaWJ1dGVzIGZvciB0aGUg$(9kZS4NCiAgICAqIEBzZWUgICAgICAgc2V0X2Nv$nR)$nQoKSwgZ2V0X2Nv$nR)$nQoKQ0KICAgICovDQogICAgZnVuY3Rp$24gYWRkX2F0dHJpYnV0ZXMgKCAkcGF0aCwgJGF0dHJpYnV0ZXMgKQ0KICAgIHsNCiAgICAgICAgLy8gQWRkIHRoZSBhdHRyaWJ1dGVzIHRvIHRoZSBu$2R)Lg0KICAgICAgICAkdGhpcy0+$(9kZXN$JHBhdGhdWyJhdHRyaWJ1dGVzI)0gPSBhcnJheV9tZXJnZSgkYXR0c()idXR)cywNCiAgICAgICAgICAgICR0aG)zLT5u$2R)c1skcGF0aF1$I(F0dHJpYnV0ZXMiXSk7DQogICAgfQ0KICAgIA0KICAgIC8qKg0KICAgICogU2V0cyB0aGUgYXR0c()idXR)cyBvZiBhIG5vZGUuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2Qgc2V0cyB0aGUgYXR0c()idXR)cyBvZiBhIG5vZGUgYW5kIG92ZXJ3c()0ZXMgYWxsIGV4aXN0aW5nDQogICAgKiBhdHRyaWJ1dGVzIGJ5IGRvaW5nIHRoaXMuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwdWJsaWMNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRwYXRoIEZ1$GwgZG9jdW1)$nQgcGF0aCBvZiB0aGUg$(9kZSwgdGh)IGF0dHJpYnV0ZXMNCiAgICAqICAgICAgICAgICAg$2Ygd2hpY2ggc2hvdWxkIGJ)IHN)dC4NCiAgICAqIEBwYXJh$SAgICAgYXJyYXkgJGF0dHJpYnV0ZXMgQXNz$2NpYXRpd(UgYXJyYXkgY29udGFp$()uZyB0aGUg$(V3DQogICAgKiAgICAgICAgICAgIGF0dHJpYnV0ZXMgZ(9yIHRoZSBu$2R)Lg0KICAgICogQHN)ZSAgICAgICBzZXRfY29udGVudCgpLCBnZXRfY29udGVudCgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBzZXRfYXR0c()idXR)cyAoICRwYXRoLCAkYXR0c()idXR)cyApDQogICAgew0KICAgICAgICAvLyBTZXQgdGh)IGF0dHJpYnV0ZXMg$2YgdGh)IG5vZGUuDQogICAgICAgICR0aG)zLT5u$2R)c1skcGF0aF1$I(F0dHJpYnV0ZXMiXSA9ICRhdHRyaWJ1dGVzOw0KICAgIH0NCiAgICANCiAgICAvKioNCiAgICAqIFJ)dHJpZXZ)cyBhIGxpc3Qg$2YgYWxsIGF0dHJpYnV0ZXMg$2YgYSBu$2R)Lg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIHJ)dHJpZXZ)cyBhIGxpc3Qg$2YgYWxsIGF0dHJpYnV0ZXMg$2YgdGh)IG5vZGUgc3B)Y2)(aWVkIG)uDQogICAgKiB0aGUgYXJndW1)$nQuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwdWJsaWMNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRwYXRoIEZ1$GwgZG9jdW1)$nQgcGF0aCBvZiB0aGUg$(9kZSwgZnJv$SB3aG)jaCB0aGUNCiAgICAqICAgICAgICAgICAg$G)zdCBvZiBhdHRyaWJ1dGVzIHNo$3VsZCBiZSByZXRyaWV2ZWQuDQogICAgKiBAc(V0dXJuICAgIGFyc(F5IFRoZSByZXR1c(5)ZCBhc3NvY2)hdG)2ZSBhcnJheSBj$250YW)ucyB0aGUgYWxsDQogICAgKiAgICAgICAgICAgIGF0dHJpYnV0ZXMg$2YgdGh)IHNwZWNpZ())ZCBu$2R)Lg0KICAgICogQHN)ZSAgICAgICBnZXRfY29udGVudCgpLCAk$(9kZXMsICRpZHMNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGd)dF9hdHRyaWJ1dGVzICggJHBhdGggKQ0KICAgIHsNCiAgICAgICAgLy8gU(V0dXJuIHRoZSBhdHRyaWJ1dGVzIG9(IHRoZSBu$2R)Lg0KICAgICAgICByZXR1c(4gJHRoaXMtP(5vZGVzWyRwYXRoXVsiYXR0c()idXR)cyJdOw0KICAgIH0NCiAgICANCiAgICAvKioNCiAgICAqIFJ)dHJpZXZ)cyB0aGUg$(FtZSBvZiBhIGRvY3VtZW50IG5vZGUuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2Qgc(V0c())d(VzIHRoZSBuYW1)IG9(IGRvY3VtZW50IG5vZGUgc3B)Y2)(aWVkIG)uIHRoZQ0KICAgICogYXJndW1)$nQuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwdWJsaWMNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRwYXRoIEZ1$GwgZG9jdW1)$nQgcGF0aCBvZiB0aGUg$(9kZSwgZnJv$SB3aG)jaCB0aGUNCiAgICAqICAgICAgICAgICAg$(FtZSBzaG91$GQgY(Ugc(V0c())d(VkLg0KICAgICogQHJ)dHVy$iAgICBzdHJp$(cgVGh)IHJ)dHVy$(VkIGFyc(F5IGNv$nRhaW5zIHRoZSBuYW1)IG9(IHRoZSBzcGVjaWZpZWQNCiAgICAqICAgICAgICAgICAg$(9kZS4NCiAgICAqIEBzZWUgICAgICAgZ2V0X2Nv$nR)$nQoKSwgJG5vZGVzLCAkaWRzDQogICAgKi8NCiAgICB(dW5jdG)v$iBnZXRf$(FtZSAoICRwYXRoICkNCiAgICB7DQogICAgICAgIC8vIFJ)dHVy$iB0aGUg$(FtZSBvZiB0aGUg$(9kZS4NCiAgICAgICAgc(V0dXJuICR0aG)zLT5u$2R)c1skcGF0aF1$I(5h$WUiXTsNCiAgICB9DQogICAgDQogICAgLyoqDQogICAgKiBFd(FsdWF0ZXMgYW4gWFBhdGggZXhwc(Vzc2)v$i4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCB0c())cyB0$yB)d(FsdWF0ZSBh$iBYUGF0aCB)eHByZXNzaW9uIGJ5IHBhcnNp$(cgaXQuIEENCiAgICAqIFhNTCBk$2N1$WVudCBoYXMgdG8gY(Ugc(VhZCBiZWZvc(UgdGhpcyBtZXRo$2QgaXMgYWJsZSB0$yB3$3JrLg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHVi$G)jDQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkcGF0aCBYUGF0aCB)eHByZXNzaW9uIHRvIGJ)IGV2YWx1YXR)ZC4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRj$250ZXh0IEZ1$GwgcGF0aCBvZiBhIGRvY3VtZW50IG5vZGUsIHN0YXJ0aW5nDQogICAgKiAgICAgICAgICAgIGZy$20gd2hpY2ggdGh)IFhQYXRoIGV4cHJ)c3Np$24gc2hvdWxkIGJ)IGV2YWx1YXR)ZC4NCiAgICAqIEByZXR1c(4gICAgYXJyYXkgVGh)IHJ)dHVy$(VkIGFyc(F5IGNv$nRhaW5zIGEg$G)zdCBvZiB0aGUgZnVs$A0KICAgICogICAgICAgICAgICBk$2N1$WVudCBwYXRocyBvZiBh$Gwg$(9kZXMgdGhhdCBtYXRjaCB0aGUgZXZh$HVhdGVkDQogICAgKiAgICAgICAgICAgIFhQYXRoIGV4cHJ)c3Np$24uDQogICAgKiBAc2V)ICAgICAgICRu$2R)cywgJG)kcw0KICAgICovDQogICAgZnVuY3Rp$24gZXZh$HVhdGUgKCAkcGF0aCwgJGNv$nR)eHQgPSAiIiApDQogICAgew0KICAgICAgICAvLyBSZW1vd(Ugc2xhc2h)cyBh$(QgcXVvdGUgc2)n$nMuDQogICAgICAgICRwYXRoID0gc3RyaXBz$GFzaGVzKCRwYXRoKTsNCiAgICAgICAgJHBhdGggPSBzdHJfc(Vw$GFjZSgiXCIiLCAiIiwgJHBhdGgpOw0KICAgICAgICAkcGF0aCA9IHN0c)9yZXBsYWN)KCInIiwgIiIsICRwYXRoKTsNCiAgICAgICAgDQogICAgICAgIC8vIFNw$G)0IHRoZSBwYXRocyBp$nRvIGRpZ(Z)c(VudCBwYXRocy4NCiAgICAgICAgJHBhdGhzID0gJHRoaXMtPnNw$G)0X3BhdGhzKCRwYXRoKTsNCiAgICAgICAgDQogICAgICAgIC8vIENyZWF0ZSBh$iB)$XB0eSBzZXQgdG8gc2F2ZSB0aGUgc(VzdWx0Lg0KICAgICAgICAkc(VzdWx0ID0gYXJyYXkoKTsNCiAgICAgICAgDQogICAgICAgIC8vIFJ1$iB0aHJvdWdoIGFs$CBwYXRocy4NCiAgICAgICAgZ(9yZWFjaCAoICRwYXRocyBhcyAkcGF0aCApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIFRyaW0gdGh)IHBhdGguDQogICAgICAgICAgICAkcGF0aCA9IHRyaW0oJHBhdGgpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBTYXZ)IHRoZSBjdXJyZW50IHBhdGguDQogICAgICAgICAgICAkdGhpcy0+eHBhdGggPSAkcGF0aDsNCiAgICAgICAgDQogICAgICAgICAgICAvLyBD$252ZXJ0IGFs$CB)$nRpdG))cy4NCiAgICAgICAgICAgICRwYXRoID0gc3RydHIoJHBhdGgsIGFyc(F5X2ZsaXAoJHRoaXMtP(VudG)0aWVzKSk7DQogICAgICAgIA0KICAgICAgICAgICAgLy8gU3BsaXQgdGh)IHBhdGggYXQgZXZ)cnkgc2xhc2guDQogICAgICAgICAgICAkc3R)cHMgPSAkdGhpcy0+c3BsaXRfc3R)cHMoJHBhdGgpOw0KICAgICAgICANCiAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGh)IGZpcnN0IGVsZW1)$nQgaXMgZW1wdHkuDQogICAgICAgICAgICBpZiAoIGVtcHR5KCRzdGVwc1swXSkgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIFJ)$W92ZSB0aGUgZ()yc3QgYW5kIGVtcHR5IGVsZW1)$nQuDQogICAgICAgICAgICAgICAgYXJyYX)fc2hpZnQoJHN0ZXBzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgDQogICAgICAgICAgICAvLyBTdGFydCB0$yB)d(FsdWF0ZSB0aGUgc3R)cHMuDQogICAgICAgICAgICAk$(9kZXMgPSAkdGhpcy0+ZXZh$HVhdGVfc3R)cCgkY29udGV4dCwgJHN0ZXBzKTsNCiAgICAgICAgDQogICAgICAgICAgICAvLyBSZW1vd(UgZHVw$G)jYXR)ZCBu$2R)cy4NCiAgICAgICAgICAgICRu$2R)cyA9IGFyc(F5X3VuaXF1ZSgk$(9kZXMpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBBZGQgdGh)IG5vZGVzIHRvIHRoZSByZXN1$HQgc2V0Lg0KICAgICAgICAgICAgJHJ)c3VsdCA9IGFyc(F5X21)c(d)KCRyZXN1$HQsICRu$2R)cyk7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vIFJ)dHVy$iB0aGUgc(VzdWx0Lg0KICAgICAgICByZXR1c(4gJHJ)c3VsdDsNCiAgICB9DQogICAgDQogICAgLyoqDQogICAgKiBIYW5k$GVzIG9wZW5p$(cgWE1MIHRhZ3Mgd2hp$GUgcGFyc2)uZy4NCiAgICAqDQogICAgKiBXaG)sZSBwYXJzaW5nIGEgWE1MIGRvY3VtZW50IGZvciB)YWNoIG9wZW5p$(cgdGFnIHRoaXMg$WV0aG9kIG)zDQogICAgKiBjYWxsZWQuIE)0J2xsIGFkZCB0aGUgdGFnIGZvdW5kIHRvIHRoZSB0c(V)IG9(IGRvY3VtZW50IG5vZGVzLg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBp$nQgJHBhcnN)ciBIYW5k$GVyIGZvciBhY2N)c3Np$(cgdGh)IGN1cnJ)$nQgWE1MIHBhcnN)ci4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRuYW1)IE5h$WUg$2YgdGh)IG9wZW5p$(cgdGFnIGZvdW5kIG)uIHRoZSBk$2N1$WVudC4NCiAgICAqIEBwYXJh$SAgICAgYXJyYXkgJGF0dHJpYnV0ZXMgQXNz$2NpYXRpd(UgYXJyYXkgY29udGFp$()uZyBhIGxpc3Qg$2YNCiAgICAqICAgICAgICAgICAgYWxsIGF0dHJpYnV0ZXMg$2YgdGh)IHRhZyB($3VuZCBp$iB0aGUgZG9jdW1)$nQuDQogICAgKiBAc2V)ICAgICAgIGhh$(RsZV9)$(RfZWx)$WVudCgpLCBoYW5k$GVfY2hhc(FjdGVyX2RhdGEoKSwgJG5vZGVzLCAkaWRzDQogICAgKi8NCiAgICB(dW5jdG)v$iBoYW5k$GVfc3RhcnRfZWx)$WVudCAoICRwYXJzZXIsICRuYW1)LCAkYXR0c()idXR)cyApDQogICAgew0KICAgICAgICAvLyBBZGQgYSBu$2R)Lg0KICAgICAgICAkdGhpcy0+cGF0aCA9ICR0aG)zLT5hZGRf$(9kZSgkdGhpcy0+cGF0aCwgJG5h$WUpOw0KICAgICAgICANCiAgICAgICAgLy8gU2V0IHRoZSBhdHRyaWJ1dGVzLg0KICAgICAgICAkdGhpcy0+c2V0X2F0dHJpYnV0ZXMoJHRoaXMtPnBhdGgsICRhdHRyaWJ1dGVzKTsNCiAgICB9DQogICAgDQogICAgLyoqDQogICAgKiBIYW5k$GVzIGNs$3Np$(cgWE1MIHRhZ3Mgd2hp$GUgcGFyc2)uZy4NCiAgICAqDQogICAgKiBXaG)sZSBwYXJzaW5nIGEgWE1MIGRvY3VtZW50IGZvciB)YWNoIGNs$3Np$(cgdGFnIHRoaXMg$WV0aG9kIG)zDQogICAgKiBjYWxsZWQuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIG)udCAkcGFyc2VyIEhh$(RsZXIgZ(9yIGFjY2Vzc2)uZyB0aGUgY3Vyc(VudCBYTUwgcGFyc2VyLg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJG5h$WUgT(FtZSBvZiB0aGUgY2xvc2)uZyB0YWcgZ(91$(QgaW4gdGh)IGRvY3VtZW50Lg0KICAgICogQHN)ZSAgICAgICBoYW5k$GVfc3RhcnRfZWx)$WVudCgpLCBoYW5k$GVfY2hhc(FjdGVyX2RhdGEoKSwgJG5vZGVzLCAkaWRzDQogICAgKi8NCiAgICB(dW5jdG)v$iBoYW5k$GVfZW5kX2VsZW1)$nQgKCAkcGFyc2VyLCAk$(FtZSApDQogICAgew0KICAgICAgICAvLyBKdW1wIGJhY2sgdG8gdGh)IHBhc(VudCB)$GVtZW50Lg0KICAgICAgICAkdGhpcy0+cGF0aCA9IHN1YnN0cigkdGhpcy0+cGF0aCwgMCwgc3RycnBvcygkdGhpcy0+cGF0aCwgIi8iKSk7DQogICAgfQ0KICAgIA0KICAgIC8qKg0KICAgICogSGFuZGx)cyBjaGFyYWN0ZXIgZGF0YSB3aG)sZSBwYXJzaW5nLg0KICAgICoNCiAgICAqIFdoaWx)IHBhcnNp$(cgYSBYTUwgZG9jdW1)$nQgZ(9yIGVhY2ggY2hhc(FjdGVyIGRhdGEgdGhpcyBtZXRo$2QNCiAgICAqIG)zIGNh$Gx)ZC4gSXQn$GwgYWRkIHRoZSBjaGFyYWN0ZXIgZGF0YSB0$yB0aGUgZG9jdW1)$nQgdHJ)ZS4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHByaXZhdGUNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgaW50ICRwYXJzZXIgSGFuZGx)ciB($3IgYWNjZXNzaW5nIHRoZSBjdXJyZW50IFhNTCBwYXJzZXIuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkdGV4dCBDaGFyYWN0ZXIgZGF0YSB($3VuZCBp$iB0aGUgZG9jdW1)$nQuDQogICAgKiBAc2V)ICAgICAgIGhh$(RsZV9zdGFydF9)$GVtZW50KCksIGhh$(RsZV9)$(RfZWx)$WVudCgpLCAk$(9kZXMsICRpZHMNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGhh$(RsZV9jaGFyYWN0ZXJfZGF0YSAoICRwYXJzZXIsICR0ZXh0ICkNCiAgICB7DQogICAgICAgIC8vIFJ)cGxhY2UgZW50aXRpZXMuDQogICAgICAgICR0ZXh0ID0gc3RydHIoJHR)eHQsICR0aG)zLT5)$nRpdG))cyk7DQogICAgICAgIA0KICAgICAgICAvLyBTYXZ)IHRoZSB0ZXh0Lg0KICAgICAgICAkdGhpcy0+YWRkX2Nv$nR)$nQoJHRoaXMtPnBhdGgsIGFkZHNsYXNoZXModHJp$SgkdGV4dCkpKTsNCiAgICB9DQogICAgDQogICAgLyoqDQogICAgKiBTcGxpdHMgYW4gWFBhdGggZXhwc(Vzc2)v$iBp$nRvIG)0cyBkaWZ(ZXJ)$nQgZXhwc(Vzc2)v$nMuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2Qgc3BsaXRzIGFuIFhQYXRoIGV4cHJ)c3Np$24uIEVhY2ggZXhwc(Vzc2)v$iBjYW4gY29uc2)zdHMg$2YNCiAgICAqIGxpc3Qg$2YgZXhwc(Vzc2)v$iBiZW)uZyBzZXBhc(F0ZWQgZnJv$SB)YWNoIG90aGVyIGJ5IGEgfCBjaGFyYWN0ZXIuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkZXhwc(Vzc2)v$iBUaGUgY29tcGx)dGUgZXhwc(Vzc2)v$iB0$yBiZSBzcGxpdHR)ZA0KICAgICogICAgICAgICAgICBp$nRvIG)0cyBkaWZ(ZXJ)$nQgZXhwc(Vzc2)v$nMuDQogICAgKiBAc(V0dXJuICAgIGFyc(F5IFRoZSBhcnJheSByZXR1c(5)ZCB(c(9tIHRoaXMg$WV0aG9kIGNv$nRhaW5zIGEg$G)zdA0KICAgICogICAgICAgICAgICBvZiBh$GwgZXhwc(Vzc2)v$nMgZ(91$(QgaW4gdGh)IGV4cHJ)c3Np$24gcGFzc2VkIHRvIHRoaXMNCiAgICAqICAgICAgICAgICAg$WV0aG9kIGFzIGEgcGFyYW1)dGVyLg0KICAgICogQHN)ZSAgICAgICB)d(FsdXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIHNw$G)0X3BhdGhzICggJGV4cHJ)c3Np$24gKQ0KICAgIHsNCiAgICAgICAgLy8gQ3J)YXR)IGFuIGVtcHR5IGFyc(F5Lg0KICAgICAgICAkcGF0aHMgPSBhcnJheSgpOw0KICAgICAgICANCiAgICAgICAgLy8gU2F2ZSB0aGUgcG9zaXRp$24g$2YgdGh)IHNsYXNoLg0KICAgICAgICAkcG9zaXRp$24gPSAtMTsNCiAgICAgICAgDQogICAgICAgIC8vIFJ1$iB0aHJvdWdoIHRoZSB)eHByZXNzaW9uLg0KICAgICAgICBk$w0KICAgICAgICB7DQogICAgICAgICAgICAvLyBTZWFyY2ggZ(9yIGEgc2xhc2guDQogICAgICAgICAgICAkcG9zaXRp$24gPSAkdGhpcy0+c2Vhc(NoX3N0c()uZygkZXhwc(Vzc2)v$iwgInwiKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciBhIHwgd2FzIGZvdW5kLg0KICAgICAgICAgICAgaWYgKCAkcG9zaXRp$24gPj0gMCApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBsZWZ0IHBhcnQg$2YgdGh)IGV4cHJ)c3Np$24uDQogICAgICAgICAgICAgICAgJGx)ZnQgID0gc3Vic3RyKCR)eHByZXNzaW9uLCAwLCAkcG9zaXRp$24pOw0KICAgICAgICAgICAgICAgICRyaWdodCA9IHN1YnN0cigkZXhwc(Vzc2)v$iwgJHBvc2)0aW9uICsgMSk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBsZWZ0IHZh$HV)IHRvIHRoZSBzdGVwcy4NCiAgICAgICAgICAgICAgICAkcGF0aHN$XSA9ICRsZWZ0Ow0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIC8vIFJ)ZHVjZSB0aGUgZXhwc(Vzc2)v$iB0$yB0aGUgc()naHQgcGFydC4NCiAgICAgICAgICAgICAgICAkZXhwc(Vzc2)v$iA9ICRyaWdodDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICB3aG)sZSAoICRw$3NpdG)v$iA+IC0xICk7DQogICAgICAgIA0KICAgICAgICAvLyBBZGQgdGh)IHJ)$WFp$(cgZXhwc(Vzc2)v$iB0$yB0aGUg$G)zdCBvZiBzdGVwcy4NCiAgICAgICAgJHBhdGhzW10gPSAkZXhwc(Vzc2)v$jsNCiAgICAgICAgDQogICAgICAgIC8vIFJ)dHVy$iB0aGUgc3R)cHMuDQogICAgICAgIHJ)dHVy$iAkcGF0aHM7DQogICAgfQ0KICAgIA0KICAgIC8qKg0KICAgICogU3BsaXRzIGFuIFhQYXRoIGV4cHJ)c3Np$24gaW50$yBpdHMgZG)(Z(VyZW50IHN0ZXBzLg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIHNw$G)0cyBh$iBYUGF0aCB)eHByZXNzaW9uLiBFYWNoIGV4cHJ)c3Np$24gY2FuIGNv$nNpc3RzIG9(DQogICAgKiBsaXN0IG9(IHN0ZXBzIGJ)aW5nIHN)cGFyYXR)ZCB(c(9tIGVhY2gg$3RoZXIgYnkgYSAvIGNoYXJhY3R)ci4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHByaXZhdGUNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICR)eHByZXNzaW9uIFRoZSBj$21w$GV0ZSB)eHByZXNzaW9uIHRvIGJ)IHNw$G)0dGVkDQogICAgKiAgICAgICAgICAgIG)udG8gaXRzIGRpZ(Z)c(VudCBzdGVwcy4NCiAgICAqIEByZXR1c(4gICAgYXJyYXkgVGh)IGFyc(F5IHJ)dHVy$(VkIGZy$20gdGhpcyBtZXRo$2QgY29udGFp$nMgYSBsaXN0DQogICAgKiAgICAgICAgICAgIG9(IGFs$CBzdGVwcyB($3VuZCBp$iB0aGUgZXhwc(Vzc2)v$iBwYXNzZWQgdG8gdGhpcw0KICAgICogICAgICAgICAgICBtZXRo$2QgYXMgYSBwYXJh$WV0ZXIuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1dGUoKQ0KICAgICovDQogICAgZnVuY3Rp$24gc3BsaXRfc3R)cHMgKCAkZXhwc(Vzc2)v$iApDQogICAgew0KICAgICAgICAvLyBDc(VhdGUgYW4gZW1wdHkgYXJyYXkuDQogICAgICAgICRzdGVwcyA9IGFyc(F5KCk7DQogICAgICAgIA0KICAgICAgICAvLyBSZXBsYWN)IGEgZG91Y(x)IHNsYXNoZXMsIGJ)Y2F1c2UgdGh)eSds$CBjYXVzZSBwc(9i$GVtcyBvdGh)cndpc2UuDQogICAgICAgICR)eHByZXNzaW9uID0gc3RyX3J)cGxhY2UoIi8vQCIsICIvZGVzY2VuZGFudDo6Ki9AIiwgJGV4cHJ)c3Np$24pOw0KICAgICAgICAkZXhwc(Vzc2)v$iA9IHN0c)9yZXBsYWN)KCIvLyIsICIvZGVzY2VuZGFudDo6IiwgJGV4cHJ)c3Np$24pOw0KICAgICAgICANCiAgICAgICAgLy8gU2F2ZSB0aGUgcG9zaXRp$24g$2YgdGh)IHNsYXNoLg0KICAgICAgICAkcG9zaXRp$24gPSAtMTsNCiAgICAgICAgDQogICAgICAgIC8vIFJ1$iB0aHJvdWdoIHRoZSB)eHByZXNzaW9uLg0KICAgICAgICBk$w0KICAgICAgICB7DQogICAgICAgICAgICAvLyBTZWFyY2ggZ(9yIGEgc2xhc2guDQogICAgICAgICAgICAkcG9zaXRp$24gPSAkdGhpcy0+c2Vhc(NoX3N0c()uZygkZXhwc(Vzc2)v$iwgIi8iKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciBhIHNsYXNoIHdhcyB($3VuZC4NCiAgICAgICAgICAgIG)(ICggJHBvc2)0aW9uID49IDAgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIEd)dCB0aGUg$GV(dCBwYXJ0IG9(IHRoZSB)eHByZXNzaW9uLg0KICAgICAgICAgICAgICAgICRsZWZ0ICA9IHN1YnN0cigkZXhwc(Vzc2)v$iwgMCwgJHBvc2)0aW9uKTsNCiAgICAgICAgICAgICAgICAkc()naHQgPSBzdWJzdHIoJGV4cHJ)c3Np$24sICRw$3NpdG)v$iArIDEpOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUg$GV(dCB2YWx1ZSB0$yB0aGUgc3R)cHMuDQogICAgICAgICAgICAgICAgJHN0ZXBzW10gPSAk$GV(dDsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAvLyBSZWR1Y2UgdGh)IGV4cHJ)c3Np$24gdG8gdGh)IHJpZ2h0IHBhcnQuDQogICAgICAgICAgICAgICAgJGV4cHJ)c3Np$24gPSAkc()naHQ7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgd2hp$GUgKCAkcG9zaXRp$24gPiAtMSApOw0KICAgICAgICANCiAgICAgICAgLy8gQWRkIHRoZSByZW1haW5nIGV4cHJ)c3Np$24gdG8gdGh)IGxpc3Qg$2Ygc3R)cHMuDQogICAgICAgICRzdGVwc1tdID0gJGV4cHJ)c3Np$247DQogICAgICAgIA0KICAgICAgICAvLyBSZXR1c(4gdGh)IHN0ZXBzLg0KICAgICAgICByZXR1c(4gJHN0ZXBzOw0KICAgIH0NCiAgICANCiAgICAvKioNCiAgICAqIFJ)dHJpZXZ)cyBheG)zIG)uZ(9y$WF0aW9uIGZy$20gYW4gWFBhdGggZXhwc(Vzc2)v$iBzdGVwLg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIHRyaWVzIHRvIGV4dHJhY3QgdGh)IG5h$WUg$2YgdGh)IGF4aXMgYW5kIG)0cyBu$2R)LXR)c3QNCiAgICAqIGZy$20gYSBnaXZ)$iBzdGVwIG9(IGFuIFhQYXRoIGV4cHJ)c3Np$24gYXQgYSBnaXZ)$iBu$2R)Lg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJHN0ZXAgU3RyaW5nIGNv$nRhaW5p$(cgYSBzdGVwIG9(IGFuIFhQYXRoIGV4cHJ)c3Np$24uDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAk$(9kZSBGdWxsIGRvY3VtZW50IHBhdGgg$2YgdGh)IG5vZGUg$24gd2hpY2ggdGh)DQogICAgKiAgICAgICAgICAgIHN0ZXAgaXMgZXh)Y3V0ZWQuDQogICAgKiBAc(V0dXJuICAgIGFyc(F5IFRoaXMg$WV0aG9kIHJ)dHVy$nMgYW4gYXJyYXkgY29udGFp$()uZyBp$(Zvc(1hdG)v$g0KICAgICogICAgICAgICAgICBhY(91dCB0aGUgYXhpcyB($3VuZCBp$iB0aGUgc3R)cC4NCiAgICAqIEBzZWUgICAgICAgZXZh$HVhdGVfc3R)cCgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBnZXRfYXhpcyAoICRzdGVwLCAk$(9kZSApDQogICAgew0KICAgICAgICAvLyBDc(VhdGUgYW4gYXJyYXkgdG8gc2F2ZSB0aGUgYXhpcyBp$(Zvc(1hdG)v$i4NCiAgICAgICAgJGF4aXMgPSBhcnJheSgNCiAgICAgICAgICAgICJheG)zIiAgICAgID0+ICIiLA0KICAgICAgICAgICAgI(5vZGUtdGVzdCIgPT4gIiIsDQogICAgICAgICAgICAicHJ)ZG)jYXR)IiA9PiBhcnJheSgpDQogICAgICAgICk7DQogICAgICAgIA0KICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZXJ)IGFyZSBwc(VkaWNhdGVzLg0KICAgICAgICBpZiAoIGVyZWcoI)x$IiwgJHN0ZXApICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gR2V0IHRoZSBwc(VkaWNhdGVzLg0KICAgICAgICAgICAgJHByZWRpY2F0ZXMgPSBzdWJzdHIoJHN0ZXAsIHN0cnBvcygkc3R)cCwgI)siKSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIFJ)ZHVjZSB0aGUgc3R)cC4NCiAgICAgICAgICAgICRzdGVwID0gJHRoaXMtPnByZXN0cigkc3R)cCwgI)siKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gVHJ5IHRvIHNw$G)0IHRoZSBwc(VkaWNhdGVzLg0KICAgICAgICAgICAgJHByZWRpY2F0ZXMgPSBzdHJfc(Vw$GFjZSgiXVsiLCAiXXx$IiwgJHByZWRpY2F0ZXMpOw0KICAgICAgICAgICAgJHByZWRpY2F0ZXMgPSB)eHBs$2R)KCJ8IiwgJHByZWRpY2F0ZXMpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBSdW4gdGhy$3VnaCBh$GwgcHJ)ZG)jYXR)cy4NCiAgICAgICAgICAgIGZvc(VhY2ggKCAkcHJ)ZG)jYXR)cyBhcyAkcHJ)ZG)jYXR)ICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBSZW1vd(UgdGh)IGJyYWNrZXRzLg0KICAgICAgICAgICAgICAgICRwc(VkaWNhdGUgPSBzdWJzdHIoJHByZWRpY2F0ZSwgMSwgc3Ry$GVuKCRwc(VkaWNhdGUpIC0gMik7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBwc(VkaWNhdGUgdG8gdGh)IGxpc3Qg$2YgcHJ)ZG)jYXR)cy4NCiAgICAgICAgICAgICAgICAkYXhpc1sicHJ)ZG)jYXR)I)1$XSA9ICRwc(VkaWNhdGU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGh)IGF4aXMgaXMgZ2)2ZW4gaW4gcGxhaW4gdGV4dC4NCiAgICAgICAgaWYgKCAkdGhpcy0+c2Vhc(NoX3N0c()uZygkc3R)cCwgIjo6IikgPiAtMSApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIFNw$G)0IHRoZSBzdGVwIHRvIGV4dHJhY3QgYXhpcyBh$(Qg$(9kZS10ZXN0Lg0KICAgICAgICAgICAgJGF4aXN$I(F4aXMiXSAgICAgID0gJHRoaXMtPnByZXN0cigkc3R)cCwgIjo6Iik7DQogICAgICAgICAgICAkYXhpc1si$(9kZS10ZXN0I)0gPSAkdGhpcy0+YWZ0ZXJzdHIoJHN0ZXAsICI6OiIpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUgc3R)cCBpcyB)$XB0eS4NCiAgICAgICAgICAgIG)(ICggZW1wdHkoJHN0ZXApICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBTZXQgaXQgdG8gdGh)IGR)Z(F1$HQgd(FsdWUuDQogICAgICAgICAgICAgICAgJHN0ZXAgPSAiLiI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgaXMgYW4gYWJic(V2aWF0ZWQgc3)udGF4Lg0KICAgICAgICAgICAgaWYgKCAkc3R)cCA9PSAiKiIgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIFVzZSB0aGUgY2hp$GQgYXhpcyBh$(Qgc2VsZWN0IGFs$CBjaG)sZHJ)$i4NCiAgICAgICAgICAgICAgICAkYXhpc1siYXhpcyJdICAgICAgPSAiY2hp$GQiOw0KICAgICAgICAgICAgICAgICRheG)zWyJu$2R)LXR)c3QiXSA9ICIqIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2VpZiAoIGVyZWcoI)woIiwgJHN0ZXApICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIG)0J3MgYSB(dW5jdG)v$i4NCiAgICAgICAgICAgICAgICBpZiAoICR0aG)zLT5pc19(dW5jdG)v$igkdGhpcy0+cHJ)c3RyKCRzdGVwLCAiKCIpKSApDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAvLyBHZXQgdGh)IHBvc2)0aW9uIG9(IHRoZSB(aXJzdCBic(Fja2V0Lg0KICAgICAgICAgICAgICAgICAgICAkc3RhcnQgPSBzdHJw$3MoJHN0ZXAsICIoIik7DQogICAgICAgICAgICAgICAgICAgICR)$(QgICA9IHN0cnBvcygkc3R)cCwgIikiLCAkc3RhcnQpOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgLy8gR2V0IGV2ZXJ5dGhp$(cgY(V($3J)LCBiZXR3ZWVuIGFuZCBhZnR)ciB0aGUgYnJhY2t)dHMuDQogICAgICAgICAgICAgICAgICAgICRiZWZvc(UgID0gc3Vic3RyKCRzdGVwLCAwLCAkc3RhcnQpOw0KICAgICAgICAgICAgICAgICAgICAkY(V0d2V)$iA9IHN1YnN0cigkc3R)cCwgJHN0YXJ0ICsgMSwgJGVuZCAtICRzdGFydCAtIDEpOw0KICAgICAgICAgICAgICAgICAgICAkYWZ0ZXIgICA9IHN1YnN0cigkc3R)cCwgJGVuZCArIDEpOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgLy8gVHJp$SB)YWNoIHN0c()uZy4NCiAgICAgICAgICAgICAgICAgICAgJGJ)Z(9yZSAgPSB0c()tKCRiZWZvc(UpOw0KICAgICAgICAgICAgICAgICAgICAkY(V0d2V)$iA9IHRyaW0oJGJ)dHd)ZW4pOw0KICAgICAgICAgICAgICAgICAgICAkYWZ0ZXIgICA9IHRyaW0oJGF(dGVyKTsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIC8vIFNhd(UgdGh)IGV2YWx1YXR)ZCB(dW5jdG)v$i4NCiAgICAgICAgICAgICAgICAgICAgJGF4aXN$I(F4aXMiXSAgICAgID0gI(Z1$(N0aW9uIjsNCiAgICAgICAgICAgICAgICAgICAgJGF4aXN$I(5vZGUtdGVzdCJdID0gJHRoaXMtP(V2YWx1YXR)X2Z1$(N0aW9uKCRiZWZvc(UsDQogICAgICAgICAgICAgICAgICAgICAgICAkY(V0d2V)$iwgJG5vZGUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB)$HN)DQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAvLyBVc2UgdGh)IGNoaWxkIGF4aXMgYW5kIGEgZnVuY3Rp$24uDQogICAgICAgICAgICAgICAgICAgICRheG)zWyJheG)zI)0gICAgICA9ICJjaG)sZCI7DQogICAgICAgICAgICAgICAgICAgICRheG)zWyJu$2R)LXR)c3QiXSA9ICRzdGVwOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2VpZiAoIGVyZWdpKCJeQCIsICRzdGVwKSApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gVXN)IHRoZSBhdHRyaWJ1dGUgYXhpcyBh$(Qgc2VsZWN0IHRoZSBhdHRyaWJ1dGUuDQogICAgICAgICAgICAgICAgJGF4aXN$I(F4aXMiXSAgICAgID0gI(F0dHJpYnV0ZSI7DQogICAgICAgICAgICAgICAgJGF4aXN$I(5vZGUtdGVzdCJdID0gc3Vic3RyKCRzdGVwLCAxKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2VpZiAoIGVyZWdpKCJcXSQiLCAkc3R)cCkgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIFVzZSB0aGUgY2hp$GQgYXhpcyBh$(Qgc2VsZWN0IGEgcG9zaXRp$24uDQogICAgICAgICAgICAgICAgJGF4aXN$I(F4aXMiXSAgICAgID0gI(NoaWxkIjsNCiAgICAgICAgICAgICAgICAkYXhpc1si$(9kZS10ZXN0I)0gPSBzdWJzdHIoJHN0ZXAsIHN0cnBvcygkc3R)cCwgI)siKSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB)$HN)aWYgKCAkc3R)cCA9PSAiLiIgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIFN)$GVjdCB0aGUgc2VsZiBheG)zLg0KICAgICAgICAgICAgICAgICRheG)zWyJheG)zI)0gICAgICA9ICJzZWx(IjsNCiAgICAgICAgICAgICAgICAkYXhpc1si$(9kZS10ZXN0I)0gPSAiKiI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB)$HN)aWYgKCAkc3R)cCA9PSAiLi4iICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBTZWx)Y3QgdGh)IHBhc(VudCBheG)zLg0KICAgICAgICAgICAgICAgICRheG)zWyJheG)zI)0gICAgICA9ICJwYXJ)$nQiOw0KICAgICAgICAgICAgICAgICRheG)zWyJu$2R)LXR)c3QiXSA9ICIqIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2VpZiAoIGVyZWcoI)5$YS16QS1aMC05XC1fXSskIiwgJHN0ZXApICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBTZWx)Y3QgdGh)IGNoaWxkIGF4aXMgYW5kIHRoZSBjaG)sZC4NCiAgICAgICAgICAgICAgICAkYXhpc1siYXhpcyJdICAgICAgPSAiY2hp$GQiOw0KICAgICAgICAgICAgICAgICRheG)zWyJu$2R)LXR)c3QiXSA9ICRzdGVwOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIFVzZSB0aGUgY2hp$GQgYXhpcyBh$(QgYSBuYW1)Lg0KICAgICAgICAgICAgICAgICRheG)zWyJheG)zI)0gICAgICA9ICJjaG)sZCI7DQogICAgICAgICAgICAgICAgJGF4aXN$I(5vZGUtdGVzdCJdID0gJHN0ZXA7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyBDaGVjayB3aGV0aGVyIG)0J3MgYSB2YWxpZCBheG)zLg0KICAgICAgICBpZiAoICFp$)9hcnJheSgkYXhpc1siYXhpcyJdLCBhcnJheV9tZXJnZSgkdGhpcy0+YXh)cywNCiAgICAgICAgICAgIGFyc(F5KCJ(dW5jdG)v$iIpKSkgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBEaXNw$GF5IGFuIGVyc(9yIG1)c3NhZ2UuDQogICAgICAgICAgICAkdGhpcy0+ZG)zcGxheV9)cnJvcigiV2hp$GUgcGFyc2)uZyBh$iBYUGF0aCB)eHByZXNzaW9uLCBp$iAiLg0KICAgICAgICAgICAgICAgICJ0aGUgc3R)cCBcIiVzXCIgdGh)IG)ud(FsaWQgYXhpcyBcIiVzXCIgd2FzIGZvdW5kLiIsDQogICAgICAgICAgICAgICAgc3RyX3J)cGxhY2UoJHN0ZXAsICI8Yj4iLiRzdGVwLiI8L2I+IiwgJHRoaXMtPnhwYXRoKSwjDQogICAgICAgICAgICAgICAgJGF4aXN$I(F4aXMiXSk7ICANCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8gU(V0dXJuIHRoZSBheG)zIG)uZ(9y$WF0aW9uLg0KICAgICAgICByZXR1c(4gJGF4aXM7DQogICAgfQ0KICAgIA0KICAgIC8qKg0KICAgICogTG9va3MgZ(9yIGEgc3RyaW5nIHdpdGhp$iBh$(90aGVyIHN0c()uZy4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBs$29rcyB($3IgYSBzdHJp$(cgd2)0aG)uIGFu$3RoZXIgc3RyaW5nLiBCc(Fja2V0cyBp$iB0aGUNCiAgICAqIHN0c()uZyB0aGUg$WV0aG9kIG)zIGxv$2tp$(cgdGhy$3VnaCB3aWxsIGJ)IHJ)c3B)Y3R)ZCwgd2hpY2gg$WVh$nMgdGhhdA0KICAgICog$25seSBpZiB0aGUgc3RyaW5nIHRoZSBtZXRo$2QgaXMg$G9va2)uZyB($3IgaXMg$G9jYXR)ZCBvdXRzaWR)IG9(DQogICAgKiBic(Fja2V0cywgdGh)IHN)YXJjaCB3aWxsIGJ)IHN1Y2N)c3N(dWwuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkdGVy$SBTdHJp$(cgaW4gd2hpY2ggdGh)IHN)YXJjaCBzaGFs$CB0YWt)IHBsYWN)Lg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGV4cHJ)c3Np$24gU3RyaW5nIHRoYXQgc2hvdWxkIGJ)IHN)YXJjaGVkLg0KICAgICogQHJ)dHVy$iAgICBp$nQgVGhpcyBtZXRo$2Qgc(V0dXJucyAtMSBpZiBu$yBzdHJp$(cgd2FzIGZvdW5kLCBvdGh)cndpc2UNCiAgICAqICAgICAgICAgICAgdGh)IG9(ZnN)dCBhdCB3aG)jaCB0aGUgc3RyaW5nIHdhcyB($3VuZC4NCiAgICAqIEBzZWUgICAgICAgZXZh$HVhdGVfc3R)cCgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBzZWFyY2hfc3RyaW5nICggJHR)c(0sICR)eHByZXNzaW9uICkNCiAgICB7DQogICAgICAgIC8vIENyZWF0ZSBhIG5)dyBj$3VudGVyIGZvciB0aGUgYnJhY2t)dHMuDQogICAgICAgICRic(Fja2V0cyA9IDA7DQogICAgICAgIA0KICAgICAgICAvLyBSdW4gdGhy$3VnaCB0aGUgc3RyaW5nLg0KICAgICAgICB($3IgKCAkaSA9IDA7ICRpIDwgc3Ry$GVuKCR0ZXJtKTsgJGkrKyApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIEd)dCB0aGUgY2hhc(FjdGVyIGF0IHRoZSBw$3NpdG)v$iBvZiB0aGUgc3RyaW5nLg0KICAgICAgICAgICAgJGNoYXJhY3R)ciA9IHN1YnN0cigkdGVy$SwgJGksIDEpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIG)0J3MgYSBic(VhY2t)dC4NCiAgICAgICAgICAgIG)(ICggKCAkY2hhc(FjdGVyID09ICIoIiApIHx8ICggJGNoYXJhY3R)ciA9PSAiWyIgKSApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gSW5jc(Vhc2UgdGh)IG51$WJ)ciBvZiBic(Fja2V0cy4NCiAgICAgICAgICAgICAgICAkYnJhY2t)dHMrKzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2VpZiAoICggJGNoYXJhY3R)ciA9PSAiKSIgKSB8fCAoICRjaGFyYWN0ZXIgPT0gI)0iICkgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIER)Y3J)YXN)IHRoZSBudW1iZXIg$2YgYnJhY2t)dHMuDQogICAgICAgICAgICAgICAgJGJyYWNrZXRzLS07DQogICAgICAgICAgICB9DQogICAgICAgICAgICB)$HN)aWYgKCAkYnJhY2t)dHMgPT0gMCApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB3ZSBjYW4gZ()uZCB0aGUgZXhwc(Vzc2)v$iBhdCB0aG)zIG)uZGV4Lg0KICAgICAgICAgICAgICAgIG)(ICggc3Vic3RyKCR0ZXJtLCAkaSwgc3Ry$GVuKCR)eHByZXNzaW9uKSkgPT0gJGV4cHJ)c3Np$24gKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gU(V0dXJuIHRoZSBjdXJyZW50IG)uZGV4Lg0KICAgICAgICAgICAgICAgICAgICByZXR1c(4gJGk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHd)IGhhZCBhIHZh$G)kIG51$WJ)ciBvZiBic(Fja2V0cy4NCiAgICAgICAgaWYgKCAkYnJhY2t)dHMgIT0gMCApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIERpc3BsYXkgYW4gZXJy$3Ig$WVzc2FnZS4NCiAgICAgICAgICAgICR0aG)zLT5kaXNw$GF5X2Vyc(9yKCJXaG)sZSBwYXJzaW5nIGFuIFhQYXRoIGV4cHJ)c3Np$24sIG)uIHRoZSAiLg0KICAgICAgICAgICAgICAgICJwc(VkaWNhdGUgXCI)c1wiLCB0aGVyZSB3YXMgYW4gaW52YWxpZCBudW1iZXIg$2YgYnJhY2t)dHMuIiwNCiAgICAgICAgICAgICAgICBzdHJfc(Vw$GFjZSgkdGVy$SwgIjxiPiIuJHR)c(0uIjwvYj4iLCAkdGhpcy0+eHBhdGgpKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIE5vdGhp$(cgd2FzIGZvdW5kLg0KICAgICAgICByZXR1c(4gKC0xKTsNCiAgICB9DQogICAgDQogICAgLyoqDQogICAgKiBDaGVja3MgZ(9yIGEgd(FsaWQgZnVuY3Rp$24g$(FtZS4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBjaGVjayB3aGV0aGVyIGFuIGV4cHJ)c3Np$24gY29udGFp$nMgYSB2YWxpZCBuYW1)IG9(IGFuDQogICAgKiBYUGF0aCB(dW5jdG)v$i4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHByaXZhdGUNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICR)eHByZXNzaW9uIE5h$WUg$2YgdGh)IGZ1$(N0aW9uIHRvIGJ)IGNoZWNrZWQuDQogICAgKiBAc(V0dXJuICAgIGJv$2x)YW4gVGhpcyBtZXRo$2Qgc(V0dXJucyB0cnV)IG)(IHRoZSBnaXZ)$iBuYW1)IG)zIGEgd(FsaWQNCiAgICAqICAgICAgICAgICAgWFBhdGggZnVuY3Rp$24g$(FtZSwg$3RoZXJ3aXN)IGZh$HN)Lg0KICAgICogQHN)ZSAgICAgICB)d(FsdWF0ZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBpc19(dW5jdG)v$iAoICR)eHByZXNzaW9uICkNCiAgICB7DQogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgaXQncyBp$iB0aGUg$G)zdCBvZiBzdXBw$3J0ZWQgZnVuY3Rp$25zLg0KICAgICAgICBpZiAoIG)uX2Fyc(F5KCR)eHByZXNzaW9uLCAkdGhpcy0+ZnVuY3Rp$25zKSApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIE)0J3MgYSB(dW5jdG)v$i4NCiAgICAgICAgICAgIHJ)dHVy$iB0cnV)Ow0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gSXQncyBu$3QgYSB(dW5jdG)v$i4NCiAgICAgICAgICAgIHJ)dHVy$iB(YWxzZTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICANCiAgICAvKioNCiAgICAqIEV2YWx1YXR)cyBhIHN0ZXAg$2YgYW4gWFBhdGggZXhwc(Vzc2)v$i4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCB0c())cyB0$yB)d(FsdWF0ZSBhIHN0ZXAgZnJv$SBh$iBYUGF0aCB)eHByZXNzaW9uIGF0IGENCiAgICAqIHNwZWNpZ()jIGNv$nR)eHQuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkY29udGV4dCBGdWxsIGRvY3VtZW50IHBhdGgg$2YgdGh)IGNv$nR)eHQgZnJv$Q0KICAgICogICAgICAgICAgICB3aG)jaCBzdGFydG)uZyB0aGUgc3R)cCBzaG91$GQgY(UgZXZh$HVhdGVkLg0KICAgICogQHBhc(FtICAgICBhcnJheSAkc3R)cHMgQXJyYXkgY29udGFp$()uZyB0aGUgc(VtYW)uaW5nIHN0ZXBzIG9(IHRoZQ0KICAgICogICAgICAgICAgICBjdXJyZW50IFhQYXRoIGV4cHJ)c3Np$24uDQogICAgKiBAc(V0dXJuICAgIGFyc(F5IFRoaXMg$WV0aG9kIHJ)dHVy$nMgYW4gYXJyYXkgY29udGFp$()uZyBh$Gwg$(9kZXMNCiAgICAqICAgICAgICAgICAgdGhhdCBhc(UgdGh)IHJ)c3VsdCBvZiB)d(FsdWF0aW5nIHRoZSBnaXZ)$iBYUGF0aCBzdGVwLg0KICAgICogQHN)ZSAgICAgICB)d(FsdWF0ZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iB)d(FsdWF0ZV9zdGVwICggJGNv$nR)eHQsICRzdGVwcyApDQogICAgew0KICAgICAgICAvLyBDc(VhdGUgYW4gZW1wdHkgYXJyYXkgZ(9yIHNhd()uZyB0aGUg$(9kZXMgZ(91$(QuDQogICAgICAgICRu$2R)cyA9IGFyc(F5KCk7DQoNCiAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUgY29udGV4dCBpcyBh$iBhcnJheSBvZiBj$250ZXh0cy4NCiAgICAgICAgaWYgKCBpc19hcnJheSgkY29udGV4dCkgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBSdW4gdGhy$3VnaCB0aGUgYXJyYXkuDQogICAgICAgICAgICB($3J)YWNoICggJGNv$nR)eHQgYXMgJHBhdGggKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIENh$GwgdGhpcyBtZXRo$2QgZ(9yIHRoaXMgc2)uZ2x)IHBhdGguDQogICAgICAgICAgICAgICAgJG5vZGVzID0gYXJyYX)f$WVyZ2UoJG5vZGVzLA0KICAgICAgICAgICAgICAgICAgICAkdGhpcy0+ZXZh$HVhdGVfc3R)cCgkcGF0aCwgJHN0ZXBzKSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBHZXQgdGhpcyBzdGVwLg0KICAgICAgICAgICAgJHN0ZXAgPSBhcnJheV9zaG)(dCgkc3R)cHMpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBDc(VhdGUgYW4gYXJyYXkgdG8gc2F2ZSB0aGUg$(V3IGNv$nR)eHRzLg0KICAgICAgICAgICAgJGNv$nR)eHRzID0gYXJyYXkoKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gR2V0IHRoZSBheG)zIG9(IHRoZSBjdXJyZW50IHN0ZXAuDQogICAgICAgICAgICAkYXhpcyA9ICR0aG)zLT5nZXRfYXhpcygkc3R)cCwgJGNv$nR)eHQpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIG)0J3MgYSB(dW5jdG)v$i4NCiAgICAgICAgICAgIG)(ICggJGF4aXN$I(F4aXMiXSA9PSAiZnVuY3Rp$24iICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIGFuIGFyc(F5IHdhcyByZXR1c(4gYnkgdGh)IGZ1$(N0aW9uLg0KICAgICAgICAgICAgICAgIG)(ICggaXNfYXJyYXkoJGF4aXN$I(5vZGUtdGVzdCJdKSApDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGh)IHJ)c3VsdHMgdG8gdGh)IGxpc3Qg$2YgY29udGV4dHMuDQogICAgICAgICAgICAgICAgICAgICRj$250ZXh0cyA9IGFyc(F5X21)c(d)KCRj$250ZXh0cywgJGF4aXN$I(5vZGUtdGVzdCJdKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSByZXN1$HQgdG8gdGh)IGxpc3Qg$2YgY29udGV4dHMuDQogICAgICAgICAgICAgICAgICAgICRj$250ZXh0c1tdID0gJGF4aXN$I(5vZGUtdGVzdCJdOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBDc(VhdGUgdGh)IG5h$WUg$2YgdGh)IG1)dGhvZC4NCiAgICAgICAgICAgICAgICAk$WV0aG9kID0gI(hh$(RsZV9heG)zXyIuc3RyX3J)cGxhY2UoIi0iLCAiXyIsICRheG)zWyJheG)zI)0pOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUgYXhpcyBoYW5k$GVyIG)zIGR)Z()uZWQuDQogICAgICAgICAgICAgICAgaWYgKCAh$WV0aG9kX2V4aXN0cyg(JHRoaXMsICRtZXRo$2QpICkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIC8vIERpc3BsYXkgYW4gZXJy$3Ig$WVzc2FnZS4NCiAgICAgICAgICAgICAgICAgICAgJHRoaXMtP(Rpc3BsYX)fZXJy$3IoI)doaWx)IHBhcnNp$(cgYW4gWFBhdGggZXhwc(Vzc2)v$iwgIi4NCiAgICAgICAgICAgICAgICAgICAgICAgICJ0aGUgYXhpcyBcIiVzXCIgY291$GQg$(90IGJ)IGhh$(RsZWQsIGJ)Y2F1c2UgdGhpcyAiLg0KICAgICAgICAgICAgICAgICAgICAgICAgInZ)cnNp$24gZG9)cyBu$3Qgc3VwcG9ydCB0aG)zIGF4aXMuIiwgJGF4aXN$I(F4aXMiXSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgLy8gUGVyZ(9y$SBh$iBheG)zIGFjdG)v$i4NCiAgICAgICAgICAgICAgICAkY29udGV4dHMgPSBjYWxsX3VzZXJf$WV0aG9kKCRtZXRo$2QsICYkdGhpcywgJGF4aXMsICRj$250ZXh0KTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGh)c(UgYXJ)IHByZWRpY2F0ZXMuDQogICAgICAgICAgICAgICAgaWYgKCBj$3VudCgkYXhpc1sicHJ)ZG)jYXR)I)0pID4gMCApDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIGVhY2gg$(9kZSB(aXRzIHRoZSBwc(VkaWNhdGVzLg0KICAgICAgICAgICAgICAgICAgICAkY29udGV4dHMgPSAkdGhpcy0+Y2h)Y2tfcHJ)ZG)jYXR)cygkY29udGV4dHMsDQogICAgICAgICAgICAgICAgICAgICAgICAkYXhpc1sicHJ)ZG)jYXR)I)0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGVyZSBhc(Ug$W9yZSBzdGVwcyBsZWZ0Lg0KICAgICAgICAgICAgaWYgKCBj$3VudCgkc3R)cHMpID4gMCApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gQ29udG)udWUgdGh)IGV2YWx1YXRp$24g$2YgdGh)IG5)eHQgc3R)cHMuDQogICAgICAgICAgICAgICAgJG5vZGVzID0gJHRoaXMtP(V2YWx1YXR)X3N0ZXAoJGNv$nR)eHRzLCAkc3R)cHMpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIFNhd(UgdGh)IGZvdW5kIGNv$nR)eHRzLg0KICAgICAgICAgICAgICAgICRu$2R)cyA9ICRj$250ZXh0czsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8gU(V0dXJuIHRoZSBu$2R)cyB($3VuZC4NCiAgICAgICAgc(V0dXJuICRu$2R)czsNCiAgICB9DQogICAgDQogICAgLyoqDQogICAgKiBFd(FsdWF0ZXMgYW4gWFBhdGggZnVuY3Rp$24NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCB)d(FsdWF0ZXMgYSBnaXZ)$iBYUGF0aCB(dW5jdG)v$iB3aXRoIG)0cyBhc(d1$WVudHMg$24gYQ0KICAgICogc3B)Y2)(aWMg$(9kZSBvZiB0aGUgZG9jdW1)$nQuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkZnVuY3Rp$24gT(FtZSBvZiB0aGUgZnVuY3Rp$24gdG8gY(UgZXZh$HVhdGVkLg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGFyZ3VtZW50cyBTdHJp$(cgY29udGFp$()uZyB0aGUgYXJndW1)$nRzIGJ)aW5nDQogICAgKiAgICAgICAgICAgIHBhc3N)ZCB0$yB0aGUgZnVuY3Rp$24uDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAk$(9kZSBGdWxsIHBhdGggdG8gdGh)IGRvY3VtZW50IG5vZGUg$24gd2hpY2ggdGh)DQogICAgKiAgICAgICAgICAgIGZ1$(N0aW9uIHNo$3VsZCBiZSB)d(FsdWF0ZWQuDQogICAgKiBAc(V0dXJuICAgIG1peGVkIFRoaXMg$WV0aG9kIHJ)dHVy$nMgdGh)IHJ)c3VsdCBvZiB0aGUgZXZh$HVhdG)v$iBvZg0KICAgICogICAgICAgICAgICB0aGUgZnVuY3Rp$24uIER)cGVuZG)uZyBv$iB0aGUgZnVuY3Rp$24gdGh)IHR5cGUg$2YgdGh)IA0KICAgICogICAgICAgICAgICByZXR1c(4gd(FsdWUgY2FuIGJ)IGRpZ(Z)c(VudC4NCiAgICAqIEBzZWUgICAgICAgZXZh$HVhdGUoKQ0KICAgICovDQogICAgZnVuY3Rp$24gZXZh$HVhdGVfZnVuY3Rp$24gKCAkZnVuY3Rp$24sICRhc(d1$WVudHMsICRu$2R)ICkNCiAgICB7DQogICAgICAgIC8vIFJ)$W92ZSB3aG)0ZXNwYWN)cy4NCiAgICAgICAgJGZ1$(N0aW9uICA9IHRyaW0oJGZ1$(N0aW9uKTsNCiAgICAgICAgJGFyZ3VtZW50cyA9IHRyaW0oJGFyZ3VtZW50cyk7DQoNCiAgICAgICAgLy8gQ3J)YXR)IHRoZSBuYW1)IG9(IHRoZSB(dW5jdG)v$iBoYW5k$G)uZyB(dW5jdG)v$i4NCiAgICAgICAgJG1)dGhvZCA9ICJoYW5k$GVfZnVuY3Rp$25fIi5zdHJfc(Vw$GFjZSgiLSIsICJfIiwgJGZ1$(N0aW9uKTsNCiAgICAgICAgDQogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGh)IGZ1$(N0aW9uIGhh$(RsaW5nIGZ1$(N0aW9uIG)zIGF2YW)sYWJsZS4NCiAgICAgICAgaWYgKCAh$WV0aG9kX2V4aXN0cyg(JHRoaXMsICRtZXRo$2QpICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gRG)zcGxheSBh$iB)cnJvciBtZXNzYWd)Lg0KICAgICAgICAgICAgJHRoaXMtP(Rpc3BsYX)fZXJy$3IoI)doaWx)IHBhcnNp$(cgYW4gWFBhdGggZXhwc(Vzc2)v$iwgIi4NCiAgICAgICAgICAgICAgICAidGh)IGZ1$(N0aW9uIFwiJXNcIiBj$3VsZCBu$3QgY(UgaGFuZGx)ZCwgY(VjYXVzZSB0aG)zICIuDQogICAgICAgICAgICAgICAgInZ)cnNp$24gZG9)cyBu$3Qgc3VwcG9ydCB0aG)zIGZ1$(N0aW9uLiIsICR(dW5jdG)v$ik7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vIFJ)dHVy$iB0aGUgc(VzdWx0IG9(IHRoZSB(dW5jdG)v$i4NCiAgICAgICAgc(V0dXJuIGNh$GxfdXN)c)9tZXRo$2QoJG1)dGhvZCwgJiR0aG)zLCAk$(9kZSwgJGFyZ3VtZW50cyk7DQogICAgfQ0KICAgIA0KICAgIC8qKg0KICAgICogRXZh$HVhdGVzIGEgcHJ)ZG)jYXR)IG9uIGEg$(9kZS4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCB0c())cyB0$yB)d(FsdWF0ZSBhIHByZWRpY2F0ZSBv$iBhIGdpd(VuIG5vZGUuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAk$(9kZSBGdWxsIHBhdGgg$2YgdGh)IG5vZGUg$24gd2hpY2ggdGh)IHByZWRpY2F0ZQ0KICAgICogICAgICAgICAgICBzaG91$GQgY(UgZXZh$HVhdGVkLg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJHByZWRpY2F0ZSBTdHJp$(cgY29udGFp$()uZyB0aGUgcHJ)ZG)jYXR)IGV4cHJ)c3Np$24NCiAgICAqICAgICAgICAgICAgdG8gY(UgZXZh$HVhdGVkLg0KICAgICogQHJ)dHVy$iAgICBtaXh)ZCBUaG)zIG1)dGhvZCBpcyBjYWxsZWQgc(VjdXJzaXZ)$HkuIFRoZSB(aXJzdCBjYWxsIHNo$3VsZA0KICAgICogICAgICAgICAgICByZXR1c(4gYSBi$29sZWFuIHZh$HV)LCB3aGV0aGVyIHRoZSBu$2R)IG1hdGNoZXMgdGh)IHByZWRpY2F0ZQ0KICAgICogICAgICAgICAgICBvciBu$3QuIEFueSBjYWxsIHRvIHRoZSBtZXRo$2QgY(Vp$(cg$WFkZSBkdXJp$(cgdGh)IHJ)Y3Vyc2)v$g0KICAgICogICAgICAgICAgICBtYXkgYWxz$yByZXR1c(4g$3RoZXIgdH)wZXMgZ(9yIGZ1cnRoZXIgcHJvY2Vzc2)uZy4NCiAgICAqIEBzZWUgICAgICAgZXZh$HVhdGUoKQ0KICAgICovDQogICAgZnVuY3Rp$24gZXZh$HVhdGVfcHJ)ZG)jYXR)ICggJG5vZGUsICRwc(VkaWNhdGUgKQ0KICAgIHsNCiAgICAgICAgLy8gU2V0IHRoZSBkZWZhdWx0IHBvc2)0aW9uIGFuZCB0aGUgdH)wZSBvZiB0aGUg$3B)c(F0$3IuDQogICAgICAgICRw$3NpdG)v$iA9IDA7DQogICAgICAgICRvcGVyYXRvciA9ICIiOw0KICAgICAgICANCiAgICAgICAgLy8gUnVuIHRoc(91Z2ggYWxsIG9wZXJhdG9ycyBh$(QgdHJ5IHRvIGZp$(QgdGh)$S4NCiAgICAgICAgZ(9yZWFjaCAoICR0aG)zLT5vcGVyYXRvcnMgYXMgJGV4cHJ)c3Np$24gKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIGEgcG9zaXRp$24gd2FzIGFsc(VhZHkgZ(91$(QuDQogICAgICAgICAgICBpZiAoICRw$3NpdG)v$iA8PSAwICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBUcnkgdG8gZ()uZCB0aGUg$3B)c(F0$3IuDQogICAgICAgICAgICAgICAgJHBvc2)0aW9uID0gJHRoaXMtPnN)YXJjaF9zdHJp$(coJHByZWRpY2F0ZSwgJGV4cHJ)c3Np$24pOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciBhIG9wZXJhdG9yIHdhcyB($3VuZC4NCiAgICAgICAgICAgICAgICBpZiAoICRw$3NpdG)v$iA+IDAgKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gU2F2ZSB0aGUg$3B)c(F0$3IuDQogICAgICAgICAgICAgICAgICAgICRvcGVyYXRvciA9ICR)eHByZXNzaW9uOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciBpdCdzIHRoZSB)cXVh$CBvcGVyYXRvci4NCiAgICAgICAgICAgICAgICAgICAgaWYgKCAk$3B)c(F0$3IgPT0gIj0iICkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWxz$yBs$29rIGZvciBvdGh)ciBvcGVyYXRvcnMgY29udGFp$()uZyB0aGUNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVxdWFsIHNpZ24uDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoICR0aG)zLT5zZWFyY2hfc3RyaW5nKCRwc(VkaWNhdGUsICIhPSIpID09DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKCAkcG9zaXRp$24gLSAxICkgKQ0KICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEd)dCB0aGUg$(V3IHBvc2)0aW9uLg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRw$3NpdG)v$iA9ICR0aG)zLT5zZWFyY2hfc3RyaW5nKCRwc(VkaWNhdGUsICIhPSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNhd(UgdGh)IG5)dyBvcGVyYXRvci4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAk$3B)c(F0$3IgPSAiIT0iOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAkdGhpcy0+c2Vhc(NoX3N0c()uZygkcHJ)ZG)jYXR)LCAiPD0iKSA9PQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICggJHBvc2)0aW9uIC0gMSApICkNCiAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHZXQgdGh)IG5)dyBw$3NpdG)v$i4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcG9zaXRp$24gPSAkdGhpcy0+c2Vhc(NoX3N0c()uZygkcHJ)ZG)jYXR)LCAiPD0iKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTYXZ)IHRoZSBuZXcg$3B)c(F0$3IuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJG9wZXJhdG9yID0gIjw9IjsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIG)(ICggJHRoaXMtPnN)YXJjaF9zdHJp$(coJHByZWRpY2F0ZSwgIj49IikgPT0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoICRw$3NpdG)v$iAtIDEgKSApDQogICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBuZXcgcG9zaXRp$24uDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBvc2)0aW9uID0gJHRoaXMtPnN)YXJjaF9zdHJp$(coJHByZWRpY2F0ZSwgIj49Iik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2F2ZSB0aGUg$(V3IG9wZXJhdG9yLg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRvcGVyYXRvciA9ICI+PSI7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGh)IG9wZXJhdG9yIG)zIGEgLSBzaWduLg0KICAgICAgICBpZiAoICRvcGVyYXRvciA9PSAiLSIgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIG)0J3Mg$(90IGEgZnVuY3Rp$24gY29udGFp$()uZyBhIC0gaW4gaXRzIG5h$WUuDQogICAgICAgICAgICB($3J)YWNoICggJHRoaXMtP(Z1$(N0aW9ucyBhcyAkZnVuY3Rp$24gKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGh)c(UncyBhIC0gc2)n$iBp$iB0aGUgZnVuY3Rp$24g$(FtZS4NCiAgICAgICAgICAgICAgICBpZiAoIGVyZWcoIi0iLCAkZnVuY3Rp$24pICkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIC8vIEd)dCB0aGUgcG9zaXRp$24g$2YgdGh)IC0gaW4gdGh)IGZ1$(N0aW9uIG5h$WUuDQogICAgICAgICAgICAgICAgICAgICRzaWduID0gc3RycG9zKCR(dW5jdG)v$iwgIi0iKTsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIC8vIEV4dHJhY3QgYSBzdWJzdHJp$(cgZnJv$SB0aGUgcHJ)ZG)jYXR)Lg0KICAgICAgICAgICAgICAgICAgICAkc3ViID0gc3Vic3RyKCRwc(VkaWNhdGUsICRw$3NpdG)v$iAtICRzaWduLA0KICAgICAgICAgICAgICAgICAgICAgICAgc3Ry$GVuKCR(dW5jdG)v$ikpOw0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgaXQncyB0aGUgZnVuY3Rp$24uDQogICAgICAgICAgICAgICAgICAgIG)(ICggJHN1YiA9PSAkZnVuY3Rp$24gKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBE$24ndCB1c2UgdGh)IG9wZXJhdG9yLg0KICAgICAgICAgICAgICAgICAgICAgICAgJG9wZXJhdG9yID0gIiI7DQogICAgICAgICAgICAgICAgICAgICAgICAkcG9zaXRp$24gPSAtMTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICB)$HN)aWYgKCAk$3B)c(F0$3IgPT0gIioiICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gR2V0IHNv$WUgc3Vic3RyaW5ncy4NCiAgICAgICAgICAgICRjaGFyYWN0ZXIgPSBzdWJzdHIoJHByZWRpY2F0ZSwgJHBvc2)0aW9uIC0gMSwgMSk7DQogICAgICAgICAgICAkYXR0c()idXR)ID0gc3Vic3RyKCRwc(VkaWNhdGUsICRw$3NpdG)v$iAtIDExLCAxMSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgaXQncyBh$iBhdHRyaWJ1dGUgc2VsZWN0aW9uLg0KICAgICAgICAgICAgaWYgKCAoICRjaGFyYWN0ZXIgPT0gIkAiICkgfHwgKCAkYXR0c()idXR)ID09ICJhdHRyaWJ1dGU6OiIgKSApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gRG9uJ3QgdXN)IHRoZSBvcGVyYXRvci4NCiAgICAgICAgICAgICAgICAk$3B)c(F0$3IgPSAiIjsNCiAgICAgICAgICAgICAgICAkcG9zaXRp$24gPSAtMTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciBh$iBvcGVyYXRvciB3YXMgZ(91$(QuICAgICAgICANCiAgICAgICAgaWYgKCAkcG9zaXRp$24gPiAwICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gR2V0IHRoZSBsZWZ0IGFuZCB0aGUgc()naHQgcGFydCBvZiB0aGUgZXhwc(Vzc2)v$i4NCiAgICAgICAgICAgICRsZWZ0ICA9IHN1YnN0cigkcHJ)ZG)jYXR)LCAwLCAkcG9zaXRp$24pOw0KICAgICAgICAgICAgJHJpZ2h0ID0gc3Vic3RyKCRwc(VkaWNhdGUsICRw$3NpdG)v$iArIHN0c(x)$igk$3B)c(F0$3IpKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gU(Vt$3Z)IHdoaXR)c3BhY2VzLg0KICAgICAgICAgICAgJGx)ZnQgID0gdHJp$Sgk$GV(dCk7DQogICAgICAgICAgICAkc()naHQgPSB0c()tKCRyaWdodCk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIEV2YWx1YXR)IHRoZSBsZWZ0IGFuZCB0aGUgc()naHQgcGFydC4NCiAgICAgICAgICAgICRsZWZ0ICA9ICR0aG)zLT5)d(FsdWF0ZV9wc(VkaWNhdGUoJG5vZGUsICRsZWZ0KTsNCiAgICAgICAgICAgICRyaWdodCA9ICR0aG)zLT5)d(FsdWF0ZV9wc(VkaWNhdGUoJG5vZGUsICRyaWdodCk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIENoZWNrIHRoZSBraW5kIG9(IG9wZXJhdG9yLg0KICAgICAgICAgICAgc3dpdGNoICggJG9wZXJhdG9yICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBjYXN)ICIg$3IgIjoNCiAgICAgICAgICAgICAgICAgICAgLy8gU(V0dXJuIHRoZSB0d28gc(VzdWx0cyBj$25uZWN0ZWQgYnkgYW4gI(9yIi4NCiAgICAgICAgICAgICAgICAgICAgc(V0dXJuICggJGx)ZnQg$3IgJHJpZ2h0ICk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgY2FzZSAiIGFuZCAiOg0KICAgICAgICAgICAgICAgICAgICAvLyBSZXR1c(4gdGh)IHR3$yByZXN1$HRzIGNv$(5)Y3R)ZCBieSBh$iAiYW5kIi4NCiAgICAgICAgICAgICAgICAgICAgc(V0dXJuICggJGx)ZnQgYW5kICRyaWdodCApOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGNhc2UgIj0iOg0KICAgICAgICAgICAgICAgICAgICAvLyBD$21wYXJ)IHRoZSB0d28gc(VzdWx0cy4NCiAgICAgICAgICAgICAgICAgICAgc(V0dXJuICggJGx)ZnQgPT0gJHJpZ2h0ICk7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGNhc2UgIiE9IjoNCiAgICAgICAgICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUgdHdvIHJ)c3VsdHMgYXJ)IG5vdCB)cXVh$C4NCiAgICAgICAgICAgICAgICAgICAgc(V0dXJuICggJGx)ZnQgIT0gJHJpZ2h0ICk7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGNhc2UgIjw9IjoNCiAgICAgICAgICAgICAgICAgICAgLy8gQ29tcGFyZSB0aGUgdHdvIHJ)c3VsdHMuDQogICAgICAgICAgICAgICAgICAgIHJ)dHVy$iAoICRsZWZ0IDw9ICRyaWdodCApOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBjYXN)ICI8IjoNCiAgICAgICAgICAgICAgICAgICAgLy8gQ29tcGFyZSB0aGUgdHdvIHJ)c3VsdHMuDQogICAgICAgICAgICAgICAgICAgIHJ)dHVy$iAoICRsZWZ0IDwgJHJpZ2h0ICk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgY2FzZSAiPj0iOg0KICAgICAgICAgICAgICAgICAgICAvLyBD$21wYXJ)IHRoZSB0d28gc(VzdWx0cy4NCiAgICAgICAgICAgICAgICAgICAgc(V0dXJuICggJGx)ZnQgPj0gJHJpZ2h0ICk7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGNhc2UgIj4iOg0KICAgICAgICAgICAgICAgICAgICAvLyBD$21wYXJ)IHRoZSB0d28gc(VzdWx0cy4NCiAgICAgICAgICAgICAgICAgICAgc(V0dXJuICggJGx)ZnQgPiAkc()naHQgKTsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgY2FzZSAiKyI6DQogICAgICAgICAgICAgICAgICAgIC8vIFJ)dHVy$iB0aGUgc(VzdWx0IGJ5IGFkZG)uZyBv$(Ugc(VzdWx0IHRvIHRoZSBvdGh)ci4NCiAgICAgICAgICAgICAgICAgICAgc(V0dXJuICggJGx)ZnQgKyAkc()naHQgKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBjYXN)ICItIjoNCiAgICAgICAgICAgICAgICAgICAgLy8gU(V0dXJuIHRoZSByZXN1$HQgYnkgZGVjc(Vhc2Ug$25)IHJ)c3VsdCBieSB0aGUg$3RoZXIuDQogICAgICAgICAgICAgICAgICAgIHJ)dHVy$iAoICRsZWZ0IC0gJHJpZ2h0ICk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgY2FzZSAiKiI6DQogICAgICAgICAgICAgICAgICAgIC8vIFJ)dHVy$iBhIG11$HRpcGxpY2F0aW9uIG9(IHRoZSB0d28gc(VzdWx0cy4NCiAgICAgICAgICAgICAgICAgICAgc(V0dXJuICggJGx)ZnQgKiAkc()naHQgKTsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgY2FzZSAiIGRpdiAiOg0KICAgICAgICAgICAgICAgICAgICAvLyBSZXR1c(4gYSBkaXZpc2)v$iBvZiB0aGUgdHdvIHJ)c3VsdHMuDQogICAgICAgICAgICAgICAgICAgIG)(ICggJHJpZ2h0ID09IDAgKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBEaXNw$GF5IGFuIGVyc(9yIG1)c3NhZ2UuDQogICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy0+ZG)zcGxheV9)cnJvcigiV2hp$GUgcGFyc2)uZyBh$iBYUGF0aCAiLg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICJwc(VkaWNhdGUsIGEgZXJy$3IgZHV)IGEgZG)2aXNp$24gYnkge(Vy$yAiLg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICJvY2N1c(VkLiIpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gU(V0dXJuIHRoZSByZXN1$HQg$2YgdGh)IGRpd()zaW9uLg0KICAgICAgICAgICAgICAgICAgICAgICAgc(V0dXJuICggJGx)ZnQgLyAkc()naHQgKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBic(VhazsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBjYXN)ICIg$W9kICI6DQogICAgICAgICAgICAgICAgICAgIC8vIFJ)dHVy$iBhIG1vZHVs$yBvZiB0aGUgdHdvIHJ)c3VsdHMuDQogICAgICAgICAgICAgICAgICAgIHJ)dHVy$iAoICRsZWZ0ICUgJHJpZ2h0ICk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGh)IHByZWRpY2F0ZSBpcyBhIGZ1$(N0aW9uLg0KICAgICAgICBpZiAoIGVyZWcoI)woIiwgJHByZWRpY2F0ZSkgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBHZXQgdGh)IHBvc2)0aW9uIG9(IHRoZSB(aXJzdCBic(Fja2V0Lg0KICAgICAgICAgICAgJHN0YXJ0ID0gc3RycG9zKCRwc(VkaWNhdGUsICIoIik7DQogICAgICAgICAgICAkZW5kICAgPSBzdHJw$3MoJHByZWRpY2F0ZSwgIikiLCAkc3RhcnQpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBHZXQgZXZ)cn)0aG)uZyBiZWZvc(UsIGJ)dHd)ZW4gYW5kIGF(dGVyIHRoZSBic(Fja2V0cy4NCiAgICAgICAgICAgICRiZWZvc(UgID0gc3Vic3RyKCRwc(VkaWNhdGUsIDAsICRzdGFydCk7DQogICAgICAgICAgICAkY(V0d2V)$iA9IHN1YnN0cigkcHJ)ZG)jYXR)LCAkc3RhcnQgKyAxLCAkZW5kIC0gJHN0YXJ0IC0gMSk7DQogICAgICAgICAgICAkYWZ0ZXIgICA9IHN1YnN0cigkcHJ)ZG)jYXR)LCAkZW5kICsgMSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIFRyaW0gZWFjaCBzdHJp$(cuDQogICAgICAgICAgICAkY(V($3J)ICA9IHRyaW0oJGJ)Z(9yZSk7DQogICAgICAgICAgICAkY(V0d2V)$iA9IHRyaW0oJGJ)dHd)ZW4pOw0KICAgICAgICAgICAgJGF(dGVyICAgPSB0c()tKCRhZnR)cik7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGh)c(UncyBz$21)dGhp$(cgYWZ0ZXIgdGh)IGJyYWNrZXQuDQogICAgICAgICAgICBpZiAoICF)$XB0eSgkYWZ0ZXIpICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBEaXNw$GF5IGFuIGVyc(9yIG1)c3NhZ2UuDQogICAgICAgICAgICAgICAgJHRoaXMtP(Rpc3BsYX)fZXJy$3IoI)doaWx)IHBhcnNp$(cgYW4gWFBhdGggZXhwc(Vzc2)v$iAiLg0KICAgICAgICAgICAgICAgICAgICAidGh)c(Ugd2FzIGZvdW5kIGFuIGVyc(9yIG)uIHRoZSBwc(VkaWNhdGUgXCI)c1wiLCAiLg0KICAgICAgICAgICAgICAgICAgICAiY(VjYXVzZSBhZnR)ciBhIGNs$3Np$(cgYnJhY2t)dCB0aGVyZSB3YXMgZ(91$(QgIi4NCiAgICAgICAgICAgICAgICAgICAgInNv$WV0aG)uZyB1$(tu$3duLiIsIHN0c)9yZXBsYWN)KCRwc(VkaWNhdGUsDQogICAgICAgICAgICAgICAgICAgICI8Yj4iLiRwc(VkaWNhdGUuIjwvYj4iLCAkdGhpcy0+eHBhdGgpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciBpdCdzIGEgZnVuY3Rp$24uDQogICAgICAgICAgICBpZiAoIGVtcHR5KCRiZWZvc(UpICY(IGVtcHR5KCRhZnR)cikgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIEV2YWx1YXR)IHRoZSBj$250ZW50IG9(IHRoZSBic(Fja2V0cy4NCiAgICAgICAgICAgICAgICByZXR1c(4gJHRoaXMtP(V2YWx1YXR)X3ByZWRpY2F0ZSgk$(9kZSwgJGJ)dHd)ZW4pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZW)(ICggJHRoaXMtP()zX2Z1$(N0aW9uKCRiZWZvc(UpICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBSZXR1c(4gdGh)IGV2YWx1YXR)ZCB(dW5jdG)v$i4NCiAgICAgICAgICAgICAgICByZXR1c(4gJHRoaXMtP(V2YWx1YXR)X2Z1$(N0aW9uKCRiZWZvc(UsICRiZXR3ZWVuLCAk$(9kZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB)$HN)DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gRG)zcGxheSBh$iB)cnJvciBtZXNzYWd)Lg0KICAgICAgICAgICAgICAgICR0aG)zLT5kaXNw$GF5X2Vyc(9yKCJXaG)sZSBwYXJzaW5nIGEgcHJ)ZG)jYXR)IG)uIGFuIFhQYXRoICIuDQogICAgICAgICAgICAgICAgICAgICJ)eHByZXNzaW9uLCBhIGZ1$(N0aW9uIFwiJXNcIiB3YXMgZ(91$(QsIHdoaWNoIG)zIG5vdCAiLg0KICAgICAgICAgICAgICAgICAgICAieWV0IHN1cHBvcnR)ZCBieSB0aGUgcGFyc2VyLiIsIHN0c)9yZXBsYWN)KCRiZWZvc(UsDQogICAgICAgICAgICAgICAgICAgICI8Yj4iLiRiZWZvc(UuIjwvYj4iLCAkdGhpcy0+eHBhdGgpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUgcHJ)ZG)jYXR)IG)zIGp1c3QgYSBkaWdpdC4NCiAgICAgICAgaWYgKCB)c(VnKCJeWzAtOV0rKFwuWzAtOV0rKT8kIiwgJHByZWRpY2F0ZSkgfHwNCiAgICAgICAgICAgIGVyZWcoI)5cL)swLT)dKyQiLCAkcHJ)ZG)jYXR)KSApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIFJ)dHVy$iB0aGUgd(FsdWUg$2YgdGh)IGRpZ2)0Lg0KICAgICAgICAgICAgc(V0dXJuIGRvdWJsZXZh$CgkcHJ)ZG)jYXR)KTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciBpdCdzIGFuIFhQYXRoIGV4cHJ)c3Np$24uDQogICAgICAgICRyZXN1$HQgPSAkdGhpcy0+ZXZh$HVhdGUoJHByZWRpY2F0ZSwgJG5vZGUpOw0KICAgICAgICBpZiAoIGNvdW50KCRyZXN1$HQpID4gMCApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIENv$nZ)cnQgdGh)IGFyc(F5Lg0KICAgICAgICAgICAgJHJ)c3VsdCA9IGV4cGxvZGUoInwiLCBp$XBs$2R)KCJ8IiwgJHJ)c3VsdCkpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBHZXQgdGh)IHZh$HV)IG9(IHRoZSB(aXJzdCByZXN1$HQuDQogICAgICAgICAgICAkd(FsdWUgPSAkdGhpcy0+Z2V0X2Nv$nR)$nQoJHJ)c3VsdFswXSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIFJ)dHVy$iB0aGUgd(FsdWUuDQogICAgICAgICAgICByZXR1c(4gJHZh$HV)Ow0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLyBSZXR1c(4gdGh)IHByZWRpY2F0ZSBhcyBhIHN0c()uZy4NCiAgICAgICAgc(V0dXJuICRwc(VkaWNhdGU7DQogICAgfQ0KICAgIA0KICAgIC8qKg0KICAgICogQ2h)Y2tzIHdoZXRoZXIgYSBu$2R)IG1hdGNoZXMgcHJ)ZG)jYXR)cy4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBjaGVja3Mgd2h)dGh)ciBhIGxpc3Qg$2Yg$(9kZXMgcGFzc2VkIHRvIHRoaXMg$WV0aG9kIG1hdGNoDQogICAgKiBhIGdpd(VuIGxpc3Qg$2YgcHJ)ZG)jYXR)cy4gDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIGFyc(F5ICRu$2R)cyBBcnJheSBvZiB(dWxsIHBhdGhzIG9(IGFs$CBu$2R)cyB0$yBiZSB0ZXN0ZWQuDQogICAgKiBAcGFyYW0gICAgIGFyc(F5ICRwc(VkaWNhdGVzIEFyc(F5IG9(IHByZWRpY2F0ZXMgdG8gdXN)Lg0KICAgICogQHJ)dHVy$iAgICBhcnJheSBUaGUgYXJyYXkgc(V0dXJuZWQgYnkgdGhpcyBtZXRo$2QgY29udGFp$nMgYSBsaXN0IG9(DQogICAgKiAgICAgICAgICAgIGFs$CBu$2R)cyBtYXRjaG)uZyB0aGUgZ2)2ZW4gcHJ)ZG)jYXR)cy4NCiAgICAqIEBzZWUgICAgICAgZXZh$HVhdGVfc3R)cCgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBjaGVja19wc(VkaWNhdGVzICggJG5vZGVzLCAkcHJ)ZG)jYXR)cyApDQogICAgew0KICAgICAgICAvLyBDc(VhdGUgYW4gZW1wdHkgc2V0IG9(IG5vZGVzLg0KICAgICAgICAkc(VzdWx0ID0gYXJyYXkoKTsNCiAgICAgICAgDQogICAgICAgIC8vIFJ1$iB0aHJvdWdoIGFs$CBu$2R)cy4NCiAgICAgICAgZ(9yZWFjaCAoICRu$2R)cyBhcyAk$(9kZSApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIENyZWF0ZSBhIHZhc()hY(x)IHdoZXRoZXIgdG8gYWRkIHRoaXMg$(9kZSB0$yB0aGUg$(9kZS1zZXQuDQogICAgICAgICAgICAkYWRkID0gdHJ1ZTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gUnVuIHRoc(91Z2ggYWxsIHByZWRpY2F0ZXMuDQogICAgICAgICAgICB($3J)YWNoICggJHByZWRpY2F0ZXMgYXMgJHByZWRpY2F0ZSApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUgcHJ)ZG)jYXR)IG)zIGp1c3QgYW4g$nVtY(VyLg0KICAgICAgICAgICAgICAgIG)(ICggZXJ)ZygiX)swLT)dKyQiLCAkcHJ)ZG)jYXR)KSApDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAvLyBF$(hh$(N)IHRoZSBwc(VkaWNhdGUuDQogICAgICAgICAgICAgICAgICAgICRwc(VkaWNhdGUgLj0gIj1w$3NpdG)v$igpIjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgLy8gRG8gdGh)IHByZWRpY2F0ZSBjaGVjay4NCiAgICAgICAgICAgICAgICAkY2h)Y2sgPSAkdGhpcy0+ZXZh$HVhdGVfcHJ)ZG)jYXR)KCRu$2R)LCAkcHJ)ZG)jYXR)KTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIG)0J3MgYSBzdHJp$(cuDQogICAgICAgICAgICAgICAgaWYgKCBpc19zdHJp$(coJGNoZWNrKSA(JiAoICggJGNoZWNrID09ICIiICkgfHwNCiAgICAgICAgICAgICAgICAgICAgKCAkY2h)Y2sgPT0gJHByZWRpY2F0ZSApICkgKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSByZXN1$HQgdG8gZ(Fsc2UuDQogICAgICAgICAgICAgICAgICAgICRjaGVjayA9IGZh$HN)Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIG)0J3MgYW4gaW50ZWd)ci4NCiAgICAgICAgICAgICAgICBpZiAoIG)zX2)udCgkY2h)Y2spICkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgaXQncyB0aGUgY3Vyc(VudCBw$3NpdG)v$i4NCiAgICAgICAgICAgICAgICAgICAgaWYgKCAkY2h)Y2sgPT0gJHRoaXMtP(hh$(RsZV9(dW5jdG)v$)9w$3NpdG)v$igk$(9kZSwgIiIpICkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IG)0IHRvIHRydWUuDQogICAgICAgICAgICAgICAgICAgICAgICAkY2h)Y2sgPSB0cnV)Ow0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IG)0IHRvIGZh$HN)Lg0KICAgICAgICAgICAgICAgICAgICAgICAgJGNoZWNrID0gZ(Fsc2U7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUgcHJ)ZG)jYXR)IG)zIE9LIGZvciB0aG)zIG5vZGUuDQogICAgICAgICAgICAgICAgJGFkZCA9ICRhZGQgJiYgJGNoZWNrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRvIGFkZCB0aG)zIG5vZGUgdG8gdGh)IG5vZGUtc2V0Lg0KICAgICAgICAgICAgaWYgKCAkYWRkICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBBZGQgdGh)IG5vZGUgdG8gdGh)IG5vZGUtc2V0Lg0KICAgICAgICAgICAgICAgICRyZXN1$HR$XSA9ICRu$2R)Ow0KICAgICAgICAgICAgfSAgICAgICAgICAgIA0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLyBSZXR1c(4gdGh)IGFyc(F5IG9(IG5vZGVzLg0KICAgICAgICByZXR1c(4gJHJ)c3VsdDsNCiAgICB9DQogICAgDQogICAgLyoqDQogICAgKiBDaGVja3Mgd2h)dGh)ciBhIG5vZGUg$WF0Y2h)cyBhIG5vZGUtdGVzdC4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBjaGVja3Mgd2h)dGh)ciBhIG5vZGUgaW4gdGh)IGRvY3VtZW50IG1hdGNoZXMgYSBnaXZ)$g0KICAgICog$(9kZS10ZXN0Lg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGNv$nR)eHQgRnVs$CBwYXRoIG9(IHRoZSBu$2R)LCB3aG)jaCBzaG91$GQgY(UgdGVzdGVkDQogICAgKiAgICAgICAgICAgIGZvciBtYXRjaG)uZyB0aGUg$(9kZS10ZXN0Lg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJG5vZGVfdGVzdCBTdHJp$(cgY29udGFp$()uZyB0aGUg$(9kZS10ZXN0IGZvciB0aGUNCiAgICAqICAgICAgICAgICAg$(9kZS4NCiAgICAqIEByZXR1c(4gICAgY(9v$GVh$iBUaG)zIG1)dGhvZCByZXR1c(5zIHRydWUgaWYgdGh)IG5vZGUg$WF0Y2h)cyB0aGUNCiAgICAqICAgICAgICAgICAg$(9kZS10ZXN0LCBvdGh)cndpc2UgZ(Fsc2UuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGNoZWNrX25vZGVfdGVzdCAoICRj$250ZXh0LCAk$(9kZV90ZXN0ICkNCiAgICB7DQogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgaXQncyBhIGZ1$(N0aW9uLg0KICAgICAgICBpZiAoIGVyZWcoI)woIiwgJG5vZGVfdGVzdCkgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBHZXQgdGh)IHR5cGUg$2YgZnVuY3Rp$24gdG8gdXN)Lg0KICAgICAgICAgICAgJGZ1$(N0aW9uID0gJHRoaXMtPnByZXN0cigk$(9kZV90ZXN0LCAiKCIpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSBu$2R)IGZpdHMgdGh)IG1)dGhvZC4NCiAgICAgICAgICAgIHN3aXRjaCAoICR(dW5jdG)v$iApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgY2FzZSAi$(9kZSI6DQogICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aG)zIG5vZGUgdG8gdGh)IGxpc3Qg$2Yg$(9kZXMuDQogICAgICAgICAgICAgICAgICAgIHJ)dHVy$iB0cnV)Ow0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBjYXN)ICJ0ZXh0IjoNCiAgICAgICAgICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUg$(9kZSBoYXMgc29tZSB0ZXh0Lg0KICAgICAgICAgICAgICAgICAgICBpZiAoICF)$XB0eSgkdGhpcy0+$(9kZXN$JGNv$nR)eHRdWyJ0ZXh0I)0pICkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoaXMg$(9kZSB0$yB0aGUg$G)zdCBvZiBu$2R)cy4NCiAgICAgICAgICAgICAgICAgICAgICAgIHJ)dHVy$iB0cnV)Ow0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBjYXN)ICJj$21tZW50IjoNCiAgICAgICAgICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUg$(9kZSBoYXMgc29tZSBj$21tZW50Lg0KICAgICAgICAgICAgICAgICAgICBpZiAoICF)$XB0eSgkdGhpcy0+$(9kZXN$JGNv$nR)eHRdWyJj$21tZW50I)0pICkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoaXMg$(9kZSB0$yB0aGUg$G)zdCBvZiBu$2R)cy4NCiAgICAgICAgICAgICAgICAgICAgICAgIHJ)dHVy$iB0cnV)Ow0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGNhc2UgInBy$2N)c3Np$(ctaW5zdHJ1Y3Rp$24iOg0KICAgICAgICAgICAgICAgICAgICAvLyBHZXQgdGh)IGxpdGVyYWwgYXJndW1)$nQuDQogICAgICAgICAgICAgICAgICAgICRsaXR)c(FsID0gJHRoaXMtP(F(dGVyc3RyKCRheG)zWyJu$2R)LXR)c3QiXSwgIigiKTsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIC8vIEN1dCB0aGUg$G)0ZXJh$C4NCiAgICAgICAgICAgICAgICAgICAgJGxpdGVyYWwgPSBzdWJzdHIoJGxpdGVyYWwsIDAsIHN0c(x)$igk$G)0ZXJh$CkgLSAxKTsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgYSBsaXR)c(FsIHdhcyBnaXZ)$i4NCiAgICAgICAgICAgICAgICAgICAgaWYgKCAhZW1wdHkoJGxpdGVyYWwpICkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUg$(9kZSdzIHBy$2N)c3Np$(cgaW5zdHJ1Y3Rp$25zDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBhc(Ug$WF0Y2hp$(cgdGh)IGxpdGVyYWxzIGdpd(VuLg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAkdGhpcy0+$(9kZXN$JGNv$nR)eHRdDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgWyJwc(9jZXNzaW5nLW)uc3RydWN0aW9ucyJdID09ICRsaXR)c(FsICkNCiAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhpcyBu$2R)IHRvIHRoZSBu$2R)LXN)dC4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1c(4gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB)$HN)DQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGh)IG5vZGUgaGFzIHBy$2N)c3Np$(cNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG)uc3RydWN0aW9ucy4NCiAgICAgICAgICAgICAgICAgICAgICAgIG)(ICggIWVtcHR5KCR0aG)zLT5u$2R)c1skY29udGV4dF0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB$InBy$2N)c3Np$(ctaW5zdHJ1Y3Rp$25zI)0pICkNCiAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhpcyBu$2R)IHRvIHRoZSBu$2R)LXN)dC4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1c(4gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBic(VhazsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgZGV(YXVsdDoNCiAgICAgICAgICAgICAgICAgICAgLy8gRG)zcGxheSBh$iB)cnJvciBtZXNzYWd)Lg0KICAgICAgICAgICAgICAgICAgICAkdGhpcy0+ZG)zcGxheV9)cnJvcigiV2hp$GUgcGFyc2)uZyBh$iBYUGF0aCAiLg0KICAgICAgICAgICAgICAgICAgICAgICAgI(V4cHJ)c3Np$24gdGh)c(Ugd2FzIGZvdW5kIGFuIHVuZGV(aW5)ZCAiLg0KICAgICAgICAgICAgICAgICAgICAgICAgI(Z1$(N0aW9uIGNh$Gx)ZCBcIiVzXCIuIiwNCiAgICAgICAgICAgICAgICAgICAgICAgIHN0c)9yZXBsYWN)KCR(dW5jdG)v$iwgIjxiPiIuJGZ1$(N0aW9uLiI8L2I+IiwNCiAgICAgICAgICAgICAgICAgICAgICAgICR0aG)zLT54cGF0aCkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGVsc2VpZiAoICRu$2R)X3R)c3QgPT0gIioiICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gQWRkIHRoaXMg$(9kZSB0$yB0aGUg$(9kZS1zZXQuDQogICAgICAgICAgICByZXR1c(4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgICB)$HN)aWYgKCB)c(VnKCJeW2EtekEtWjAtOVwtX10rIiwgJG5vZGVfdGVzdCkgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSBu$2R)LXR)c3QgY2FuIGJ)IGZ1$GZp$Gx)ZC4NCiAgICAgICAgICAgIG)(ICggJHRoaXMtP(5vZGVzWyRj$250ZXh0XVsi$(FtZSJdID09ICRu$2R)X3R)c3QgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIEFkZCB0aG)zIG5vZGUgdG8gdGh)IG5vZGUtc2V0Lg0KICAgICAgICAgICAgICAgIHJ)dHVy$iB0cnV)Ow0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gRG)zcGxheSBh$iB)cnJvciBtZXNzYWd)Lg0KICAgICAgICAgICAgJHRoaXMtP(Rpc3BsYX)fZXJy$3IoI)doaWx)IHBhcnNp$(cgdGh)IFhQYXRoIGV4cHJ)c3Np$24gXCI)c1wiICIuDQogICAgICAgICAgICAgICAgI(FuIGVtcHR5IGFuZCB0aGVyZWZvc(UgaW52YWxpZCBu$2R)LXR)c3QgaGFzIGJ)ZW4gZ(91$(QuIiwNCiAgICAgICAgICAgICAgICAkdGhpcy0+eHBhdGgpOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLyBE$24ndCBhZGQgdGhpcyBj$250ZXh0Lg0KICAgICAgICByZXR1c(4gZ(Fsc2U7DQogICAgfQ0KICAgIA0KICAgIC8qKg0KICAgICogSGFuZGx)cyB0aGUgWFBhdGggY2hp$GQgYXhpcy4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBoYW5k$GVzIHRoZSBYUGF0aCBjaG)sZCBheG)zLg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBhcnJheSAkYXhpcyBBcnJheSBj$250YW)uaW5nIG)uZ(9y$WF0aW9uIGFi$3V0IHRoZSBheG)zLg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGNv$nR)eHQgT(9kZSB(c(9tIHdoaWNoIHN0YXJ0aW5nIHRoZSBheG)zIHNo$3VsZA0KICAgICogICAgICAgICAgICBiZSBwc(9jZXNzZWQuDQogICAgKiBAc(V0dXJuICAgIGFyc(F5IFRoaXMg$WV0aG9kIHJ)dHVy$nMgYW4gYXJyYXkgY29udGFp$()uZyBh$Gwg$(9kZXMgDQogICAgKiAgICAgICAgICAgIHRoYXQgd2VyZSB($3VuZCBkdXJp$(cgdGh)IGV2YWx1YXRp$24g$2YgdGh)IGdpd(VuIGF4aXMuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGhh$(RsZV9heG)zX2NoaWxkICggJGF4aXMsICRj$250ZXh0ICkNCiAgICB7DQogICAgICAgIC8vIENyZWF0ZSBh$iB)$XB0eSBu$2R)LXN)dC4NCiAgICAgICAgJG5vZGVzID0gYXJyYXkoKTsNCiAgICAgICAgDQogICAgICAgIC8vIEd)dCBhIGxpc3Qg$2YgYWxsIGNoaWxkc(VuLg0KICAgICAgICAkY2hp$GRyZW4gPSAkdGhpcy0+$(9kZXN$JGNv$nR)eHRdWyJjaG)sZHJ)$iJdOw0KICAgICAgICANCiAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGVyZSBhc(UgY2hp$GRyZW4uDQogICAgICAgIG)(ICggIWVtcHR5KCRjaG)sZHJ)$ikgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBSdW4gdGhy$3VnaCBh$GwgY2hp$GRyZW4uDQogICAgICAgICAgICB($3J)YWNoICggJGNoaWxkc(VuIGFzICRjaG)sZF9uYW1)ID0+ICRjaG)sZF9w$3NpdG)v$iApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gUnVuIHRoc(91Z2ggYWxsIGNoaWxkcyB3aXRoIHRoaXMg$(FtZS4NCiAgICAgICAgICAgICAgICB($3IgKCAkaSA9IDE7ICRpIDw9ICRjaG)sZF9w$3NpdG)v$jsgJGkrKyApDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAvLyBDc(VhdGUgdGh)IHBhdGgg$2YgdGh)IGNoaWxkLg0KICAgICAgICAgICAgICAgICAgICAkY2hp$GQgPSAkY29udGV4dC4iLyIuJGNoaWxkX25h$WUuI)siLiRpLiJdIjsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgDQogICAgICAgICAgICAgICAgICAgIG)(ICggJHRoaXMtP(NoZWNrX25vZGVfdGVzdCgkY2hp$GQsICRheG)zWyJu$2R)LXR)c3QiXSkgKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGh)IGNoaWxkIHRvIHRoZSBu$2R)LXN)dC4NCiAgICAgICAgICAgICAgICAgICAgICAgICRu$2R)c1tdID0gJGNoaWxkOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLyBSZXR1c(4gdGh)IG5vZGVzZXQuDQogICAgICAgIHJ)dHVy$iAk$(9kZXM7DQogICAgfQ0KICAgIA0KICAgIC8qKg0KICAgICogSGFuZGx)cyB0aGUgWFBhdGggcGFyZW50IGF4aXMuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgaGFuZGx)cyB0aGUgWFBhdGggcGFyZW50IGF4aXMuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIGFyc(F5ICRheG)zIEFyc(F5IGNv$nRhaW5p$(cgaW5($3JtYXRp$24gYWJvdXQgdGh)IGF4aXMuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkY29udGV4dCBO$2R)IGZy$20gd2hpY2ggc3RhcnRp$(cgdGh)IGF4aXMgc2hvdWxkDQogICAgKiAgICAgICAgICAgIGJ)IHBy$2N)c3N)ZC4NCiAgICAqIEByZXR1c(4gICAgYXJyYXkgVGhpcyBtZXRo$2Qgc(V0dXJucyBh$iBhcnJheSBj$250YW)uaW5nIGFs$CBu$2R)cyANCiAgICAqICAgICAgICAgICAgdGhhdCB3ZXJ)IGZvdW5kIGR1c()uZyB0aGUgZXZh$HVhdG)v$iBvZiB0aGUgZ2)2ZW4gYXhpcy4NCiAgICAqIEBzZWUgICAgICAgZXZh$HVhdGUoKQ0KICAgICovDQogICAgZnVuY3Rp$24gaGFuZGx)X2F4aXNfcGFyZW50ICggJGF4aXMsICRj$250ZXh0ICkNCiAgICB7DQogICAgICAgIC8vIENyZWF0ZSBh$iB)$XB0eSBu$2R)LXN)dC4NCiAgICAgICAgJG5vZGVzID0gYXJyYXkoKTsNCiAgICAgICAgDQogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGh)IHBhc(VudCBtYXRjaGVzIHRoZSBu$2R)LXR)c3QuDQogICAgICAgIG)(ICggJHRoaXMtP(NoZWNrX25vZGVfdGVzdCgkdGhpcy0+$(9kZXN$JGNv$nR)eHRdWyJwYXJ)$nQiXSwNCiAgICAgICAgICAgICRheG)zWyJu$2R)LXR)c3QiXSkgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBBZGQgdGhpcyBu$2R)IHRvIHRoZSBsaXN0IG9(IG5vZGVzLg0KICAgICAgICAgICAgJG5vZGVzW10gPSAkdGhpcy0+$(9kZXN$JGNv$nR)eHRdWyJwYXJ)$nQiXTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8gU(V0dXJuIHRoZSBu$2R)c2V0Lg0KICAgICAgICByZXR1c(4gJG5vZGVzOw0KICAgIH0NCiAgICANCiAgICAvKioNCiAgICAqIEhh$(RsZXMgdGh)IFhQYXRoIGF0dHJpYnV0ZSBheG)zLg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIGhh$(RsZXMgdGh)IFhQYXRoIGF0dHJpYnV0ZSBheG)zLg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBhcnJheSAkYXhpcyBBcnJheSBj$250YW)uaW5nIG)uZ(9y$WF0aW9uIGFi$3V0IHRoZSBheG)zLg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGNv$nR)eHQgT(9kZSB(c(9tIHdoaWNoIHN0YXJ0aW5nIHRoZSBheG)zIHNo$3VsZA0KICAgICogICAgICAgICAgICBiZSBwc(9jZXNzZWQuDQogICAgKiBAc(V0dXJuICAgIGFyc(F5IFRoaXMg$WV0aG9kIHJ)dHVy$nMgYW4gYXJyYXkgY29udGFp$()uZyBh$Gwg$(9kZXMgDQogICAgKiAgICAgICAgICAgIHRoYXQgd2VyZSB($3VuZCBkdXJp$(cgdGh)IGV2YWx1YXRp$24g$2YgdGh)IGdpd(VuIGF4aXMuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGhh$(RsZV9heG)zX2F0dHJpYnV0ZSAoICRheG)zLCAkY29udGV4dCApDQogICAgew0KICAgICAgICAvLyBDc(VhdGUgYW4gZW1wdHkg$(9kZS1zZXQuDQogICAgICAgICRu$2R)cyA9IGFyc(F5KCk7DQogICAgICAgIA0KICAgICAgICAvLyBDaGVjayB3aGV0aGVyIGFs$CBu$2R)cyBzaG91$GQgY(Ugc2VsZWN0ZWQuDQogICAgICAgIG)(ICggJGF4aXN$I(5vZGUtdGVzdCJdID09ICIqIiApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGh)c(UgYXJ)IGF0dHJpYnV0ZXMuDQogICAgICAgICAgICBpZiAoIGNvdW50KCR0aG)zLT5u$2R)c1skY29udGV4dF1$I(F0dHJpYnV0ZXMiXSkgPiAwICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBSdW4gdGhy$3VnaCB0aGUgYXR0c()idXR)cy4NCiAgICAgICAgICAgICAgICB($3J)YWNoICggJHRoaXMtP(5vZGVzWyRj$250ZXh0XVsiYXR0c()idXR)cyJdIGFzDQogICAgICAgICAgICAgICAgICAgICRrZXkgPT4gJHZh$HV)ICkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aG)zIG5vZGUgdG8gdGh)IG5vZGUtc2V0Lg0KICAgICAgICAgICAgICAgICAgICAk$(9kZXN$XSA9ICRj$250ZXh0LiIvYXR0c()idXR)OjoiLiRrZXk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGVsc2VpZiAoICF)$XB0eSgkdGhpcy0+$(9kZXN$JGNv$nR)eHRdWyJhdHRyaWJ1dGVzI)0NCiAgICAgICAgICAgIFskYXhpc1si$(9kZS10ZXN0I)1dKSApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIEFkZCB0aG)zIG5vZGUgdG8gdGh)IG5vZGUtc2V0Lg0KICAgICAgICAgICAgJG5vZGVzW10gPSAkY29udGV4dC4iL2F0dHJpYnV0ZTo6Ii4kYXhpc1si$(9kZS10ZXN0I)07DQogICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAvLyBSZXR1c(4gdGh)IG5vZGVzZXQuDQogICAgICAgIHJ)dHVy$iAk$(9kZXM7DQogICAgfQ0KDQogICAgLyoqDQogICAgKiBIYW5k$GVzIHRoZSBYUGF0aCBzZWx(IGF4aXMuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgaGFuZGx)cyB0aGUgWFBhdGggc2VsZiBheG)zLg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBhcnJheSAkYXhpcyBBcnJheSBj$250YW)uaW5nIG)uZ(9y$WF0aW9uIGFi$3V0IHRoZSBheG)zLg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGNv$nR)eHQgT(9kZSB(c(9tIHdoaWNoIHN0YXJ0aW5nIHRoZSBheG)zIHNo$3VsZA0KICAgICogICAgICAgICAgICBiZSBwc(9jZXNzZWQuDQogICAgKiBAc(V0dXJuICAgIGFyc(F5IFRoaXMg$WV0aG9kIHJ)dHVy$nMgYW4gYXJyYXkgY29udGFp$()uZyBh$Gwg$(9kZXMgDQogICAgKiAgICAgICAgICAgIHRoYXQgd2VyZSB($3VuZCBkdXJp$(cgdGh)IGV2YWx1YXRp$24g$2YgdGh)IGdpd(VuIGF4aXMuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGhh$(RsZV9heG)zX3N)$GYgKCAkYXhpcywgJGNv$nR)eHQgKQ0KICAgIHsNCiAgICAgICAgLy8gQ3J)YXR)IGFuIGVtcHR5IG5vZGUtc2V0Lg0KICAgICAgICAk$(9kZXMgPSBhcnJheSgpOw0KICAgICAgICANCiAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUgY29udGV4dCBtYXRjaCB0aGUg$(9kZS10ZXN0Lg0KICAgICAgICBpZiAoICR0aG)zLT5jaGVja19u$2R)X3R)c3QoJGNv$nR)eHQsICRheG)zWyJu$2R)LXR)c3QiXSkgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBBZGQgdGhpcyBu$2R)IHRvIHRoZSBu$2R)LXN)dC4NCiAgICAgICAgICAgICRu$2R)c1tdID0gJGNv$nR)eHQ7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBSZXR1c(4gdGh)IG5vZGVzZXQuDQogICAgICAgIHJ)dHVy$iAk$(9kZXM7DQogICAgfQ0KDQogICAgLyoqDQogICAgKiBIYW5k$GVzIHRoZSBYUGF0aCBkZXNjZW5kYW50IGF4aXMuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgaGFuZGx)cyB0aGUgWFBhdGggZGVzY2VuZGFudCBheG)zLg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBhcnJheSAkYXhpcyBBcnJheSBj$250YW)uaW5nIG)uZ(9y$WF0aW9uIGFi$3V0IHRoZSBheG)zLg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGNv$nR)eHQgT(9kZSB(c(9tIHdoaWNoIHN0YXJ0aW5nIHRoZSBheG)zIHNo$3VsZA0KICAgICogICAgICAgICAgICBiZSBwc(9jZXNzZWQuDQogICAgKiBAc(V0dXJuICAgIGFyc(F5IFRoaXMg$WV0aG9kIHJ)dHVy$nMgYW4gYXJyYXkgY29udGFp$()uZyBh$Gwg$(9kZXMgDQogICAgKiAgICAgICAgICAgIHRoYXQgd2VyZSB($3VuZCBkdXJp$(cgdGh)IGV2YWx1YXRp$24g$2YgdGh)IGdpd(VuIGF4aXMuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGhh$(RsZV9heG)zX2R)c2N)$(Rh$nQgKCAkYXhpcywgJGNv$nR)eHQgKQ0KICAgIHsNCiAgICAgICAgLy8gQ3J)YXR)IGFuIGVtcHR5IG5vZGUtc2V0Lg0KICAgICAgICAk$(9kZXMgPSBhcnJheSgpOw0KICAgICAgICANCiAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUgY3Vyc(VudCBu$2R)IGhhcyBjaG)sZHJ)$i4NCiAgICAgICAgaWYgKCBj$3VudCgkdGhpcy0+$(9kZXN$JGNv$nR)eHRdWyJjaG)sZHJ)$iJdKSA+IDAgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBHZXQgYSBsaXN0IG9(IGNoaWxkc(VuLg0KICAgICAgICAgICAgJGNoaWxkc(VuID0gJHRoaXMtP(5vZGVzWyRj$250ZXh0XVsiY2hp$GRyZW4iXTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gUnVuIHRoc(91Z2ggYWxsIGNoaWxkc(VuLg0KICAgICAgICAgICAgZ(9yZWFjaCAoICRjaG)sZHJ)$iBhcyAkY2hp$GRf$(FtZSA9PiAkY2hp$GRfcG9zaXRp$24gKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIFJ1$iB0aHJvdWdoIGFs$CBjaG)sZHJ)$iBvZiB0aG)zIG5h$WUuDQogICAgICAgICAgICAgICAgZ(9yICggJGkgPSAxOyAkaSA8PSAkY2hp$GRfcG9zaXRp$247ICRpKysgKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gQ3J)YXR)IHRoZSB(dWxsIHBhdGggZ(9yIHRoZSBjaG)sZHJ)$i4NCiAgICAgICAgICAgICAgICAgICAgJGNoaWxkID0gJGNv$nR)eHQuIi8iLiRjaG)sZF9uYW1)LiJ$Ii4kaS4iXSI7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSBjaG)sZCBtYXRjaGVzIHRoZSBu$2R)LXR)c3QuDQogICAgICAgICAgICAgICAgICAgIG)(ICggJHRoaXMtP(NoZWNrX25vZGVfdGVzdCgkY2hp$GQsICRheG)zWyJu$2R)LXR)c3QiXSkgKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGh)IGNoaWxkIHRvIHRoZSBsaXN0IG9(IG5vZGVzLg0KICAgICAgICAgICAgICAgICAgICAgICAgJG5vZGVzW10gPSAkY2hp$GQ7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIC8vIFJ)Y3Vyc2UgdG8gdGh)IG5)eHQg$GV2ZWwuDQogICAgICAgICAgICAgICAgICAgICRu$2R)cyA9IGFyc(F5X21)c(d)KCRu$2R)cywNCiAgICAgICAgICAgICAgICAgICAgICAgICR0aG)zLT5oYW5k$GVfYXhpc19kZXNjZW5kYW50KCRheG)zLCAkY2hp$GQpKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vIFJ)dHVy$iB0aGUg$(9kZXN)dC4NCiAgICAgICAgc(V0dXJuICRu$2R)czsNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIEhh$(RsZXMgdGh)IFhQYXRoIGFuY2VzdG9yIGF4aXMuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgaGFuZGx)cyB0aGUgWFBhdGggYW5jZXN0$3IgYXhpcy4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHByaXZhdGUNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgYXJyYXkgJGF4aXMgQXJyYXkgY29udGFp$()uZyBp$(Zvc(1hdG)v$iBhY(91dCB0aGUgYXhpcy4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRj$250ZXh0IE5vZGUgZnJv$SB3aG)jaCBzdGFydG)uZyB0aGUgYXhpcyBzaG91$GQNCiAgICAqICAgICAgICAgICAgY(UgcHJvY2Vzc2VkLg0KICAgICogQHJ)dHVy$iAgICBhcnJheSBUaG)zIG1)dGhvZCByZXR1c(5zIGFuIGFyc(F5IGNv$nRhaW5p$(cgYWxsIG5vZGVzIA0KICAgICogICAgICAgICAgICB0aGF0IHd)c(UgZ(91$(QgZHVyaW5nIHRoZSB)d(FsdWF0aW9uIG9(IHRoZSBnaXZ)$iBheG)zLg0KICAgICogQHN)ZSAgICAgICB)d(FsdWF0ZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBoYW5k$GVfYXhpc19h$(N)c3RvciAoICRheG)zLCAkY29udGV4dCApDQogICAgew0KICAgICAgICAvLyBDc(VhdGUgYW4gZW1wdHkg$(9kZS1zZXQuDQogICAgICAgICRu$2R)cyA9IGFyc(F5KCk7DQogICAgICAgIA0KICAgICAgICAvLyBHZXQgdGh)IHBhc(VudCBvZiB0aGUgY3Vyc(VudCBu$2R)Lg0KICAgICAgICAkcGFyZW50ID0gJHRoaXMtP(5vZGVzWyRj$250ZXh0XVsicGFyZW50I)07DQogICAgICAgIA0KICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSBwYXJ)$nQgaXNuJ3QgZW1wdHkuDQogICAgICAgIG)(ICggIWVtcHR5KCRwYXJ)$nQpICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUgcGFyZW50IG1hdGNoZXMgdGh)IG5vZGUtdGVzdC4NCiAgICAgICAgICAgIG)(ICggJHRoaXMtP(NoZWNrX25vZGVfdGVzdCgkcGFyZW50LCAkYXhpc1si$(9kZS10ZXN0I)0pICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBBZGQgdGh)IHBhc(VudCB0$yB0aGUg$G)zdCBvZiBu$2R)cy4NCiAgICAgICAgICAgICAgICAk$(9kZXN$XSA9ICRwYXJ)$nQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIEhh$(RsZSBh$Gwg$3RoZXIgYW5jZXN0$3JzLg0KICAgICAgICAgICAgJG5vZGVzID0gYXJyYX)f$WVyZ2UoJG5vZGVzLA0KICAgICAgICAgICAgICAgICR0aG)zLT5oYW5k$GVfYXhpc19h$(N)c3RvcigkYXhpcywgJHBhc(VudCkpOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLyBSZXR1c(4gdGh)IG5vZGVzZXQuDQogICAgICAgIHJ)dHVy$iAk$(9kZXM7DQogICAgfQ0KDQogICAgLyoqDQogICAgKiBIYW5k$GVzIHRoZSBYUGF0aCBuYW1)c3BhY2UgYXhpcy4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBoYW5k$GVzIHRoZSBYUGF0aCBuYW1)c3BhY2UgYXhpcy4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHByaXZhdGUNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgYXJyYXkgJGF4aXMgQXJyYXkgY29udGFp$()uZyBp$(Zvc(1hdG)v$iBhY(91dCB0aGUgYXhpcy4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRj$250ZXh0IE5vZGUgZnJv$SB3aG)jaCBzdGFydG)uZyB0aGUgYXhpcyBzaG91$GQNCiAgICAqICAgICAgICAgICAgY(UgcHJvY2Vzc2VkLg0KICAgICogQHJ)dHVy$iAgICBhcnJheSBUaG)zIG1)dGhvZCByZXR1c(5zIGFuIGFyc(F5IGNv$nRhaW5p$(cgYWxsIG5vZGVzIA0KICAgICogICAgICAgICAgICB0aGF0IHd)c(UgZ(91$(QgZHVyaW5nIHRoZSB)d(FsdWF0aW9uIG9(IHRoZSBnaXZ)$iBheG)zLg0KICAgICogQHN)ZSAgICAgICB)d(FsdWF0ZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBoYW5k$GVfYXhpc19uYW1)c3BhY2UgKCAkYXhpcywgJGNv$nR)eHQgKQ0KICAgIHsNCiAgICAgICAgLy8gQ3J)YXR)IGFuIGVtcHR5IG5vZGUtc2V0Lg0KICAgICAgICAk$(9kZXMgPSBhcnJheSgpOw0KICAgICAgICANCiAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciBh$Gwg$(9kZXMgc2hvdWxkIGJ)IHN)$GVjdGVkLg0KICAgICAgICBpZiAoICF)$XB0eSgkdGhpcy0+$(9kZXN$JGNv$nR)eHRdWyJuYW1)c3BhY2UiXSkgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBBZGQgdGhpcyBu$2R)IHRvIHRoZSBu$2R)LXN)dC4NCiAgICAgICAgICAgICRu$2R)c1tdID0gJGNv$nR)eHQ7DQogICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAvLyBSZXR1c(4gdGh)IG5vZGVzZXQuDQogICAgICAgIHJ)dHVy$iAk$(9kZXM7DQogICAgfQ0KICAgIA0KICAgIC8qKg0KICAgICogSGFuZGx)cyB0aGUgWFBhdGggZ(9s$G93aW5nIGF4aXMuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgaGFuZGx)cyB0aGUgWFBhdGggZ(9s$G93aW5nIGF4aXMuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIGFyc(F5ICRheG)zIEFyc(F5IGNv$nRhaW5p$(cgaW5($3JtYXRp$24gYWJvdXQgdGh)IGF4aXMuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkY29udGV4dCBO$2R)IGZy$20gd2hpY2ggc3RhcnRp$(cgdGh)IGF4aXMgc2hvdWxkDQogICAgKiAgICAgICAgICAgIGJ)IHBy$2N)c3N)ZC4NCiAgICAqIEByZXR1c(4gICAgYXJyYXkgVGhpcyBtZXRo$2Qgc(V0dXJucyBh$iBhcnJheSBj$250YW)uaW5nIGFs$CBu$2R)cyANCiAgICAqICAgICAgICAgICAgdGhhdCB3ZXJ)IGZvdW5kIGR1c()uZyB0aGUgZXZh$HVhdG)v$iBvZiB0aGUgZ2)2ZW4gYXhpcy4NCiAgICAqIEBzZWUgICAgICAgZXZh$HVhdGUoKQ0KICAgICovDQogICAgZnVuY3Rp$24gaGFuZGx)X2F4aXNfZ(9s$G93aW5nICggJGF4aXMsICRj$250ZXh0ICkNCiAgICB7DQogICAgICAgIC8vIENyZWF0ZSBh$iB)$XB0eSBu$2R)LXN)dC4NCiAgICAgICAgJG5vZGVzID0gYXJyYXkoKTsNCiAgICAgICAgDQogICAgICAgIC8vIEd)dCB0aGUgY3Vyc(VudCBk$2N1$WVudCBw$3NpdG)v$i4NCiAgICAgICAgJHBvc2)0aW9uID0gJHRoaXMtP(5vZGVzWyRj$250ZXh0XVsiZG9jdW1)$nQtcG9zaXRp$24iXTsNCiAgICAgICAgDQogICAgICAgIC8vIENyZWF0ZSBhIGZsYWcsIHdoZXRoZXIgd2UgYWxyZWFkeSB($3VuZCB0aGUgY29udGV4dCBu$2R)Lg0KICAgICAgICAkZ(91$(QgPSB(YWxzZTsNCiAgICAgICAgDQogICAgICAgIC8vIFJ1$iB0aHJvdWdoIGFs$CBu$2R)cyBvZiB0aGUgZG9jdW1)$nQuDQogICAgICAgIGZvc(VhY2ggKCAkdGhpcy0+$(9kZXMgYXMgJG5vZGUgPT4gJGRhdGEgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSBj$250ZXh0IG5vZGUgaGFzIGFsc(VhZHkgY(V)$iB($3VuZC4NCiAgICAgICAgICAgIG)(ICggJGZvdW5kICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSBw$3NpdG)v$iBpcyBj$3JyZWN0Lg0KICAgICAgICAgICAgICAgIG)(ICggJHRoaXMtP(5vZGVzWyRu$2R)XVsiZG9jdW1)$nQtcG9zaXRp$24iXSA9PSAkcG9zaXRp$24gKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUg$(9kZSB(aXRzIHRoZSBu$2R)LXR)c3QuDQogICAgICAgICAgICAgICAgICAgIG)(ICggJHRoaXMtP(NoZWNrX25vZGVfdGVzdCgk$(9kZSwgJGF4aXN$I(5vZGUtdGVzdCJdKSApDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUg$(9kZSB0$yB0aGUg$G)zdCBvZiBu$2R)cy4NCiAgICAgICAgICAgICAgICAgICAgICAgICRu$2R)c1tdID0gJG5vZGU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGhpcyBpcyB0aGUgY29udGV4dCBu$2R)Lg0KICAgICAgICAgICAgaWYgKCAk$(9kZSA9PSAkY29udGV4dCApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gQWZ0ZXIgdGhpcyB3ZSds$CBs$29rIGZvciBt$3J)IG5vZGVzLg0KICAgICAgICAgICAgICAgICR($3VuZCA9IHRydWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAvLyBSZXR1c(4gdGh)IG5vZGVzZXQuDQogICAgICAgIHJ)dHVy$iAk$(9kZXM7DQogICAgfQ0KICAgIA0KICAgIC8qKg0KICAgICogSGFuZGx)cyB0aGUgWFBhdGggcHJ)Y2VkaW5nIGF4aXMuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgaGFuZGx)cyB0aGUgWFBhdGggcHJ)Y2VkaW5nIGF4aXMuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIGFyc(F5ICRheG)zIEFyc(F5IGNv$nRhaW5p$(cgaW5($3JtYXRp$24gYWJvdXQgdGh)IGF4aXMuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkY29udGV4dCBO$2R)IGZy$20gd2hpY2ggc3RhcnRp$(cgdGh)IGF4aXMgc2hvdWxkDQogICAgKiAgICAgICAgICAgIGJ)IHBy$2N)c3N)ZC4NCiAgICAqIEByZXR1c(4gICAgYXJyYXkgVGhpcyBtZXRo$2Qgc(V0dXJucyBh$iBhcnJheSBj$250YW)uaW5nIGFs$CBu$2R)cyANCiAgICAqICAgICAgICAgICAgdGhhdCB3ZXJ)IGZvdW5kIGR1c()uZyB0aGUgZXZh$HVhdG)v$iBvZiB0aGUgZ2)2ZW4gYXhpcy4NCiAgICAqIEBzZWUgICAgICAgZXZh$HVhdGUoKQ0KICAgICovDQogICAgZnVuY3Rp$24gaGFuZGx)X2F4aXNfcHJ)Y2VkaW5nICggJGF4aXMsICRj$250ZXh0ICkNCiAgICB7DQogICAgICAgIC8vIENyZWF0ZSBh$iB)$XB0eSBu$2R)LXN)dC4NCiAgICAgICAgJG5vZGVzID0gYXJyYXkoKTsNCiAgICAgICAgDQogICAgICAgIC8vIEd)dCB0aGUgY3Vyc(VudCBk$2N1$WVudCBw$3NpdG)v$i4NCiAgICAgICAgJHBvc2)0aW9uID0gJHRoaXMtP(5vZGVzWyRj$250ZXh0XVsiZG9jdW1)$nQtcG9zaXRp$24iXTsNCiAgICAgICAgDQogICAgICAgIC8vIENyZWF0ZSBhIGZsYWcsIHdoZXRoZXIgd2UgYWxyZWFkeSB($3VuZCB0aGUgY29udGV4dCBu$2R)Lg0KICAgICAgICAkZ(91$(QgPSB0cnV)Ow0KICAgICAgICANCiAgICAgICAgLy8gUnVuIHRoc(91Z2ggYWxsIG5vZGVzIG9(IHRoZSBk$2N1$WVudC4NCiAgICAgICAgZ(9yZWFjaCAoICR0aG)zLT5u$2R)cyBhcyAk$(9kZSA9PiAkZGF0YSApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGhpcyBpcyB0aGUgY29udGV4dCBu$2R)Lg0KICAgICAgICAgICAgaWYgKCAk$(9kZSA9PSAkY29udGV4dCApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gQWZ0ZXIgdGhpcyB3ZSB3$24ndCBs$29rIGZvciBt$3J)IG5vZGVzLg0KICAgICAgICAgICAgICAgICR($3VuZCA9IGZh$HN)Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSBj$250ZXh0IG5vZGUgaGFzIGFsc(VhZHkgY(V)$iB($3VuZC4NCiAgICAgICAgICAgIG)(ICggJGZvdW5kICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSBw$3NpdG)v$iBpcyBj$3JyZWN0Lg0KICAgICAgICAgICAgICAgIG)(ICggJHRoaXMtP(5vZGVzWyRu$2R)XVsiZG9jdW1)$nQtcG9zaXRp$24iXSA9PSAkcG9zaXRp$24gKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUg$(9kZSB(aXRzIHRoZSBu$2R)LXR)c3QuDQogICAgICAgICAgICAgICAgICAgIG)(ICggJHRoaXMtP(NoZWNrX25vZGVfdGVzdCgk$(9kZSwgJGF4aXN$I(5vZGUtdGVzdCJdKSApDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUg$(9kZSB0$yB0aGUg$G)zdCBvZiBu$2R)cy4NCiAgICAgICAgICAgICAgICAgICAgICAgICRu$2R)c1tdID0gJG5vZGU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAvLyBSZXR1c(4gdGh)IG5vZGVzZXQuDQogICAgICAgIHJ)dHVy$iAk$(9kZXM7DQogICAgfQ0KICAgIA0KICAgIC8qKg0KICAgICogSGFuZGx)cyB0aGUgWFBhdGggZ(9s$G93aW5nLXNpY(xp$(cgYXhpcy4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBoYW5k$GVzIHRoZSBYUGF0aCB($2xs$3dp$(ctc2)i$G)uZyBheG)zLg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBhcnJheSAkYXhpcyBBcnJheSBj$250YW)uaW5nIG)uZ(9y$WF0aW9uIGFi$3V0IHRoZSBheG)zLg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGNv$nR)eHQgT(9kZSB(c(9tIHdoaWNoIHN0YXJ0aW5nIHRoZSBheG)zIHNo$3VsZA0KICAgICogICAgICAgICAgICBiZSBwc(9jZXNzZWQuDQogICAgKiBAc(V0dXJuICAgIGFyc(F5IFRoaXMg$WV0aG9kIHJ)dHVy$nMgYW4gYXJyYXkgY29udGFp$()uZyBh$Gwg$(9kZXMgDQogICAgKiAgICAgICAgICAgIHRoYXQgd2VyZSB($3VuZCBkdXJp$(cgdGh)IGV2YWx1YXRp$24g$2YgdGh)IGdpd(VuIGF4aXMuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGhh$(RsZV9heG)zX2Zv$Gxvd2)uZ19zaWJsaW5nICggJGF4aXMsICRj$250ZXh0ICkNCiAgICB7DQogICAgICAgIC8vIENyZWF0ZSBh$iB)$XB0eSBu$2R)LXN)dC4NCiAgICAgICAgJG5vZGVzID0gYXJyYXkoKTsNCiAgICAgICAgDQogICAgICAgIC8vIEd)dCBh$GwgY2hp$GRyZW4gZnJv$SB0aGUgcGFyZW50Lg0KICAgICAgICAkc2)i$G)uZ3MgPSAkdGhpcy0+aGFuZGx)X2F4aXNfY2hp$GQoJGF4aXMsDQogICAgICAgICAgICAkdGhpcy0+$(9kZXN$JGNv$nR)eHRdWyJwYXJ)$nQiXSk7DQogICAgICAgIA0KICAgICAgICAvLyBDc(VhdGUgYSB($GFnIHdoZXRoZXIgdGh)IGNv$nR)eHQg$(9kZSB3YXMgYWxyZWFkeSB($3VuZC4NCiAgICAgICAgJGZvdW5kID0gZ(Fsc2U7DQogICAgICAgIA0KICAgICAgICAvLyBSdW4gdGhy$3VnaCBh$Gwgc2)i$G)uZ3MuDQogICAgICAgIGZvc(VhY2ggKCAkc2)i$G)uZ3MgYXMgJHNpY(xp$(cgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSBj$250ZXh0IG5vZGUgd2FzIGFsc(VhZHkgZ(91$(QuDQogICAgICAgICAgICBpZiAoICR($3VuZCApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUgc2)i$G)uZyBpcyBhIHJ)YWwgc2)i$G)uZy4NCiAgICAgICAgICAgICAgICBpZiAoICR0aG)zLT5u$2R)c1skc2)i$G)uZ11$I(5h$WUiXSA9PQ0KICAgICAgICAgICAgICAgICAgICAkdGhpcy0+$(9kZXN$JGNv$nR)eHRdWyJuYW1)I)0gKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUgc2)i$G)uZyBtYXRjaGVzIHRoZSBu$2R)LXR)c3QuDQogICAgICAgICAgICAgICAgICAgIG)(ICggJHRoaXMtP(NoZWNrX25vZGVfdGVzdCgkc2)i$G)uZywgJGF4aXN$I(5vZGUtdGVzdCJdKSApDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgc2)i$G)uZyB0$yB0aGUg$G)zdCBvZiBu$2R)cy4NCiAgICAgICAgICAgICAgICAgICAgICAgICRu$2R)c1tdID0gJHNpY(xp$(c7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGhpcyBpcyB0aGUgY29udGV4dCBu$2R)Lg0KICAgICAgICAgICAgaWYgKCAkc2)i$G)uZyA9PSAkY29udGV4dCApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gQ29udG)udWUg$G9va2)uZyB($3Ig$3RoZXIgc2)i$G)uZ3MuDQogICAgICAgICAgICAgICAgJGZvdW5kID0gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgIC8vIFJ)dHVy$iB0aGUg$(9kZXN)dC4NCiAgICAgICAgc(V0dXJuICRu$2R)czsNCiAgICB9DQogICAgDQogICAgLyoqDQogICAgKiBIYW5k$GVzIHRoZSBYUGF0aCBwc(VjZWRp$(ctc2)i$G)uZyBheG)zLg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIGhh$(RsZXMgdGh)IFhQYXRoIHByZWN)ZG)uZy1zaWJsaW5nIGF4aXMuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIGFyc(F5ICRheG)zIEFyc(F5IGNv$nRhaW5p$(cgaW5($3JtYXRp$24gYWJvdXQgdGh)IGF4aXMuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkY29udGV4dCBO$2R)IGZy$20gd2hpY2ggc3RhcnRp$(cgdGh)IGF4aXMgc2hvdWxkDQogICAgKiAgICAgICAgICAgIGJ)IHBy$2N)c3N)ZC4NCiAgICAqIEByZXR1c(4gICAgYXJyYXkgVGhpcyBtZXRo$2Qgc(V0dXJucyBh$iBhcnJheSBj$250YW)uaW5nIGFs$CBu$2R)cyANCiAgICAqICAgICAgICAgICAgdGhhdCB3ZXJ)IGZvdW5kIGR1c()uZyB0aGUgZXZh$HVhdG)v$iBvZiB0aGUgZ2)2ZW4gYXhpcy4NCiAgICAqIEBzZWUgICAgICAgZXZh$HVhdGUoKQ0KICAgICovDQogICAgZnVuY3Rp$24gaGFuZGx)X2F4aXNfcHJ)Y2VkaW5nX3NpY(xp$(cgKCAkYXhpcywgJGNv$nR)eHQgKQ0KICAgIHsNCiAgICAgICAgLy8gQ3J)YXR)IGFuIGVtcHR5IG5vZGUtc2V0Lg0KICAgICAgICAk$(9kZXMgPSBhcnJheSgpOw0KICAgICAgICANCiAgICAgICAgLy8gR2V0IGFs$CBjaG)sZHJ)$iB(c(9tIHRoZSBwYXJ)$nQuDQogICAgICAgICRzaWJsaW5ncyA9ICR0aG)zLT5oYW5k$GVfYXhpc19jaG)sZCgkYXhpcywNCiAgICAgICAgICAgICR0aG)zLT5u$2R)c1skY29udGV4dF1$InBhc(VudCJdKTsNCiAgICAgICAgDQogICAgICAgIC8vIENyZWF0ZSBhIGZsYWcgd2h)dGh)ciB0aGUgY29udGV4dCBu$2R)IHdhcyBh$HJ)YWR5IGZvdW5kLg0KICAgICAgICAkZ(91$(QgPSB0cnV)Ow0KICAgICAgICANCiAgICAgICAgLy8gUnVuIHRoc(91Z2ggYWxsIHNpY(xp$(dzLg0KICAgICAgICB($3J)YWNoICggJHNpY(xp$(dzIGFzICRzaWJsaW5nICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aG)zIG)zIHRoZSBj$250ZXh0IG5vZGUuDQogICAgICAgICAgICBpZiAoICRzaWJsaW5nID09ICRj$250ZXh0ICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBE$24ndCBj$250aW51ZSBs$29raW5nIGZvciBvdGh)ciBzaWJsaW5ncy4NCiAgICAgICAgICAgICAgICAkZ(91$(QgPSB(YWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUgY29udGV4dCBu$2R)IHdhcyBh$HJ)YWR5IGZvdW5kLg0KICAgICAgICAgICAgaWYgKCAkZ(91$(QgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGh)IHNpY(xp$(cgaXMgYSByZWFsIHNpY(xp$(cuDQogICAgICAgICAgICAgICAgaWYgKCAkdGhpcy0+$(9kZXN$JHNpY(xp$(ddWyJuYW1)I)0gPT0NCiAgICAgICAgICAgICAgICAgICAgJHRoaXMtP(5vZGVzWyRj$250ZXh0XVsi$(FtZSJdICkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGh)IHNpY(xp$(cg$WF0Y2h)cyB0aGUg$(9kZS10ZXN0Lg0KICAgICAgICAgICAgICAgICAgICBpZiAoICR0aG)zLT5jaGVja19u$2R)X3R)c3QoJHNpY(xp$(csICRheG)zWyJu$2R)LXR)c3QiXSkgKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGh)IHNpY(xp$(cgdG8gdGh)IGxpc3Qg$2Yg$(9kZXMuDQogICAgICAgICAgICAgICAgICAgICAgICAk$(9kZXN$XSA9ICRzaWJsaW5nOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgLy8gU(V0dXJuIHRoZSBu$2R)c2V0Lg0KICAgICAgICByZXR1c(4gJG5vZGVzOw0KICAgIH0NCiAgICANCiAgICAvKioNCiAgICAqIEhh$(RsZXMgdGh)IFhQYXRoIGR)c2N)$(Rh$nQt$3Itc2VsZiBheG)zLg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIGhh$(RsZXMgdGh)IFhQYXRoIGR)c2N)$(Rh$nQt$3Itc2VsZiBheG)zLg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBhcnJheSAkYXhpcyBBcnJheSBj$250YW)uaW5nIG)uZ(9y$WF0aW9uIGFi$3V0IHRoZSBheG)zLg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGNv$nR)eHQgT(9kZSB(c(9tIHdoaWNoIHN0YXJ0aW5nIHRoZSBheG)zIHNo$3VsZA0KICAgICogICAgICAgICAgICBiZSBwc(9jZXNzZWQuDQogICAgKiBAc(V0dXJuICAgIGFyc(F5IFRoaXMg$WV0aG9kIHJ)dHVy$nMgYW4gYXJyYXkgY29udGFp$()uZyBh$Gwg$(9kZXMgDQogICAgKiAgICAgICAgICAgIHRoYXQgd2VyZSB($3VuZCBkdXJp$(cgdGh)IGV2YWx1YXRp$24g$2YgdGh)IGdpd(VuIGF4aXMuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGhh$(RsZV9heG)zX2R)c2N)$(Rh$nRf$3Jfc2VsZiAoICRheG)zLCAkY29udGV4dCApDQogICAgew0KICAgICAgICAvLyBDc(VhdGUgYW4gZW1wdHkg$(9kZS1zZXQuDQogICAgICAgICRu$2R)cyA9IGFyc(F5KCk7DQogICAgICAgIA0KICAgICAgICAvLyBSZWFkIHRoZSBu$2R)cy4NCiAgICAgICAgJG5vZGVzID0gYXJyYX)f$WVyZ2UoDQogICAgICAgICAgICAkdGhpcy0+aGFuZGx)X2F4aXNfZGVzY2VuZGFudCgkYXhpcywgJGNv$nR)eHQpLA0KICAgICAgICAgICAgJHRoaXMtP(hh$(RsZV9heG)zX3N)$GYoJGF4aXMsICRj$250ZXh0KSk7DQogICAgICAgIA0KICAgICAgICAvLyBSZXR1c(4gdGh)IG5vZGVzZXQuDQogICAgICAgIHJ)dHVy$iAk$(9kZXM7DQogICAgfQ0KICAgIA0KICAgIC8qKg0KICAgICogSGFuZGx)cyB0aGUgWFBhdGggYW5jZXN0$3It$3Itc2VsZiBheG)zLg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIGhh$(RsZXMgdGh)IFhQYXRoIGFuY2VzdG9yLW9yLXN)$GYgYXhpcy4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHByaXZhdGUNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgYXJyYXkgJGF4aXMgQXJyYXkgY29udGFp$()uZyBp$(Zvc(1hdG)v$iBhY(91dCB0aGUgYXhpcy4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRj$250ZXh0IE5vZGUgZnJv$SB3aG)jaCBzdGFydG)uZyB0aGUgYXhpcyBzaG91$GQNCiAgICAqICAgICAgICAgICAgY(UgcHJvY2Vzc2VkLg0KICAgICogQHJ)dHVy$iAgICBhcnJheSBUaG)zIG1)dGhvZCByZXR1c(5zIGFuIGFyc(F5IGNv$nRhaW5p$(cgYWxsIG5vZGVzIA0KICAgICogICAgICAgICAgICB0aGF0IHd)c(UgZ(91$(QgZHVyaW5nIHRoZSB)d(FsdWF0aW9uIG9(IHRoZSBnaXZ)$iBheG)zLg0KICAgICogQHN)ZSAgICAgICB)d(FsdWF0ZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBoYW5k$GVfYXhpc19h$(N)c3Rvc)9vc)9zZWx(ICggJGF4aXMsICRj$250ZXh0ICkNCiAgICB7DQogICAgICAgIC8vIENyZWF0ZSBh$iB)$XB0eSBu$2R)LXN)dC4NCiAgICAgICAgJG5vZGVzID0gYXJyYXkoKTsNCiAgICAgICAgDQogICAgICAgIC8vIFJ)YWQgdGh)IG5vZGVzLg0KICAgICAgICAk$(9kZXMgPSBhcnJheV9tZXJnZSgNCiAgICAgICAgICAgICR0aG)zLT5oYW5k$GVfYXhpc19h$(N)c3RvcigkYXhpcywgJGNv$nR)eHQpLA0KICAgICAgICAgICAgJHRoaXMtP(hh$(RsZV9heG)zX3N)$GYoJGF4aXMsICRj$250ZXh0KSk7DQogICAgICAgIA0KICAgICAgICAvLyBSZXR1c(4gdGh)IG5vZGVzZXQuDQogICAgICAgIHJ)dHVy$iAk$(9kZXM7DQogICAgfQ0KICAgIA0KICAgIC8qKg0KICAgICogSGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24g$GFzdC4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBoYW5k$GVzIHRoZSBYUGF0aCB(dW5jdG)v$iBsYXN0Lg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJG5vZGUgRnVs$CBwYXRoIG9(IHRoZSBu$2R)IG9uIHdoaWNoIHRoZSB(dW5jdG)v$g0KICAgICogICAgICAgICAgICBzaG91$GQgY(UgcHJvY2Vzc2VkLg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGFyZ3VtZW50cyBTdHJp$(cgY29udGFp$()uZyB0aGUgYXJndW1)$nRzIHRoYXQgd2VyZQ0KICAgICogICAgICAgICAgICBwYXNzZWQgdG8gdGh)IGZ1$(N0aW9uLg0KICAgICogQHJ)dHVy$iAgICBtaXh)ZCBEZXB)$(Rp$(cg$24gdGh)IHR5cGUg$2YgZnVuY3Rp$24gY(Vp$(cgcHJvY2Vzc2VkIHRoaXMgDQogICAgKiAgICAgICAgICAgIG1)dGhvZCByZXR1c(5zIGRpZ(Z)c(VudCB0eXB)cy4NCiAgICAqIEBzZWUgICAgICAgZXZh$HVhdGUoKQ0KICAgICovDQogICAgZnVuY3Rp$24gaGFuZGx)X2Z1$(N0aW9uX2xhc3QgKCAk$(9kZSwgJGFyZ3VtZW50cyApDQogICAgew0KICAgICAgICAvLyBDYWxjdWxhdGUgdGh)IHNpe(Ug$2YgdGh)IGNv$nR)eHQuDQogICAgICAgICRwYXJ)$nQgICA9ICR0aG)zLT5u$2R)c1sk$(9kZV1$InBhc(VudCJdOw0KICAgICAgICAkY2hp$GRyZW4gPSAkdGhpcy0+$(9kZXN$JHBhc(VudF1$I(NoaWxkc(VuI)07DQogICAgICAgICRj$250ZXh0ICA9ICRjaG)sZHJ)$)skdGhpcy0+$(9kZXN$JG5vZGVdWyJuYW1)I)1dOw0KDQogICAgICAgIC8vIFJ)dHVy$iB0aGUgc2)6ZS4NCiAgICAgICAgc(V0dXJuICRj$250ZXh0Ow0KICAgIH0NCg0KICAgIC8qKg0KICAgICogSGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24gcG9zaXRp$24uDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgaGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24gcG9zaXRp$24uDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAk$(9kZSBGdWxsIHBhdGgg$2YgdGh)IG5vZGUg$24gd2hpY2ggdGh)IGZ1$(N0aW9uDQogICAgKiAgICAgICAgICAgIHNo$3VsZCBiZSBwc(9jZXNzZWQuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkYXJndW1)$nRzIFN0c()uZyBj$250YW)uaW5nIHRoZSBhc(d1$WVudHMgdGhhdCB3ZXJ)DQogICAgKiAgICAgICAgICAgIHBhc3N)ZCB0$yB0aGUgZnVuY3Rp$24uDQogICAgKiBAc(V0dXJuICAgIG1peGVkIER)cGVuZG)uZyBv$iB0aGUgdH)wZSBvZiB(dW5jdG)v$iBiZW)uZyBwc(9jZXNzZWQgdGhpcyANCiAgICAqICAgICAgICAgICAg$WV0aG9kIHJ)dHVy$nMgZG)(Z(VyZW50IHR5cGVzLg0KICAgICogQHN)ZSAgICAgICB)d(FsdWF0ZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBoYW5k$GVfZnVuY3Rp$25fcG9zaXRp$24gKCAk$(9kZSwgJGFyZ3VtZW50cyApDQogICAgew0KICAgICAgICAvLyByZXR1c(4gdGh)IGNv$nR)eHQtcG9zaXRp$24uDQogICAgICAgIHJ)dHVy$iAkdGhpcy0+$(9kZXN$JG5vZGVdWyJj$250ZXh0LXBvc2)0aW9uI)07DQogICAgfQ0KICAgIA0KICAgIC8qKg0KICAgICogSGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24gY291$nQuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgaGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24gY291$nQuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAk$(9kZSBGdWxsIHBhdGgg$2YgdGh)IG5vZGUg$24gd2hpY2ggdGh)IGZ1$(N0aW9uDQogICAgKiAgICAgICAgICAgIHNo$3VsZCBiZSBwc(9jZXNzZWQuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkYXJndW1)$nRzIFN0c()uZyBj$250YW)uaW5nIHRoZSBhc(d1$WVudHMgdGhhdCB3ZXJ)DQogICAgKiAgICAgICAgICAgIHBhc3N)ZCB0$yB0aGUgZnVuY3Rp$24uDQogICAgKiBAc(V0dXJuICAgIG1peGVkIER)cGVuZG)uZyBv$iB0aGUgdH)wZSBvZiB(dW5jdG)v$iBiZW)uZyBwc(9jZXNzZWQgdGhpcyANCiAgICAqICAgICAgICAgICAg$WV0aG9kIHJ)dHVy$nMgZG)(Z(VyZW50IHR5cGVzLg0KICAgICogQHN)ZSAgICAgICB)d(FsdWF0ZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBoYW5k$GVfZnVuY3Rp$25fY291$nQgKCAk$(9kZSwgJGFyZ3VtZW50cyApDQogICAgew0KICAgICAgICAvLyBFd(FsdWF0ZSB0aGUgYXJndW1)$nQg$2YgdGh)IG1)dGhvZCBhcyBh$iBYUGF0aCBh$(Qgc(V0dXJuDQogICAgICAgIC8vIHRoZSBudW1iZXIg$2Ygc(VzdWx0cy4NCiAgICAgICAgc(V0dXJuIGNvdW50KCR0aG)zLT5)d(FsdWF0ZSgkYXJndW1)$nRzLCAk$(9kZSkpOw0KICAgIH0NCiAgICANCiAgICAvKioNCiAgICAqIEhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIG)kLg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIGhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIG)kLg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJG5vZGUgRnVs$CBwYXRoIG9(IHRoZSBu$2R)IG9uIHdoaWNoIHRoZSB(dW5jdG)v$g0KICAgICogICAgICAgICAgICBzaG91$GQgY(UgcHJvY2Vzc2VkLg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGFyZ3VtZW50cyBTdHJp$(cgY29udGFp$()uZyB0aGUgYXJndW1)$nRzIHRoYXQgd2VyZQ0KICAgICogICAgICAgICAgICBwYXNzZWQgdG8gdGh)IGZ1$(N0aW9uLg0KICAgICogQHJ)dHVy$iAgICBtaXh)ZCBEZXB)$(Rp$(cg$24gdGh)IHR5cGUg$2YgZnVuY3Rp$24gY(Vp$(cgcHJvY2Vzc2VkIHRoaXMgDQogICAgKiAgICAgICAgICAgIG1)dGhvZCByZXR1c(5zIGRpZ(Z)c(VudCB0eXB)cy4NCiAgICAqIEBzZWUgICAgICAgZXZh$HVhdGUoKQ0KICAgICovDQogICAgZnVuY3Rp$24gaGFuZGx)X2Z1$(N0aW9uX2)kICggJG5vZGUsICRhc(d1$WVudHMgKQ0KICAgIHsNCiAgICAgICAgLy8gVHJp$SB0aGUgYXJndW1)$nRzLg0KICAgICAgICAkYXJndW1)$nRzID0gdHJp$SgkYXJndW1)$nRzKTsNCiAgICAgICAgDQogICAgICAgIC8vIE5vdyBzcGxpdCB0aGUgYXJndW1)$nRzLg0KICAgICAgICAkYXJndW1)$nRzID0gZXhw$G9kZSgiICIsICRhc(d1$WVudHMpOw0KICAgICAgICANCiAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciANCiAgICAgICAgDQogICAgICAgIC8vIENyZWF0ZSBhIGxpc3Qg$2Yg$(9kZXMuDQogICAgICAgICRu$2R)cyA9IGFyc(F5KCk7DQogICAgICAgIA0KICAgICAgICAvLyBSdW4gdGhy$3VnaCBh$GwgZG9jdW1)$nQg$(9kZS4NCiAgICAgICAgZ(9yZWFjaCAoICR0aG)zLT5u$2R)cyBhcyAk$(9kZSA9PiAkcG9zaXRp$24gKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSBu$2R)IGhhcyB0aGUgSUQgd2Unc(Ug$G9va2)uZyB($3IuDQogICAgICAgICAgICBpZiAoIG)uX2Fyc(F5KCR0aG)zLT5u$2R)c1sk$(9kZV1$I(F0dHJpYnV0ZXMiXVsiaWQiXSwNCiAgICAgICAgICAgICAgICAkYXJndW1)$nRzKSApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gQWRkIHRoaXMg$(9kZSB0$yB0aGUg$G)zdCBvZiBu$2R)cy4NCiAgICAgICAgICAgICAgICAk$(9kZXN$XSA9ICRu$2R)Ow0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLyBSZXR1c(4gdGh)IGxpc3Qg$2Yg$(9kZXMuDQogICAgICAgIHJ)dHVy$iAk$(9kZXM7DQogICAgfQ0KICAgIA0KICAgIC8qKg0KICAgICogSGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24g$(FtZS4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBoYW5k$GVzIHRoZSBYUGF0aCB(dW5jdG)v$iBuYW1)Lg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJG5vZGUgRnVs$CBwYXRoIG9(IHRoZSBu$2R)IG9uIHdoaWNoIHRoZSB(dW5jdG)v$g0KICAgICogICAgICAgICAgICBzaG91$GQgY(UgcHJvY2Vzc2VkLg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGFyZ3VtZW50cyBTdHJp$(cgY29udGFp$()uZyB0aGUgYXJndW1)$nRzIHRoYXQgd2VyZQ0KICAgICogICAgICAgICAgICBwYXNzZWQgdG8gdGh)IGZ1$(N0aW9uLg0KICAgICogQHJ)dHVy$iAgICBtaXh)ZCBEZXB)$(Rp$(cg$24gdGh)IHR5cGUg$2YgZnVuY3Rp$24gY(Vp$(cgcHJvY2Vzc2VkIHRoaXMgDQogICAgKiAgICAgICAgICAgIG1)dGhvZCByZXR1c(5zIGRpZ(Z)c(VudCB0eXB)cy4NCiAgICAqIEBzZWUgICAgICAgZXZh$HVhdGUoKQ0KICAgICovDQogICAgZnVuY3Rp$24gaGFuZGx)X2Z1$(N0aW9uX25h$WUgKCAk$(9kZSwgJGFyZ3VtZW50cyApDQogICAgew0KICAgICAgICAvLyBSZXR1c(4gdGh)IG5h$WUg$2YgdGh)IG5vZGUuDQogICAgICAgIHJ)dHVy$iAkdGhpcy0+$(9kZXN$JG5vZGVdWyJuYW1)I)07DQogICAgfQ0KICAgIA0KICAgIC8qKg0KICAgICogSGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24gc3RyaW5nLg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIGhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIHN0c()uZy4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHByaXZhdGUNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRu$2R)IEZ1$GwgcGF0aCBvZiB0aGUg$(9kZSBv$iB3aG)jaCB0aGUgZnVuY3Rp$24NCiAgICAqICAgICAgICAgICAgc2hvdWxkIGJ)IHBy$2N)c3N)ZC4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRhc(d1$WVudHMgU3RyaW5nIGNv$nRhaW5p$(cgdGh)IGFyZ3VtZW50cyB0aGF0IHd)c(UNCiAgICAqICAgICAgICAgICAgcGFzc2VkIHRvIHRoZSB(dW5jdG)v$i4NCiAgICAqIEByZXR1c(4gICAg$W)4ZWQgRGVwZW5kaW5nIG9uIHRoZSB0eXB)IG9(IGZ1$(N0aW9uIGJ)aW5nIHBy$2N)c3N)ZCB0aG)zIA0KICAgICogICAgICAgICAgICBtZXRo$2Qgc(V0dXJucyBkaWZ(ZXJ)$nQgdH)wZXMuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGhh$(RsZV9(dW5jdG)v$)9zdHJp$(cgKCAk$(9kZSwgJGFyZ3VtZW50cyApDQogICAgew0KICAgICAgICAvLyBDaGVjayB3aGF0IHR5cGUg$2YgcGFyYW1)dGVyIG)zIGdpd(VuDQogICAgICAgIG)(ICggZXJ)ZygiX)swLT)dKyhcL)swLT)dKyk/JCIsICRhc(d1$WVudHMpIHx8DQogICAgICAgICAgICB)c(VnKCJeXC5$MC05XSskIiwgJGFyZ3VtZW50cykgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBD$252ZXJ0IHRoZSBkaWdpdHMgdG8gYSBudW1iZXIuDQogICAgICAgICAgICAk$nVtY(VyID0gZG91Y(x)d(FsKCRhc(d1$WVudHMpOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gU(V0dXJuIHRoZSBudW1iZXIuDQogICAgICAgICAgICByZXR1c(4gc3Ryd(FsKCRudW1iZXIpOw0KICAgICAgICB9DQogICAgICAgIGVsc2VpZiAoIG)zX2Jv$2woJGFyZ3VtZW50cykgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIG)0J3MgdHJ1ZS4NCiAgICAgICAgICAgIG)(ICggJGFyZ3VtZW50cyA9PSB0cnV)ICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBSZXR1c(4gdHJ1ZSBhcyBhIHN0c()uZy4NCiAgICAgICAgICAgICAgICByZXR1c(4gInRydWUiOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIFJ)dHVy$iB(YWxzZSBhcyBhIHN0c()uZy4NCiAgICAgICAgICAgICAgICByZXR1c(4gI(Zh$HN)IjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICB)$HN)aWYgKCAhZW1wdHkoJGFyZ3VtZW50cykgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBVc2UgdGh)IGFyZ3VtZW50IGFzIGFuIFhQYXRoLg0KICAgICAgICAgICAgJHJ)c3VsdCA9ICR0aG)zLT5)d(FsdWF0ZSgkYXJndW1)$nRzLCAk$(9kZSk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBHZXQgdGh)IGZpcnN0IGFyZ3VtZW50Lg0KICAgICAgICAgICAgJHJ)c3VsdCA9IGV4cGxvZGUoInwiLCBp$XBs$2R)KCJ8IiwgJHJ)c3VsdCkpOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gU(V0dXJuIHRoZSB(aXJzdCByZXN1$HQgYXMgYSBzdHJp$(cuDQogICAgICAgICAgICByZXR1c(4gJHJ)c3VsdFswXTsNCiAgICAgICAgfQ0KICAgICAgICB)$HN)aWYgKCB)$XB0eSgkYXJndW1)$nRzKSApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIFJ)dHVy$iB0aGUgY3Vyc(VudCBu$2R)Lg0KICAgICAgICAgICAgc(V0dXJuICRu$2R)Ow0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gU(V0dXJuIGFuIGVtcHR5IHN0c()uZy4NCiAgICAgICAgICAgIHJ)dHVy$iAiIjsNCiAgICAgICAgfQ0KICAgIH0NCiAgICANCiAgICAvKioNCiAgICAqIEhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIGNv$(NhdC4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBoYW5k$GVzIHRoZSBYUGF0aCB(dW5jdG)v$iBj$25jYXQuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAk$(9kZSBGdWxsIHBhdGgg$2YgdGh)IG5vZGUg$24gd2hpY2ggdGh)IGZ1$(N0aW9uDQogICAgKiAgICAgICAgICAgIHNo$3VsZCBiZSBwc(9jZXNzZWQuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkYXJndW1)$nRzIFN0c()uZyBj$250YW)uaW5nIHRoZSBhc(d1$WVudHMgdGhhdCB3ZXJ)DQogICAgKiAgICAgICAgICAgIHBhc3N)ZCB0$yB0aGUgZnVuY3Rp$24uDQogICAgKiBAc(V0dXJuICAgIG1peGVkIER)cGVuZG)uZyBv$iB0aGUgdH)wZSBvZiB(dW5jdG)v$iBiZW)uZyBwc(9jZXNzZWQgdGhpcyANCiAgICAqICAgICAgICAgICAg$WV0aG9kIHJ)dHVy$nMgZG)(Z(VyZW50IHR5cGVzLg0KICAgICogQHN)ZSAgICAgICB)d(FsdWF0ZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBoYW5k$GVfZnVuY3Rp$25fY29uY2F0ICggJG5vZGUsICRhc(d1$WVudHMgKQ0KICAgIHsNCiAgICAgICAgLy8gU3BsaXQgdGh)IGFyZ3VtZW50cy4NCiAgICAgICAgJGFyZ3VtZW50cyA9IGV4cGxvZGUoIiwiLCAkYXJndW1)$nRzKTsNCiAgICAgICAgICAgIA0KICAgICAgICAvLyBSdW4gdGhy$3VnaCB)YWNoIGFyZ3VtZW50IGFuZCB)d(FsdWF0ZSBpdC4NCiAgICAgICAgZ(9yICggJGkgPSAwOyAkaSA8IHNpe(VvZigkYXJndW1)$nRzKTsgJGkrKyApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIFRyaW0gZWFjaCBhc(d1$WVudC4NCiAgICAgICAgICAgICRhc(d1$WVudHN$JG)dID0gdHJp$SgkYXJndW1)$nRzWyRpXSk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBFd(FsdWF0ZSBpdC4NCiAgICAgICAgICAgICRhc(d1$WVudHN$JG)dID0gJHRoaXMtP(V2YWx1YXR)X3ByZWRpY2F0ZSgk$(9kZSwgJGFyZ3VtZW50c1skaV0pOw0KICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgLy8gUHV0IHRoZSBzdHJp$(cgdG9nZXRoZXIuDQogICAgICAgICRhc(d1$WVudHMgPSBp$XBs$2R)KCIiLCAkYXJndW1)$nRzKTsNCiAgICAgICAgICAgIA0KICAgICAgICAvLyBSZXR1c(4gdGh)IHN0c()uZy4NCiAgICAgICAgc(V0dXJuICRhc(d1$WVudHM7DQogICAgfQ0KICAgIA0KICAgIC8qKg0KICAgICogSGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24gc3RhcnRzLXdpdGguDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgaGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24gc3RhcnRzLXdpdGguDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAk$(9kZSBGdWxsIHBhdGgg$2YgdGh)IG5vZGUg$24gd2hpY2ggdGh)IGZ1$(N0aW9uDQogICAgKiAgICAgICAgICAgIHNo$3VsZCBiZSBwc(9jZXNzZWQuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkYXJndW1)$nRzIFN0c()uZyBj$250YW)uaW5nIHRoZSBhc(d1$WVudHMgdGhhdCB3ZXJ)DQogICAgKiAgICAgICAgICAgIHBhc3N)ZCB0$yB0aGUgZnVuY3Rp$24uDQogICAgKiBAc(V0dXJuICAgIG1peGVkIER)cGVuZG)uZyBv$iB0aGUgdH)wZSBvZiB(dW5jdG)v$iBiZW)uZyBwc(9jZXNzZWQgdGhpcyANCiAgICAqICAgICAgICAgICAg$WV0aG9kIHJ)dHVy$nMgZG)(Z(VyZW50IHR5cGVzLg0KICAgICogQHN)ZSAgICAgICB)d(FsdWF0ZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBoYW5k$GVfZnVuY3Rp$25fc3RhcnRzX3dpdGggKCAk$(9kZSwgJGFyZ3VtZW50cyApDQogICAgew0KICAgICAgICAvLyBHZXQgdGh)IGFyZ3VtZW50cy4NCiAgICAgICAgJGZpcnN0ICA9IHRyaW0oJHRoaXMtPnByZXN0cigkYXJndW1)$nRzLCAiLCIpKTsNCiAgICAgICAgJHN)Y29uZCA9IHRyaW0oJHRoaXMtP(F(dGVyc3RyKCRhc(d1$WVudHMsICIsIikpOw0KICAgICAgICAgICAgDQogICAgICAgIC8vIEV2YWx1YXR)IGVhY2ggYXJndW1)$nQuDQogICAgICAgICR(aXJzdCAgPSAkdGhpcy0+ZXZh$HVhdGVfcHJ)ZG)jYXR)KCRu$2R)LCAkZ()yc3QpOw0KICAgICAgICAkc2Vj$25kID0gJHRoaXMtP(V2YWx1YXR)X3ByZWRpY2F0ZSgk$(9kZSwgJHN)Y29uZCk7DQogICAgICAgICAgICANCiAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUgZ()yc3Qgc3RyaW5nIHN0YXJ0cyB3aXRoIHRoZSBzZWNv$(Qg$25)Lg0KICAgICAgICBpZiAoIGVyZWcoI)4iLiRzZWNv$(QsICR(aXJzdCkgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBSZXR1c(4gdHJ1ZS4NCiAgICAgICAgICAgIHJ)dHVy$iB0cnV)Ow0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gU(V0dXJuIGZh$HN)Lg0KICAgICAgICAgICAgc(V0dXJuIGZh$HN)Ow0KICAgICAgICB9DQogICAgfQ0KICAgIA0KICAgIC8qKg0KICAgICogSGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24gY29udGFp$nMuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgaGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24gY29udGFp$nMuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAk$(9kZSBGdWxsIHBhdGgg$2YgdGh)IG5vZGUg$24gd2hpY2ggdGh)IGZ1$(N0aW9uDQogICAgKiAgICAgICAgICAgIHNo$3VsZCBiZSBwc(9jZXNzZWQuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkYXJndW1)$nRzIFN0c()uZyBj$250YW)uaW5nIHRoZSBhc(d1$WVudHMgdGhhdCB3ZXJ)DQogICAgKiAgICAgICAgICAgIHBhc3N)ZCB0$yB0aGUgZnVuY3Rp$24uDQogICAgKiBAc(V0dXJuICAgIG1peGVkIER)cGVuZG)uZyBv$iB0aGUgdH)wZSBvZiB(dW5jdG)v$iBiZW)uZyBwc(9jZXNzZWQgdGhpcyANCiAgICAqICAgICAgICAgICAg$WV0aG9kIHJ)dHVy$nMgZG)(Z(VyZW50IHR5cGVzLg0KICAgICogQHN)ZSAgICAgICB)d(FsdWF0ZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBoYW5k$GVfZnVuY3Rp$25fY29udGFp$nMgKCAk$(9kZSwgJGFyZ3VtZW50cyApDQogICAgew0KICAgICAgICAvLyBHZXQgdGh)IGFyZ3VtZW50cy4NCiAgICAgICAgJGZpcnN0ICA9IHRyaW0oJHRoaXMtPnByZXN0cigkYXJndW1)$nRzLCAiLCIpKTsNCiAgICAgICAgJHN)Y29uZCA9IHRyaW0oJHRoaXMtP(F(dGVyc3RyKCRhc(d1$WVudHMsICIsIikpOw0KICAgICAgICAgICAgDQogICAgICAgIC8vIEV2YWx1YXR)IGVhY2ggYXJndW1)$nQuDQogICAgICAgICR(aXJzdCAgPSAkdGhpcy0+ZXZh$HVhdGVfcHJ)ZG)jYXR)KCRu$2R)LCAkZ()yc3QpOw0KICAgICAgICAkc2Vj$25kID0gJHRoaXMtP(V2YWx1YXR)X3ByZWRpY2F0ZSgk$(9kZSwgJHN)Y29uZCk7DQogICAgICAgICAgICANCiAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUgZ()yc3Qgc3RyaW5nIHN0YXJ0cyB3aXRoIHRoZSBzZWNv$(Qg$25)Lg0KICAgICAgICBpZiAoIGVyZWcoJHN)Y29uZCwgJGZpcnN0KSApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIFJ)dHVy$iB0cnV)Lg0KICAgICAgICAgICAgc(V0dXJuIHRydWU7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBSZXR1c(4gZ(Fsc2UuDQogICAgICAgICAgICByZXR1c(4gZ(Fsc2U7DQogICAgICAgIH0NCiAgICB9DQogICAgDQogICAgLyoqDQogICAgKiBIYW5k$GVzIHRoZSBYUGF0aCB(dW5jdG)v$iBzdWJzdHJp$(ctY(V($3J)Lg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIGhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIHN1YnN0c()uZy1iZWZvc(UuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAk$(9kZSBGdWxsIHBhdGgg$2YgdGh)IG5vZGUg$24gd2hpY2ggdGh)IGZ1$(N0aW9uDQogICAgKiAgICAgICAgICAgIHNo$3VsZCBiZSBwc(9jZXNzZWQuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkYXJndW1)$nRzIFN0c()uZyBj$250YW)uaW5nIHRoZSBhc(d1$WVudHMgdGhhdCB3ZXJ)DQogICAgKiAgICAgICAgICAgIHBhc3N)ZCB0$yB0aGUgZnVuY3Rp$24uDQogICAgKiBAc(V0dXJuICAgIG1peGVkIER)cGVuZG)uZyBv$iB0aGUgdH)wZSBvZiB(dW5jdG)v$iBiZW)uZyBwc(9jZXNzZWQgdGhpcyANCiAgICAqICAgICAgICAgICAg$WV0aG9kIHJ)dHVy$nMgZG)(Z(VyZW50IHR5cGVzLg0KICAgICogQHN)ZSAgICAgICB)d(FsdWF0ZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBoYW5k$GVfZnVuY3Rp$25fc3Vic3RyaW5nX2J)Z(9yZSAoICRu$2R)LCAkYXJndW1)$nRzICkNCiAgICB7DQogICAgICAgIC8vIEd)dCB0aGUgYXJndW1)$nRzLg0KICAgICAgICAkZ()yc3QgID0gdHJp$SgkdGhpcy0+cHJ)c3RyKCRhc(d1$WVudHMsICIsIikpOw0KICAgICAgICAkc2Vj$25kID0gdHJp$SgkdGhpcy0+YWZ0ZXJzdHIoJGFyZ3VtZW50cywgIiwiKSk7DQogICAgICAgICAgDQogICAgICAgIC8vIEV2YWx1YXR)IGVhY2ggYXJndW1)$nQuDQogICAgICAgICR(aXJzdCAgPSAkdGhpcy0+ZXZh$HVhdGVfcHJ)ZG)jYXR)KCRu$2R)LCAkZ()yc3QpOw0KICAgICAgICAkc2Vj$25kID0gJHRoaXMtP(V2YWx1YXR)X3ByZWRpY2F0ZSgk$(9kZSwgJHN)Y29uZCk7DQogICAgICAgICAgICANCiAgICAgICAgLy8gU(V0dXJuIHRoZSBzdWJzdHJp$(cuDQogICAgICAgIHJ)dHVy$iAkdGhpcy0+cHJ)c3RyKHN0cnZh$CgkZ()yc3QpLCBzdHJ2YWwoJHN)Y29uZCkpOw0KICAgIH0NCiAgICANCiAgICAvKioNCiAgICAqIEhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIHN1YnN0c()uZy1hZnR)ci4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBoYW5k$GVzIHRoZSBYUGF0aCB(dW5jdG)v$iBzdWJzdHJp$(ctYWZ0ZXIuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAk$(9kZSBGdWxsIHBhdGgg$2YgdGh)IG5vZGUg$24gd2hpY2ggdGh)IGZ1$(N0aW9uDQogICAgKiAgICAgICAgICAgIHNo$3VsZCBiZSBwc(9jZXNzZWQuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkYXJndW1)$nRzIFN0c()uZyBj$250YW)uaW5nIHRoZSBhc(d1$WVudHMgdGhhdCB3ZXJ)DQogICAgKiAgICAgICAgICAgIHBhc3N)ZCB0$yB0aGUgZnVuY3Rp$24uDQogICAgKiBAc(V0dXJuICAgIG1peGVkIER)cGVuZG)uZyBv$iB0aGUgdH)wZSBvZiB(dW5jdG)v$iBiZW)uZyBwc(9jZXNzZWQgdGhpcyANCiAgICAqICAgICAgICAgICAg$WV0aG9kIHJ)dHVy$nMgZG)(Z(VyZW50IHR5cGVzLg0KICAgICogQHN)ZSAgICAgICB)d(FsdWF0ZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBoYW5k$GVfZnVuY3Rp$25fc3Vic3RyaW5nX2F(dGVyICggJG5vZGUsICRhc(d1$WVudHMgKQ0KICAgIHsNCiAgICAgICAgLy8gR2V0IHRoZSBhc(d1$WVudHMuDQogICAgICAgICR(aXJzdCAgPSB0c()tKCR0aG)zLT5wc(VzdHIoJGFyZ3VtZW50cywgIiwiKSk7DQogICAgICAgICRzZWNv$(QgPSB0c()tKCR0aG)zLT5hZnR)cnN0cigkYXJndW1)$nRzLCAiLCIpKTsNCiAgICAgICAgICAgIA0KICAgICAgICAvLyBFd(FsdWF0ZSB)YWNoIGFyZ3VtZW50Lg0KICAgICAgICAkZ()yc3QgID0gJHRoaXMtP(V2YWx1YXR)X3ByZWRpY2F0ZSgk$(9kZSwgJGZpcnN0KTsNCiAgICAgICAgJHN)Y29uZCA9ICR0aG)zLT5)d(FsdWF0ZV9wc(VkaWNhdGUoJG5vZGUsICRzZWNv$(QpOw0KICAgICAgICAgICAgDQogICAgICAgIC8vIFJ)dHVy$iB0aGUgc3Vic3RyaW5nLg0KICAgICAgICByZXR1c(4gJHRoaXMtP(F(dGVyc3RyKHN0cnZh$CgkZ()yc3QpLCBzdHJ2YWwoJHN)Y29uZCkpOw0KICAgIH0NCiAgICANCiAgICAvKioNCiAgICAqIEhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIHN1YnN0c()uZy4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBoYW5k$GVzIHRoZSBYUGF0aCB(dW5jdG)v$iBzdWJzdHJp$(cuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAk$(9kZSBGdWxsIHBhdGgg$2YgdGh)IG5vZGUg$24gd2hpY2ggdGh)IGZ1$(N0aW9uDQogICAgKiAgICAgICAgICAgIHNo$3VsZCBiZSBwc(9jZXNzZWQuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkYXJndW1)$nRzIFN0c()uZyBj$250YW)uaW5nIHRoZSBhc(d1$WVudHMgdGhhdCB3ZXJ)DQogICAgKiAgICAgICAgICAgIHBhc3N)ZCB0$yB0aGUgZnVuY3Rp$24uDQogICAgKiBAc(V0dXJuICAgIG1peGVkIER)cGVuZG)uZyBv$iB0aGUgdH)wZSBvZiB(dW5jdG)v$iBiZW)uZyBwc(9jZXNzZWQgdGhpcyANCiAgICAqICAgICAgICAgICAg$WV0aG9kIHJ)dHVy$nMgZG)(Z(VyZW50IHR5cGVzLg0KICAgICogQHN)ZSAgICAgICB)d(FsdWF0ZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBoYW5k$GVfZnVuY3Rp$25fc3Vic3RyaW5nICggJG5vZGUsICRhc(d1$WVudHMgKQ0KICAgIHsNCiAgICAgICAgLy8gU3BsaXQgdGh)IGFyZ3VtZW50cy4NCiAgICAgICAgJGFyZ3VtZW50cyA9IGV4cGxvZGUoIiwiLCAkYXJndW1)$nRzKTsNCiAgICAgICAgICAgIA0KICAgICAgICAvLyBSdW4gdGhy$3VnaCBh$GwgYXJndW1)$nRzLg0KICAgICAgICB($3IgKCAkaSA9IDA7ICRpIDwgc2)6ZW9(KCRhc(d1$WVudHMpOyAkaSsrICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gVHJp$SB0aGUgc3RyaW5nLg0KICAgICAgICAgICAgJGFyZ3VtZW50c1skaV0gPSB0c()tKCRhc(d1$WVudHN$JG)dKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIC8vIEV2YWx1YXR)IGVhY2ggYXJndW1)$nQuDQogICAgICAgICAgICAkYXJndW1)$nRzWyRpXSA9ICR0aG)zLT5)d(FsdWF0ZV9wc(VkaWNhdGUoJG5vZGUsICRhc(d1$WVudHN$JG)dKTsNCiAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgIC8vIENoZWNrIHdoZXRoZXIgYSB0aG)yZCBhc(d1$WVudCB3YXMgZ2)2ZW4uDQogICAgICAgIG)(ICggIWVtcHR5KCRhc(d1$WVudHN$M)0pICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gU(V0dXJuIHRoZSBzdWJzdHJp$(cuDQogICAgICAgICAgICByZXR1c(4gc3Vic3RyKHN0cnZh$CgkYXJndW1)$nRzWzBdKSwgJGFyZ3VtZW50c1sxXSAtIDEsDQogICAgICAgICAgICAgICAgJGFyZ3VtZW50c1syXSk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBSZXR1c(4gdGh)IHN1YnN0c()uZy4NCiAgICAgICAgICAgIHJ)dHVy$iBzdWJzdHIoc3Ryd(FsKCRhc(d1$WVudHN$MF0pLCAkYXJndW1)$nRzWzFdIC0gMSk7DQogICAgICAgIH0NCiAgICB9DQogICAgDQogICAgLyoqDQogICAgKiBIYW5k$GVzIHRoZSBYUGF0aCB(dW5jdG)v$iBzdHJp$(ct$GVuZ3RoLg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIGhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIHN0c()uZy1sZW5ndGguDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAk$(9kZSBGdWxsIHBhdGgg$2YgdGh)IG5vZGUg$24gd2hpY2ggdGh)IGZ1$(N0aW9uDQogICAgKiAgICAgICAgICAgIHNo$3VsZCBiZSBwc(9jZXNzZWQuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkYXJndW1)$nRzIFN0c()uZyBj$250YW)uaW5nIHRoZSBhc(d1$WVudHMgdGhhdCB3ZXJ)DQogICAgKiAgICAgICAgICAgIHBhc3N)ZCB0$yB0aGUgZnVuY3Rp$24uDQogICAgKiBAc(V0dXJuICAgIG1peGVkIER)cGVuZG)uZyBv$iB0aGUgdH)wZSBvZiB(dW5jdG)v$iBiZW)uZyBwc(9jZXNzZWQgdGhpcyANCiAgICAqICAgICAgICAgICAg$WV0aG9kIHJ)dHVy$nMgZG)(Z(VyZW50IHR5cGVzLg0KICAgICogQHN)ZSAgICAgICB)d(FsdWF0ZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBoYW5k$GVfZnVuY3Rp$25fc3RyaW5nX2x)$(d0aCAoICRu$2R)LCAkYXJndW1)$nRzICkNCiAgICB7DQogICAgICAgIC8vIFRyaW0gdGh)IGFyZ3VtZW50Lg0KICAgICAgICAkYXJndW1)$nRzID0gdHJp$SgkYXJndW1)$nRzKTsNCiAgICAgICAgICAgIA0KICAgICAgICAvLyBFd(FsdWF0ZSB0aGUgYXJndW1)$nQuDQogICAgICAgICRhc(d1$WVudHMgPSAkdGhpcy0+ZXZh$HVhdGVfcHJ)ZG)jYXR)KCRu$2R)LCAkYXJndW1)$nRzKTsNCiAgICAgICAgICAgIA0KICAgICAgICAvLyBSZXR1c(4gdGh)IGx)$(d0aCBvZiB0aGUgc3RyaW5nLg0KICAgICAgICByZXR1c(4gc3Ry$GVuKHN0cnZh$CgkYXJndW1)$nRzKSk7DQogICAgfQ0KICAgIA0KICAgIC8qKg0KICAgICogSGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24gdHJh$nNsYXR)Lg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIGhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIHRyYW5z$GF0ZS4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHByaXZhdGUNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRu$2R)IEZ1$GwgcGF0aCBvZiB0aGUg$(9kZSBv$iB3aG)jaCB0aGUgZnVuY3Rp$24NCiAgICAqICAgICAgICAgICAgc2hvdWxkIGJ)IHBy$2N)c3N)ZC4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRhc(d1$WVudHMgU3RyaW5nIGNv$nRhaW5p$(cgdGh)IGFyZ3VtZW50cyB0aGF0IHd)c(UNCiAgICAqICAgICAgICAgICAgcGFzc2VkIHRvIHRoZSB(dW5jdG)v$i4NCiAgICAqIEByZXR1c(4gICAg$W)4ZWQgRGVwZW5kaW5nIG9uIHRoZSB0eXB)IG9(IGZ1$(N0aW9uIGJ)aW5nIHBy$2N)c3N)ZCB0aG)zIA0KICAgICogICAgICAgICAgICBtZXRo$2Qgc(V0dXJucyBkaWZ(ZXJ)$nQgdH)wZXMuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGhh$(RsZV9(dW5jdG)v$)90c(Fuc2xhdGUgKCAk$(9kZSwgJGFyZ3VtZW50cyApICAgICAgICAgDQogICAgew0KICAgICAgICAvLyBTcGxpdCB0aGUgYXJndW1)$nRzLg0KICAgICAgICAkYXJndW1)$nRzID0gZXhw$G9kZSgiLCIsICRhc(d1$WVudHMpOw0KICAgICAgICANCiAgICAgICAgLy8gUnVuIHRoc(91Z2ggYWxsIGFyZ3VtZW50cy4NCiAgICAgICAgZ(9yICggJGkgPSAwOyAkaSA8IHNpe(VvZigkYXJndW1)$nRzKTsgJGkrKyApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIFRyaW0gdGh)IGFyZ3VtZW50Lg0KICAgICAgICAgICAgJGFyZ3VtZW50c1skaV0gPSB0c()tKCRhc(d1$WVudHN$JG)dKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gRXZh$HVhdGUgdGh)IGFyZ3VtZW50Lg0KICAgICAgICAgICAgJGFyZ3VtZW50c1skaV0gPSAkdGhpcy0+ZXZh$HVhdGVfcHJ)ZG)jYXR)KCRu$2R)LCAkYXJndW1)$nRzWyRpXSk7DQogICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAvLyBSZXR1c(4gdGh)IHRyYW5z$GF0ZWQgc3RyaW5nLg0KICAgICAgICByZXR1c(4gc3RydHIoJGFyZ3VtZW50c1swXSwgJGFyZ3VtZW50c1sxXSwgJGFyZ3VtZW50c1syXSk7DQogICAgfQ0KICAgIA0KICAgIC8qKg0KICAgICogSGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24gY(9v$GVh$i4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBoYW5k$GVzIHRoZSBYUGF0aCB(dW5jdG)v$iBi$29sZWFuLg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJG5vZGUgRnVs$CBwYXRoIG9(IHRoZSBu$2R)IG9uIHdoaWNoIHRoZSB(dW5jdG)v$g0KICAgICogICAgICAgICAgICBzaG91$GQgY(UgcHJvY2Vzc2VkLg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGFyZ3VtZW50cyBTdHJp$(cgY29udGFp$()uZyB0aGUgYXJndW1)$nRzIHRoYXQgd2VyZQ0KICAgICogICAgICAgICAgICBwYXNzZWQgdG8gdGh)IGZ1$(N0aW9uLg0KICAgICogQHJ)dHVy$iAgICBtaXh)ZCBEZXB)$(Rp$(cg$24gdGh)IHR5cGUg$2YgZnVuY3Rp$24gY(Vp$(cgcHJvY2Vzc2VkIHRoaXMgDQogICAgKiAgICAgICAgICAgIG1)dGhvZCByZXR1c(5zIGRpZ(Z)c(VudCB0eXB)cy4NCiAgICAqIEBzZWUgICAgICAgZXZh$HVhdGUoKQ0KICAgICovDQogICAgZnVuY3Rp$24gaGFuZGx)X2Z1$(N0aW9uX2Jv$2x)YW4gKCAk$(9kZSwgJGFyZ3VtZW50cyApDQogICAgew0KICAgICAgICAvLyBUc()tIHRoZSBhc(d1$WVudHMuDQogICAgICAgICRhc(d1$WVudHMgPSB0c()tKCRhc(d1$WVudHMpOw0KICAgICAgICANCiAgICAgICAgLy8gQ2h)Y2sgd2hhdCB0eXB)IG9(IHBhc(FtZXR)ciBpcyBnaXZ)$g0KICAgICAgICBpZiAoIGVyZWcoI)5$MC05XSsoXC5$MC05XSspPyQiLCAkYXJndW1)$nRzKSB8fA0KICAgICAgICAgICAgZXJ)ZygiX)wuWzAtOV0rJCIsICRhc(d1$WVudHMpICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gQ29ud(VydCB0aGUgZG)naXRzIHRvIGEg$nVtY(VyLg0KICAgICAgICAgICAgJG51$WJ)ciA9IGRvdWJsZXZh$CgkYXJndW1)$nRzKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUg$nVtY(VyIHp)c(8uDQogICAgICAgICAgICBpZiAoICRudW1iZXIgPT0gMCApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gU(V0dXJuIGZh$HN)Lg0KICAgICAgICAgICAgICAgIHJ)dHVy$iB(YWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBSZXR1c(4gdHJ1ZS4NCiAgICAgICAgICAgICAgICByZXR1c(4gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICB)$HN)aWYgKCB)$XB0eSgkYXJndW1)$nRzKSApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIFNvcnJ5LCB0aGVyZSB3ZXJ)IG5vIGFyZ3VtZW50cy4NCiAgICAgICAgICAgIHJ)dHVy$iB(YWxzZTsNCiAgICAgICAgfQ0KICAgICAgICB)$HN)DQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIFRyeSB0$yB)d(FsdWF0ZSB0aGUgYXJndW1)$nQgYXMgYW4gWFBhdGguDQogICAgICAgICAgICAkc(VzdWx0ID0gJHRoaXMtP(V2YWx1YXR)KCRhc(d1$WVudHMsICRu$2R)KTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB3ZSB($3VuZCBz$21)dGhp$(cuDQogICAgICAgICAgICBpZiAoIGNvdW50KCRyZXN1$HQpID4gMCApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gU(V0dXJuIHRydWUuDQogICAgICAgICAgICAgICAgc(V0dXJuIHRydWU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB)$HN)DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gU(V0dXJuIGZh$HN)Lg0KICAgICAgICAgICAgICAgIHJ)dHVy$iB(YWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCiAgICANCiAgICAvKioNCiAgICAqIEhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIG5vdC4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBoYW5k$GVzIHRoZSBYUGF0aCB(dW5jdG)v$iBu$3QuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAk$(9kZSBGdWxsIHBhdGgg$2YgdGh)IG5vZGUg$24gd2hpY2ggdGh)IGZ1$(N0aW9uDQogICAgKiAgICAgICAgICAgIHNo$3VsZCBiZSBwc(9jZXNzZWQuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkYXJndW1)$nRzIFN0c()uZyBj$250YW)uaW5nIHRoZSBhc(d1$WVudHMgdGhhdCB3ZXJ)DQogICAgKiAgICAgICAgICAgIHBhc3N)ZCB0$yB0aGUgZnVuY3Rp$24uDQogICAgKiBAc(V0dXJuICAgIG1peGVkIER)cGVuZG)uZyBv$iB0aGUgdH)wZSBvZiB(dW5jdG)v$iBiZW)uZyBwc(9jZXNzZWQgdGhpcyANCiAgICAqICAgICAgICAgICAg$WV0aG9kIHJ)dHVy$nMgZG)(Z(VyZW50IHR5cGVzLg0KICAgICogQHN)ZSAgICAgICB)d(FsdWF0ZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBoYW5k$GVfZnVuY3Rp$25f$(90ICggJG5vZGUsICRhc(d1$WVudHMgKQ0KICAgIHsNCiAgICAgICAgLy8gVHJp$SB0aGUgYXJndW1)$nRzLg0KICAgICAgICAkYXJndW1)$nRzID0gdHJp$SgkYXJndW1)$nRzKTsNCiAgICAgICAgDQogICAgICAgIC8vIFJ)dHVy$iB0aGUg$(VnYXRpd(Ugd(FsdWUg$2YgdGh)IGNv$nR)$nQg$2YgdGh)IGJyYWNrZXRzLg0KICAgICAgICByZXR1c(4gISR0aG)zLT5)d(FsdWF0ZV9wc(VkaWNhdGUoJG5vZGUsICRhc(d1$WVudHMpOw0KICAgIH0NCiAgICANCiAgICAvKioNCiAgICAqIEhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIHRydWUuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgaGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24gdHJ1ZS4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHByaXZhdGUNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRu$2R)IEZ1$GwgcGF0aCBvZiB0aGUg$(9kZSBv$iB3aG)jaCB0aGUgZnVuY3Rp$24NCiAgICAqICAgICAgICAgICAgc2hvdWxkIGJ)IHBy$2N)c3N)ZC4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRhc(d1$WVudHMgU3RyaW5nIGNv$nRhaW5p$(cgdGh)IGFyZ3VtZW50cyB0aGF0IHd)c(UNCiAgICAqICAgICAgICAgICAgcGFzc2VkIHRvIHRoZSB(dW5jdG)v$i4NCiAgICAqIEByZXR1c(4gICAg$W)4ZWQgRGVwZW5kaW5nIG9uIHRoZSB0eXB)IG9(IGZ1$(N0aW9uIGJ)aW5nIHBy$2N)c3N)ZCB0aG)zIA0KICAgICogICAgICAgICAgICBtZXRo$2Qgc(V0dXJucyBkaWZ(ZXJ)$nQgdH)wZXMuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGhh$(RsZV9(dW5jdG)v$)90cnV)ICggJG5vZGUsICRhc(d1$WVudHMgKQ0KICAgIHsNCiAgICAgICAgLy8gU(V0dXJuIHRydWUuDQogICAgICAgIHJ)dHVy$iB0cnV)Ow0KICAgIH0NCiAgICANCiAgICAvKioNCiAgICAqIEhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIGZh$HN)Lg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIGhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIGZh$HN)Lg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJG5vZGUgRnVs$CBwYXRoIG9(IHRoZSBu$2R)IG9uIHdoaWNoIHRoZSB(dW5jdG)v$g0KICAgICogICAgICAgICAgICBzaG91$GQgY(UgcHJvY2Vzc2VkLg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGFyZ3VtZW50cyBTdHJp$(cgY29udGFp$()uZyB0aGUgYXJndW1)$nRzIHRoYXQgd2VyZQ0KICAgICogICAgICAgICAgICBwYXNzZWQgdG8gdGh)IGZ1$(N0aW9uLg0KICAgICogQHJ)dHVy$iAgICBtaXh)ZCBEZXB)$(Rp$(cg$24gdGh)IHR5cGUg$2YgZnVuY3Rp$24gY(Vp$(cgcHJvY2Vzc2VkIHRoaXMgDQogICAgKiAgICAgICAgICAgIG1)dGhvZCByZXR1c(5zIGRpZ(Z)c(VudCB0eXB)cy4NCiAgICAqIEBzZWUgICAgICAgZXZh$HVhdGUoKQ0KICAgICovDQogICAgZnVuY3Rp$24gaGFuZGx)X2Z1$(N0aW9uX2Zh$HN)ICggJG5vZGUsICRhc(d1$WVudHMgKQ0KICAgIHsNCiAgICAgICAgLy8gU(V0dXJuIGZh$HN)Lg0KICAgICAgICByZXR1c(4gZ(Fsc2U7DQogICAgfQ0KICAgIA0KICAgIC8qKg0KICAgICogSGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24g$GFuZy4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBoYW5k$GVzIHRoZSBYUGF0aCB(dW5jdG)v$iBsYW5nLg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJG5vZGUgRnVs$CBwYXRoIG9(IHRoZSBu$2R)IG9uIHdoaWNoIHRoZSB(dW5jdG)v$g0KICAgICogICAgICAgICAgICBzaG91$GQgY(UgcHJvY2Vzc2VkLg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGFyZ3VtZW50cyBTdHJp$(cgY29udGFp$()uZyB0aGUgYXJndW1)$nRzIHRoYXQgd2VyZQ0KICAgICogICAgICAgICAgICBwYXNzZWQgdG8gdGh)IGZ1$(N0aW9uLg0KICAgICogQHJ)dHVy$iAgICBtaXh)ZCBEZXB)$(Rp$(cg$24gdGh)IHR5cGUg$2YgZnVuY3Rp$24gY(Vp$(cgcHJvY2Vzc2VkIHRoaXMgDQogICAgKiAgICAgICAgICAgIG1)dGhvZCByZXR1c(5zIGRpZ(Z)c(VudCB0eXB)cy4NCiAgICAqIEBzZWUgICAgICAgZXZh$HVhdGUoKQ0KICAgICovDQogICAgZnVuY3Rp$24gaGFuZGx)X2Z1$(N0aW9uX2xh$(cgKCAk$(9kZSwgJGFyZ3VtZW50cyApDQogICAgew0KICAgICAgICAvLyBUc()tIHRoZSBhc(d1$WVudHMuDQogICAgICAgICRhc(d1$WVudHMgPSB0c()tKCRhc(d1$WVudHMpOw0KICAgICAgICANCiAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGUg$(9kZSBoYXMgYW4g$GFuZ3VhZ2UgYXR0c()idXR)Lg0KICAgICAgICBpZiAoIGVtcHR5KCR0aG)zLT5u$2R)c1sk$(9kZV1$I(F0dHJpYnV0ZXMiXVsieG1sO(xh$(ciXSkgKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBSdW4gdGhy$3VnaCB0aGUgYW5jZXN0$3JzLg0KICAgICAgICAgICAgd2hp$GUgKCAhZW1wdHkoJG5vZGUpICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBTZWx)Y3QgdGh)IHBhc(VudCBu$2R)Lg0KICAgICAgICAgICAgICAgICRu$2R)ID0gJHRoaXMtP(5vZGVzWyRu$2R)XVsicGFyZW50I)07DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgLy8gQ2h)Y2sgd2h)dGh)ciB0aGVyZSdzIGEg$GFuZ3VhZ2UgZGV(aW5pdG)v$i4NCiAgICAgICAgICAgICAgICBpZiAoICF)$XB0eSgkdGhpcy0+$(9kZXN$JG5vZGVdWyJhdHRyaWJ1dGVzI)1$Inht$DpsYW5nI)0pICkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgaXQncyB0aGUg$GFuZ3VhZ2UsIHRoZSB1c2VyIGFza3MgZ(9yLg0KICAgICAgICAgICAgICAgICAgICBpZiAoIGVyZWdpKCJeIi4kYXJndW1)$nRzLCAkdGhpcy0+$(9kZXN$JG5vZGVdDQogICAgICAgICAgICAgICAgICAgICAgICB$I(F0dHJpYnV0ZXMiXVsieG1sO(xh$(ciXSkgKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXR1c(4gdHJ1ZS4NCiAgICAgICAgICAgICAgICAgICAgICAgIHJ)dHVy$iB0cnV)Ow0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gU(V0dXJuIGZh$HN)Lg0KICAgICAgICAgICAgICAgICAgICAgICAgc(V0dXJuIGZh$HN)Ow0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBSZXR1c(4gZ(Fsc2UuDQogICAgICAgICAgICByZXR1c(4gZ(Fsc2U7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIG)0J3MgdGh)IGxh$(d1YWd)LCB0aGUgdXN)ciBhc2tzIGZvci4NCiAgICAgICAgICAgIG)(ICggZXJ)Z2koI)4iLiRhc(d1$WVudHMsICR0aG)zLT5u$2R)c1sk$(9kZV1$I(F0dHJpYnV0ZXMiXQ0KICAgICAgICAgICAgICAgIFsieG1sO(xh$(ciXSkgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIFJ)dHVy$iB0cnV)Lg0KICAgICAgICAgICAgICAgIHJ)dHVy$iB0cnV)Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIFJ)dHVy$iB(YWxzZS4NCiAgICAgICAgICAgICAgICByZXR1c(4gZ(Fsc2U7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQogICAgDQogICAgLyoqDQogICAgKiBIYW5k$GVzIHRoZSBYUGF0aCB(dW5jdG)v$iBudW1iZXIuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgaGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24g$nVtY(VyLg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJG5vZGUgRnVs$CBwYXRoIG9(IHRoZSBu$2R)IG9uIHdoaWNoIHRoZSB(dW5jdG)v$g0KICAgICogICAgICAgICAgICBzaG91$GQgY(UgcHJvY2Vzc2VkLg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGFyZ3VtZW50cyBTdHJp$(cgY29udGFp$()uZyB0aGUgYXJndW1)$nRzIHRoYXQgd2VyZQ0KICAgICogICAgICAgICAgICBwYXNzZWQgdG8gdGh)IGZ1$(N0aW9uLg0KICAgICogQHJ)dHVy$iAgICBtaXh)ZCBEZXB)$(Rp$(cg$24gdGh)IHR5cGUg$2YgZnVuY3Rp$24gY(Vp$(cgcHJvY2Vzc2VkIHRoaXMgDQogICAgKiAgICAgICAgICAgIG1)dGhvZCByZXR1c(5zIGRpZ(Z)c(VudCB0eXB)cy4NCiAgICAqIEBzZWUgICAgICAgZXZh$HVhdGUoKQ0KICAgICovDQogICAgZnVuY3Rp$24gaGFuZGx)X2Z1$(N0aW9uX251$WJ)ciAoICRu$2R)LCAkYXJndW1)$nRzICkNCiAgICB7DQogICAgICAgIC8vIENoZWNrIHRoZSB0eXB)IG9(IGFyZ3VtZW50Lg0KICAgICAgICBpZiAoIGVyZWcoI)5$MC05XSsoXC5$MC05XSspPyQiLCAkYXJndW1)$nRzKSB8fA0KICAgICAgICAgICAgZXJ)ZygiX)wuWzAtOV0rJCIsICRhc(d1$WVudHMpICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gU(V0dXJuIHRoZSBhc(d1$WVudCBhcyBhIG51$WJ)ci4NCiAgICAgICAgICAgIHJ)dHVy$iBk$3Vi$GV2YWwoJGFyZ3VtZW50cyk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZW)(ICggaXNfY(9v$CgkYXJndW1)$nRzKSApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgaXQncyB0cnV)Lg0KICAgICAgICAgICAgaWYgKCAkYXJndW1)$nRzID09IHRydWUgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIFJ)dHVy$iAxLg0KICAgICAgICAgICAgICAgIHJ)dHVy$iAxOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIFJ)dHVy$iAwLg0KICAgICAgICAgICAgICAgIHJ)dHVy$iAwOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KICAgIA0KICAgIC8qKg0KICAgICogSGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24gc3VtLg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIGhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIHN1$S4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHByaXZhdGUNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRu$2R)IEZ1$GwgcGF0aCBvZiB0aGUg$(9kZSBv$iB3aG)jaCB0aGUgZnVuY3Rp$24NCiAgICAqICAgICAgICAgICAgc2hvdWxkIGJ)IHBy$2N)c3N)ZC4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRhc(d1$WVudHMgU3RyaW5nIGNv$nRhaW5p$(cgdGh)IGFyZ3VtZW50cyB0aGF0IHd)c(UNCiAgICAqICAgICAgICAgICAgcGFzc2VkIHRvIHRoZSB(dW5jdG)v$i4NCiAgICAqIEByZXR1c(4gICAg$W)4ZWQgRGVwZW5kaW5nIG9uIHRoZSB0eXB)IG9(IGZ1$(N0aW9uIGJ)aW5nIHBy$2N)c3N)ZCB0aG)zIA0KICAgICogICAgICAgICAgICBtZXRo$2Qgc(V0dXJucyBkaWZ(ZXJ)$nQgdH)wZXMuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGhh$(RsZV9(dW5jdG)v$)9zdW0gKCAk$(9kZSwgJGFyZ3VtZW50cyApDQogICAgew0KICAgICAgICAvLyBUc()tIHRoZSBhc(d1$WVudHMuDQogICAgICAgICRhc(d1$WVudHMgPSB0c()tKCRhc(d1$WVudHMpOw0KICAgICAgICANCiAgICAgICAgLy8gRXZh$HVhdGUgdGh)IGFyZ3VtZW50cyBhcyBh$iBYUGF0aCB)eHByZXNzaW9uLg0KICAgICAgICAkc(VzdWx0cyA9ICR0aG)zLT5)d(FsdWF0ZSgkYXJndW1)$nRzLCAk$(9kZSk7DQogICAgICAgIA0KICAgICAgICAvLyBDc(VhdGUgYSB2YXJpYWJsZSB0$yBzYXZ)IHRoZSBzdW0uDQogICAgICAgICRzdW0gPSAwOw0KICAgICAgICANCiAgICAgICAgLy8gUnVuIHRoc(91Z2ggYWxsIHJ)c3VsdHMuDQogICAgICAgIGZvc(VhY2ggKCAkc(VzdWx0cyBhcyAkc(VzdWx0ICkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gR2V0IHRoZSB2YWx1ZSBvZiB0aGUg$(9kZS4NCiAgICAgICAgICAgICRyZXN1$HQgPSAkdGhpcy0+Z2V0X2Nv$nR)$nQoJHJ)c3VsdCk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIEFkZCBpdCB0$yB0aGUgc3VtLg0KICAgICAgICAgICAgJHN1$SArPSBk$3Vi$GV2YWwoJHJ)c3VsdCk7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vIFJ)dHVy$iB0aGUgc3VtLg0KICAgICAgICByZXR1c(4gJHN1$TsNCiAgICB9DQogICAgDQogICAgLyoqDQogICAgKiBIYW5k$GVzIHRoZSBYUGF0aCB(dW5jdG)v$iB($G9vci4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBoYW5k$GVzIHRoZSBYUGF0aCB(dW5jdG)v$iB($G9vci4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHByaXZhdGUNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRu$2R)IEZ1$GwgcGF0aCBvZiB0aGUg$(9kZSBv$iB3aG)jaCB0aGUgZnVuY3Rp$24NCiAgICAqICAgICAgICAgICAgc2hvdWxkIGJ)IHBy$2N)c3N)ZC4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRhc(d1$WVudHMgU3RyaW5nIGNv$nRhaW5p$(cgdGh)IGFyZ3VtZW50cyB0aGF0IHd)c(UNCiAgICAqICAgICAgICAgICAgcGFzc2VkIHRvIHRoZSB(dW5jdG)v$i4NCiAgICAqIEByZXR1c(4gICAg$W)4ZWQgRGVwZW5kaW5nIG9uIHRoZSB0eXB)IG9(IGZ1$(N0aW9uIGJ)aW5nIHBy$2N)c3N)ZCB0aG)zIA0KICAgICogICAgICAgICAgICBtZXRo$2Qgc(V0dXJucyBkaWZ(ZXJ)$nQgdH)wZXMuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGhh$(RsZV9(dW5jdG)v$)9($G9vciAoICRu$2R)LCAkYXJndW1)$nRzICkNCiAgICB7DQogICAgICAgIC8vIFRyaW0gdGh)IGFyZ3VtZW50cy4NCiAgICAgICAgJGFyZ3VtZW50cyA9IHRyaW0oJGFyZ3VtZW50cyk7DQogICAgICAgIA0KICAgICAgICAvLyBD$252ZXJ0IHRoZSBhc(d1$WVudHMgdG8gYSBudW1iZXIuDQogICAgICAgICRhc(d1$WVudHMgPSBk$3Vi$GV2YWwoJGFyZ3VtZW50cyk7DQogICAgICAgIA0KICAgICAgICAvLyBSZXR1c(4gdGh)IHJ)c3VsdA0KICAgICAgICByZXR1c(4gZ(xv$3IoJGFyZ3VtZW50cyk7DQogICAgfQ0KICAgIA0KICAgIC8qKg0KICAgICogSGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24gY2Vp$G)uZy4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCBoYW5k$GVzIHRoZSBYUGF0aCB(dW5jdG)v$iBjZW)saW5nLg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJG5vZGUgRnVs$CBwYXRoIG9(IHRoZSBu$2R)IG9uIHdoaWNoIHRoZSB(dW5jdG)v$g0KICAgICogICAgICAgICAgICBzaG91$GQgY(UgcHJvY2Vzc2VkLg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGFyZ3VtZW50cyBTdHJp$(cgY29udGFp$()uZyB0aGUgYXJndW1)$nRzIHRoYXQgd2VyZQ0KICAgICogICAgICAgICAgICBwYXNzZWQgdG8gdGh)IGZ1$(N0aW9uLg0KICAgICogQHJ)dHVy$iAgICBtaXh)ZCBEZXB)$(Rp$(cg$24gdGh)IHR5cGUg$2YgZnVuY3Rp$24gY(Vp$(cgcHJvY2Vzc2VkIHRoaXMgDQogICAgKiAgICAgICAgICAgIG1)dGhvZCByZXR1c(5zIGRpZ(Z)c(VudCB0eXB)cy4NCiAgICAqIEBzZWUgICAgICAgZXZh$HVhdGUoKQ0KICAgICovDQogICAgZnVuY3Rp$24gaGFuZGx)X2Z1$(N0aW9uX2N)aWxp$(cgKCAk$(9kZSwgJGFyZ3VtZW50cyApDQogICAgew0KICAgICAgICAvLyBUc()tIHRoZSBhc(d1$WVudHMuDQogICAgICAgICRhc(d1$WVudHMgPSB0c()tKCRhc(d1$WVudHMpOw0KICAgICAgICANCiAgICAgICAgLy8gQ29ud(VydCB0aGUgYXJndW1)$nRzIHRvIGEg$nVtY(VyLg0KICAgICAgICAkYXJndW1)$nRzID0gZG91Y(x)d(FsKCRhc(d1$WVudHMpOw0KICAgICAgICANCiAgICAgICAgLy8gU(V0dXJuIHRoZSByZXN1$HQNCiAgICAgICAgc(V0dXJuIGN)aWwoJGFyZ3VtZW50cyk7DQogICAgfQ0KICAgIA0KICAgIC8qKg0KICAgICogSGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24gc(91$(QuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgaGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24gc(91$(QuDQogICAgKg0KICAgICogQGFjY2VzcyAgICBwc()2YXR)DQogICAgKiBAYXV0aG9yICAgIE1pY2hhZWwgUC4gTWVo$CA8$XBtQHBocHht$C5vc(c+DQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAk$(9kZSBGdWxsIHBhdGgg$2YgdGh)IG5vZGUg$24gd2hpY2ggdGh)IGZ1$(N0aW9uDQogICAgKiAgICAgICAgICAgIHNo$3VsZCBiZSBwc(9jZXNzZWQuDQogICAgKiBAcGFyYW0gICAgIHN0c()uZyAkYXJndW1)$nRzIFN0c()uZyBj$250YW)uaW5nIHRoZSBhc(d1$WVudHMgdGhhdCB3ZXJ)DQogICAgKiAgICAgICAgICAgIHBhc3N)ZCB0$yB0aGUgZnVuY3Rp$24uDQogICAgKiBAc(V0dXJuICAgIG1peGVkIER)cGVuZG)uZyBv$iB0aGUgdH)wZSBvZiB(dW5jdG)v$iBiZW)uZyBwc(9jZXNzZWQgdGhpcyANCiAgICAqICAgICAgICAgICAg$WV0aG9kIHJ)dHVy$nMgZG)(Z(VyZW50IHR5cGVzLg0KICAgICogQHN)ZSAgICAgICB)d(FsdWF0ZSgpDQogICAgKi8NCiAgICB(dW5jdG)v$iBoYW5k$GVfZnVuY3Rp$25fc(91$(QgKCAk$(9kZSwgJGFyZ3VtZW50cyApDQogICAgew0KICAgICAgICAvLyBUc()tIHRoZSBhc(d1$WVudHMuDQogICAgICAgICRhc(d1$WVudHMgPSB0c()tKCRhc(d1$WVudHMpOw0KICAgICAgICANCiAgICAgICAgLy8gQ29ud(VydCB0aGUgYXJndW1)$nRzIHRvIGEg$nVtY(VyLg0KICAgICAgICAkYXJndW1)$nRzID0gZG91Y(x)d(FsKCRhc(d1$WVudHMpOw0KICAgICAgICANCiAgICAgICAgLy8gU(V0dXJuIHRoZSByZXN1$HQNCiAgICAgICAgc(V0dXJuIHJvdW5kKCRhc(d1$WVudHMpOw0KICAgIH0NCiAgICANCiAgICAvKioNCiAgICAqIEhh$(RsZXMgdGh)IFhQYXRoIGZ1$(N0aW9uIHR)eHQuDQogICAgKg0KICAgICogVGhpcyBtZXRo$2QgaGFuZGx)cyB0aGUgWFBhdGggZnVuY3Rp$24gdGV4dC4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHByaXZhdGUNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRu$2R)IEZ1$GwgcGF0aCBvZiB0aGUg$(9kZSBv$iB3aG)jaCB0aGUgZnVuY3Rp$24NCiAgICAqICAgICAgICAgICAgc2hvdWxkIGJ)IHBy$2N)c3N)ZC4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRhc(d1$WVudHMgU3RyaW5nIGNv$nRhaW5p$(cgdGh)IGFyZ3VtZW50cyB0aGF0IHd)c(UNCiAgICAqICAgICAgICAgICAgcGFzc2VkIHRvIHRoZSB(dW5jdG)v$i4NCiAgICAqIEByZXR1c(4gICAg$W)4ZWQgRGVwZW5kaW5nIG9uIHRoZSB0eXB)IG9(IGZ1$(N0aW9uIGJ)aW5nIHBy$2N)c3N)ZCB0aG)zIA0KICAgICogICAgICAgICAgICBtZXRo$2Qgc(V0dXJucyBkaWZ(ZXJ)$nQgdH)wZXMuDQogICAgKiBAc2V)ICAgICAgIGV2YWx1YXR)KCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGhh$(RsZV9(dW5jdG)v$)90ZXh0ICggJG5vZGUsICRhc(d1$WVudHMgKQ0KICAgIHsNCiAgICAgICAgLy8gU(V0dXJuIHRoZSBjaGFyYWN0ZXIgZGF0YSBvZiB0aGUg$(9kZS4NCiAgICAgICAgc(V0dXJuICR0aG)zLT5u$2R)c1sk$(9kZV1$InR)eHQiXTsNCiAgICB9DQogICAgDQogICAgLyoqDQogICAgKiBSZXRyaWV2ZXMgYSBzdWJzdHJp$(cgY(V($3J)IGEgZGVsaW1pdGVyLg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIHJ)dHJpZXZ)cyB)d(VyeXRoaW5nIGZy$20gYSBzdHJp$(cgY(V($3J)IGEgZ2)2ZW4gZGVsaW1pdGVyLA0KICAgICog$(90IG)uY2x1ZG)uZyB0aGUgZGVsaW1pdGVyLg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJHN0c()uZyBTdHJp$(csIGZy$20gd2hpY2ggdGh)IHN1YnN0c()uZyBzaG91$GQgY(UNCiAgICAqICAgICAgICAgICAgZXh0c(FjdGVkLg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGR)$G)taXR)ciBTdHJp$(cgY29udGFp$()uZyB0aGUgZGVsaW1pdGVyIHRvIHVzZS4NCiAgICAqIEByZXR1c(4gICAgc3RyaW5nIFN1YnN0c()uZyB(c(9tIHRoZSBvc()naW5h$CBzdHJp$(cgY(V($3J)IHRoZQ0KICAgICogICAgICAgICAgICBkZWxp$W)0ZXIuDQogICAgKiBAc2V)ICAgICAgIGF(dGVyc3RyKCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIHByZXN0ciAoICRzdHJp$(csICRkZWxp$W)0ZXIgKQ0KICAgIHsNCiAgICAgICAgLy8gU(V0dXJuIHRoZSBzdWJzdHJp$(cuDQogICAgc(V0dXJuIHN1YnN0cigkc3RyaW5nLCAwLCBzdHJsZW4oJHN0c()uZykgLSBzdHJsZW4oc3Ryc3RyKCRzdHJp$(csDQogICAgICAgICAgICAiJGR)$G)taXR)ciIpKSk7DQogIH0NCiAgICANCiAgICAvKioNCiAgICAqIFJ)dHJpZXZ)cyBhIHN1YnN0c()uZyBhZnR)ciBhIGR)$G)taXR)ci4NCiAgICAqDQogICAgKiBUaG)zIG1)dGhvZCByZXRyaWV2ZXMgZXZ)cn)0aG)uZyB(c(9tIGEgc3RyaW5nIGF(dGVyIGEgZ2)2ZW4gZGVsaW1pdGVyLA0KICAgICog$(90IG)uY2x1ZG)uZyB0aGUgZGVsaW1pdGVyLg0KICAgICoNCiAgICAqIEBhY2N)c3MgICAgcHJpd(F0ZQ0KICAgICogQGF1dGhvciAgICBNaWNoYWVsIFAuIE1)aGwgPG1w$UBwaHB4$Wwu$3JnPg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJHN0c()uZyBTdHJp$(csIGZy$20gd2hpY2ggdGh)IHN1YnN0c()uZyBzaG91$GQgY(UNCiAgICAqICAgICAgICAgICAgZXh0c(FjdGVkLg0KICAgICogQHBhc(FtICAgICBzdHJp$(cgJGR)$G)taXR)ciBTdHJp$(cgY29udGFp$()uZyB0aGUgZGVsaW1pdGVyIHRvIHVzZS4NCiAgICAqIEByZXR1c(4gICAgc3RyaW5nIFN1YnN0c()uZyB(c(9tIHRoZSBvc()naW5h$CBzdHJp$(cgYWZ0ZXIgdGh)DQogICAgKiAgICAgICAgICAgIGR)$G)taXR)ci4NCiAgICAqIEBzZWUgICAgICAgcHJ)c3RyKCkNCiAgICAqLw0KICAgIGZ1$(N0aW9uIGF(dGVyc3RyICggJHN0c()uZywgJGR)$G)taXR)ciApDQogICAgew0KICAgICAgICAvLyBSZXR1c(4gdGh)IHN1YnN0c()uZy4NCiAgICByZXR1c(4gc3Vic3RyKCRzdHJp$(csDQogICAgICAgICAgICBzdHJw$3MoJHN0c()uZywgJGR)$G)taXR)cikgKyBzdHJsZW4oJGR)$G)taXR)cikpOw0KICB9DQogICAgDQogICAgLyoqDQogICAgKiBEaXNw$GF5cyBh$iB)cnJvciBtZXNzYWd)Lg0KICAgICoNCiAgICAqIFRoaXMg$WV0aG9kIGRpc3BsYX)zIGFuIGVyc(9yIG1)c3NhZ2VzIGFuZCBzdG9wcyB0aGUgZXh)Y3V0aW9uIG9(IHRoZQ0KICAgICogc2NyaXB0LiBUaG)zIG1)dGhvZCBpcyBjYWxsZWQgZXhhY3RseSBp$iB0aGUgc2FtZSB3YXkgYXMgdGh)IHByaW50Zg0KICAgICogZnVuY3Rp$24uIFRoZSB(aXJzdCBhc(d1$WVudCBj$250YW)ucyB0aGUg$WVzc2FnZSBh$(QgYWRkaXRp$25h$A0KICAgICogYXJndW1)$nRzIG9(IHZhc()vdXMgdH)wZXMg$WF5IGJ)IHBhc3N)ZCB0$yB0aG)zIG1)dGhvZCB0$yBiZSBp$nN)cnR)ZA0KICAgICogaW50$yB0aGUg$WVzc2FnZS4NCiAgICAqDQogICAgKiBAYWNjZXNzICAgIHByaXZhdGUNCiAgICAqIEBhdXRo$3IgICAgTW)jaGF)$CBQLiBNZWhsIDxtcG1AcGhweG1sL(9yZz4NCiAgICAqIEBwYXJh$SAgICAgc3RyaW5nICRtZXNzYWd)IEVyc(9yIG1)c3NhZ2UgdG8gY(UgZG)zcGxheWVkLg0KICAgICovDQogICAgZnVuY3Rp$24gZG)zcGxheV9)cnJvciAoICRtZXNzYWd)ICkNCiAgICB7DQogICAgLy8gQ2h)Y2sgd2h)dGh)ciBt$3J)IHRoYW4g$25)IGFyZ3VtZW50IHdhcyBnaXZ)$i4NCiAgICBpZiAoIGZ1$(Nf$nVtX2FyZ3MoKSA+IDEgKQ0KICAgIHsNCiAgICAgIC8vIFJ)YWQgYWxsIGFyZ3VtZW50cy4NCiAgICAgICRhc(d1$WVudHMgPSB(dW5jX2d)dF9hc(dzKCk7DQogICAgICANCiAgICAgIC8vIENyZWF0ZSBhIG5)dyBzdHJp$(cgZ(9yIHRoZSBp$nN)cnRp$(cgY29t$WFuZC4NCiAgICAgICRj$21tYW5kID0gI)wk$WVzc2FnZSA9IHNwc()udGYoXCRtZXNzYWd)LCAiOw0KICAgICAgDQogICAgICAvLyBSdW4gdGhy$3VnaCB0aGUgYXJyYXkg$2YgYXJndW1)$nRzLg0KICAgICAgZ(9yICggJGkgPSAxOyAkaSA8IHNpe(VvZigkYXJndW1)$nRzKTsgJGkrKyApDQogICAgICB7DQogICAgICAgIC8vIEFkZCB0aGUg$nVtY(VyIG9(IHRoZSBhc(d1$WVudCB0$yB0aGUgY29t$WFuZC4NCiAgICAgICAgJGNv$W1h$(QgLj0gI)wkYXJndW1)$nRzWyIuJGkuI)0sICI7DQogICAgICB9DQogICAgICANCiAgICAgIC8vIFJ)cGxhY2UgdGh)IGxhc3Qgc2VwYXJhdG9yLg0KICAgICAgJGNv$W1h$(QgPSB)c(VnaV9yZXBsYWN)KCIsICQiLCAiKTsiLCAkY29t$WFuZCk7DQogICAgICANCiAgICAgIC8vIEV4ZWN1dGUgdGh)IGNv$W1h$(QuDQogICAgICB)d(FsKCRj$21tYW5kKTsNCiAgICB9DQogICAgDQogICAgICAgIC8vIERpc3BsYXkgdGh)IGVyc(9yIG1)c3NhZ2UuDQogICAgICAgIGVjaG8gIjxiPnBocFhNTCB)cnJvcjo8L2I+ICIuJG1)c3NhZ2U7DQogICAgICAgIA0KICAgICAgICAvLyBF$(QgdGh)IGV4ZWN1dG)v$iBvZiB0aG)zIHNjc()wdC4NCiAgICAgICAgZXhpdDsNCiAgICB9DQp9DQoNCj8+